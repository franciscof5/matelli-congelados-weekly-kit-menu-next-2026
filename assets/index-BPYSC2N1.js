(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();function z0(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Bh={exports:{}},Ul={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yv;function FS(){if(Yv)return Ul;Yv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,r,a){var c=null;if(a!==void 0&&(c=""+a),r.key!==void 0&&(c=""+r.key),"key"in r){a={};for(var h in r)h!=="key"&&(a[h]=r[h])}else a=r;return r=a.ref,{$$typeof:i,type:n,key:c,ref:r!==void 0?r:null,props:a}}return Ul.Fragment=e,Ul.jsx=t,Ul.jsxs=t,Ul}var Kv;function qS(){return Kv||(Kv=1,Bh.exports=FS()),Bh.exports}var w=qS(),zh={exports:{}},Le={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qv;function BS(){if(Qv)return Le;Qv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.iterator;function S(O){return O===null||typeof O!="object"?null:(O=E&&O[E]||O["@@iterator"],typeof O=="function"?O:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,G={};function B(O,se,Ae){this.props=O,this.context=se,this.refs=G,this.updater=Ae||I}B.prototype.isReactComponent={},B.prototype.setState=function(O,se){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,se,"setState")},B.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function W(){}W.prototype=B.prototype;function J(O,se,Ae){this.props=O,this.context=se,this.refs=G,this.updater=Ae||I}var te=J.prototype=new W;te.constructor=J,U(te,B.prototype),te.isPureReactComponent=!0;var re=Array.isArray,ie={H:null,A:null,T:null,S:null},le=Object.prototype.hasOwnProperty;function L(O,se,Ae,Ee,fe,Fe){return Ae=Fe.ref,{$$typeof:i,type:O,key:se,ref:Ae!==void 0?Ae:null,props:Fe}}function D(O,se){return L(O.type,se,void 0,void 0,void 0,O.props)}function x(O){return typeof O=="object"&&O!==null&&O.$$typeof===i}function N(O){var se={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(Ae){return se[Ae]})}var k=/\/+/g;function P(O,se){return typeof O=="object"&&O!==null&&O.key!=null?N(""+O.key):se.toString(36)}function M(){}function ge(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(M,M):(O.status="pending",O.then(function(se){O.status==="pending"&&(O.status="fulfilled",O.value=se)},function(se){O.status==="pending"&&(O.status="rejected",O.reason=se)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function be(O,se,Ae,Ee,fe){var Fe=typeof O;(Fe==="undefined"||Fe==="boolean")&&(O=null);var ke=!1;if(O===null)ke=!0;else switch(Fe){case"bigint":case"string":case"number":ke=!0;break;case"object":switch(O.$$typeof){case i:case e:ke=!0;break;case _:return ke=O._init,be(ke(O._payload),se,Ae,Ee,fe)}}if(ke)return fe=fe(O),ke=Ee===""?"."+P(O,0):Ee,re(fe)?(Ae="",ke!=null&&(Ae=ke.replace(k,"$&/")+"/"),be(fe,se,Ae,"",function(gt){return gt})):fe!=null&&(x(fe)&&(fe=D(fe,Ae+(fe.key==null||O&&O.key===fe.key?"":(""+fe.key).replace(k,"$&/")+"/")+ke)),se.push(fe)),1;ke=0;var Ot=Ee===""?".":Ee+":";if(re(O))for(var Ke=0;Ke<O.length;Ke++)Ee=O[Ke],Fe=Ot+P(Ee,Ke),ke+=be(Ee,se,Ae,Fe,fe);else if(Ke=S(O),typeof Ke=="function")for(O=Ke.call(O),Ke=0;!(Ee=O.next()).done;)Ee=Ee.value,Fe=Ot+P(Ee,Ke++),ke+=be(Ee,se,Ae,Fe,fe);else if(Fe==="object"){if(typeof O.then=="function")return be(ge(O),se,Ae,Ee,fe);throw se=String(O),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return ke}function ue(O,se,Ae){if(O==null)return O;var Ee=[],fe=0;return be(O,Ee,"","",function(Fe){return se.call(Ae,Fe,fe++)}),Ee}function Re(O){if(O._status===-1){var se=O._result;se=se(),se.then(function(Ae){(O._status===0||O._status===-1)&&(O._status=1,O._result=Ae)},function(Ae){(O._status===0||O._status===-1)&&(O._status=2,O._result=Ae)}),O._status===-1&&(O._status=0,O._result=se)}if(O._status===1)return O._result.default;throw O._result}var Ce=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function et(){}return Le.Children={map:ue,forEach:function(O,se,Ae){ue(O,function(){se.apply(this,arguments)},Ae)},count:function(O){var se=0;return ue(O,function(){se++}),se},toArray:function(O){return ue(O,function(se){return se})||[]},only:function(O){if(!x(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Le.Component=B,Le.Fragment=t,Le.Profiler=r,Le.PureComponent=J,Le.StrictMode=n,Le.Suspense=y,Le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ie,Le.act=function(){throw Error("act(...) is not supported in production builds of React.")},Le.cache=function(O){return function(){return O.apply(null,arguments)}},Le.cloneElement=function(O,se,Ae){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var Ee=U({},O.props),fe=O.key,Fe=void 0;if(se!=null)for(ke in se.ref!==void 0&&(Fe=void 0),se.key!==void 0&&(fe=""+se.key),se)!le.call(se,ke)||ke==="key"||ke==="__self"||ke==="__source"||ke==="ref"&&se.ref===void 0||(Ee[ke]=se[ke]);var ke=arguments.length-2;if(ke===1)Ee.children=Ae;else if(1<ke){for(var Ot=Array(ke),Ke=0;Ke<ke;Ke++)Ot[Ke]=arguments[Ke+2];Ee.children=Ot}return L(O.type,fe,void 0,void 0,Fe,Ee)},Le.createContext=function(O){return O={$$typeof:c,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:a,_context:O},O},Le.createElement=function(O,se,Ae){var Ee,fe={},Fe=null;if(se!=null)for(Ee in se.key!==void 0&&(Fe=""+se.key),se)le.call(se,Ee)&&Ee!=="key"&&Ee!=="__self"&&Ee!=="__source"&&(fe[Ee]=se[Ee]);var ke=arguments.length-2;if(ke===1)fe.children=Ae;else if(1<ke){for(var Ot=Array(ke),Ke=0;Ke<ke;Ke++)Ot[Ke]=arguments[Ke+2];fe.children=Ot}if(O&&O.defaultProps)for(Ee in ke=O.defaultProps,ke)fe[Ee]===void 0&&(fe[Ee]=ke[Ee]);return L(O,Fe,void 0,void 0,null,fe)},Le.createRef=function(){return{current:null}},Le.forwardRef=function(O){return{$$typeof:h,render:O}},Le.isValidElement=x,Le.lazy=function(O){return{$$typeof:_,_payload:{_status:-1,_result:O},_init:Re}},Le.memo=function(O,se){return{$$typeof:g,type:O,compare:se===void 0?null:se}},Le.startTransition=function(O){var se=ie.T,Ae={};ie.T=Ae;try{var Ee=O(),fe=ie.S;fe!==null&&fe(Ae,Ee),typeof Ee=="object"&&Ee!==null&&typeof Ee.then=="function"&&Ee.then(et,Ce)}catch(Fe){Ce(Fe)}finally{ie.T=se}},Le.unstable_useCacheRefresh=function(){return ie.H.useCacheRefresh()},Le.use=function(O){return ie.H.use(O)},Le.useActionState=function(O,se,Ae){return ie.H.useActionState(O,se,Ae)},Le.useCallback=function(O,se){return ie.H.useCallback(O,se)},Le.useContext=function(O){return ie.H.useContext(O)},Le.useDebugValue=function(){},Le.useDeferredValue=function(O,se){return ie.H.useDeferredValue(O,se)},Le.useEffect=function(O,se){return ie.H.useEffect(O,se)},Le.useId=function(){return ie.H.useId()},Le.useImperativeHandle=function(O,se,Ae){return ie.H.useImperativeHandle(O,se,Ae)},Le.useInsertionEffect=function(O,se){return ie.H.useInsertionEffect(O,se)},Le.useLayoutEffect=function(O,se){return ie.H.useLayoutEffect(O,se)},Le.useMemo=function(O,se){return ie.H.useMemo(O,se)},Le.useOptimistic=function(O,se){return ie.H.useOptimistic(O,se)},Le.useReducer=function(O,se,Ae){return ie.H.useReducer(O,se,Ae)},Le.useRef=function(O){return ie.H.useRef(O)},Le.useState=function(O){return ie.H.useState(O)},Le.useSyncExternalStore=function(O,se,Ae){return ie.H.useSyncExternalStore(O,se,Ae)},Le.useTransition=function(){return ie.H.useTransition()},Le.version="19.0.0",Le}var Zv;function Ym(){return Zv||(Zv=1,zh.exports=BS()),zh.exports}var $e=Ym();const G0=z0($e);var Gh={exports:{}},Ol={},Hh={exports:{}},$h={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xv;function zS(){return Xv||(Xv=1,(function(i){function e(ue,Re){var Ce=ue.length;ue.push(Re);e:for(;0<Ce;){var et=Ce-1>>>1,O=ue[et];if(0<r(O,Re))ue[et]=Re,ue[Ce]=O,Ce=et;else break e}}function t(ue){return ue.length===0?null:ue[0]}function n(ue){if(ue.length===0)return null;var Re=ue[0],Ce=ue.pop();if(Ce!==Re){ue[0]=Ce;e:for(var et=0,O=ue.length,se=O>>>1;et<se;){var Ae=2*(et+1)-1,Ee=ue[Ae],fe=Ae+1,Fe=ue[fe];if(0>r(Ee,Ce))fe<O&&0>r(Fe,Ee)?(ue[et]=Fe,ue[fe]=Ce,et=fe):(ue[et]=Ee,ue[Ae]=Ce,et=Ae);else if(fe<O&&0>r(Fe,Ce))ue[et]=Fe,ue[fe]=Ce,et=fe;else break e}}return Re}function r(ue,Re){var Ce=ue.sortIndex-Re.sortIndex;return Ce!==0?Ce:ue.id-Re.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;i.unstable_now=function(){return a.now()}}else{var c=Date,h=c.now();i.unstable_now=function(){return c.now()-h}}var y=[],g=[],_=1,E=null,S=3,I=!1,U=!1,G=!1,B=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;function te(ue){for(var Re=t(g);Re!==null;){if(Re.callback===null)n(g);else if(Re.startTime<=ue)n(g),Re.sortIndex=Re.expirationTime,e(y,Re);else break;Re=t(g)}}function re(ue){if(G=!1,te(ue),!U)if(t(y)!==null)U=!0,ge();else{var Re=t(g);Re!==null&&be(re,Re.startTime-ue)}}var ie=!1,le=-1,L=5,D=-1;function x(){return!(i.unstable_now()-D<L)}function N(){if(ie){var ue=i.unstable_now();D=ue;var Re=!0;try{e:{U=!1,G&&(G=!1,W(le),le=-1),I=!0;var Ce=S;try{t:{for(te(ue),E=t(y);E!==null&&!(E.expirationTime>ue&&x());){var et=E.callback;if(typeof et=="function"){E.callback=null,S=E.priorityLevel;var O=et(E.expirationTime<=ue);if(ue=i.unstable_now(),typeof O=="function"){E.callback=O,te(ue),Re=!0;break t}E===t(y)&&n(y),te(ue)}else n(y);E=t(y)}if(E!==null)Re=!0;else{var se=t(g);se!==null&&be(re,se.startTime-ue),Re=!1}}break e}finally{E=null,S=Ce,I=!1}Re=void 0}}finally{Re?k():ie=!1}}}var k;if(typeof J=="function")k=function(){J(N)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,M=P.port2;P.port1.onmessage=N,k=function(){M.postMessage(null)}}else k=function(){B(N,0)};function ge(){ie||(ie=!0,k())}function be(ue,Re){le=B(function(){ue(i.unstable_now())},Re)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(ue){ue.callback=null},i.unstable_continueExecution=function(){U||I||(U=!0,ge())},i.unstable_forceFrameRate=function(ue){0>ue||125<ue?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<ue?Math.floor(1e3/ue):5},i.unstable_getCurrentPriorityLevel=function(){return S},i.unstable_getFirstCallbackNode=function(){return t(y)},i.unstable_next=function(ue){switch(S){case 1:case 2:case 3:var Re=3;break;default:Re=S}var Ce=S;S=Re;try{return ue()}finally{S=Ce}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(ue,Re){switch(ue){case 1:case 2:case 3:case 4:case 5:break;default:ue=3}var Ce=S;S=ue;try{return Re()}finally{S=Ce}},i.unstable_scheduleCallback=function(ue,Re,Ce){var et=i.unstable_now();switch(typeof Ce=="object"&&Ce!==null?(Ce=Ce.delay,Ce=typeof Ce=="number"&&0<Ce?et+Ce:et):Ce=et,ue){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=Ce+O,ue={id:_++,callback:Re,priorityLevel:ue,startTime:Ce,expirationTime:O,sortIndex:-1},Ce>et?(ue.sortIndex=Ce,e(g,ue),t(y)===null&&ue===t(g)&&(G?(W(le),le=-1):G=!0,be(re,Ce-et))):(ue.sortIndex=O,e(y,ue),U||I||(U=!0,ge())),ue},i.unstable_shouldYield=x,i.unstable_wrapCallback=function(ue){var Re=S;return function(){var Ce=S;S=Re;try{return ue.apply(this,arguments)}finally{S=Ce}}}})($h)),$h}var Jv;function GS(){return Jv||(Jv=1,Hh.exports=zS()),Hh.exports}var Yh={exports:{}},cn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jv;function HS(){if(jv)return cn;jv=1;var i=Ym();function e(y){var g="https://react.dev/errors/"+y;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+y+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(y,g,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:E==null?null:""+E,children:y,containerInfo:g,implementation:_}}var c=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(y,g){if(y==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return cn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,cn.createPortal=function(y,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return a(y,g,null,_)},cn.flushSync=function(y){var g=c.T,_=n.p;try{if(c.T=null,n.p=2,y)return y()}finally{c.T=g,n.p=_,n.d.f()}},cn.preconnect=function(y,g){typeof y=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,n.d.C(y,g))},cn.prefetchDNS=function(y){typeof y=="string"&&n.d.D(y)},cn.preinit=function(y,g){if(typeof y=="string"&&g&&typeof g.as=="string"){var _=g.as,E=h(_,g.crossOrigin),S=typeof g.integrity=="string"?g.integrity:void 0,I=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?n.d.S(y,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:I}):_==="script"&&n.d.X(y,{crossOrigin:E,integrity:S,fetchPriority:I,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},cn.preinitModule=function(y,g){if(typeof y=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=h(g.as,g.crossOrigin);n.d.M(y,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&n.d.M(y)},cn.preload=function(y,g){if(typeof y=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,E=h(_,g.crossOrigin);n.d.L(y,_,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},cn.preloadModule=function(y,g){if(typeof y=="string")if(g){var _=h(g.as,g.crossOrigin);n.d.m(y,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else n.d.m(y)},cn.requestFormReset=function(y){n.d.r(y)},cn.unstable_batchedUpdates=function(y,g){return y(g)},cn.useFormState=function(y,g,_){return c.H.useFormState(y,g,_)},cn.useFormStatus=function(){return c.H.useHostTransitionStatus()},cn.version="19.0.0",cn}var Wv;function $S(){if(Wv)return Yh.exports;Wv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Yh.exports=HS(),Yh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e_;function YS(){if(e_)return Ol;e_=1;var i=GS(),e=Ym(),t=$S();function n(s){var o="https://react.dev/errors/"+s;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}var a=Symbol.for("react.element"),c=Symbol.for("react.transitional.element"),h=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),S=Symbol.for("react.consumer"),I=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),te=Symbol.for("react.offscreen"),re=Symbol.for("react.memo_cache_sentinel"),ie=Symbol.iterator;function le(s){return s===null||typeof s!="object"?null:(s=ie&&s[ie]||s["@@iterator"],typeof s=="function"?s:null)}var L=Symbol.for("react.client.reference");function D(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===L?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case y:return"Fragment";case h:return"Portal";case _:return"Profiler";case g:return"StrictMode";case G:return"Suspense";case B:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case I:return(s.displayName||"Context")+".Provider";case S:return(s._context.displayName||"Context")+".Consumer";case U:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case W:return o=s.displayName||null,o!==null?o:D(s.type)||"Memo";case J:o=s._payload,s=s._init;try{return D(s(o))}catch{}}return null}var x=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,N=Object.assign,k,P;function M(s){if(k===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);k=o&&o[1]||"",P=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+k+s+P}var ge=!1;function be(s,o){if(!s||ge)return"";ge=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(o){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(Q){var Y=Q}Reflect.construct(s,[],ne)}else{try{ne.call()}catch(Q){Y=Q}s.call(ne.prototype)}}else{try{throw Error()}catch(Q){Y=Q}(ne=s())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(Q){if(Q&&Y&&typeof Q.stack=="string")return[Q.stack,Y.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=u.DetermineComponentFrameRoot(),C=v[0],R=v[1];if(C&&R){var V=C.split(`
`),q=R.split(`
`);for(p=u=0;u<V.length&&!V[u].includes("DetermineComponentFrameRoot");)u++;for(;p<q.length&&!q[p].includes("DetermineComponentFrameRoot");)p++;if(u===V.length||p===q.length)for(u=V.length-1,p=q.length-1;1<=u&&0<=p&&V[u]!==q[p];)p--;for(;1<=u&&0<=p;u--,p--)if(V[u]!==q[p]){if(u!==1||p!==1)do if(u--,p--,0>p||V[u]!==q[p]){var Z=`
`+V[u].replace(" at new "," at ");return s.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",s.displayName)),Z}while(1<=u&&0<=p);break}}}finally{ge=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?M(l):""}function ue(s){switch(s.tag){case 26:case 27:case 5:return M(s.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 15:return s=be(s.type,!1),s;case 11:return s=be(s.type.render,!1),s;case 1:return s=be(s.type,!0),s;default:return""}}function Re(s){try{var o="";do o+=ue(s),s=s.return;while(s);return o}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function Ce(s){var o=s,l=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(l=o.return),s=o.return;while(s)}return o.tag===3?l:null}function et(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function O(s){if(Ce(s)!==s)throw Error(n(188))}function se(s){var o=s.alternate;if(!o){if(o=Ce(s),o===null)throw Error(n(188));return o!==s?null:s}for(var l=s,u=o;;){var p=l.return;if(p===null)break;var v=p.alternate;if(v===null){if(u=p.return,u!==null){l=u;continue}break}if(p.child===v.child){for(v=p.child;v;){if(v===l)return O(p),s;if(v===u)return O(p),o;v=v.sibling}throw Error(n(188))}if(l.return!==u.return)l=p,u=v;else{for(var C=!1,R=p.child;R;){if(R===l){C=!0,l=p,u=v;break}if(R===u){C=!0,u=p,l=v;break}R=R.sibling}if(!C){for(R=v.child;R;){if(R===l){C=!0,l=v,u=p;break}if(R===u){C=!0,u=v,l=p;break}R=R.sibling}if(!C)throw Error(n(189))}}if(l.alternate!==u)throw Error(n(190))}if(l.tag!==3)throw Error(n(188));return l.stateNode.current===l?s:o}function Ae(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s;for(s=s.child;s!==null;){if(o=Ae(s),o!==null)return o;s=s.sibling}return null}var Ee=Array.isArray,fe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Fe={pending:!1,data:null,method:null,action:null},ke=[],Ot=-1;function Ke(s){return{current:s}}function gt(s){0>Ot||(s.current=ke[Ot],ke[Ot]=null,Ot--)}function at(s,o){Ot++,ke[Ot]=s.current,s.current=o}var kn=Ke(null),as=Ke(null),Ln=Ke(null),lr=Ke(null);function ro(s,o){switch(at(Ln,o),at(as,s),at(kn,null),s=o.nodeType,s){case 9:case 11:o=(o=o.documentElement)&&(o=o.namespaceURI)?Ev(o):0;break;default:if(s=s===8?o.parentNode:o,o=s.tagName,s=s.namespaceURI)s=Ev(s),o=Cv(s,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}gt(kn),at(kn,o)}function hi(){gt(kn),gt(as),gt(Ln)}function ur(s){s.memoizedState!==null&&at(lr,s);var o=kn.current,l=Cv(o,s.type);o!==l&&(at(as,s),at(kn,l))}function cr(s){as.current===s&&(gt(kn),gt(as)),lr.current===s&&(gt(lr),Dl._currentValue=Fe)}var bt=Object.prototype.hasOwnProperty,Ft=i.unstable_scheduleCallback,ls=i.unstable_cancelCallback,Yf=i.unstable_shouldYield,Tu=i.unstable_requestPaint,Un=i.unstable_now,fr=i.unstable_getCurrentPriorityLevel,Ra=i.unstable_ImmediatePriority,ba=i.unstable_UserBlockingPriority,us=i.unstable_NormalPriority,Kf=i.unstable_LowPriority,Eu=i.unstable_IdlePriority,Cu=i.log,Au=i.unstable_setDisableYieldValue,ei=null,Xt=null;function Ia(s){if(Xt&&typeof Xt.onCommitFiberRoot=="function")try{Xt.onCommitFiberRoot(ei,s,void 0,(s.current.flags&128)===128)}catch{}}function on(s){if(typeof Cu=="function"&&Au(s),Xt&&typeof Xt.setStrictMode=="function")try{Xt.setStrictMode(ei,s)}catch{}}var an=Math.clz32?Math.clz32:dr,oo=Math.log,Su=Math.LN2;function dr(s){return s>>>=0,s===0?32:31-(oo(s)/Su|0)|0}var hr=128,It=4194304;function mi(s){var o=s&42;if(o!==0)return o;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function pi(s,o){var l=s.pendingLanes;if(l===0)return 0;var u=0,p=s.suspendedLanes,v=s.pingedLanes,C=s.warmLanes;s=s.finishedLanes!==0;var R=l&134217727;return R!==0?(l=R&~p,l!==0?u=mi(l):(v&=R,v!==0?u=mi(v):s||(C=R&~C,C!==0&&(u=mi(C))))):(R=l&~p,R!==0?u=mi(R):v!==0?u=mi(v):s||(C=l&~C,C!==0&&(u=mi(C)))),u===0?0:o!==0&&o!==u&&(o&p)===0&&(p=u&-u,C=o&-o,p>=C||p===32&&(C&4194176)!==0)?o:u}function ti(s,o){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&o)===0}function Qf(s,o){switch(s){case 1:case 2:case 4:case 8:return o+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xu(){var s=hr;return hr<<=1,(hr&4194176)===0&&(hr=128),s}function Oi(){var s=It;return It<<=1,(It&62914560)===0&&(It=4194304),s}function Na(s){for(var o=[],l=0;31>l;l++)o.push(s);return o}function mr(s,o){s.pendingLanes|=o,o!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function ao(s,o,l,u,p,v){var C=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var R=s.entanglements,V=s.expirationTimes,q=s.hiddenUpdates;for(l=C&~l;0<l;){var Z=31-an(l),ne=1<<Z;R[Z]=0,V[Z]=-1;var Y=q[Z];if(Y!==null)for(q[Z]=null,Z=0;Z<Y.length;Z++){var Q=Y[Z];Q!==null&&(Q.lane&=-536870913)}l&=~ne}u!==0&&Ma(s,u,0),v!==0&&p===0&&s.tag!==0&&(s.suspendedLanes|=v&~(C&~o))}function Ma(s,o,l){s.pendingLanes|=o,s.suspendedLanes&=~o;var u=31-an(o);s.entangledLanes|=o,s.entanglements[u]=s.entanglements[u]|1073741824|l&4194218}function Da(s,o){var l=s.entangledLanes|=o;for(s=s.entanglements;l;){var u=31-an(l),p=1<<u;p&o|s[u]&o&&(s[u]|=o),l&=~p}}function lo(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function cs(){var s=fe.p;return s!==0?s:(s=window.event,s===void 0?32:qv(s.type))}function Zf(s,o){var l=fe.p;try{return fe.p=s,o()}finally{fe.p=l}}var Jt=Math.random().toString(36).slice(2),qt="__reactFiber$"+Jt,jt="__reactProps$"+Jt,gi="__reactContainer$"+Jt,pr="__reactEvents$"+Jt,wu="__reactListeners$"+Jt,Xf="__reactHandles$"+Jt,Va="__reactResources$"+Jt,gr="__reactMarker$"+Jt;function fs(s){delete s[qt],delete s[jt],delete s[pr],delete s[wu],delete s[Xf]}function yi(s){var o=s[qt];if(o)return o;for(var l=s.parentNode;l;){if(o=l[gi]||l[qt]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(s=xv(s);s!==null;){if(l=s[qt])return l;s=xv(s)}return o}s=l,l=s.parentNode}return null}function vi(s){if(s=s[qt]||s[gi]){var o=s.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return s}return null}function ni(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s.stateNode;throw Error(n(33))}function Tn(s){var o=s[Va];return o||(o=s[Va]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Tt(s){s[gr]=!0}var Ru=new Set,Pa={};function _i(s,o){Fi(s,o),Fi(s+"Capture",o)}function Fi(s,o){for(Pa[s]=o,s=0;s<o.length;s++)Ru.add(o[s])}var wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ka=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),La={},Ua={};function bu(s){return bt.call(Ua,s)?!0:bt.call(La,s)?!1:ka.test(s)?Ua[s]=!0:(La[s]=!0,!1)}function uo(s,o,l){if(bu(o))if(l===null)s.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(o);return;case"boolean":var u=o.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){s.removeAttribute(o);return}}s.setAttribute(o,""+l)}}function Rn(s,o,l){if(l===null)s.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttribute(o,""+l)}}function Nt(s,o,l,u){if(u===null)s.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(o,l,""+u)}}function $t(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function ds(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Oa(s){var o=ds(s)?"checked":"value",l=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),u=""+s[o];if(!s.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,v=l.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return p.call(this)},set:function(C){u=""+C,v.call(this,C)}}),Object.defineProperty(s,o,{enumerable:l.enumerable}),{getValue:function(){return u},setValue:function(C){u=""+C},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function tt(s){s._valueTracker||(s._valueTracker=Oa(s))}function yr(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var l=o.getValue(),u="";return s&&(u=ds(s)?s.checked?"true":"false":s.value),s=u,s!==l?(o.setValue(s),!0):!1}function Ti(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var vr=/[\n"\\]/g;function En(s){return s.replace(vr,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function co(s,o,l,u,p,v,C,R){s.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?s.type=C:s.removeAttribute("type"),o!=null?C==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+$t(o)):s.value!==""+$t(o)&&(s.value=""+$t(o)):C!=="submit"&&C!=="reset"||s.removeAttribute("value"),o!=null?Fa(s,C,$t(o)):l!=null?Fa(s,C,$t(l)):u!=null&&s.removeAttribute("value"),p==null&&v!=null&&(s.defaultChecked=!!v),p!=null&&(s.checked=p&&typeof p!="function"&&typeof p!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?s.name=""+$t(R):s.removeAttribute("name")}function Iu(s,o,l,u,p,v,C,R){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(s.type=v),o!=null||l!=null){if(!(v!=="submit"&&v!=="reset"||o!=null))return;l=l!=null?""+$t(l):"",o=o!=null?""+$t(o):l,R||o===s.value||(s.value=o),s.defaultValue=o}u=u??p,u=typeof u!="function"&&typeof u!="symbol"&&!!u,s.checked=R?s.checked:!!u,s.defaultChecked=!!u,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(s.name=C)}function Fa(s,o,l){o==="number"&&Ti(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function hs(s,o,l,u){if(s=s.options,o){o={};for(var p=0;p<l.length;p++)o["$"+l[p]]=!0;for(l=0;l<s.length;l++)p=o.hasOwnProperty("$"+s[l].value),s[l].selected!==p&&(s[l].selected=p),p&&u&&(s[l].defaultSelected=!0)}else{for(l=""+$t(l),o=null,p=0;p<s.length;p++){if(s[p].value===l){s[p].selected=!0,u&&(s[p].defaultSelected=!0);return}o!==null||s[p].disabled||(o=s[p])}o!==null&&(o.selected=!0)}}function Nu(s,o,l){if(o!=null&&(o=""+$t(o),o!==s.value&&(s.value=o),l==null)){s.defaultValue!==o&&(s.defaultValue=o);return}s.defaultValue=l!=null?""+$t(l):""}function ms(s,o,l,u){if(o==null){if(u!=null){if(l!=null)throw Error(n(92));if(Ee(u)){if(1<u.length)throw Error(n(93));u=u[0]}l=u}l==null&&(l=""),o=l}l=$t(o),s.defaultValue=l,u=s.textContent,u===l&&u!==""&&u!==null&&(s.value=u)}function Cn(s,o){if(o){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=o;return}}s.textContent=o}var Mu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function qa(s,o,l){var u=o.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="":u?s.setProperty(o,l):typeof l!="number"||l===0||Mu.has(o)?o==="float"?s.cssFloat=l:s[o]=(""+l).trim():s[o]=l+"px"}function Ba(s,o,l){if(o!=null&&typeof o!="object")throw Error(n(62));if(s=s.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||o!=null&&o.hasOwnProperty(u)||(u.indexOf("--")===0?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="");for(var p in o)u=o[p],o.hasOwnProperty(p)&&l[p]!==u&&qa(s,p,u)}else for(var v in o)o.hasOwnProperty(v)&&qa(s,v,o[v])}function fo(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Du=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ps=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ho(s){return ps.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var za=null;function Ga(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var mn=null,gs=null;function mo(s){var o=vi(s);if(o&&(s=o.stateNode)){var l=s[jt]||null;e:switch(s=o.stateNode,o.type){case"input":if(co(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),o=l.name,l.type==="radio"&&o!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+En(""+o)+'"][type="radio"]'),o=0;o<l.length;o++){var u=l[o];if(u!==s&&u.form===s.form){var p=u[jt]||null;if(!p)throw Error(n(90));co(u,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(o=0;o<l.length;o++)u=l[o],u.form===s.form&&yr(u)}break e;case"textarea":Nu(s,l.value,l.defaultValue);break e;case"select":o=l.value,o!=null&&hs(s,!!l.multiple,o,!1)}}}var ys=!1;function Ha(s,o,l){if(ys)return s(o,l);ys=!0;try{var u=s(o);return u}finally{if(ys=!1,(mn!==null||gs!==null)&&(_c(),mn&&(o=mn,s=gs,gs=mn=null,mo(o),s)))for(o=0;o<s.length;o++)mo(s[o])}}function ii(s,o){var l=s.stateNode;if(l===null)return null;var u=l[jt]||null;if(u===null)return null;l=u[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(s=s.type,u=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!u;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(n(231,o,typeof l));return l}var qi=!1;if(wn)try{var vs={};Object.defineProperty(vs,"passive",{get:function(){qi=!0}}),window.addEventListener("test",vs,vs),window.removeEventListener("test",vs,vs)}catch{qi=!1}var On=null,lt=null,po=null;function Vu(){if(po)return po;var s,o=lt,l=o.length,u,p="value"in On?On.value:On.textContent,v=p.length;for(s=0;s<l&&o[s]===p[s];s++);var C=l-s;for(u=1;u<=C&&o[l-u]===p[v-u];u++);return po=p.slice(s,1<u?1-u:void 0)}function _r(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function Tr(){return!0}function $a(){return!1}function Bt(s){function o(l,u,p,v,C){this._reactName=l,this._targetInst=p,this.type=u,this.nativeEvent=v,this.target=C,this.currentTarget=null;for(var R in s)s.hasOwnProperty(R)&&(l=s[R],this[R]=l?l(v):v[R]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Tr:$a,this.isPropagationStopped=$a,this}return N(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Tr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Tr)},persist:function(){},isPersistent:Tr}),o}var ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Er=Bt(ln),Cr=N({},ln,{view:0,detail:0}),Ar=Bt(Cr),go,Sr,Ei,xr=N({},Cr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_o,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Ei&&(Ei&&s.type==="mousemove"?(go=s.screenX-Ei.screenX,Sr=s.screenY-Ei.screenY):Sr=go=0,Ei=s),go)},movementY:function(s){return"movementY"in s?s.movementY:Sr}}),wr=Bt(xr),Jf=N({},xr,{dataTransfer:0}),Pu=Bt(Jf),Rr=N({},Cr,{relatedTarget:0}),yo=Bt(Rr),ku=N({},ln,{animationName:0,elapsedTime:0,pseudoElement:0}),Ya=Bt(ku),Ka=N({},ln,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Lu=Bt(Ka),vo=N({},ln,{data:0}),Qa=Bt(vo),Uu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ou={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fu(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=Ou[s])?!!o[s]:!1}function _o(){return Fu}var qu=N({},Cr,{key:function(s){if(s.key){var o=Uu[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=_r(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Bi[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_o,charCode:function(s){return s.type==="keypress"?_r(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?_r(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),To=Bt(qu),pn=N({},xr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Za=Bt(pn),Bu=N({},Cr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_o}),_s=Bt(Bu),m=N({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0}),T=Bt(m),A=N({},xr,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),b=Bt(A),H=N({},ln,{newState:0,oldState:0}),K=Bt(H),ae=[9,13,27,32],De=wn&&"CompositionEvent"in window,ht=null;wn&&"documentMode"in document&&(ht=document.documentMode);var it=wn&&"TextEvent"in window&&!ht,xt=wn&&(!De||ht&&8<ht&&11>=ht),bn=" ",Ci=!1;function si(s,o){switch(s){case"keyup":return ae.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ri(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var oi=!1;function Xa(s,o){switch(s){case"compositionend":return ri(o);case"keypress":return o.which!==32?null:(Ci=!0,bn);case"textInput":return s=o.data,s===bn&&Ci?null:s;default:return null}}function dA(s,o){if(oi)return s==="compositionend"||!De&&si(s,o)?(s=Vu(),po=lt=On=null,oi=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return xt&&o.locale!=="ko"?null:o.data;default:return null}}var hA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gp(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!hA[s.type]:o==="textarea"}function Hp(s,o,l,u){mn?gs?gs.push(u):gs=[u]:mn=u,o=Sc(o,"onChange"),0<o.length&&(l=new Er("onChange","change",null,l,u),s.push({event:l,listeners:o}))}var Ja=null,ja=null;function mA(s){gv(s,0)}function zu(s){var o=ni(s);if(yr(o))return s}function $p(s,o){if(s==="change")return o}var Yp=!1;if(wn){var jf;if(wn){var Wf="oninput"in document;if(!Wf){var Kp=document.createElement("div");Kp.setAttribute("oninput","return;"),Wf=typeof Kp.oninput=="function"}jf=Wf}else jf=!1;Yp=jf&&(!document.documentMode||9<document.documentMode)}function Qp(){Ja&&(Ja.detachEvent("onpropertychange",Zp),ja=Ja=null)}function Zp(s){if(s.propertyName==="value"&&zu(ja)){var o=[];Hp(o,ja,s,Ga(s)),Ha(mA,o)}}function pA(s,o,l){s==="focusin"?(Qp(),Ja=o,ja=l,Ja.attachEvent("onpropertychange",Zp)):s==="focusout"&&Qp()}function gA(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return zu(ja)}function yA(s,o){if(s==="click")return zu(o)}function vA(s,o){if(s==="input"||s==="change")return zu(o)}function _A(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var In=typeof Object.is=="function"?Object.is:_A;function Wa(s,o){if(In(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var l=Object.keys(s),u=Object.keys(o);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var p=l[u];if(!bt.call(o,p)||!In(s[p],o[p]))return!1}return!0}function Xp(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Jp(s,o){var l=Xp(s);s=0;for(var u;l;){if(l.nodeType===3){if(u=s+l.textContent.length,s<=o&&u>=o)return{node:l,offset:o-s};s=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Xp(l)}}function jp(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?jp(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function Wp(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var o=Ti(s.document);o instanceof s.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)s=o.contentWindow;else break;o=Ti(s.document)}return o}function ed(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}function TA(s,o){var l=Wp(o);o=s.focusedElem;var u=s.selectionRange;if(l!==o&&o&&o.ownerDocument&&jp(o.ownerDocument.documentElement,o)){if(u!==null&&ed(o)){if(s=u.start,l=u.end,l===void 0&&(l=s),"selectionStart"in o)o.selectionStart=s,o.selectionEnd=Math.min(l,o.value.length);else if(l=(s=o.ownerDocument||document)&&s.defaultView||window,l.getSelection){l=l.getSelection();var p=o.textContent.length,v=Math.min(u.start,p);u=u.end===void 0?v:Math.min(u.end,p),!l.extend&&v>u&&(p=u,u=v,v=p),p=Jp(o,v);var C=Jp(o,u);p&&C&&(l.rangeCount!==1||l.anchorNode!==p.node||l.anchorOffset!==p.offset||l.focusNode!==C.node||l.focusOffset!==C.offset)&&(s=s.createRange(),s.setStart(p.node,p.offset),l.removeAllRanges(),v>u?(l.addRange(s),l.extend(C.node,C.offset)):(s.setEnd(C.node,C.offset),l.addRange(s)))}}for(s=[],l=o;l=l.parentNode;)l.nodeType===1&&s.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<s.length;o++)l=s[o],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var EA=wn&&"documentMode"in document&&11>=document.documentMode,Eo=null,td=null,el=null,nd=!1;function eg(s,o,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;nd||Eo==null||Eo!==Ti(u)||(u=Eo,"selectionStart"in u&&ed(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),el&&Wa(el,u)||(el=u,u=Sc(td,"onSelect"),0<u.length&&(o=new Er("onSelect","select",null,o,l),s.push({event:o,listeners:u}),o.target=Eo)))}function br(s,o){var l={};return l[s.toLowerCase()]=o.toLowerCase(),l["Webkit"+s]="webkit"+o,l["Moz"+s]="moz"+o,l}var Co={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionrun:br("Transition","TransitionRun"),transitionstart:br("Transition","TransitionStart"),transitioncancel:br("Transition","TransitionCancel"),transitionend:br("Transition","TransitionEnd")},id={},tg={};wn&&(tg=document.createElement("div").style,"AnimationEvent"in window||(delete Co.animationend.animation,delete Co.animationiteration.animation,delete Co.animationstart.animation),"TransitionEvent"in window||delete Co.transitionend.transition);function Ir(s){if(id[s])return id[s];if(!Co[s])return s;var o=Co[s],l;for(l in o)if(o.hasOwnProperty(l)&&l in tg)return id[s]=o[l];return s}var ng=Ir("animationend"),ig=Ir("animationiteration"),sg=Ir("animationstart"),CA=Ir("transitionrun"),AA=Ir("transitionstart"),SA=Ir("transitioncancel"),rg=Ir("transitionend"),og=new Map,ag="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function ai(s,o){og.set(s,o),_i(o,[s])}var Fn=[],Ao=0,sd=0;function Gu(){for(var s=Ao,o=sd=Ao=0;o<s;){var l=Fn[o];Fn[o++]=null;var u=Fn[o];Fn[o++]=null;var p=Fn[o];Fn[o++]=null;var v=Fn[o];if(Fn[o++]=null,u!==null&&p!==null){var C=u.pending;C===null?p.next=p:(p.next=C.next,C.next=p),u.pending=p}v!==0&&lg(l,p,v)}}function Hu(s,o,l,u){Fn[Ao++]=s,Fn[Ao++]=o,Fn[Ao++]=l,Fn[Ao++]=u,sd|=u,s.lanes|=u,s=s.alternate,s!==null&&(s.lanes|=u)}function rd(s,o,l,u){return Hu(s,o,l,u),$u(s)}function Ts(s,o){return Hu(s,null,null,o),$u(s)}function lg(s,o,l){s.lanes|=l;var u=s.alternate;u!==null&&(u.lanes|=l);for(var p=!1,v=s.return;v!==null;)v.childLanes|=l,u=v.alternate,u!==null&&(u.childLanes|=l),v.tag===22&&(s=v.stateNode,s===null||s._visibility&1||(p=!0)),s=v,v=v.return;p&&o!==null&&s.tag===3&&(v=s.stateNode,p=31-an(l),v=v.hiddenUpdates,s=v[p],s===null?v[p]=[o]:s.push(o),o.lane=l|536870912)}function $u(s){if(50<xl)throw xl=0,fh=null,Error(n(185));for(var o=s.return;o!==null;)s=o,o=s.return;return s.tag===3?s.stateNode:null}var So={},ug=new WeakMap;function qn(s,o){if(typeof s=="object"&&s!==null){var l=ug.get(s);return l!==void 0?l:(o={value:s,source:o,stack:Re(o)},ug.set(s,o),o)}return{value:s,source:o,stack:Re(o)}}var xo=[],wo=0,Yu=null,Ku=0,Bn=[],zn=0,Nr=null,zi=1,Gi="";function Mr(s,o){xo[wo++]=Ku,xo[wo++]=Yu,Yu=s,Ku=o}function cg(s,o,l){Bn[zn++]=zi,Bn[zn++]=Gi,Bn[zn++]=Nr,Nr=s;var u=zi;s=Gi;var p=32-an(u)-1;u&=~(1<<p),l+=1;var v=32-an(o)+p;if(30<v){var C=p-p%5;v=(u&(1<<C)-1).toString(32),u>>=C,p-=C,zi=1<<32-an(o)+p|l<<p|u,Gi=v+s}else zi=1<<v|l<<p|u,Gi=s}function od(s){s.return!==null&&(Mr(s,1),cg(s,1,0))}function ad(s){for(;s===Yu;)Yu=xo[--wo],xo[wo]=null,Ku=xo[--wo],xo[wo]=null;for(;s===Nr;)Nr=Bn[--zn],Bn[zn]=null,Gi=Bn[--zn],Bn[zn]=null,zi=Bn[--zn],Bn[zn]=null}var gn=null,Wt=null,Je=!1,li=null,Ai=!1,ld=Error(n(519));function Dr(s){var o=Error(n(418,""));throw il(qn(o,s)),ld}function fg(s){var o=s.stateNode,l=s.type,u=s.memoizedProps;switch(o[qt]=s,o[jt]=u,l){case"dialog":He("cancel",o),He("close",o);break;case"iframe":case"object":case"embed":He("load",o);break;case"video":case"audio":for(l=0;l<Rl.length;l++)He(Rl[l],o);break;case"source":He("error",o);break;case"img":case"image":case"link":He("error",o),He("load",o);break;case"details":He("toggle",o);break;case"input":He("invalid",o),Iu(o,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),tt(o);break;case"select":He("invalid",o);break;case"textarea":He("invalid",o),ms(o,u.value,u.defaultValue,u.children),tt(o)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||o.textContent===""+l||u.suppressHydrationWarning===!0||Tv(o.textContent,l)?(u.popover!=null&&(He("beforetoggle",o),He("toggle",o)),u.onScroll!=null&&He("scroll",o),u.onScrollEnd!=null&&He("scrollend",o),u.onClick!=null&&(o.onclick=xc),o=!0):o=!1,o||Dr(s)}function dg(s){for(gn=s.return;gn;)switch(gn.tag){case 3:case 27:Ai=!0;return;case 5:case 13:Ai=!1;return;default:gn=gn.return}}function tl(s){if(s!==gn)return!1;if(!Je)return dg(s),Je=!0,!1;var o=!1,l;if((l=s.tag!==3&&s.tag!==27)&&((l=s.tag===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||bh(s.type,s.memoizedProps)),l=!l),l&&(o=!0),o&&Wt&&Dr(s),dg(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));e:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8)if(l=s.data,l==="/$"){if(o===0){Wt=ci(s.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++;s=s.nextSibling}Wt=null}}else Wt=gn?ci(s.stateNode.nextSibling):null;return!0}function nl(){Wt=gn=null,Je=!1}function il(s){li===null?li=[s]:li.push(s)}var sl=Error(n(460)),hg=Error(n(474)),ud={then:function(){}};function mg(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Qu(){}function pg(s,o,l){switch(l=s[l],l===void 0?s.push(o):l!==o&&(o.then(Qu,Qu),o=l),o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,s===sl?Error(n(483)):s;default:if(typeof o.status=="string")o.then(Qu,Qu);else{if(s=ut,s!==null&&100<s.shellSuspendCounter)throw Error(n(482));s=o,s.status="pending",s.then(function(u){if(o.status==="pending"){var p=o;p.status="fulfilled",p.value=u}},function(u){if(o.status==="pending"){var p=o;p.status="rejected",p.reason=u}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,s===sl?Error(n(483)):s}throw rl=o,sl}}var rl=null;function gg(){if(rl===null)throw Error(n(459));var s=rl;return rl=null,s}var Ro=null,ol=0;function Zu(s){var o=ol;return ol+=1,Ro===null&&(Ro=[]),pg(Ro,s,o)}function al(s,o){o=o.props.ref,s.ref=o!==void 0?o:null}function Xu(s,o){throw o.$$typeof===a?Error(n(525)):(s=Object.prototype.toString.call(o),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)))}function yg(s){var o=s._init;return o(s._payload)}function vg(s){function o(z,F){if(s){var $=z.deletions;$===null?(z.deletions=[F],z.flags|=16):$.push(F)}}function l(z,F){if(!s)return null;for(;F!==null;)o(z,F),F=F.sibling;return null}function u(z){for(var F=new Map;z!==null;)z.key!==null?F.set(z.key,z):F.set(z.index,z),z=z.sibling;return F}function p(z,F){return z=Ds(z,F),z.index=0,z.sibling=null,z}function v(z,F,$){return z.index=$,s?($=z.alternate,$!==null?($=$.index,$<F?(z.flags|=33554434,F):$):(z.flags|=33554434,F)):(z.flags|=1048576,F)}function C(z){return s&&z.alternate===null&&(z.flags|=33554434),z}function R(z,F,$,j){return F===null||F.tag!==6?(F=ih($,z.mode,j),F.return=z,F):(F=p(F,$),F.return=z,F)}function V(z,F,$,j){var me=$.type;return me===y?Z(z,F,$.props.children,j,$.key):F!==null&&(F.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===J&&yg(me)===F.type)?(F=p(F,$.props),al(F,$),F.return=z,F):(F=mc($.type,$.key,$.props,null,z.mode,j),al(F,$),F.return=z,F)}function q(z,F,$,j){return F===null||F.tag!==4||F.stateNode.containerInfo!==$.containerInfo||F.stateNode.implementation!==$.implementation?(F=sh($,z.mode,j),F.return=z,F):(F=p(F,$.children||[]),F.return=z,F)}function Z(z,F,$,j,me){return F===null||F.tag!==7?(F=zr($,z.mode,j,me),F.return=z,F):(F=p(F,$),F.return=z,F)}function ne(z,F,$){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=ih(""+F,z.mode,$),F.return=z,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case c:return $=mc(F.type,F.key,F.props,null,z.mode,$),al($,F),$.return=z,$;case h:return F=sh(F,z.mode,$),F.return=z,F;case J:var j=F._init;return F=j(F._payload),ne(z,F,$)}if(Ee(F)||le(F))return F=zr(F,z.mode,$,null),F.return=z,F;if(typeof F.then=="function")return ne(z,Zu(F),$);if(F.$$typeof===I)return ne(z,fc(z,F),$);Xu(z,F)}return null}function Y(z,F,$,j){var me=F!==null?F.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return me!==null?null:R(z,F,""+$,j);if(typeof $=="object"&&$!==null){switch($.$$typeof){case c:return $.key===me?V(z,F,$,j):null;case h:return $.key===me?q(z,F,$,j):null;case J:return me=$._init,$=me($._payload),Y(z,F,$,j)}if(Ee($)||le($))return me!==null?null:Z(z,F,$,j,null);if(typeof $.then=="function")return Y(z,F,Zu($),j);if($.$$typeof===I)return Y(z,F,fc(z,$),j);Xu(z,$)}return null}function Q(z,F,$,j,me){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return z=z.get($)||null,R(F,z,""+j,me);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case c:return z=z.get(j.key===null?$:j.key)||null,V(F,z,j,me);case h:return z=z.get(j.key===null?$:j.key)||null,q(F,z,j,me);case J:var qe=j._init;return j=qe(j._payload),Q(z,F,$,j,me)}if(Ee(j)||le(j))return z=z.get($)||null,Z(F,z,j,me,null);if(typeof j.then=="function")return Q(z,F,$,Zu(j),me);if(j.$$typeof===I)return Q(z,F,$,fc(F,j),me);Xu(F,j)}return null}function ve(z,F,$,j){for(var me=null,qe=null,_e=F,Se=F=0,Qt=null;_e!==null&&Se<$.length;Se++){_e.index>Se?(Qt=_e,_e=null):Qt=_e.sibling;var je=Y(z,_e,$[Se],j);if(je===null){_e===null&&(_e=Qt);break}s&&_e&&je.alternate===null&&o(z,_e),F=v(je,F,Se),qe===null?me=je:qe.sibling=je,qe=je,_e=Qt}if(Se===$.length)return l(z,_e),Je&&Mr(z,Se),me;if(_e===null){for(;Se<$.length;Se++)_e=ne(z,$[Se],j),_e!==null&&(F=v(_e,F,Se),qe===null?me=_e:qe.sibling=_e,qe=_e);return Je&&Mr(z,Se),me}for(_e=u(_e);Se<$.length;Se++)Qt=Q(_e,z,Se,$[Se],j),Qt!==null&&(s&&Qt.alternate!==null&&_e.delete(Qt.key===null?Se:Qt.key),F=v(Qt,F,Se),qe===null?me=Qt:qe.sibling=Qt,qe=Qt);return s&&_e.forEach(function(Fs){return o(z,Fs)}),Je&&Mr(z,Se),me}function Ve(z,F,$,j){if($==null)throw Error(n(151));for(var me=null,qe=null,_e=F,Se=F=0,Qt=null,je=$.next();_e!==null&&!je.done;Se++,je=$.next()){_e.index>Se?(Qt=_e,_e=null):Qt=_e.sibling;var Fs=Y(z,_e,je.value,j);if(Fs===null){_e===null&&(_e=Qt);break}s&&_e&&Fs.alternate===null&&o(z,_e),F=v(Fs,F,Se),qe===null?me=Fs:qe.sibling=Fs,qe=Fs,_e=Qt}if(je.done)return l(z,_e),Je&&Mr(z,Se),me;if(_e===null){for(;!je.done;Se++,je=$.next())je=ne(z,je.value,j),je!==null&&(F=v(je,F,Se),qe===null?me=je:qe.sibling=je,qe=je);return Je&&Mr(z,Se),me}for(_e=u(_e);!je.done;Se++,je=$.next())je=Q(_e,z,Se,je.value,j),je!==null&&(s&&je.alternate!==null&&_e.delete(je.key===null?Se:je.key),F=v(je,F,Se),qe===null?me=je:qe.sibling=je,qe=je);return s&&_e.forEach(function(OS){return o(z,OS)}),Je&&Mr(z,Se),me}function At(z,F,$,j){if(typeof $=="object"&&$!==null&&$.type===y&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case c:e:{for(var me=$.key;F!==null;){if(F.key===me){if(me=$.type,me===y){if(F.tag===7){l(z,F.sibling),j=p(F,$.props.children),j.return=z,z=j;break e}}else if(F.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===J&&yg(me)===F.type){l(z,F.sibling),j=p(F,$.props),al(j,$),j.return=z,z=j;break e}l(z,F);break}else o(z,F);F=F.sibling}$.type===y?(j=zr($.props.children,z.mode,j,$.key),j.return=z,z=j):(j=mc($.type,$.key,$.props,null,z.mode,j),al(j,$),j.return=z,z=j)}return C(z);case h:e:{for(me=$.key;F!==null;){if(F.key===me)if(F.tag===4&&F.stateNode.containerInfo===$.containerInfo&&F.stateNode.implementation===$.implementation){l(z,F.sibling),j=p(F,$.children||[]),j.return=z,z=j;break e}else{l(z,F);break}else o(z,F);F=F.sibling}j=sh($,z.mode,j),j.return=z,z=j}return C(z);case J:return me=$._init,$=me($._payload),At(z,F,$,j)}if(Ee($))return ve(z,F,$,j);if(le($)){if(me=le($),typeof me!="function")throw Error(n(150));return $=me.call($),Ve(z,F,$,j)}if(typeof $.then=="function")return At(z,F,Zu($),j);if($.$$typeof===I)return At(z,F,fc(z,$),j);Xu(z,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,F!==null&&F.tag===6?(l(z,F.sibling),j=p(F,$),j.return=z,z=j):(l(z,F),j=ih($,z.mode,j),j.return=z,z=j),C(z)):l(z,F)}return function(z,F,$,j){try{ol=0;var me=At(z,F,$,j);return Ro=null,me}catch(_e){if(_e===sl)throw _e;var qe=Yn(29,_e,null,z.mode);return qe.lanes=j,qe.return=z,qe}finally{}}}var Vr=vg(!0),_g=vg(!1),bo=Ke(null),Ju=Ke(0);function Tg(s,o){s=es,at(Ju,s),at(bo,o),es=s|o.baseLanes}function cd(){at(Ju,es),at(bo,bo.current)}function fd(){es=Ju.current,gt(bo),gt(Ju)}var Gn=Ke(null),Si=null;function Es(s){var o=s.alternate;at(zt,zt.current&1),at(Gn,s),Si===null&&(o===null||bo.current!==null||o.memoizedState!==null)&&(Si=s)}function Eg(s){if(s.tag===22){if(at(zt,zt.current),at(Gn,s),Si===null){var o=s.alternate;o!==null&&o.memoizedState!==null&&(Si=s)}}else Cs()}function Cs(){at(zt,zt.current),at(Gn,Gn.current)}function Hi(s){gt(Gn),Si===s&&(Si=null),gt(zt)}var zt=Ke(0);function ju(s){for(var o=s;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var xA=typeof AbortController<"u"?AbortController:function(){var s=[],o=this.signal={aborted:!1,addEventListener:function(l,u){s.push(u)}};this.abort=function(){o.aborted=!0,s.forEach(function(l){return l()})}},wA=i.unstable_scheduleCallback,RA=i.unstable_NormalPriority,Gt={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function dd(){return{controller:new xA,data:new Map,refCount:0}}function ll(s){s.refCount--,s.refCount===0&&wA(RA,function(){s.controller.abort()})}var ul=null,hd=0,Io=0,No=null;function bA(s,o){if(ul===null){var l=ul=[];hd=0,Io=_h(),No={status:"pending",value:void 0,then:function(u){l.push(u)}}}return hd++,o.then(Cg,Cg),o}function Cg(){if(--hd===0&&ul!==null){No!==null&&(No.status="fulfilled");var s=ul;ul=null,Io=0,No=null;for(var o=0;o<s.length;o++)(0,s[o])()}}function IA(s,o){var l=[],u={status:"pending",value:null,reason:null,then:function(p){l.push(p)}};return s.then(function(){u.status="fulfilled",u.value=o;for(var p=0;p<l.length;p++)(0,l[p])(o)},function(p){for(u.status="rejected",u.reason=p,p=0;p<l.length;p++)(0,l[p])(void 0)}),u}var Ag=x.S;x.S=function(s,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&bA(s,o),Ag!==null&&Ag(s,o)};var Pr=Ke(null);function md(){var s=Pr.current;return s!==null?s:ut.pooledCache}function Wu(s,o){o===null?at(Pr,Pr.current):at(Pr,o.pool)}function Sg(){var s=md();return s===null?null:{parent:Gt._currentValue,pool:s}}var As=0,Oe=null,st=null,Mt=null,ec=!1,Mo=!1,kr=!1,tc=0,cl=0,Do=null,NA=0;function wt(){throw Error(n(321))}function pd(s,o){if(o===null)return!1;for(var l=0;l<o.length&&l<s.length;l++)if(!In(s[l],o[l]))return!1;return!0}function gd(s,o,l,u,p,v){return As=v,Oe=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,x.H=s===null||s.memoizedState===null?Lr:Ss,kr=!1,v=l(u,p),kr=!1,Mo&&(v=wg(o,l,u,p)),xg(s),v}function xg(s){x.H=xi;var o=st!==null&&st.next!==null;if(As=0,Mt=st=Oe=null,ec=!1,cl=0,Do=null,o)throw Error(n(300));s===null||Yt||(s=s.dependencies,s!==null&&cc(s)&&(Yt=!0))}function wg(s,o,l,u){Oe=s;var p=0;do{if(Mo&&(Do=null),cl=0,Mo=!1,25<=p)throw Error(n(301));if(p+=1,Mt=st=null,s.updateQueue!=null){var v=s.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}x.H=Ur,v=o(l,u)}while(Mo);return v}function MA(){var s=x.H,o=s.useState()[0];return o=typeof o.then=="function"?fl(o):o,s=s.useState()[0],(st!==null?st.memoizedState:null)!==s&&(Oe.flags|=1024),o}function yd(){var s=tc!==0;return tc=0,s}function vd(s,o,l){o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~l}function _d(s){if(ec){for(s=s.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}ec=!1}As=0,Mt=st=Oe=null,Mo=!1,cl=tc=0,Do=null}function An(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mt===null?Oe.memoizedState=Mt=s:Mt=Mt.next=s,Mt}function Dt(){if(st===null){var s=Oe.alternate;s=s!==null?s.memoizedState:null}else s=st.next;var o=Mt===null?Oe.memoizedState:Mt.next;if(o!==null)Mt=o,st=s;else{if(s===null)throw Oe.alternate===null?Error(n(467)):Error(n(310));st=s,s={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},Mt===null?Oe.memoizedState=Mt=s:Mt=Mt.next=s}return Mt}var nc;nc=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function fl(s){var o=cl;return cl+=1,Do===null&&(Do=[]),s=pg(Do,s,o),o=Oe,(Mt===null?o.memoizedState:Mt.next)===null&&(o=o.alternate,x.H=o===null||o.memoizedState===null?Lr:Ss),s}function ic(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return fl(s);if(s.$$typeof===I)return un(s)}throw Error(n(438,String(s)))}function Td(s){var o=null,l=Oe.updateQueue;if(l!==null&&(o=l.memoCache),o==null){var u=Oe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(o={data:u.data.map(function(p){return p.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),l===null&&(l=nc(),Oe.updateQueue=l),l.memoCache=o,l=o.data[o.index],l===void 0)for(l=o.data[o.index]=Array(s),u=0;u<s;u++)l[u]=re;return o.index++,l}function $i(s,o){return typeof o=="function"?o(s):o}function sc(s){var o=Dt();return Ed(o,st,s)}function Ed(s,o,l){var u=s.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=l;var p=s.baseQueue,v=u.pending;if(v!==null){if(p!==null){var C=p.next;p.next=v.next,v.next=C}o.baseQueue=p=v,u.pending=null}if(v=s.baseState,p===null)s.memoizedState=v;else{o=p.next;var R=C=null,V=null,q=o,Z=!1;do{var ne=q.lane&-536870913;if(ne!==q.lane?(Qe&ne)===ne:(As&ne)===ne){var Y=q.revertLane;if(Y===0)V!==null&&(V=V.next={lane:0,revertLane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),ne===Io&&(Z=!0);else if((As&Y)===Y){q=q.next,Y===Io&&(Z=!0);continue}else ne={lane:0,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},V===null?(R=V=ne,C=v):V=V.next=ne,Oe.lanes|=Y,Vs|=Y;ne=q.action,kr&&l(v,ne),v=q.hasEagerState?q.eagerState:l(v,ne)}else Y={lane:ne,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},V===null?(R=V=Y,C=v):V=V.next=Y,Oe.lanes|=ne,Vs|=ne;q=q.next}while(q!==null&&q!==o);if(V===null?C=v:V.next=R,!In(v,s.memoizedState)&&(Yt=!0,Z&&(l=No,l!==null)))throw l;s.memoizedState=v,s.baseState=C,s.baseQueue=V,u.lastRenderedState=v}return p===null&&(u.lanes=0),[s.memoizedState,u.dispatch]}function Cd(s){var o=Dt(),l=o.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=s;var u=l.dispatch,p=l.pending,v=o.memoizedState;if(p!==null){l.pending=null;var C=p=p.next;do v=s(v,C.action),C=C.next;while(C!==p);In(v,o.memoizedState)||(Yt=!0),o.memoizedState=v,o.baseQueue===null&&(o.baseState=v),l.lastRenderedState=v}return[v,u]}function Rg(s,o,l){var u=Oe,p=Dt(),v=Je;if(v){if(l===void 0)throw Error(n(407));l=l()}else l=o();var C=!In((st||p).memoizedState,l);if(C&&(p.memoizedState=l,Yt=!0),p=p.queue,xd(Ng.bind(null,u,p,s),[s]),p.getSnapshot!==o||C||Mt!==null&&Mt.memoizedState.tag&1){if(u.flags|=2048,Vo(9,Ig.bind(null,u,p,l,o),{destroy:void 0},null),ut===null)throw Error(n(349));v||(As&60)!==0||bg(u,o,l)}return l}function bg(s,o,l){s.flags|=16384,s={getSnapshot:o,value:l},o=Oe.updateQueue,o===null?(o=nc(),Oe.updateQueue=o,o.stores=[s]):(l=o.stores,l===null?o.stores=[s]:l.push(s))}function Ig(s,o,l,u){o.value=l,o.getSnapshot=u,Mg(o)&&Dg(s)}function Ng(s,o,l){return l(function(){Mg(o)&&Dg(s)})}function Mg(s){var o=s.getSnapshot;s=s.value;try{var l=o();return!In(s,l)}catch{return!0}}function Dg(s){var o=Ts(s,2);o!==null&&yn(o,s,2)}function Ad(s){var o=An();if(typeof s=="function"){var l=s;if(s=l(),kr){on(!0);try{l()}finally{on(!1)}}}return o.memoizedState=o.baseState=s,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:s},o}function Vg(s,o,l,u){return s.baseState=l,Ed(s,st,typeof u=="function"?u:$i)}function DA(s,o,l,u,p){if(ac(s))throw Error(n(485));if(s=o.action,s!==null){var v={payload:p,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){v.listeners.push(C)}};x.T!==null?l(!0):v.isTransition=!1,u(v),l=o.pending,l===null?(v.next=o.pending=v,Pg(o,v)):(v.next=l.next,o.pending=l.next=v)}}function Pg(s,o){var l=o.action,u=o.payload,p=s.state;if(o.isTransition){var v=x.T,C={};x.T=C;try{var R=l(p,u),V=x.S;V!==null&&V(C,R),kg(s,o,R)}catch(q){Sd(s,o,q)}finally{x.T=v}}else try{v=l(p,u),kg(s,o,v)}catch(q){Sd(s,o,q)}}function kg(s,o,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){Lg(s,o,u)},function(u){return Sd(s,o,u)}):Lg(s,o,l)}function Lg(s,o,l){o.status="fulfilled",o.value=l,Ug(o),s.state=l,o=s.pending,o!==null&&(l=o.next,l===o?s.pending=null:(l=l.next,o.next=l,Pg(s,l)))}function Sd(s,o,l){var u=s.pending;if(s.pending=null,u!==null){u=u.next;do o.status="rejected",o.reason=l,Ug(o),o=o.next;while(o!==u)}s.action=null}function Ug(s){s=s.listeners;for(var o=0;o<s.length;o++)(0,s[o])()}function Og(s,o){return o}function Fg(s,o){if(Je){var l=ut.formState;if(l!==null){e:{var u=Oe;if(Je){if(Wt){t:{for(var p=Wt,v=Ai;p.nodeType!==8;){if(!v){p=null;break t}if(p=ci(p.nextSibling),p===null){p=null;break t}}v=p.data,p=v==="F!"||v==="F"?p:null}if(p){Wt=ci(p.nextSibling),u=p.data==="F!";break e}}Dr(u)}u=!1}u&&(o=l[0])}}return l=An(),l.memoizedState=l.baseState=o,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Og,lastRenderedState:o},l.queue=u,l=iy.bind(null,Oe,u),u.dispatch=l,u=Ad(!1),v=Nd.bind(null,Oe,!1,u.queue),u=An(),p={state:o,dispatch:null,action:s,pending:null},u.queue=p,l=DA.bind(null,Oe,p,v,l),p.dispatch=l,u.memoizedState=s,[o,l,!1]}function qg(s){var o=Dt();return Bg(o,st,s)}function Bg(s,o,l){o=Ed(s,o,Og)[0],s=sc($i)[0],o=typeof o=="object"&&o!==null&&typeof o.then=="function"?fl(o):o;var u=Dt(),p=u.queue,v=p.dispatch;return l!==u.memoizedState&&(Oe.flags|=2048,Vo(9,VA.bind(null,p,l),{destroy:void 0},null)),[o,v,s]}function VA(s,o){s.action=o}function zg(s){var o=Dt(),l=st;if(l!==null)return Bg(o,l,s);Dt(),o=o.memoizedState,l=Dt();var u=l.queue.dispatch;return l.memoizedState=s,[o,u,!1]}function Vo(s,o,l,u){return s={tag:s,create:o,inst:l,deps:u,next:null},o=Oe.updateQueue,o===null&&(o=nc(),Oe.updateQueue=o),l=o.lastEffect,l===null?o.lastEffect=s.next=s:(u=l.next,l.next=s,s.next=u,o.lastEffect=s),s}function Gg(){return Dt().memoizedState}function rc(s,o,l,u){var p=An();Oe.flags|=s,p.memoizedState=Vo(1|o,l,{destroy:void 0},u===void 0?null:u)}function oc(s,o,l,u){var p=Dt();u=u===void 0?null:u;var v=p.memoizedState.inst;st!==null&&u!==null&&pd(u,st.memoizedState.deps)?p.memoizedState=Vo(o,l,v,u):(Oe.flags|=s,p.memoizedState=Vo(1|o,l,v,u))}function Hg(s,o){rc(8390656,8,s,o)}function xd(s,o){oc(2048,8,s,o)}function $g(s,o){return oc(4,2,s,o)}function Yg(s,o){return oc(4,4,s,o)}function Kg(s,o){if(typeof o=="function"){s=s();var l=o(s);return function(){typeof l=="function"?l():o(null)}}if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function Qg(s,o,l){l=l!=null?l.concat([s]):null,oc(4,4,Kg.bind(null,o,s),l)}function wd(){}function Zg(s,o){var l=Dt();o=o===void 0?null:o;var u=l.memoizedState;return o!==null&&pd(o,u[1])?u[0]:(l.memoizedState=[s,o],s)}function Xg(s,o){var l=Dt();o=o===void 0?null:o;var u=l.memoizedState;if(o!==null&&pd(o,u[1]))return u[0];if(u=s(),kr){on(!0);try{s()}finally{on(!1)}}return l.memoizedState=[u,o],u}function Rd(s,o,l){return l===void 0||(As&1073741824)!==0?s.memoizedState=o:(s.memoizedState=l,s=jy(),Oe.lanes|=s,Vs|=s,l)}function Jg(s,o,l,u){return In(l,o)?l:bo.current!==null?(s=Rd(s,l,u),In(s,o)||(Yt=!0),s):(As&42)===0?(Yt=!0,s.memoizedState=l):(s=jy(),Oe.lanes|=s,Vs|=s,o)}function jg(s,o,l,u,p){var v=fe.p;fe.p=v!==0&&8>v?v:8;var C=x.T,R={};x.T=R,Nd(s,!1,o,l);try{var V=p(),q=x.S;if(q!==null&&q(R,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var Z=IA(V,u);dl(s,o,Z,Vn(s))}else dl(s,o,u,Vn(s))}catch(ne){dl(s,o,{then:function(){},status:"rejected",reason:ne},Vn())}finally{fe.p=v,x.T=C}}function PA(){}function bd(s,o,l,u){if(s.tag!==5)throw Error(n(476));var p=Wg(s).queue;jg(s,p,o,Fe,l===null?PA:function(){return ey(s),l(u)})}function Wg(s){var o=s.memoizedState;if(o!==null)return o;o={memoizedState:Fe,baseState:Fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:Fe},next:null};var l={};return o.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:l},next:null},s.memoizedState=o,s=s.alternate,s!==null&&(s.memoizedState=o),o}function ey(s){var o=Wg(s).next.queue;dl(s,o,{},Vn())}function Id(){return un(Dl)}function ty(){return Dt().memoizedState}function ny(){return Dt().memoizedState}function kA(s){for(var o=s.return;o!==null;){switch(o.tag){case 24:case 3:var l=Vn();s=Rs(l);var u=bs(o,s,l);u!==null&&(yn(u,o,l),pl(u,o,l)),o={cache:dd()},s.payload=o;return}o=o.return}}function LA(s,o,l){var u=Vn();l={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},ac(s)?sy(o,l):(l=rd(s,o,l,u),l!==null&&(yn(l,s,u),ry(l,o,u)))}function iy(s,o,l){var u=Vn();dl(s,o,l,u)}function dl(s,o,l,u){var p={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(ac(s))sy(o,p);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=o.lastRenderedReducer,v!==null))try{var C=o.lastRenderedState,R=v(C,l);if(p.hasEagerState=!0,p.eagerState=R,In(R,C))return Hu(s,o,p,0),ut===null&&Gu(),!1}catch{}finally{}if(l=rd(s,o,p,u),l!==null)return yn(l,s,u),ry(l,o,u),!0}return!1}function Nd(s,o,l,u){if(u={lane:2,revertLane:_h(),action:u,hasEagerState:!1,eagerState:null,next:null},ac(s)){if(o)throw Error(n(479))}else o=rd(s,l,u,2),o!==null&&yn(o,s,2)}function ac(s){var o=s.alternate;return s===Oe||o!==null&&o===Oe}function sy(s,o){Mo=ec=!0;var l=s.pending;l===null?o.next=o:(o.next=l.next,l.next=o),s.pending=o}function ry(s,o,l){if((l&4194176)!==0){var u=o.lanes;u&=s.pendingLanes,l|=u,o.lanes=l,Da(s,l)}}var xi={readContext:un,use:ic,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useLayoutEffect:wt,useInsertionEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useSyncExternalStore:wt,useId:wt};xi.useCacheRefresh=wt,xi.useMemoCache=wt,xi.useHostTransitionStatus=wt,xi.useFormState=wt,xi.useActionState=wt,xi.useOptimistic=wt;var Lr={readContext:un,use:ic,useCallback:function(s,o){return An().memoizedState=[s,o===void 0?null:o],s},useContext:un,useEffect:Hg,useImperativeHandle:function(s,o,l){l=l!=null?l.concat([s]):null,rc(4194308,4,Kg.bind(null,o,s),l)},useLayoutEffect:function(s,o){return rc(4194308,4,s,o)},useInsertionEffect:function(s,o){rc(4,2,s,o)},useMemo:function(s,o){var l=An();o=o===void 0?null:o;var u=s();if(kr){on(!0);try{s()}finally{on(!1)}}return l.memoizedState=[u,o],u},useReducer:function(s,o,l){var u=An();if(l!==void 0){var p=l(o);if(kr){on(!0);try{l(o)}finally{on(!1)}}}else p=o;return u.memoizedState=u.baseState=p,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:p},u.queue=s,s=s.dispatch=LA.bind(null,Oe,s),[u.memoizedState,s]},useRef:function(s){var o=An();return s={current:s},o.memoizedState=s},useState:function(s){s=Ad(s);var o=s.queue,l=iy.bind(null,Oe,o);return o.dispatch=l,[s.memoizedState,l]},useDebugValue:wd,useDeferredValue:function(s,o){var l=An();return Rd(l,s,o)},useTransition:function(){var s=Ad(!1);return s=jg.bind(null,Oe,s.queue,!0,!1),An().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,o,l){var u=Oe,p=An();if(Je){if(l===void 0)throw Error(n(407));l=l()}else{if(l=o(),ut===null)throw Error(n(349));(Qe&60)!==0||bg(u,o,l)}p.memoizedState=l;var v={value:l,getSnapshot:o};return p.queue=v,Hg(Ng.bind(null,u,v,s),[s]),u.flags|=2048,Vo(9,Ig.bind(null,u,v,l,o),{destroy:void 0},null),l},useId:function(){var s=An(),o=ut.identifierPrefix;if(Je){var l=Gi,u=zi;l=(u&~(1<<32-an(u)-1)).toString(32)+l,o=":"+o+"R"+l,l=tc++,0<l&&(o+="H"+l.toString(32)),o+=":"}else l=NA++,o=":"+o+"r"+l.toString(32)+":";return s.memoizedState=o},useCacheRefresh:function(){return An().memoizedState=kA.bind(null,Oe)}};Lr.useMemoCache=Td,Lr.useHostTransitionStatus=Id,Lr.useFormState=Fg,Lr.useActionState=Fg,Lr.useOptimistic=function(s){var o=An();o.memoizedState=o.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=l,o=Nd.bind(null,Oe,!0,l),l.dispatch=o,[s,o]};var Ss={readContext:un,use:ic,useCallback:Zg,useContext:un,useEffect:xd,useImperativeHandle:Qg,useInsertionEffect:$g,useLayoutEffect:Yg,useMemo:Xg,useReducer:sc,useRef:Gg,useState:function(){return sc($i)},useDebugValue:wd,useDeferredValue:function(s,o){var l=Dt();return Jg(l,st.memoizedState,s,o)},useTransition:function(){var s=sc($i)[0],o=Dt().memoizedState;return[typeof s=="boolean"?s:fl(s),o]},useSyncExternalStore:Rg,useId:ty};Ss.useCacheRefresh=ny,Ss.useMemoCache=Td,Ss.useHostTransitionStatus=Id,Ss.useFormState=qg,Ss.useActionState=qg,Ss.useOptimistic=function(s,o){var l=Dt();return Vg(l,st,s,o)};var Ur={readContext:un,use:ic,useCallback:Zg,useContext:un,useEffect:xd,useImperativeHandle:Qg,useInsertionEffect:$g,useLayoutEffect:Yg,useMemo:Xg,useReducer:Cd,useRef:Gg,useState:function(){return Cd($i)},useDebugValue:wd,useDeferredValue:function(s,o){var l=Dt();return st===null?Rd(l,s,o):Jg(l,st.memoizedState,s,o)},useTransition:function(){var s=Cd($i)[0],o=Dt().memoizedState;return[typeof s=="boolean"?s:fl(s),o]},useSyncExternalStore:Rg,useId:ty};Ur.useCacheRefresh=ny,Ur.useMemoCache=Td,Ur.useHostTransitionStatus=Id,Ur.useFormState=zg,Ur.useActionState=zg,Ur.useOptimistic=function(s,o){var l=Dt();return st!==null?Vg(l,st,s,o):(l.baseState=s,[s,l.queue.dispatch])};function Md(s,o,l,u){o=s.memoizedState,l=l(u,o),l=l==null?o:N({},o,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var Dd={isMounted:function(s){return(s=s._reactInternals)?Ce(s)===s:!1},enqueueSetState:function(s,o,l){s=s._reactInternals;var u=Vn(),p=Rs(u);p.payload=o,l!=null&&(p.callback=l),o=bs(s,p,u),o!==null&&(yn(o,s,u),pl(o,s,u))},enqueueReplaceState:function(s,o,l){s=s._reactInternals;var u=Vn(),p=Rs(u);p.tag=1,p.payload=o,l!=null&&(p.callback=l),o=bs(s,p,u),o!==null&&(yn(o,s,u),pl(o,s,u))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var l=Vn(),u=Rs(l);u.tag=2,o!=null&&(u.callback=o),o=bs(s,u,l),o!==null&&(yn(o,s,l),pl(o,s,l))}};function oy(s,o,l,u,p,v,C){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(u,v,C):o.prototype&&o.prototype.isPureReactComponent?!Wa(l,u)||!Wa(p,v):!0}function ay(s,o,l,u){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,u),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,u),o.state!==s&&Dd.enqueueReplaceState(o,o.state,null)}function Or(s,o){var l=o;if("ref"in o){l={};for(var u in o)u!=="ref"&&(l[u]=o[u])}if(s=s.defaultProps){l===o&&(l=N({},l));for(var p in s)l[p]===void 0&&(l[p]=s[p])}return l}var lc=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function ly(s){lc(s)}function uy(s){console.error(s)}function cy(s){lc(s)}function uc(s,o){try{var l=s.onUncaughtError;l(o.value,{componentStack:o.stack})}catch(u){setTimeout(function(){throw u})}}function fy(s,o,l){try{var u=s.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Vd(s,o,l){return l=Rs(l),l.tag=3,l.payload={element:null},l.callback=function(){uc(s,o)},l}function dy(s){return s=Rs(s),s.tag=3,s}function hy(s,o,l,u){var p=l.type.getDerivedStateFromError;if(typeof p=="function"){var v=u.value;s.payload=function(){return p(v)},s.callback=function(){fy(o,l,u)}}var C=l.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(s.callback=function(){fy(o,l,u),typeof p!="function"&&(Ps===null?Ps=new Set([this]):Ps.add(this));var R=u.stack;this.componentDidCatch(u.value,{componentStack:R!==null?R:""})})}function UA(s,o,l,u,p){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(o=l.alternate,o!==null&&ml(o,l,p,!0),l=Gn.current,l!==null){switch(l.tag){case 13:return Si===null?mh():l.alternate===null&&Ct===0&&(Ct=3),l.flags&=-257,l.flags|=65536,l.lanes=p,u===ud?l.flags|=16384:(o=l.updateQueue,o===null?l.updateQueue=new Set([u]):o.add(u),gh(s,u,p)),!1;case 22:return l.flags|=65536,u===ud?l.flags|=16384:(o=l.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=o):(l=o.retryQueue,l===null?o.retryQueue=new Set([u]):l.add(u)),gh(s,u,p)),!1}throw Error(n(435,l.tag))}return gh(s,u,p),mh(),!1}if(Je)return o=Gn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=p,u!==ld&&(s=Error(n(422),{cause:u}),il(qn(s,l)))):(u!==ld&&(o=Error(n(423),{cause:u}),il(qn(o,l))),s=s.current.alternate,s.flags|=65536,p&=-p,s.lanes|=p,u=qn(u,l),p=Vd(s.stateNode,u,p),Qd(s,p),Ct!==4&&(Ct=2)),!1;var v=Error(n(520),{cause:u});if(v=qn(v,l),Al===null?Al=[v]:Al.push(v),Ct!==4&&(Ct=2),o===null)return!0;u=qn(u,l),l=o;do{switch(l.tag){case 3:return l.flags|=65536,s=p&-p,l.lanes|=s,s=Vd(l.stateNode,u,s),Qd(l,s),!1;case 1:if(o=l.type,v=l.stateNode,(l.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Ps===null||!Ps.has(v))))return l.flags|=65536,p&=-p,l.lanes|=p,p=dy(p),hy(p,s,l,u),Qd(l,p),!1}l=l.return}while(l!==null);return!1}var my=Error(n(461)),Yt=!1;function en(s,o,l,u){o.child=s===null?_g(o,null,l,u):Vr(o,s.child,l,u)}function py(s,o,l,u,p){l=l.render;var v=o.ref;if("ref"in u){var C={};for(var R in u)R!=="ref"&&(C[R]=u[R])}else C=u;return qr(o),u=gd(s,o,l,C,v,p),R=yd(),s!==null&&!Yt?(vd(s,o,p),Yi(s,o,p)):(Je&&R&&od(o),o.flags|=1,en(s,o,u,p),o.child)}function gy(s,o,l,u,p){if(s===null){var v=l.type;return typeof v=="function"&&!nh(v)&&v.defaultProps===void 0&&l.compare===null?(o.tag=15,o.type=v,yy(s,o,v,u,p)):(s=mc(l.type,null,u,o,o.mode,p),s.ref=o.ref,s.return=o,o.child=s)}if(v=s.child,!zd(s,p)){var C=v.memoizedProps;if(l=l.compare,l=l!==null?l:Wa,l(C,u)&&s.ref===o.ref)return Yi(s,o,p)}return o.flags|=1,s=Ds(v,u),s.ref=o.ref,s.return=o,o.child=s}function yy(s,o,l,u,p){if(s!==null){var v=s.memoizedProps;if(Wa(v,u)&&s.ref===o.ref)if(Yt=!1,o.pendingProps=u=v,zd(s,p))(s.flags&131072)!==0&&(Yt=!0);else return o.lanes=s.lanes,Yi(s,o,p)}return Pd(s,o,l,u,p)}function vy(s,o,l){var u=o.pendingProps,p=u.children,v=(o.stateNode._pendingVisibility&2)!==0,C=s!==null?s.memoizedState:null;if(hl(s,o),u.mode==="hidden"||v){if((o.flags&128)!==0){if(u=C!==null?C.baseLanes|l:l,s!==null){for(p=o.child=s.child,v=0;p!==null;)v=v|p.lanes|p.childLanes,p=p.sibling;o.childLanes=v&~u}else o.childLanes=0,o.child=null;return _y(s,o,u,l)}if((l&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},s!==null&&Wu(o,C!==null?C.cachePool:null),C!==null?Tg(o,C):cd(),Eg(o);else return o.lanes=o.childLanes=536870912,_y(s,o,C!==null?C.baseLanes|l:l,l)}else C!==null?(Wu(o,C.cachePool),Tg(o,C),Cs(),o.memoizedState=null):(s!==null&&Wu(o,null),cd(),Cs());return en(s,o,p,l),o.child}function _y(s,o,l,u){var p=md();return p=p===null?null:{parent:Gt._currentValue,pool:p},o.memoizedState={baseLanes:l,cachePool:p},s!==null&&Wu(o,null),cd(),Eg(o),s!==null&&ml(s,o,u,!0),null}function hl(s,o){var l=o.ref;if(l===null)s!==null&&s.ref!==null&&(o.flags|=2097664);else{if(typeof l!="function"&&typeof l!="object")throw Error(n(284));(s===null||s.ref!==l)&&(o.flags|=2097664)}}function Pd(s,o,l,u,p){return qr(o),l=gd(s,o,l,u,void 0,p),u=yd(),s!==null&&!Yt?(vd(s,o,p),Yi(s,o,p)):(Je&&u&&od(o),o.flags|=1,en(s,o,l,p),o.child)}function Ty(s,o,l,u,p,v){return qr(o),o.updateQueue=null,l=wg(o,u,l,p),xg(s),u=yd(),s!==null&&!Yt?(vd(s,o,v),Yi(s,o,v)):(Je&&u&&od(o),o.flags|=1,en(s,o,l,v),o.child)}function Ey(s,o,l,u,p){if(qr(o),o.stateNode===null){var v=So,C=l.contextType;typeof C=="object"&&C!==null&&(v=un(C)),v=new l(u,v),o.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Dd,o.stateNode=v,v._reactInternals=o,v=o.stateNode,v.props=u,v.state=o.memoizedState,v.refs={},Yd(o),C=l.contextType,v.context=typeof C=="object"&&C!==null?un(C):So,v.state=o.memoizedState,C=l.getDerivedStateFromProps,typeof C=="function"&&(Md(o,l,C,u),v.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(C=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),C!==v.state&&Dd.enqueueReplaceState(v,v.state,null),yl(o,u,v,p),gl(),v.state=o.memoizedState),typeof v.componentDidMount=="function"&&(o.flags|=4194308),u=!0}else if(s===null){v=o.stateNode;var R=o.memoizedProps,V=Or(l,R);v.props=V;var q=v.context,Z=l.contextType;C=So,typeof Z=="object"&&Z!==null&&(C=un(Z));var ne=l.getDerivedStateFromProps;Z=typeof ne=="function"||typeof v.getSnapshotBeforeUpdate=="function",R=o.pendingProps!==R,Z||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(R||q!==C)&&ay(o,v,u,C),ws=!1;var Y=o.memoizedState;v.state=Y,yl(o,u,v,p),gl(),q=o.memoizedState,R||Y!==q||ws?(typeof ne=="function"&&(Md(o,l,ne,u),q=o.memoizedState),(V=ws||oy(o,l,V,u,Y,q,C))?(Z||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(o.flags|=4194308)):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=u,o.memoizedState=q),v.props=u,v.state=q,v.context=C,u=V):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),u=!1)}else{v=o.stateNode,Kd(s,o),C=o.memoizedProps,Z=Or(l,C),v.props=Z,ne=o.pendingProps,Y=v.context,q=l.contextType,V=So,typeof q=="object"&&q!==null&&(V=un(q)),R=l.getDerivedStateFromProps,(q=typeof R=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(C!==ne||Y!==V)&&ay(o,v,u,V),ws=!1,Y=o.memoizedState,v.state=Y,yl(o,u,v,p),gl();var Q=o.memoizedState;C!==ne||Y!==Q||ws||s!==null&&s.dependencies!==null&&cc(s.dependencies)?(typeof R=="function"&&(Md(o,l,R,u),Q=o.memoizedState),(Z=ws||oy(o,l,Z,u,Y,Q,V)||s!==null&&s.dependencies!==null&&cc(s.dependencies))?(q||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(u,Q,V),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(u,Q,V)),typeof v.componentDidUpdate=="function"&&(o.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof v.componentDidUpdate!="function"||C===s.memoizedProps&&Y===s.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&Y===s.memoizedState||(o.flags|=1024),o.memoizedProps=u,o.memoizedState=Q),v.props=u,v.state=Q,v.context=V,u=Z):(typeof v.componentDidUpdate!="function"||C===s.memoizedProps&&Y===s.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&Y===s.memoizedState||(o.flags|=1024),u=!1)}return v=u,hl(s,o),u=(o.flags&128)!==0,v||u?(v=o.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:v.render(),o.flags|=1,s!==null&&u?(o.child=Vr(o,s.child,null,p),o.child=Vr(o,null,l,p)):en(s,o,l,p),o.memoizedState=v.state,s=o.child):s=Yi(s,o,p),s}function Cy(s,o,l,u){return nl(),o.flags|=256,en(s,o,l,u),o.child}var kd={dehydrated:null,treeContext:null,retryLane:0};function Ld(s){return{baseLanes:s,cachePool:Sg()}}function Ud(s,o,l){return s=s!==null?s.childLanes&~l:0,o&&(s|=Kn),s}function Ay(s,o,l){var u=o.pendingProps,p=!1,v=(o.flags&128)!==0,C;if((C=v)||(C=s!==null&&s.memoizedState===null?!1:(zt.current&2)!==0),C&&(p=!0,o.flags&=-129),C=(o.flags&32)!==0,o.flags&=-33,s===null){if(Je){if(p?Es(o):Cs(),Je){var R=Wt,V;if(V=R){e:{for(V=R,R=Ai;V.nodeType!==8;){if(!R){R=null;break e}if(V=ci(V.nextSibling),V===null){R=null;break e}}R=V}R!==null?(o.memoizedState={dehydrated:R,treeContext:Nr!==null?{id:zi,overflow:Gi}:null,retryLane:536870912},V=Yn(18,null,null,0),V.stateNode=R,V.return=o,o.child=V,gn=o,Wt=null,V=!0):V=!1}V||Dr(o)}if(R=o.memoizedState,R!==null&&(R=R.dehydrated,R!==null))return R.data==="$!"?o.lanes=16:o.lanes=536870912,null;Hi(o)}return R=u.children,u=u.fallback,p?(Cs(),p=o.mode,R=Fd({mode:"hidden",children:R},p),u=zr(u,p,l,null),R.return=o,u.return=o,R.sibling=u,o.child=R,p=o.child,p.memoizedState=Ld(l),p.childLanes=Ud(s,C,l),o.memoizedState=kd,u):(Es(o),Od(o,R))}if(V=s.memoizedState,V!==null&&(R=V.dehydrated,R!==null)){if(v)o.flags&256?(Es(o),o.flags&=-257,o=qd(s,o,l)):o.memoizedState!==null?(Cs(),o.child=s.child,o.flags|=128,o=null):(Cs(),p=u.fallback,R=o.mode,u=Fd({mode:"visible",children:u.children},R),p=zr(p,R,l,null),p.flags|=2,u.return=o,p.return=o,u.sibling=p,o.child=u,Vr(o,s.child,null,l),u=o.child,u.memoizedState=Ld(l),u.childLanes=Ud(s,C,l),o.memoizedState=kd,o=p);else if(Es(o),R.data==="$!"){if(C=R.nextSibling&&R.nextSibling.dataset,C)var q=C.dgst;C=q,u=Error(n(419)),u.stack="",u.digest=C,il({value:u,source:null,stack:null}),o=qd(s,o,l)}else if(Yt||ml(s,o,l,!1),C=(l&s.childLanes)!==0,Yt||C){if(C=ut,C!==null){if(u=l&-l,(u&42)!==0)u=1;else switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=64;break;case 268435456:u=134217728;break;default:u=0}if(u=(u&(C.suspendedLanes|l))!==0?0:u,u!==0&&u!==V.retryLane)throw V.retryLane=u,Ts(s,u),yn(C,s,u),my}R.data==="$?"||mh(),o=qd(s,o,l)}else R.data==="$?"?(o.flags|=128,o.child=s.child,o=jA.bind(null,s),R._reactRetry=o,o=null):(s=V.treeContext,Wt=ci(R.nextSibling),gn=o,Je=!0,li=null,Ai=!1,s!==null&&(Bn[zn++]=zi,Bn[zn++]=Gi,Bn[zn++]=Nr,zi=s.id,Gi=s.overflow,Nr=o),o=Od(o,u.children),o.flags|=4096);return o}return p?(Cs(),p=u.fallback,R=o.mode,V=s.child,q=V.sibling,u=Ds(V,{mode:"hidden",children:u.children}),u.subtreeFlags=V.subtreeFlags&31457280,q!==null?p=Ds(q,p):(p=zr(p,R,l,null),p.flags|=2),p.return=o,u.return=o,u.sibling=p,o.child=u,u=p,p=o.child,R=s.child.memoizedState,R===null?R=Ld(l):(V=R.cachePool,V!==null?(q=Gt._currentValue,V=V.parent!==q?{parent:q,pool:q}:V):V=Sg(),R={baseLanes:R.baseLanes|l,cachePool:V}),p.memoizedState=R,p.childLanes=Ud(s,C,l),o.memoizedState=kd,u):(Es(o),l=s.child,s=l.sibling,l=Ds(l,{mode:"visible",children:u.children}),l.return=o,l.sibling=null,s!==null&&(C=o.deletions,C===null?(o.deletions=[s],o.flags|=16):C.push(s)),o.child=l,o.memoizedState=null,l)}function Od(s,o){return o=Fd({mode:"visible",children:o},s.mode),o.return=s,s.child=o}function Fd(s,o){return Zy(s,o,0,null)}function qd(s,o,l){return Vr(o,s.child,null,l),s=Od(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function Sy(s,o,l){s.lanes|=o;var u=s.alternate;u!==null&&(u.lanes|=o),Hd(s.return,o,l)}function Bd(s,o,l,u,p){var v=s.memoizedState;v===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:p}:(v.isBackwards=o,v.rendering=null,v.renderingStartTime=0,v.last=u,v.tail=l,v.tailMode=p)}function xy(s,o,l){var u=o.pendingProps,p=u.revealOrder,v=u.tail;if(en(s,o,u.children,l),u=zt.current,(u&2)!==0)u=u&1|2,o.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Sy(s,l,o);else if(s.tag===19)Sy(s,l,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}u&=1}switch(at(zt,u),p){case"forwards":for(l=o.child,p=null;l!==null;)s=l.alternate,s!==null&&ju(s)===null&&(p=l),l=l.sibling;l=p,l===null?(p=o.child,o.child=null):(p=l.sibling,l.sibling=null),Bd(o,!1,p,l,v);break;case"backwards":for(l=null,p=o.child,o.child=null;p!==null;){if(s=p.alternate,s!==null&&ju(s)===null){o.child=p;break}s=p.sibling,p.sibling=l,l=p,p=s}Bd(o,!0,l,null,v);break;case"together":Bd(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Yi(s,o,l){if(s!==null&&(o.dependencies=s.dependencies),Vs|=o.lanes,(l&o.childLanes)===0)if(s!==null){if(ml(s,o,l,!1),(l&o.childLanes)===0)return null}else return null;if(s!==null&&o.child!==s.child)throw Error(n(153));if(o.child!==null){for(s=o.child,l=Ds(s,s.pendingProps),o.child=l,l.return=o;s.sibling!==null;)s=s.sibling,l=l.sibling=Ds(s,s.pendingProps),l.return=o;l.sibling=null}return o.child}function zd(s,o){return(s.lanes&o)!==0?!0:(s=s.dependencies,!!(s!==null&&cc(s)))}function OA(s,o,l){switch(o.tag){case 3:ro(o,o.stateNode.containerInfo),xs(o,Gt,s.memoizedState.cache),nl();break;case 27:case 5:ur(o);break;case 4:ro(o,o.stateNode.containerInfo);break;case 10:xs(o,o.type,o.memoizedProps.value);break;case 13:var u=o.memoizedState;if(u!==null)return u.dehydrated!==null?(Es(o),o.flags|=128,null):(l&o.child.childLanes)!==0?Ay(s,o,l):(Es(o),s=Yi(s,o,l),s!==null?s.sibling:null);Es(o);break;case 19:var p=(s.flags&128)!==0;if(u=(l&o.childLanes)!==0,u||(ml(s,o,l,!1),u=(l&o.childLanes)!==0),p){if(u)return xy(s,o,l);o.flags|=128}if(p=o.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),at(zt,zt.current),u)break;return null;case 22:case 23:return o.lanes=0,vy(s,o,l);case 24:xs(o,Gt,s.memoizedState.cache)}return Yi(s,o,l)}function wy(s,o,l){if(s!==null)if(s.memoizedProps!==o.pendingProps)Yt=!0;else{if(!zd(s,l)&&(o.flags&128)===0)return Yt=!1,OA(s,o,l);Yt=(s.flags&131072)!==0}else Yt=!1,Je&&(o.flags&1048576)!==0&&cg(o,Ku,o.index);switch(o.lanes=0,o.tag){case 16:e:{s=o.pendingProps;var u=o.elementType,p=u._init;if(u=p(u._payload),o.type=u,typeof u=="function")nh(u)?(s=Or(u,s),o.tag=1,o=Ey(null,o,u,s,l)):(o.tag=0,o=Pd(null,o,u,s,l));else{if(u!=null){if(p=u.$$typeof,p===U){o.tag=11,o=py(null,o,u,s,l);break e}else if(p===W){o.tag=14,o=gy(null,o,u,s,l);break e}}throw o=D(u)||u,Error(n(306,o,""))}}return o;case 0:return Pd(s,o,o.type,o.pendingProps,l);case 1:return u=o.type,p=Or(u,o.pendingProps),Ey(s,o,u,p,l);case 3:e:{if(ro(o,o.stateNode.containerInfo),s===null)throw Error(n(387));var v=o.pendingProps;p=o.memoizedState,u=p.element,Kd(s,o),yl(o,v,null,l);var C=o.memoizedState;if(v=C.cache,xs(o,Gt,v),v!==p.cache&&$d(o,[Gt],l,!0),gl(),v=C.element,p.isDehydrated)if(p={element:v,isDehydrated:!1,cache:C.cache},o.updateQueue.baseState=p,o.memoizedState=p,o.flags&256){o=Cy(s,o,v,l);break e}else if(v!==u){u=qn(Error(n(424)),o),il(u),o=Cy(s,o,v,l);break e}else for(Wt=ci(o.stateNode.containerInfo.firstChild),gn=o,Je=!0,li=null,Ai=!0,l=_g(o,null,v,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(nl(),v===u){o=Yi(s,o,l);break e}en(s,o,v,l)}o=o.child}return o;case 26:return hl(s,o),s===null?(l=Iv(o.type,null,o.pendingProps,null))?o.memoizedState=l:Je||(l=o.type,s=o.pendingProps,u=wc(Ln.current).createElement(l),u[qt]=o,u[jt]=s,tn(u,l,s),Tt(u),o.stateNode=u):o.memoizedState=Iv(o.type,s.memoizedProps,o.pendingProps,s.memoizedState),null;case 27:return ur(o),s===null&&Je&&(u=o.stateNode=wv(o.type,o.pendingProps,Ln.current),gn=o,Ai=!0,Wt=ci(u.firstChild)),u=o.pendingProps.children,s!==null||Je?en(s,o,u,l):o.child=Vr(o,null,u,l),hl(s,o),o.child;case 5:return s===null&&Je&&((p=u=Wt)&&(u=mS(u,o.type,o.pendingProps,Ai),u!==null?(o.stateNode=u,gn=o,Wt=ci(u.firstChild),Ai=!1,p=!0):p=!1),p||Dr(o)),ur(o),p=o.type,v=o.pendingProps,C=s!==null?s.memoizedProps:null,u=v.children,bh(p,v)?u=null:C!==null&&bh(p,C)&&(o.flags|=32),o.memoizedState!==null&&(p=gd(s,o,MA,null,null,l),Dl._currentValue=p),hl(s,o),en(s,o,u,l),o.child;case 6:return s===null&&Je&&((s=l=Wt)&&(l=pS(l,o.pendingProps,Ai),l!==null?(o.stateNode=l,gn=o,Wt=null,s=!0):s=!1),s||Dr(o)),null;case 13:return Ay(s,o,l);case 4:return ro(o,o.stateNode.containerInfo),u=o.pendingProps,s===null?o.child=Vr(o,null,u,l):en(s,o,u,l),o.child;case 11:return py(s,o,o.type,o.pendingProps,l);case 7:return en(s,o,o.pendingProps,l),o.child;case 8:return en(s,o,o.pendingProps.children,l),o.child;case 12:return en(s,o,o.pendingProps.children,l),o.child;case 10:return u=o.pendingProps,xs(o,o.type,u.value),en(s,o,u.children,l),o.child;case 9:return p=o.type._context,u=o.pendingProps.children,qr(o),p=un(p),u=u(p),o.flags|=1,en(s,o,u,l),o.child;case 14:return gy(s,o,o.type,o.pendingProps,l);case 15:return yy(s,o,o.type,o.pendingProps,l);case 19:return xy(s,o,l);case 22:return vy(s,o,l);case 24:return qr(o),u=un(Gt),s===null?(p=md(),p===null&&(p=ut,v=dd(),p.pooledCache=v,v.refCount++,v!==null&&(p.pooledCacheLanes|=l),p=v),o.memoizedState={parent:u,cache:p},Yd(o),xs(o,Gt,p)):((s.lanes&l)!==0&&(Kd(s,o),yl(o,null,null,l),gl()),p=s.memoizedState,v=o.memoizedState,p.parent!==u?(p={parent:u,cache:u},o.memoizedState=p,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=p),xs(o,Gt,u)):(u=v.cache,xs(o,Gt,u),u!==p.cache&&$d(o,[Gt],l,!0))),en(s,o,o.pendingProps.children,l),o.child;case 29:throw o.pendingProps}throw Error(n(156,o.tag))}var Gd=Ke(null),Fr=null,Ki=null;function xs(s,o,l){at(Gd,o._currentValue),o._currentValue=l}function Qi(s){s._currentValue=Gd.current,gt(Gd)}function Hd(s,o,l){for(;s!==null;){var u=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,u!==null&&(u.childLanes|=o)):u!==null&&(u.childLanes&o)!==o&&(u.childLanes|=o),s===l)break;s=s.return}}function $d(s,o,l,u){var p=s.child;for(p!==null&&(p.return=s);p!==null;){var v=p.dependencies;if(v!==null){var C=p.child;v=v.firstContext;e:for(;v!==null;){var R=v;v=p;for(var V=0;V<o.length;V++)if(R.context===o[V]){v.lanes|=l,R=v.alternate,R!==null&&(R.lanes|=l),Hd(v.return,l,s),u||(C=null);break e}v=R.next}}else if(p.tag===18){if(C=p.return,C===null)throw Error(n(341));C.lanes|=l,v=C.alternate,v!==null&&(v.lanes|=l),Hd(C,l,s),C=null}else C=p.child;if(C!==null)C.return=p;else for(C=p;C!==null;){if(C===s){C=null;break}if(p=C.sibling,p!==null){p.return=C.return,C=p;break}C=C.return}p=C}}function ml(s,o,l,u){s=null;for(var p=o,v=!1;p!==null;){if(!v){if((p.flags&524288)!==0)v=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var C=p.alternate;if(C===null)throw Error(n(387));if(C=C.memoizedProps,C!==null){var R=p.type;In(p.pendingProps.value,C.value)||(s!==null?s.push(R):s=[R])}}else if(p===lr.current){if(C=p.alternate,C===null)throw Error(n(387));C.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(s!==null?s.push(Dl):s=[Dl])}p=p.return}s!==null&&$d(o,s,l,u),o.flags|=262144}function cc(s){for(s=s.firstContext;s!==null;){if(!In(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function qr(s){Fr=s,Ki=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function un(s){return Ry(Fr,s)}function fc(s,o){return Fr===null&&qr(s),Ry(s,o)}function Ry(s,o){var l=o._currentValue;if(o={context:o,memoizedValue:l,next:null},Ki===null){if(s===null)throw Error(n(308));Ki=o,s.dependencies={lanes:0,firstContext:o},s.flags|=524288}else Ki=Ki.next=o;return l}var ws=!1;function Yd(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Kd(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Rs(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function bs(s,o,l){var u=s.updateQueue;if(u===null)return null;if(u=u.shared,(vt&2)!==0){var p=u.pending;return p===null?o.next=o:(o.next=p.next,p.next=o),u.pending=o,o=$u(s),lg(s,null,l),o}return Hu(s,u,o,l),$u(s)}function pl(s,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194176)!==0)){var u=o.lanes;u&=s.pendingLanes,l|=u,o.lanes=l,Da(s,l)}}function Qd(s,o){var l=s.updateQueue,u=s.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var p=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var C={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};v===null?p=v=C:v=v.next=C,l=l.next}while(l!==null);v===null?p=v=o:v=v.next=o}else p=v=o;l={baseState:u.baseState,firstBaseUpdate:p,lastBaseUpdate:v,shared:u.shared,callbacks:u.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=o:s.next=o,l.lastBaseUpdate=o}var Zd=!1;function gl(){if(Zd){var s=No;if(s!==null)throw s}}function yl(s,o,l,u){Zd=!1;var p=s.updateQueue;ws=!1;var v=p.firstBaseUpdate,C=p.lastBaseUpdate,R=p.shared.pending;if(R!==null){p.shared.pending=null;var V=R,q=V.next;V.next=null,C===null?v=q:C.next=q,C=V;var Z=s.alternate;Z!==null&&(Z=Z.updateQueue,R=Z.lastBaseUpdate,R!==C&&(R===null?Z.firstBaseUpdate=q:R.next=q,Z.lastBaseUpdate=V))}if(v!==null){var ne=p.baseState;C=0,Z=q=V=null,R=v;do{var Y=R.lane&-536870913,Q=Y!==R.lane;if(Q?(Qe&Y)===Y:(u&Y)===Y){Y!==0&&Y===Io&&(Zd=!0),Z!==null&&(Z=Z.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var ve=s,Ve=R;Y=o;var At=l;switch(Ve.tag){case 1:if(ve=Ve.payload,typeof ve=="function"){ne=ve.call(At,ne,Y);break e}ne=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=Ve.payload,Y=typeof ve=="function"?ve.call(At,ne,Y):ve,Y==null)break e;ne=N({},ne,Y);break e;case 2:ws=!0}}Y=R.callback,Y!==null&&(s.flags|=64,Q&&(s.flags|=8192),Q=p.callbacks,Q===null?p.callbacks=[Y]:Q.push(Y))}else Q={lane:Y,tag:R.tag,payload:R.payload,callback:R.callback,next:null},Z===null?(q=Z=Q,V=ne):Z=Z.next=Q,C|=Y;if(R=R.next,R===null){if(R=p.shared.pending,R===null)break;Q=R,R=Q.next,Q.next=null,p.lastBaseUpdate=Q,p.shared.pending=null}}while(!0);Z===null&&(V=ne),p.baseState=V,p.firstBaseUpdate=q,p.lastBaseUpdate=Z,v===null&&(p.shared.lanes=0),Vs|=C,s.lanes=C,s.memoizedState=ne}}function by(s,o){if(typeof s!="function")throw Error(n(191,s));s.call(o)}function Iy(s,o){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)by(l[s],o)}function vl(s,o){try{var l=o.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var p=u.next;l=p;do{if((l.tag&s)===s){u=void 0;var v=l.create,C=l.inst;u=v(),C.destroy=u}l=l.next}while(l!==p)}}catch(R){ot(o,o.return,R)}}function Is(s,o,l){try{var u=o.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var v=p.next;u=v;do{if((u.tag&s)===s){var C=u.inst,R=C.destroy;if(R!==void 0){C.destroy=void 0,p=o;var V=l;try{R()}catch(q){ot(p,V,q)}}}u=u.next}while(u!==v)}}catch(q){ot(o,o.return,q)}}function Ny(s){var o=s.updateQueue;if(o!==null){var l=s.stateNode;try{Iy(o,l)}catch(u){ot(s,s.return,u)}}}function My(s,o,l){l.props=Or(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(u){ot(s,o,u)}}function Br(s,o){try{var l=s.ref;if(l!==null){var u=s.stateNode;switch(s.tag){case 26:case 27:case 5:var p=u;break;default:p=u}typeof l=="function"?s.refCleanup=l(p):l.current=p}}catch(v){ot(s,o,v)}}function Nn(s,o){var l=s.ref,u=s.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(p){ot(s,o,p)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(p){ot(s,o,p)}else l.current=null}function Dy(s){var o=s.type,l=s.memoizedProps,u=s.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break e;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(p){ot(s,s.return,p)}}function Vy(s,o,l){try{var u=s.stateNode;uS(u,s.type,l,o),u[jt]=o}catch(p){ot(s,s.return,p)}}function Py(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27||s.tag===4}function Xd(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Py(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==27&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Jd(s,o,l){var u=s.tag;if(u===5||u===6)s=s.stateNode,o?l.nodeType===8?l.parentNode.insertBefore(s,o):l.insertBefore(s,o):(l.nodeType===8?(o=l.parentNode,o.insertBefore(s,l)):(o=l,o.appendChild(s)),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=xc));else if(u!==4&&u!==27&&(s=s.child,s!==null))for(Jd(s,o,l),s=s.sibling;s!==null;)Jd(s,o,l),s=s.sibling}function dc(s,o,l){var u=s.tag;if(u===5||u===6)s=s.stateNode,o?l.insertBefore(s,o):l.appendChild(s);else if(u!==4&&u!==27&&(s=s.child,s!==null))for(dc(s,o,l),s=s.sibling;s!==null;)dc(s,o,l),s=s.sibling}var Zi=!1,Et=!1,jd=!1,ky=typeof WeakSet=="function"?WeakSet:Set,Kt=null,Ly=!1;function FA(s,o){if(s=s.containerInfo,wh=Dc,s=Wp(s),ed(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var p=u.anchorOffset,v=u.focusNode;u=u.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break e}var C=0,R=-1,V=-1,q=0,Z=0,ne=s,Y=null;t:for(;;){for(var Q;ne!==l||p!==0&&ne.nodeType!==3||(R=C+p),ne!==v||u!==0&&ne.nodeType!==3||(V=C+u),ne.nodeType===3&&(C+=ne.nodeValue.length),(Q=ne.firstChild)!==null;)Y=ne,ne=Q;for(;;){if(ne===s)break t;if(Y===l&&++q===p&&(R=C),Y===v&&++Z===u&&(V=C),(Q=ne.nextSibling)!==null)break;ne=Y,Y=ne.parentNode}ne=Q}l=R===-1||V===-1?null:{start:R,end:V}}else l=null}l=l||{start:0,end:0}}else l=null;for(Rh={focusedElem:s,selectionRange:l},Dc=!1,Kt=o;Kt!==null;)if(o=Kt,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,Kt=s;else for(;Kt!==null;){switch(o=Kt,v=o.alternate,s=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&v!==null){s=void 0,l=o,p=v.memoizedProps,v=v.memoizedState,u=l.stateNode;try{var ve=Or(l.type,p,l.elementType===l.type);s=u.getSnapshotBeforeUpdate(ve,v),u.__reactInternalSnapshotBeforeUpdate=s}catch(Ve){ot(l,l.return,Ve)}}break;case 3:if((s&1024)!==0){if(s=o.stateNode.containerInfo,l=s.nodeType,l===9)Mh(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Mh(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(n(163))}if(s=o.sibling,s!==null){s.return=o.return,Kt=s;break}Kt=o.return}return ve=Ly,Ly=!1,ve}function Uy(s,o,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:Ji(s,l),u&4&&vl(5,l);break;case 1:if(Ji(s,l),u&4)if(s=l.stateNode,o===null)try{s.componentDidMount()}catch(R){ot(l,l.return,R)}else{var p=Or(l.type,o.memoizedProps);o=o.memoizedState;try{s.componentDidUpdate(p,o,s.__reactInternalSnapshotBeforeUpdate)}catch(R){ot(l,l.return,R)}}u&64&&Ny(l),u&512&&Br(l,l.return);break;case 3:if(Ji(s,l),u&64&&(u=l.updateQueue,u!==null)){if(s=null,l.child!==null)switch(l.child.tag){case 27:case 5:s=l.child.stateNode;break;case 1:s=l.child.stateNode}try{Iy(u,s)}catch(R){ot(l,l.return,R)}}break;case 26:Ji(s,l),u&512&&Br(l,l.return);break;case 27:case 5:Ji(s,l),o===null&&u&4&&Dy(l),u&512&&Br(l,l.return);break;case 12:Ji(s,l);break;case 13:Ji(s,l),u&4&&qy(s,l);break;case 22:if(p=l.memoizedState!==null||Zi,!p){o=o!==null&&o.memoizedState!==null||Et;var v=Zi,C=Et;Zi=p,(Et=o)&&!C?Ns(s,l,(l.subtreeFlags&8772)!==0):Ji(s,l),Zi=v,Et=C}u&512&&(l.memoizedProps.mode==="manual"?Br(l,l.return):Nn(l,l.return));break;default:Ji(s,l)}}function Oy(s){var o=s.alternate;o!==null&&(s.alternate=null,Oy(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&fs(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Vt=null,Mn=!1;function Xi(s,o,l){for(l=l.child;l!==null;)Fy(s,o,l),l=l.sibling}function Fy(s,o,l){if(Xt&&typeof Xt.onCommitFiberUnmount=="function")try{Xt.onCommitFiberUnmount(ei,l)}catch{}switch(l.tag){case 26:Et||Nn(l,o),Xi(s,o,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Et||Nn(l,o);var u=Vt,p=Mn;for(Vt=l.stateNode,Xi(s,o,l),l=l.stateNode,o=l.attributes;o.length;)l.removeAttributeNode(o[0]);fs(l),Vt=u,Mn=p;break;case 5:Et||Nn(l,o);case 6:p=Vt;var v=Mn;if(Vt=null,Xi(s,o,l),Vt=p,Mn=v,Vt!==null)if(Mn)try{s=Vt,u=l.stateNode,s.nodeType===8?s.parentNode.removeChild(u):s.removeChild(u)}catch(C){ot(l,o,C)}else try{Vt.removeChild(l.stateNode)}catch(C){ot(l,o,C)}break;case 18:Vt!==null&&(Mn?(o=Vt,l=l.stateNode,o.nodeType===8?Nh(o.parentNode,l):o.nodeType===1&&Nh(o,l),Ll(o)):Nh(Vt,l.stateNode));break;case 4:u=Vt,p=Mn,Vt=l.stateNode.containerInfo,Mn=!0,Xi(s,o,l),Vt=u,Mn=p;break;case 0:case 11:case 14:case 15:Et||Is(2,l,o),Et||Is(4,l,o),Xi(s,o,l);break;case 1:Et||(Nn(l,o),u=l.stateNode,typeof u.componentWillUnmount=="function"&&My(l,o,u)),Xi(s,o,l);break;case 21:Xi(s,o,l);break;case 22:Et||Nn(l,o),Et=(u=Et)||l.memoizedState!==null,Xi(s,o,l),Et=u;break;default:Xi(s,o,l)}}function qy(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Ll(s)}catch(l){ot(o,o.return,l)}}function qA(s){switch(s.tag){case 13:case 19:var o=s.stateNode;return o===null&&(o=s.stateNode=new ky),o;case 22:return s=s.stateNode,o=s._retryCache,o===null&&(o=s._retryCache=new ky),o;default:throw Error(n(435,s.tag))}}function Wd(s,o){var l=qA(s);o.forEach(function(u){var p=WA.bind(null,s,u);l.has(u)||(l.add(u),u.then(p,p))})}function Hn(s,o){var l=o.deletions;if(l!==null)for(var u=0;u<l.length;u++){var p=l[u],v=s,C=o,R=C;e:for(;R!==null;){switch(R.tag){case 27:case 5:Vt=R.stateNode,Mn=!1;break e;case 3:Vt=R.stateNode.containerInfo,Mn=!0;break e;case 4:Vt=R.stateNode.containerInfo,Mn=!0;break e}R=R.return}if(Vt===null)throw Error(n(160));Fy(v,C,p),Vt=null,Mn=!1,v=p.alternate,v!==null&&(v.return=null),p.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)By(o,s),o=o.sibling}var ui=null;function By(s,o){var l=s.alternate,u=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Hn(o,s),$n(s),u&4&&(Is(3,s,s.return),vl(3,s),Is(5,s,s.return));break;case 1:Hn(o,s),$n(s),u&512&&(Et||l===null||Nn(l,l.return)),u&64&&Zi&&(s=s.updateQueue,s!==null&&(u=s.callbacks,u!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var p=ui;if(Hn(o,s),$n(s),u&512&&(Et||l===null||Nn(l,l.return)),u&4){var v=l!==null?l.memoizedState:null;if(u=s.memoizedState,l===null)if(u===null)if(s.stateNode===null){e:{u=s.type,l=s.memoizedProps,p=p.ownerDocument||p;t:switch(u){case"title":v=p.getElementsByTagName("title")[0],(!v||v[gr]||v[qt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=p.createElement(u),p.head.insertBefore(v,p.querySelector("head > title"))),tn(v,u,l),v[qt]=s,Tt(v),u=v;break e;case"link":var C=Dv("link","href",p).get(u+(l.href||""));if(C){for(var R=0;R<C.length;R++)if(v=C[R],v.getAttribute("href")===(l.href==null?null:l.href)&&v.getAttribute("rel")===(l.rel==null?null:l.rel)&&v.getAttribute("title")===(l.title==null?null:l.title)&&v.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){C.splice(R,1);break t}}v=p.createElement(u),tn(v,u,l),p.head.appendChild(v);break;case"meta":if(C=Dv("meta","content",p).get(u+(l.content||""))){for(R=0;R<C.length;R++)if(v=C[R],v.getAttribute("content")===(l.content==null?null:""+l.content)&&v.getAttribute("name")===(l.name==null?null:l.name)&&v.getAttribute("property")===(l.property==null?null:l.property)&&v.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&v.getAttribute("charset")===(l.charSet==null?null:l.charSet)){C.splice(R,1);break t}}v=p.createElement(u),tn(v,u,l),p.head.appendChild(v);break;default:throw Error(n(468,u))}v[qt]=s,Tt(v),u=v}s.stateNode=u}else Vv(p,s.type,s.stateNode);else s.stateNode=Mv(p,u,s.memoizedProps);else v!==u?(v===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):v.count--,u===null?Vv(p,s.type,s.stateNode):Mv(p,u,s.memoizedProps)):u===null&&s.stateNode!==null&&Vy(s,s.memoizedProps,l.memoizedProps)}break;case 27:if(u&4&&s.alternate===null){p=s.stateNode,v=s.memoizedProps;try{for(var V=p.firstChild;V;){var q=V.nextSibling,Z=V.nodeName;V[gr]||Z==="HEAD"||Z==="BODY"||Z==="SCRIPT"||Z==="STYLE"||Z==="LINK"&&V.rel.toLowerCase()==="stylesheet"||p.removeChild(V),V=q}for(var ne=s.type,Y=p.attributes;Y.length;)p.removeAttributeNode(Y[0]);tn(p,ne,v),p[qt]=s,p[jt]=v}catch(ve){ot(s,s.return,ve)}}case 5:if(Hn(o,s),$n(s),u&512&&(Et||l===null||Nn(l,l.return)),s.flags&32){p=s.stateNode;try{Cn(p,"")}catch(ve){ot(s,s.return,ve)}}u&4&&s.stateNode!=null&&(p=s.memoizedProps,Vy(s,p,l!==null?l.memoizedProps:p)),u&1024&&(jd=!0);break;case 6:if(Hn(o,s),$n(s),u&4){if(s.stateNode===null)throw Error(n(162));u=s.memoizedProps,l=s.stateNode;try{l.nodeValue=u}catch(ve){ot(s,s.return,ve)}}break;case 3:if(Ic=null,p=ui,ui=Rc(o.containerInfo),Hn(o,s),ui=p,$n(s),u&4&&l!==null&&l.memoizedState.isDehydrated)try{Ll(o.containerInfo)}catch(ve){ot(s,s.return,ve)}jd&&(jd=!1,zy(s));break;case 4:u=ui,ui=Rc(s.stateNode.containerInfo),Hn(o,s),$n(s),ui=u;break;case 12:Hn(o,s),$n(s);break;case 13:Hn(o,s),$n(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(lh=Un()),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Wd(s,u)));break;case 22:if(u&512&&(Et||l===null||Nn(l,l.return)),V=s.memoizedState!==null,q=l!==null&&l.memoizedState!==null,Z=Zi,ne=Et,Zi=Z||V,Et=ne||q,Hn(o,s),Et=ne,Zi=Z,$n(s),o=s.stateNode,o._current=s,o._visibility&=-3,o._visibility|=o._pendingVisibility&2,u&8192&&(o._visibility=V?o._visibility&-2:o._visibility|1,V&&(o=Zi||Et,l===null||q||o||Po(s)),s.memoizedProps===null||s.memoizedProps.mode!=="manual"))e:for(l=null,o=s;;){if(o.tag===5||o.tag===26||o.tag===27){if(l===null){q=l=o;try{if(p=q.stateNode,V)v=p.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{C=q.stateNode,R=q.memoizedProps.style;var Q=R!=null&&R.hasOwnProperty("display")?R.display:null;C.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(ve){ot(q,q.return,ve)}}}else if(o.tag===6){if(l===null){q=o;try{q.stateNode.nodeValue=V?"":q.memoizedProps}catch(ve){ot(q,q.return,ve)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;l===o&&(l=null),o=o.return}l===o&&(l=null),o.sibling.return=o.return,o=o.sibling}u&4&&(u=s.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,Wd(s,l))));break;case 19:Hn(o,s),$n(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Wd(s,u)));break;case 21:break;default:Hn(o,s),$n(s)}}function $n(s){var o=s.flags;if(o&2){try{if(s.tag!==27){e:{for(var l=s.return;l!==null;){if(Py(l)){var u=l;break e}l=l.return}throw Error(n(160))}switch(u.tag){case 27:var p=u.stateNode,v=Xd(s);dc(s,v,p);break;case 5:var C=u.stateNode;u.flags&32&&(Cn(C,""),u.flags&=-33);var R=Xd(s);dc(s,R,C);break;case 3:case 4:var V=u.stateNode.containerInfo,q=Xd(s);Jd(s,q,V);break;default:throw Error(n(161))}}}catch(Z){ot(s,s.return,Z)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function zy(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var o=s;zy(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),s=s.sibling}}function Ji(s,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Uy(s,o.alternate,o),o=o.sibling}function Po(s){for(s=s.child;s!==null;){var o=s;switch(o.tag){case 0:case 11:case 14:case 15:Is(4,o,o.return),Po(o);break;case 1:Nn(o,o.return);var l=o.stateNode;typeof l.componentWillUnmount=="function"&&My(o,o.return,l),Po(o);break;case 26:case 27:case 5:Nn(o,o.return),Po(o);break;case 22:Nn(o,o.return),o.memoizedState===null&&Po(o);break;default:Po(o)}s=s.sibling}}function Ns(s,o,l){for(l=l&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var u=o.alternate,p=s,v=o,C=v.flags;switch(v.tag){case 0:case 11:case 15:Ns(p,v,l),vl(4,v);break;case 1:if(Ns(p,v,l),u=v,p=u.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(q){ot(u,u.return,q)}if(u=v,p=u.updateQueue,p!==null){var R=u.stateNode;try{var V=p.shared.hiddenCallbacks;if(V!==null)for(p.shared.hiddenCallbacks=null,p=0;p<V.length;p++)by(V[p],R)}catch(q){ot(u,u.return,q)}}l&&C&64&&Ny(v),Br(v,v.return);break;case 26:case 27:case 5:Ns(p,v,l),l&&u===null&&C&4&&Dy(v),Br(v,v.return);break;case 12:Ns(p,v,l);break;case 13:Ns(p,v,l),l&&C&4&&qy(p,v);break;case 22:v.memoizedState===null&&Ns(p,v,l),Br(v,v.return);break;default:Ns(p,v,l)}o=o.sibling}}function eh(s,o){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(s=o.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&ll(l))}function th(s,o){s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&ll(s))}function Ms(s,o,l,u){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Gy(s,o,l,u),o=o.sibling}function Gy(s,o,l,u){var p=o.flags;switch(o.tag){case 0:case 11:case 15:Ms(s,o,l,u),p&2048&&vl(9,o);break;case 3:Ms(s,o,l,u),p&2048&&(s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&ll(s)));break;case 12:if(p&2048){Ms(s,o,l,u),s=o.stateNode;try{var v=o.memoizedProps,C=v.id,R=v.onPostCommit;typeof R=="function"&&R(C,o.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(V){ot(o,o.return,V)}}else Ms(s,o,l,u);break;case 23:break;case 22:v=o.stateNode,o.memoizedState!==null?v._visibility&4?Ms(s,o,l,u):_l(s,o):v._visibility&4?Ms(s,o,l,u):(v._visibility|=4,ko(s,o,l,u,(o.subtreeFlags&10256)!==0)),p&2048&&eh(o.alternate,o);break;case 24:Ms(s,o,l,u),p&2048&&th(o.alternate,o);break;default:Ms(s,o,l,u)}}function ko(s,o,l,u,p){for(p=p&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var v=s,C=o,R=l,V=u,q=C.flags;switch(C.tag){case 0:case 11:case 15:ko(v,C,R,V,p),vl(8,C);break;case 23:break;case 22:var Z=C.stateNode;C.memoizedState!==null?Z._visibility&4?ko(v,C,R,V,p):_l(v,C):(Z._visibility|=4,ko(v,C,R,V,p)),p&&q&2048&&eh(C.alternate,C);break;case 24:ko(v,C,R,V,p),p&&q&2048&&th(C.alternate,C);break;default:ko(v,C,R,V,p)}o=o.sibling}}function _l(s,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var l=s,u=o,p=u.flags;switch(u.tag){case 22:_l(l,u),p&2048&&eh(u.alternate,u);break;case 24:_l(l,u),p&2048&&th(u.alternate,u);break;default:_l(l,u)}o=o.sibling}}var Tl=8192;function Lo(s){if(s.subtreeFlags&Tl)for(s=s.child;s!==null;)Hy(s),s=s.sibling}function Hy(s){switch(s.tag){case 26:Lo(s),s.flags&Tl&&s.memoizedState!==null&&bS(ui,s.memoizedState,s.memoizedProps);break;case 5:Lo(s);break;case 3:case 4:var o=ui;ui=Rc(s.stateNode.containerInfo),Lo(s),ui=o;break;case 22:s.memoizedState===null&&(o=s.alternate,o!==null&&o.memoizedState!==null?(o=Tl,Tl=16777216,Lo(s),Tl=o):Lo(s));break;default:Lo(s)}}function $y(s){var o=s.alternate;if(o!==null&&(s=o.child,s!==null)){o.child=null;do o=s.sibling,s.sibling=null,s=o;while(s!==null)}}function El(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var u=o[l];Kt=u,Ky(u,s)}$y(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Yy(s),s=s.sibling}function Yy(s){switch(s.tag){case 0:case 11:case 15:El(s),s.flags&2048&&Is(9,s,s.return);break;case 3:El(s);break;case 12:El(s);break;case 22:var o=s.stateNode;s.memoizedState!==null&&o._visibility&4&&(s.return===null||s.return.tag!==13)?(o._visibility&=-5,hc(s)):El(s);break;default:El(s)}}function hc(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var u=o[l];Kt=u,Ky(u,s)}$y(s)}for(s=s.child;s!==null;){switch(o=s,o.tag){case 0:case 11:case 15:Is(8,o,o.return),hc(o);break;case 22:l=o.stateNode,l._visibility&4&&(l._visibility&=-5,hc(o));break;default:hc(o)}s=s.sibling}}function Ky(s,o){for(;Kt!==null;){var l=Kt;switch(l.tag){case 0:case 11:case 15:Is(8,l,o);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:ll(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,Kt=u;else e:for(l=s;Kt!==null;){u=Kt;var p=u.sibling,v=u.return;if(Oy(u),u===l){Kt=null;break e}if(p!==null){p.return=v,Kt=p;break e}Kt=v}}}function BA(s,o,l,u){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yn(s,o,l,u){return new BA(s,o,l,u)}function nh(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Ds(s,o){var l=s.alternate;return l===null?(l=Yn(s.tag,o,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=o,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&31457280,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,o=s.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function Qy(s,o){s.flags&=31457282;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=o,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,o=l.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s}function mc(s,o,l,u,p,v){var C=0;if(u=s,typeof s=="function")nh(s)&&(C=1);else if(typeof s=="string")C=wS(s,l,kn.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case y:return zr(l.children,p,v,o);case g:C=8,p|=24;break;case _:return s=Yn(12,l,o,p|2),s.elementType=_,s.lanes=v,s;case G:return s=Yn(13,l,o,p),s.elementType=G,s.lanes=v,s;case B:return s=Yn(19,l,o,p),s.elementType=B,s.lanes=v,s;case te:return Zy(l,p,v,o);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case E:case I:C=10;break e;case S:C=9;break e;case U:C=11;break e;case W:C=14;break e;case J:C=16,u=null;break e}C=29,l=Error(n(130,s===null?"null":typeof s,"")),u=null}return o=Yn(C,l,o,p),o.elementType=s,o.type=u,o.lanes=v,o}function zr(s,o,l,u){return s=Yn(7,s,u,o),s.lanes=l,s}function Zy(s,o,l,u){s=Yn(22,s,u,o),s.elementType=te,s.lanes=l;var p={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var v=p._current;if(v===null)throw Error(n(456));if((p._pendingVisibility&2)===0){var C=Ts(v,2);C!==null&&(p._pendingVisibility|=2,yn(C,v,2))}},attach:function(){var v=p._current;if(v===null)throw Error(n(456));if((p._pendingVisibility&2)!==0){var C=Ts(v,2);C!==null&&(p._pendingVisibility&=-3,yn(C,v,2))}}};return s.stateNode=p,s}function ih(s,o,l){return s=Yn(6,s,null,o),s.lanes=l,s}function sh(s,o,l){return o=Yn(4,s.children!==null?s.children:[],s.key,o),o.lanes=l,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}function ji(s){s.flags|=4}function Xy(s,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Pv(o)){if(o=Gn.current,o!==null&&((Qe&4194176)===Qe?Si!==null:(Qe&62914560)!==Qe&&(Qe&536870912)===0||o!==Si))throw rl=ud,hg;s.flags|=8192}}function pc(s,o){o!==null&&(s.flags|=4),s.flags&16384&&(o=s.tag!==22?Oi():536870912,s.lanes|=o,Oo|=o)}function Cl(s,o){if(!Je)switch(s.tailMode){case"hidden":o=s.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:u.sibling=null}}function yt(s){var o=s.alternate!==null&&s.alternate.child===s.child,l=0,u=0;if(o)for(var p=s.child;p!==null;)l|=p.lanes|p.childLanes,u|=p.subtreeFlags&31457280,u|=p.flags&31457280,p.return=s,p=p.sibling;else for(p=s.child;p!==null;)l|=p.lanes|p.childLanes,u|=p.subtreeFlags,u|=p.flags,p.return=s,p=p.sibling;return s.subtreeFlags|=u,s.childLanes=l,o}function zA(s,o,l){var u=o.pendingProps;switch(ad(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(o),null;case 1:return yt(o),null;case 3:return l=o.stateNode,u=null,s!==null&&(u=s.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),Qi(Gt),hi(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(tl(o)?ji(o):s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,li!==null&&(dh(li),li=null))),yt(o),null;case 26:return l=o.memoizedState,s===null?(ji(o),l!==null?(yt(o),Xy(o,l)):(yt(o),o.flags&=-16777217)):l?l!==s.memoizedState?(ji(o),yt(o),Xy(o,l)):(yt(o),o.flags&=-16777217):(s.memoizedProps!==u&&ji(o),yt(o),o.flags&=-16777217),null;case 27:cr(o),l=Ln.current;var p=o.type;if(s!==null&&o.stateNode!=null)s.memoizedProps!==u&&ji(o);else{if(!u){if(o.stateNode===null)throw Error(n(166));return yt(o),null}s=kn.current,tl(o)?fg(o):(s=wv(p,u,l),o.stateNode=s,ji(o))}return yt(o),null;case 5:if(cr(o),l=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==u&&ji(o);else{if(!u){if(o.stateNode===null)throw Error(n(166));return yt(o),null}if(s=kn.current,tl(o))fg(o);else{switch(p=wc(Ln.current),s){case 1:s=p.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:s=p.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":s=p.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":s=p.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":s=p.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof u.is=="string"?p.createElement("select",{is:u.is}):p.createElement("select"),u.multiple?s.multiple=!0:u.size&&(s.size=u.size);break;default:s=typeof u.is=="string"?p.createElement(l,{is:u.is}):p.createElement(l)}}s[qt]=o,s[jt]=u;e:for(p=o.child;p!==null;){if(p.tag===5||p.tag===6)s.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===o)break e;for(;p.sibling===null;){if(p.return===null||p.return===o)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}o.stateNode=s;e:switch(tn(s,l,u),l){case"button":case"input":case"select":case"textarea":s=!!u.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&ji(o)}}return yt(o),o.flags&=-16777217,null;case 6:if(s&&o.stateNode!=null)s.memoizedProps!==u&&ji(o);else{if(typeof u!="string"&&o.stateNode===null)throw Error(n(166));if(s=Ln.current,tl(o)){if(s=o.stateNode,l=o.memoizedProps,u=null,p=gn,p!==null)switch(p.tag){case 27:case 5:u=p.memoizedProps}s[qt]=o,s=!!(s.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||Tv(s.nodeValue,l)),s||Dr(o)}else s=wc(s).createTextNode(u),s[qt]=o,o.stateNode=s}return yt(o),null;case 13:if(u=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(p=tl(o),u!==null&&u.dehydrated!==null){if(s===null){if(!p)throw Error(n(318));if(p=o.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));p[qt]=o}else nl(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;yt(o),p=!1}else li!==null&&(dh(li),li=null),p=!0;if(!p)return o.flags&256?(Hi(o),o):(Hi(o),null)}if(Hi(o),(o.flags&128)!==0)return o.lanes=l,o;if(l=u!==null,s=s!==null&&s.memoizedState!==null,l){u=o.child,p=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(p=u.alternate.memoizedState.cachePool.pool);var v=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(v=u.memoizedState.cachePool.pool),v!==p&&(u.flags|=2048)}return l!==s&&l&&(o.child.flags|=8192),pc(o,o.updateQueue),yt(o),null;case 4:return hi(),s===null&&Ah(o.stateNode.containerInfo),yt(o),null;case 10:return Qi(o.type),yt(o),null;case 19:if(gt(zt),p=o.memoizedState,p===null)return yt(o),null;if(u=(o.flags&128)!==0,v=p.rendering,v===null)if(u)Cl(p,!1);else{if(Ct!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(v=ju(s),v!==null){for(o.flags|=128,Cl(p,!1),s=v.updateQueue,o.updateQueue=s,pc(o,s),o.subtreeFlags=0,s=l,l=o.child;l!==null;)Qy(l,s),l=l.sibling;return at(zt,zt.current&1|2),o.child}s=s.sibling}p.tail!==null&&Un()>gc&&(o.flags|=128,u=!0,Cl(p,!1),o.lanes=4194304)}else{if(!u)if(s=ju(v),s!==null){if(o.flags|=128,u=!0,s=s.updateQueue,o.updateQueue=s,pc(o,s),Cl(p,!0),p.tail===null&&p.tailMode==="hidden"&&!v.alternate&&!Je)return yt(o),null}else 2*Un()-p.renderingStartTime>gc&&l!==536870912&&(o.flags|=128,u=!0,Cl(p,!1),o.lanes=4194304);p.isBackwards?(v.sibling=o.child,o.child=v):(s=p.last,s!==null?s.sibling=v:o.child=v,p.last=v)}return p.tail!==null?(o=p.tail,p.rendering=o,p.tail=o.sibling,p.renderingStartTime=Un(),o.sibling=null,s=zt.current,at(zt,u?s&1|2:s&1),o):(yt(o),null);case 22:case 23:return Hi(o),fd(),u=o.memoizedState!==null,s!==null?s.memoizedState!==null!==u&&(o.flags|=8192):u&&(o.flags|=8192),u?(l&536870912)!==0&&(o.flags&128)===0&&(yt(o),o.subtreeFlags&6&&(o.flags|=8192)):yt(o),l=o.updateQueue,l!==null&&pc(o,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),u=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(u=o.memoizedState.cachePool.pool),u!==l&&(o.flags|=2048),s!==null&&gt(Pr),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),o.memoizedState.cache!==l&&(o.flags|=2048),Qi(Gt),yt(o),null;case 25:return null}throw Error(n(156,o.tag))}function GA(s,o){switch(ad(o),o.tag){case 1:return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return Qi(Gt),hi(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 26:case 27:case 5:return cr(o),null;case 13:if(Hi(o),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(n(340));nl()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return gt(zt),null;case 4:return hi(),null;case 10:return Qi(o.type),null;case 22:case 23:return Hi(o),fd(),s!==null&&gt(Pr),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 24:return Qi(Gt),null;case 25:return null;default:return null}}function Jy(s,o){switch(ad(o),o.tag){case 3:Qi(Gt),hi();break;case 26:case 27:case 5:cr(o);break;case 4:hi();break;case 13:Hi(o);break;case 19:gt(zt);break;case 10:Qi(o.type);break;case 22:case 23:Hi(o),fd(),s!==null&&gt(Pr);break;case 24:Qi(Gt)}}var HA={getCacheForType:function(s){var o=un(Gt),l=o.data.get(s);return l===void 0&&(l=s(),o.data.set(s,l)),l}},$A=typeof WeakMap=="function"?WeakMap:Map,vt=0,ut=null,Be=null,Qe=0,ct=0,Dn=null,Wi=!1,Uo=!1,rh=!1,es=0,Ct=0,Vs=0,Gr=0,oh=0,Kn=0,Oo=0,Al=null,wi=null,ah=!1,lh=0,gc=1/0,yc=null,Ps=null,vc=!1,Hr=null,Sl=0,uh=0,ch=null,xl=0,fh=null;function Vn(){if((vt&2)!==0&&Qe!==0)return Qe&-Qe;if(x.T!==null){var s=Io;return s!==0?s:_h()}return cs()}function jy(){Kn===0&&(Kn=(Qe&536870912)===0||Je?xu():536870912);var s=Gn.current;return s!==null&&(s.flags|=32),Kn}function yn(s,o,l){(s===ut&&ct===2||s.cancelPendingCommit!==null)&&(Fo(s,0),ts(s,Qe,Kn,!1)),mr(s,l),((vt&2)===0||s!==ut)&&(s===ut&&((vt&2)===0&&(Gr|=l),Ct===4&&ts(s,Qe,Kn,!1)),Ri(s))}function Wy(s,o,l){if((vt&6)!==0)throw Error(n(327));var u=!l&&(o&60)===0&&(o&s.expiredLanes)===0||ti(s,o),p=u?QA(s,o):ph(s,o,!0),v=u;do{if(p===0){Uo&&!u&&ts(s,o,0,!1);break}else if(p===6)ts(s,o,0,!Wi);else{if(l=s.current.alternate,v&&!YA(l)){p=ph(s,o,!1),v=!1;continue}if(p===2){if(v=o,s.errorRecoveryDisabledLanes&v)var C=0;else C=s.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){o=C;e:{var R=s;p=Al;var V=R.current.memoizedState.isDehydrated;if(V&&(Fo(R,C).flags|=256),C=ph(R,C,!1),C!==2){if(rh&&!V){R.errorRecoveryDisabledLanes|=v,Gr|=v,p=4;break e}v=wi,wi=p,v!==null&&dh(v)}p=C}if(v=!1,p!==2)continue}}if(p===1){Fo(s,0),ts(s,o,0,!0);break}e:{switch(u=s,p){case 0:case 1:throw Error(n(345));case 4:if((o&4194176)===o){ts(u,o,Kn,!Wi);break e}break;case 2:wi=null;break;case 3:case 5:break;default:throw Error(n(329))}if(u.finishedWork=l,u.finishedLanes=o,(o&62914560)===o&&(v=lh+300-Un(),10<v)){if(ts(u,o,Kn,!Wi),pi(u,0)!==0)break e;u.timeoutHandle=Av(ev.bind(null,u,l,wi,yc,ah,o,Kn,Gr,Oo,Wi,2,-0,0),v);break e}ev(u,l,wi,yc,ah,o,Kn,Gr,Oo,Wi,0,-0,0)}}break}while(!0);Ri(s)}function dh(s){wi===null?wi=s:wi.push.apply(wi,s)}function ev(s,o,l,u,p,v,C,R,V,q,Z,ne,Y){var Q=o.subtreeFlags;if((Q&8192||(Q&16785408)===16785408)&&(Ml={stylesheets:null,count:0,unsuspend:RS},Hy(o),o=IS(),o!==null)){s.cancelPendingCommit=o(av.bind(null,s,l,u,p,C,R,V,1,ne,Y)),ts(s,v,C,!q);return}av(s,l,u,p,C,R,V,Z,ne,Y)}function YA(s){for(var o=s;;){var l=o.tag;if((l===0||l===11||l===15)&&o.flags&16384&&(l=o.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var p=l[u],v=p.getSnapshot;p=p.value;try{if(!In(v(),p))return!1}catch{return!1}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ts(s,o,l,u){o&=~oh,o&=~Gr,s.suspendedLanes|=o,s.pingedLanes&=~o,u&&(s.warmLanes|=o),u=s.expirationTimes;for(var p=o;0<p;){var v=31-an(p),C=1<<v;u[v]=-1,p&=~C}l!==0&&Ma(s,l,o)}function _c(){return(vt&6)===0?(wl(0),!1):!0}function hh(){if(Be!==null){if(ct===0)var s=Be.return;else s=Be,Ki=Fr=null,_d(s),Ro=null,ol=0,s=Be;for(;s!==null;)Jy(s.alternate,s),s=s.return;Be=null}}function Fo(s,o){s.finishedWork=null,s.finishedLanes=0;var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,fS(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),hh(),ut=s,Be=l=Ds(s.current,null),Qe=o,ct=0,Dn=null,Wi=!1,Uo=ti(s,o),rh=!1,Oo=Kn=oh=Gr=Vs=Ct=0,wi=Al=null,ah=!1,(o&8)!==0&&(o|=o&32);var u=s.entangledLanes;if(u!==0)for(s=s.entanglements,u&=o;0<u;){var p=31-an(u),v=1<<p;o|=s[p],u&=~v}return es=o,Gu(),l}function tv(s,o){Oe=null,x.H=xi,o===sl?(o=gg(),ct=3):o===hg?(o=gg(),ct=4):ct=o===my?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Dn=o,Be===null&&(Ct=1,uc(s,qn(o,s.current)))}function nv(){var s=x.H;return x.H=xi,s===null?xi:s}function iv(){var s=x.A;return x.A=HA,s}function mh(){Ct=4,Wi||(Qe&4194176)!==Qe&&Gn.current!==null||(Uo=!0),(Vs&134217727)===0&&(Gr&134217727)===0||ut===null||ts(ut,Qe,Kn,!1)}function ph(s,o,l){var u=vt;vt|=2;var p=nv(),v=iv();(ut!==s||Qe!==o)&&(yc=null,Fo(s,o)),o=!1;var C=Ct;e:do try{if(ct!==0&&Be!==null){var R=Be,V=Dn;switch(ct){case 8:hh(),C=6;break e;case 3:case 2:case 6:Gn.current===null&&(o=!0);var q=ct;if(ct=0,Dn=null,qo(s,R,V,q),l&&Uo){C=0;break e}break;default:q=ct,ct=0,Dn=null,qo(s,R,V,q)}}KA(),C=Ct;break}catch(Z){tv(s,Z)}while(!0);return o&&s.shellSuspendCounter++,Ki=Fr=null,vt=u,x.H=p,x.A=v,Be===null&&(ut=null,Qe=0,Gu()),C}function KA(){for(;Be!==null;)sv(Be)}function QA(s,o){var l=vt;vt|=2;var u=nv(),p=iv();ut!==s||Qe!==o?(yc=null,gc=Un()+500,Fo(s,o)):Uo=ti(s,o);e:do try{if(ct!==0&&Be!==null){o=Be;var v=Dn;t:switch(ct){case 1:ct=0,Dn=null,qo(s,o,v,1);break;case 2:if(mg(v)){ct=0,Dn=null,rv(o);break}o=function(){ct===2&&ut===s&&(ct=7),Ri(s)},v.then(o,o);break e;case 3:ct=7;break e;case 4:ct=5;break e;case 7:mg(v)?(ct=0,Dn=null,rv(o)):(ct=0,Dn=null,qo(s,o,v,7));break;case 5:var C=null;switch(Be.tag){case 26:C=Be.memoizedState;case 5:case 27:var R=Be;if(!C||Pv(C)){ct=0,Dn=null;var V=R.sibling;if(V!==null)Be=V;else{var q=R.return;q!==null?(Be=q,Tc(q)):Be=null}break t}}ct=0,Dn=null,qo(s,o,v,5);break;case 6:ct=0,Dn=null,qo(s,o,v,6);break;case 8:hh(),Ct=6;break e;default:throw Error(n(462))}}ZA();break}catch(Z){tv(s,Z)}while(!0);return Ki=Fr=null,x.H=u,x.A=p,vt=l,Be!==null?0:(ut=null,Qe=0,Gu(),Ct)}function ZA(){for(;Be!==null&&!Yf();)sv(Be)}function sv(s){var o=wy(s.alternate,s,es);s.memoizedProps=s.pendingProps,o===null?Tc(s):Be=o}function rv(s){var o=s,l=o.alternate;switch(o.tag){case 15:case 0:o=Ty(l,o,o.pendingProps,o.type,void 0,Qe);break;case 11:o=Ty(l,o,o.pendingProps,o.type.render,o.ref,Qe);break;case 5:_d(o);default:Jy(l,o),o=Be=Qy(o,es),o=wy(l,o,es)}s.memoizedProps=s.pendingProps,o===null?Tc(s):Be=o}function qo(s,o,l,u){Ki=Fr=null,_d(o),Ro=null,ol=0;var p=o.return;try{if(UA(s,p,o,l,Qe)){Ct=1,uc(s,qn(l,s.current)),Be=null;return}}catch(v){if(p!==null)throw Be=p,v;Ct=1,uc(s,qn(l,s.current)),Be=null;return}o.flags&32768?(Je||u===1?s=!0:Uo||(Qe&536870912)!==0?s=!1:(Wi=s=!0,(u===2||u===3||u===6)&&(u=Gn.current,u!==null&&u.tag===13&&(u.flags|=16384))),ov(o,s)):Tc(o)}function Tc(s){var o=s;do{if((o.flags&32768)!==0){ov(o,Wi);return}s=o.return;var l=zA(o.alternate,o,es);if(l!==null){Be=l;return}if(o=o.sibling,o!==null){Be=o;return}Be=o=s}while(o!==null);Ct===0&&(Ct=5)}function ov(s,o){do{var l=GA(s.alternate,s);if(l!==null){l.flags&=32767,Be=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!o&&(s=s.sibling,s!==null)){Be=s;return}Be=s=l}while(s!==null);Ct=6,Be=null}function av(s,o,l,u,p,v,C,R,V,q){var Z=x.T,ne=fe.p;try{fe.p=2,x.T=null,XA(s,o,l,u,ne,p,v,C,R,V,q)}finally{x.T=Z,fe.p=ne}}function XA(s,o,l,u,p,v,C,R){do Bo();while(Hr!==null);if((vt&6)!==0)throw Error(n(327));var V=s.finishedWork;if(u=s.finishedLanes,V===null)return null;if(s.finishedWork=null,s.finishedLanes=0,V===s.current)throw Error(n(177));s.callbackNode=null,s.callbackPriority=0,s.cancelPendingCommit=null;var q=V.lanes|V.childLanes;if(q|=sd,ao(s,u,q,v,C,R),s===ut&&(Be=ut=null,Qe=0),(V.subtreeFlags&10256)===0&&(V.flags&10256)===0||vc||(vc=!0,uh=q,ch=l,eS(us,function(){return Bo(),null})),l=(V.flags&15990)!==0,(V.subtreeFlags&15990)!==0||l?(l=x.T,x.T=null,v=fe.p,fe.p=2,C=vt,vt|=4,FA(s,V),By(V,s),TA(Rh,s.containerInfo),Dc=!!wh,Rh=wh=null,s.current=V,Uy(s,V.alternate,V),Tu(),vt=C,fe.p=v,x.T=l):s.current=V,vc?(vc=!1,Hr=s,Sl=u):lv(s,q),q=s.pendingLanes,q===0&&(Ps=null),Ia(V.stateNode),Ri(s),o!==null)for(p=s.onRecoverableError,V=0;V<o.length;V++)q=o[V],p(q.value,{componentStack:q.stack});return(Sl&3)!==0&&Bo(),q=s.pendingLanes,(u&4194218)!==0&&(q&42)!==0?s===fh?xl++:(xl=0,fh=s):xl=0,wl(0),null}function lv(s,o){(s.pooledCacheLanes&=o)===0&&(o=s.pooledCache,o!=null&&(s.pooledCache=null,ll(o)))}function Bo(){if(Hr!==null){var s=Hr,o=uh;uh=0;var l=lo(Sl),u=x.T,p=fe.p;try{if(fe.p=32>l?32:l,x.T=null,Hr===null)var v=!1;else{l=ch,ch=null;var C=Hr,R=Sl;if(Hr=null,Sl=0,(vt&6)!==0)throw Error(n(331));var V=vt;if(vt|=4,Yy(C.current),Gy(C,C.current,R,l),vt=V,wl(0,!1),Xt&&typeof Xt.onPostCommitFiberRoot=="function")try{Xt.onPostCommitFiberRoot(ei,C)}catch{}v=!0}return v}finally{fe.p=p,x.T=u,lv(s,o)}}return!1}function uv(s,o,l){o=qn(l,o),o=Vd(s.stateNode,o,2),s=bs(s,o,2),s!==null&&(mr(s,2),Ri(s))}function ot(s,o,l){if(s.tag===3)uv(s,s,l);else for(;o!==null;){if(o.tag===3){uv(o,s,l);break}else if(o.tag===1){var u=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ps===null||!Ps.has(u))){s=qn(l,s),l=dy(2),u=bs(o,l,2),u!==null&&(hy(l,u,o,s),mr(u,2),Ri(u));break}}o=o.return}}function gh(s,o,l){var u=s.pingCache;if(u===null){u=s.pingCache=new $A;var p=new Set;u.set(o,p)}else p=u.get(o),p===void 0&&(p=new Set,u.set(o,p));p.has(l)||(rh=!0,p.add(l),s=JA.bind(null,s,o,l),o.then(s,s))}function JA(s,o,l){var u=s.pingCache;u!==null&&u.delete(o),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,ut===s&&(Qe&l)===l&&(Ct===4||Ct===3&&(Qe&62914560)===Qe&&300>Un()-lh?(vt&2)===0&&Fo(s,0):oh|=l,Oo===Qe&&(Oo=0)),Ri(s)}function cv(s,o){o===0&&(o=Oi()),s=Ts(s,o),s!==null&&(mr(s,o),Ri(s))}function jA(s){var o=s.memoizedState,l=0;o!==null&&(l=o.retryLane),cv(s,l)}function WA(s,o){var l=0;switch(s.tag){case 13:var u=s.stateNode,p=s.memoizedState;p!==null&&(l=p.retryLane);break;case 19:u=s.stateNode;break;case 22:u=s.stateNode._retryCache;break;default:throw Error(n(314))}u!==null&&u.delete(o),cv(s,l)}function eS(s,o){return Ft(s,o)}var Ec=null,zo=null,yh=!1,Cc=!1,vh=!1,$r=0;function Ri(s){s!==zo&&s.next===null&&(zo===null?Ec=zo=s:zo=zo.next=s),Cc=!0,yh||(yh=!0,nS(tS))}function wl(s,o){if(!vh&&Cc){vh=!0;do for(var l=!1,u=Ec;u!==null;){if(s!==0){var p=u.pendingLanes;if(p===0)var v=0;else{var C=u.suspendedLanes,R=u.pingedLanes;v=(1<<31-an(42|s)+1)-1,v&=p&~(C&~R),v=v&201326677?v&201326677|1:v?v|2:0}v!==0&&(l=!0,hv(u,v))}else v=Qe,v=pi(u,u===ut?v:0),(v&3)===0||ti(u,v)||(l=!0,hv(u,v));u=u.next}while(l);vh=!1}}function tS(){Cc=yh=!1;var s=0;$r!==0&&(cS()&&(s=$r),$r=0);for(var o=Un(),l=null,u=Ec;u!==null;){var p=u.next,v=fv(u,o);v===0?(u.next=null,l===null?Ec=p:l.next=p,p===null&&(zo=l)):(l=u,(s!==0||(v&3)!==0)&&(Cc=!0)),u=p}wl(s)}function fv(s,o){for(var l=s.suspendedLanes,u=s.pingedLanes,p=s.expirationTimes,v=s.pendingLanes&-62914561;0<v;){var C=31-an(v),R=1<<C,V=p[C];V===-1?((R&l)===0||(R&u)!==0)&&(p[C]=Qf(R,o)):V<=o&&(s.expiredLanes|=R),v&=~R}if(o=ut,l=Qe,l=pi(s,s===o?l:0),u=s.callbackNode,l===0||s===o&&ct===2||s.cancelPendingCommit!==null)return u!==null&&u!==null&&ls(u),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||ti(s,l)){if(o=l&-l,o===s.callbackPriority)return o;switch(u!==null&&ls(u),lo(l)){case 2:case 8:l=ba;break;case 32:l=us;break;case 268435456:l=Eu;break;default:l=us}return u=dv.bind(null,s),l=Ft(l,u),s.callbackPriority=o,s.callbackNode=l,o}return u!==null&&u!==null&&ls(u),s.callbackPriority=2,s.callbackNode=null,2}function dv(s,o){var l=s.callbackNode;if(Bo()&&s.callbackNode!==l)return null;var u=Qe;return u=pi(s,s===ut?u:0),u===0?null:(Wy(s,u,o),fv(s,Un()),s.callbackNode!=null&&s.callbackNode===l?dv.bind(null,s):null)}function hv(s,o){if(Bo())return null;Wy(s,o,!0)}function nS(s){dS(function(){(vt&6)!==0?Ft(Ra,s):s()})}function _h(){return $r===0&&($r=xu()),$r}function mv(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:ho(""+s)}function pv(s,o){var l=o.ownerDocument.createElement("input");return l.name=o.name,l.value=o.value,s.id&&l.setAttribute("form",s.id),o.parentNode.insertBefore(l,o),s=new FormData(s),l.parentNode.removeChild(l),s}function iS(s,o,l,u,p){if(o==="submit"&&l&&l.stateNode===p){var v=mv((p[jt]||null).action),C=u.submitter;C&&(o=(o=C[jt]||null)?mv(o.formAction):C.getAttribute("formAction"),o!==null&&(v=o,C=null));var R=new Er("action","action",null,u,p);s.push({event:R,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if($r!==0){var V=C?pv(p,C):new FormData(p);bd(l,{pending:!0,data:V,method:p.method,action:v},null,V)}}else typeof v=="function"&&(R.preventDefault(),V=C?pv(p,C):new FormData(p),bd(l,{pending:!0,data:V,method:p.method,action:v},v,V))},currentTarget:p}]})}}for(var Th=0;Th<ag.length;Th++){var Eh=ag[Th],sS=Eh.toLowerCase(),rS=Eh[0].toUpperCase()+Eh.slice(1);ai(sS,"on"+rS)}ai(ng,"onAnimationEnd"),ai(ig,"onAnimationIteration"),ai(sg,"onAnimationStart"),ai("dblclick","onDoubleClick"),ai("focusin","onFocus"),ai("focusout","onBlur"),ai(CA,"onTransitionRun"),ai(AA,"onTransitionStart"),ai(SA,"onTransitionCancel"),ai(rg,"onTransitionEnd"),Fi("onMouseEnter",["mouseout","mouseover"]),Fi("onMouseLeave",["mouseout","mouseover"]),Fi("onPointerEnter",["pointerout","pointerover"]),Fi("onPointerLeave",["pointerout","pointerover"]),_i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_i("onBeforeInput",["compositionend","keypress","textInput","paste"]),_i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Rl));function gv(s,o){o=(o&4)!==0;for(var l=0;l<s.length;l++){var u=s[l],p=u.event;u=u.listeners;e:{var v=void 0;if(o)for(var C=u.length-1;0<=C;C--){var R=u[C],V=R.instance,q=R.currentTarget;if(R=R.listener,V!==v&&p.isPropagationStopped())break e;v=R,p.currentTarget=q;try{v(p)}catch(Z){lc(Z)}p.currentTarget=null,v=V}else for(C=0;C<u.length;C++){if(R=u[C],V=R.instance,q=R.currentTarget,R=R.listener,V!==v&&p.isPropagationStopped())break e;v=R,p.currentTarget=q;try{v(p)}catch(Z){lc(Z)}p.currentTarget=null,v=V}}}}function He(s,o){var l=o[pr];l===void 0&&(l=o[pr]=new Set);var u=s+"__bubble";l.has(u)||(yv(o,s,2,!1),l.add(u))}function Ch(s,o,l){var u=0;o&&(u|=4),yv(l,s,u,o)}var Ac="_reactListening"+Math.random().toString(36).slice(2);function Ah(s){if(!s[Ac]){s[Ac]=!0,Ru.forEach(function(l){l!=="selectionchange"&&(oS.has(l)||Ch(l,!1,s),Ch(l,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[Ac]||(o[Ac]=!0,Ch("selectionchange",!1,o))}}function yv(s,o,l,u){switch(qv(o)){case 2:var p=DS;break;case 8:p=VS;break;default:p=Lh}l=p.bind(null,o,l,s),p=void 0,!qi||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(p=!0),u?p!==void 0?s.addEventListener(o,l,{capture:!0,passive:p}):s.addEventListener(o,l,!0):p!==void 0?s.addEventListener(o,l,{passive:p}):s.addEventListener(o,l,!1)}function Sh(s,o,l,u,p){var v=u;if((o&1)===0&&(o&2)===0&&u!==null)e:for(;;){if(u===null)return;var C=u.tag;if(C===3||C===4){var R=u.stateNode.containerInfo;if(R===p||R.nodeType===8&&R.parentNode===p)break;if(C===4)for(C=u.return;C!==null;){var V=C.tag;if((V===3||V===4)&&(V=C.stateNode.containerInfo,V===p||V.nodeType===8&&V.parentNode===p))return;C=C.return}for(;R!==null;){if(C=yi(R),C===null)return;if(V=C.tag,V===5||V===6||V===26||V===27){u=v=C;continue e}R=R.parentNode}}u=u.return}Ha(function(){var q=v,Z=Ga(l),ne=[];e:{var Y=og.get(s);if(Y!==void 0){var Q=Er,ve=s;switch(s){case"keypress":if(_r(l)===0)break e;case"keydown":case"keyup":Q=To;break;case"focusin":ve="focus",Q=yo;break;case"focusout":ve="blur",Q=yo;break;case"beforeblur":case"afterblur":Q=yo;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=wr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=Pu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=_s;break;case ng:case ig:case sg:Q=Ya;break;case rg:Q=T;break;case"scroll":case"scrollend":Q=Ar;break;case"wheel":Q=b;break;case"copy":case"cut":case"paste":Q=Lu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=Za;break;case"toggle":case"beforetoggle":Q=K}var Ve=(o&4)!==0,At=!Ve&&(s==="scroll"||s==="scrollend"),z=Ve?Y!==null?Y+"Capture":null:Y;Ve=[];for(var F=q,$;F!==null;){var j=F;if($=j.stateNode,j=j.tag,j!==5&&j!==26&&j!==27||$===null||z===null||(j=ii(F,z),j!=null&&Ve.push(bl(F,j,$))),At)break;F=F.return}0<Ve.length&&(Y=new Q(Y,ve,null,l,Z),ne.push({event:Y,listeners:Ve}))}}if((o&7)===0){e:{if(Y=s==="mouseover"||s==="pointerover",Q=s==="mouseout"||s==="pointerout",Y&&l!==za&&(ve=l.relatedTarget||l.fromElement)&&(yi(ve)||ve[gi]))break e;if((Q||Y)&&(Y=Z.window===Z?Z:(Y=Z.ownerDocument)?Y.defaultView||Y.parentWindow:window,Q?(ve=l.relatedTarget||l.toElement,Q=q,ve=ve?yi(ve):null,ve!==null&&(At=Ce(ve),Ve=ve.tag,ve!==At||Ve!==5&&Ve!==27&&Ve!==6)&&(ve=null)):(Q=null,ve=q),Q!==ve)){if(Ve=wr,j="onMouseLeave",z="onMouseEnter",F="mouse",(s==="pointerout"||s==="pointerover")&&(Ve=Za,j="onPointerLeave",z="onPointerEnter",F="pointer"),At=Q==null?Y:ni(Q),$=ve==null?Y:ni(ve),Y=new Ve(j,F+"leave",Q,l,Z),Y.target=At,Y.relatedTarget=$,j=null,yi(Z)===q&&(Ve=new Ve(z,F+"enter",ve,l,Z),Ve.target=$,Ve.relatedTarget=At,j=Ve),At=j,Q&&ve)t:{for(Ve=Q,z=ve,F=0,$=Ve;$;$=Go($))F++;for($=0,j=z;j;j=Go(j))$++;for(;0<F-$;)Ve=Go(Ve),F--;for(;0<$-F;)z=Go(z),$--;for(;F--;){if(Ve===z||z!==null&&Ve===z.alternate)break t;Ve=Go(Ve),z=Go(z)}Ve=null}else Ve=null;Q!==null&&vv(ne,Y,Q,Ve,!1),ve!==null&&At!==null&&vv(ne,At,ve,Ve,!0)}}e:{if(Y=q?ni(q):window,Q=Y.nodeName&&Y.nodeName.toLowerCase(),Q==="select"||Q==="input"&&Y.type==="file")var me=$p;else if(Gp(Y))if(Yp)me=vA;else{me=gA;var qe=pA}else Q=Y.nodeName,!Q||Q.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?q&&fo(q.elementType)&&(me=$p):me=yA;if(me&&(me=me(s,q))){Hp(ne,me,l,Z);break e}qe&&qe(s,Y,q),s==="focusout"&&q&&Y.type==="number"&&q.memoizedProps.value!=null&&Fa(Y,"number",Y.value)}switch(qe=q?ni(q):window,s){case"focusin":(Gp(qe)||qe.contentEditable==="true")&&(Eo=qe,td=q,el=null);break;case"focusout":el=td=Eo=null;break;case"mousedown":nd=!0;break;case"contextmenu":case"mouseup":case"dragend":nd=!1,eg(ne,l,Z);break;case"selectionchange":if(EA)break;case"keydown":case"keyup":eg(ne,l,Z)}var _e;if(De)e:{switch(s){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else oi?si(s,l)&&(Se="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(Se="onCompositionStart");Se&&(xt&&l.locale!=="ko"&&(oi||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&oi&&(_e=Vu()):(On=Z,lt="value"in On?On.value:On.textContent,oi=!0)),qe=Sc(q,Se),0<qe.length&&(Se=new Qa(Se,s,null,l,Z),ne.push({event:Se,listeners:qe}),_e?Se.data=_e:(_e=ri(l),_e!==null&&(Se.data=_e)))),(_e=it?Xa(s,l):dA(s,l))&&(Se=Sc(q,"onBeforeInput"),0<Se.length&&(qe=new Qa("onBeforeInput","beforeinput",null,l,Z),ne.push({event:qe,listeners:Se}),qe.data=_e)),iS(ne,s,q,l,Z)}gv(ne,o)})}function bl(s,o,l){return{instance:s,listener:o,currentTarget:l}}function Sc(s,o){for(var l=o+"Capture",u=[];s!==null;){var p=s,v=p.stateNode;p=p.tag,p!==5&&p!==26&&p!==27||v===null||(p=ii(s,l),p!=null&&u.unshift(bl(s,p,v)),p=ii(s,o),p!=null&&u.push(bl(s,p,v))),s=s.return}return u}function Go(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function vv(s,o,l,u,p){for(var v=o._reactName,C=[];l!==null&&l!==u;){var R=l,V=R.alternate,q=R.stateNode;if(R=R.tag,V!==null&&V===u)break;R!==5&&R!==26&&R!==27||q===null||(V=q,p?(q=ii(l,v),q!=null&&C.unshift(bl(l,q,V))):p||(q=ii(l,v),q!=null&&C.push(bl(l,q,V)))),l=l.return}C.length!==0&&s.push({event:o,listeners:C})}var aS=/\r\n?/g,lS=/\u0000|\uFFFD/g;function _v(s){return(typeof s=="string"?s:""+s).replace(aS,`
`).replace(lS,"")}function Tv(s,o){return o=_v(o),_v(s)===o}function xc(){}function rt(s,o,l,u,p,v){switch(l){case"children":typeof u=="string"?o==="body"||o==="textarea"&&u===""||Cn(s,u):(typeof u=="number"||typeof u=="bigint")&&o!=="body"&&Cn(s,""+u);break;case"className":Rn(s,"class",u);break;case"tabIndex":Rn(s,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Rn(s,l,u);break;case"style":Ba(s,u,v);break;case"data":if(o!=="object"){Rn(s,"data",u);break}case"src":case"href":if(u===""&&(o!=="a"||l!=="href")){s.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(l);break}u=ho(""+u),s.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(l==="formAction"?(o!=="input"&&rt(s,o,"name",p.name,p,null),rt(s,o,"formEncType",p.formEncType,p,null),rt(s,o,"formMethod",p.formMethod,p,null),rt(s,o,"formTarget",p.formTarget,p,null)):(rt(s,o,"encType",p.encType,p,null),rt(s,o,"method",p.method,p,null),rt(s,o,"target",p.target,p,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(l);break}u=ho(""+u),s.setAttribute(l,u);break;case"onClick":u!=null&&(s.onclick=xc);break;case"onScroll":u!=null&&He("scroll",s);break;case"onScrollEnd":u!=null&&He("scrollend",s);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(n(61));if(l=u.__html,l!=null){if(p.children!=null)throw Error(n(60));s.innerHTML=l}}break;case"multiple":s.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":s.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){s.removeAttribute("xlink:href");break}l=ho(""+u),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,""+u):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":u===!0?s.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,u):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?s.setAttribute(l,u):s.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?s.removeAttribute(l):s.setAttribute(l,u);break;case"popover":He("beforetoggle",s),He("toggle",s),uo(s,"popover",u);break;case"xlinkActuate":Nt(s,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Nt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Nt(s,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Nt(s,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Nt(s,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Nt(s,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Nt(s,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Nt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Nt(s,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":uo(s,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Du.get(l)||l,uo(s,l,u))}}function xh(s,o,l,u,p,v){switch(l){case"style":Ba(s,u,v);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(n(61));if(l=u.__html,l!=null){if(p.children!=null)throw Error(n(60));s.innerHTML=l}}break;case"children":typeof u=="string"?Cn(s,u):(typeof u=="number"||typeof u=="bigint")&&Cn(s,""+u);break;case"onScroll":u!=null&&He("scroll",s);break;case"onScrollEnd":u!=null&&He("scrollend",s);break;case"onClick":u!=null&&(s.onclick=xc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Pa.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(p=l.endsWith("Capture"),o=l.slice(2,p?l.length-7:void 0),v=s[jt]||null,v=v!=null?v[l]:null,typeof v=="function"&&s.removeEventListener(o,v,p),typeof u=="function")){typeof v!="function"&&v!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(o,u,p);break e}l in s?s[l]=u:u===!0?s.setAttribute(l,""):uo(s,l,u)}}}function tn(s,o,l){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":He("error",s),He("load",s);var u=!1,p=!1,v;for(v in l)if(l.hasOwnProperty(v)){var C=l[v];if(C!=null)switch(v){case"src":u=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:rt(s,o,v,C,l,null)}}p&&rt(s,o,"srcSet",l.srcSet,l,null),u&&rt(s,o,"src",l.src,l,null);return;case"input":He("invalid",s);var R=v=C=p=null,V=null,q=null;for(u in l)if(l.hasOwnProperty(u)){var Z=l[u];if(Z!=null)switch(u){case"name":p=Z;break;case"type":C=Z;break;case"checked":V=Z;break;case"defaultChecked":q=Z;break;case"value":v=Z;break;case"defaultValue":R=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(n(137,o));break;default:rt(s,o,u,Z,l,null)}}Iu(s,v,R,V,q,C,p,!1),tt(s);return;case"select":He("invalid",s),u=C=v=null;for(p in l)if(l.hasOwnProperty(p)&&(R=l[p],R!=null))switch(p){case"value":v=R;break;case"defaultValue":C=R;break;case"multiple":u=R;default:rt(s,o,p,R,l,null)}o=v,l=C,s.multiple=!!u,o!=null?hs(s,!!u,o,!1):l!=null&&hs(s,!!u,l,!0);return;case"textarea":He("invalid",s),v=p=u=null;for(C in l)if(l.hasOwnProperty(C)&&(R=l[C],R!=null))switch(C){case"value":u=R;break;case"defaultValue":p=R;break;case"children":v=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(n(91));break;default:rt(s,o,C,R,l,null)}ms(s,u,p,v),tt(s);return;case"option":for(V in l)if(l.hasOwnProperty(V)&&(u=l[V],u!=null))switch(V){case"selected":s.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:rt(s,o,V,u,l,null)}return;case"dialog":He("cancel",s),He("close",s);break;case"iframe":case"object":He("load",s);break;case"video":case"audio":for(u=0;u<Rl.length;u++)He(Rl[u],s);break;case"image":He("error",s),He("load",s);break;case"details":He("toggle",s);break;case"embed":case"source":case"link":He("error",s),He("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in l)if(l.hasOwnProperty(q)&&(u=l[q],u!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:rt(s,o,q,u,l,null)}return;default:if(fo(o)){for(Z in l)l.hasOwnProperty(Z)&&(u=l[Z],u!==void 0&&xh(s,o,Z,u,l,void 0));return}}for(R in l)l.hasOwnProperty(R)&&(u=l[R],u!=null&&rt(s,o,R,u,l,null))}function uS(s,o,l,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,v=null,C=null,R=null,V=null,q=null,Z=null;for(Q in l){var ne=l[Q];if(l.hasOwnProperty(Q)&&ne!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":V=ne;default:u.hasOwnProperty(Q)||rt(s,o,Q,null,u,ne)}}for(var Y in u){var Q=u[Y];if(ne=l[Y],u.hasOwnProperty(Y)&&(Q!=null||ne!=null))switch(Y){case"type":v=Q;break;case"name":p=Q;break;case"checked":q=Q;break;case"defaultChecked":Z=Q;break;case"value":C=Q;break;case"defaultValue":R=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(n(137,o));break;default:Q!==ne&&rt(s,o,Y,Q,u,ne)}}co(s,C,R,V,q,Z,v,p);return;case"select":Q=C=R=Y=null;for(v in l)if(V=l[v],l.hasOwnProperty(v)&&V!=null)switch(v){case"value":break;case"multiple":Q=V;default:u.hasOwnProperty(v)||rt(s,o,v,null,u,V)}for(p in u)if(v=u[p],V=l[p],u.hasOwnProperty(p)&&(v!=null||V!=null))switch(p){case"value":Y=v;break;case"defaultValue":R=v;break;case"multiple":C=v;default:v!==V&&rt(s,o,p,v,u,V)}o=R,l=C,u=Q,Y!=null?hs(s,!!l,Y,!1):!!u!=!!l&&(o!=null?hs(s,!!l,o,!0):hs(s,!!l,l?[]:"",!1));return;case"textarea":Q=Y=null;for(R in l)if(p=l[R],l.hasOwnProperty(R)&&p!=null&&!u.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:rt(s,o,R,null,u,p)}for(C in u)if(p=u[C],v=l[C],u.hasOwnProperty(C)&&(p!=null||v!=null))switch(C){case"value":Y=p;break;case"defaultValue":Q=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(n(91));break;default:p!==v&&rt(s,o,C,p,u,v)}Nu(s,Y,Q);return;case"option":for(var ve in l)if(Y=l[ve],l.hasOwnProperty(ve)&&Y!=null&&!u.hasOwnProperty(ve))switch(ve){case"selected":s.selected=!1;break;default:rt(s,o,ve,null,u,Y)}for(V in u)if(Y=u[V],Q=l[V],u.hasOwnProperty(V)&&Y!==Q&&(Y!=null||Q!=null))switch(V){case"selected":s.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:rt(s,o,V,Y,u,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ve in l)Y=l[Ve],l.hasOwnProperty(Ve)&&Y!=null&&!u.hasOwnProperty(Ve)&&rt(s,o,Ve,null,u,Y);for(q in u)if(Y=u[q],Q=l[q],u.hasOwnProperty(q)&&Y!==Q&&(Y!=null||Q!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(n(137,o));break;default:rt(s,o,q,Y,u,Q)}return;default:if(fo(o)){for(var At in l)Y=l[At],l.hasOwnProperty(At)&&Y!==void 0&&!u.hasOwnProperty(At)&&xh(s,o,At,void 0,u,Y);for(Z in u)Y=u[Z],Q=l[Z],!u.hasOwnProperty(Z)||Y===Q||Y===void 0&&Q===void 0||xh(s,o,Z,Y,u,Q);return}}for(var z in l)Y=l[z],l.hasOwnProperty(z)&&Y!=null&&!u.hasOwnProperty(z)&&rt(s,o,z,null,u,Y);for(ne in u)Y=u[ne],Q=l[ne],!u.hasOwnProperty(ne)||Y===Q||Y==null&&Q==null||rt(s,o,ne,Y,u,Q)}var wh=null,Rh=null;function wc(s){return s.nodeType===9?s:s.ownerDocument}function Ev(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Cv(s,o){if(s===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&o==="foreignObject"?0:s}function bh(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Ih=null;function cS(){var s=window.event;return s&&s.type==="popstate"?s===Ih?!1:(Ih=s,!0):(Ih=null,!1)}var Av=typeof setTimeout=="function"?setTimeout:void 0,fS=typeof clearTimeout=="function"?clearTimeout:void 0,Sv=typeof Promise=="function"?Promise:void 0,dS=typeof queueMicrotask=="function"?queueMicrotask:typeof Sv<"u"?function(s){return Sv.resolve(null).then(s).catch(hS)}:Av;function hS(s){setTimeout(function(){throw s})}function Nh(s,o){var l=o,u=0;do{var p=l.nextSibling;if(s.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(u===0){s.removeChild(p),Ll(o);return}u--}else l!=="$"&&l!=="$?"&&l!=="$!"||u++;l=p}while(l);Ll(o)}function Mh(s){var o=s.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var l=o;switch(o=o.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Mh(l),fs(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function mS(s,o,l,u){for(;s.nodeType===1;){var p=l;if(s.nodeName.toLowerCase()!==o.toLowerCase()){if(!u&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(u){if(!s[gr])switch(o){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(v=s.getAttribute("rel"),v==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(v!==p.rel||s.getAttribute("href")!==(p.href==null?null:p.href)||s.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||s.getAttribute("title")!==(p.title==null?null:p.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(v=s.getAttribute("src"),(v!==(p.src==null?null:p.src)||s.getAttribute("type")!==(p.type==null?null:p.type)||s.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&v&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(o==="input"&&s.type==="hidden"){var v=p.name==null?null:""+p.name;if(p.type==="hidden"&&s.getAttribute("name")===v)return s}else return s;if(s=ci(s.nextSibling),s===null)break}return null}function pS(s,o,l){if(o==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=ci(s.nextSibling),s===null))return null;return s}function ci(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return s}function xv(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return s;o--}else l==="/$"&&o++}s=s.previousSibling}return null}function wv(s,o,l){switch(o=wc(l),s){case"html":if(s=o.documentElement,!s)throw Error(n(452));return s;case"head":if(s=o.head,!s)throw Error(n(453));return s;case"body":if(s=o.body,!s)throw Error(n(454));return s;default:throw Error(n(451))}}var Qn=new Map,Rv=new Set;function Rc(s){return typeof s.getRootNode=="function"?s.getRootNode():s.ownerDocument}var ns=fe.d;fe.d={f:gS,r:yS,D:vS,C:_S,L:TS,m:ES,X:AS,S:CS,M:SS};function gS(){var s=ns.f(),o=_c();return s||o}function yS(s){var o=vi(s);o!==null&&o.tag===5&&o.type==="form"?ey(o):ns.r(s)}var Ho=typeof document>"u"?null:document;function bv(s,o,l){var u=Ho;if(u&&typeof o=="string"&&o){var p=En(o);p='link[rel="'+s+'"][href="'+p+'"]',typeof l=="string"&&(p+='[crossorigin="'+l+'"]'),Rv.has(p)||(Rv.add(p),s={rel:s,crossOrigin:l,href:o},u.querySelector(p)===null&&(o=u.createElement("link"),tn(o,"link",s),Tt(o),u.head.appendChild(o)))}}function vS(s){ns.D(s),bv("dns-prefetch",s,null)}function _S(s,o){ns.C(s,o),bv("preconnect",s,o)}function TS(s,o,l){ns.L(s,o,l);var u=Ho;if(u&&s&&o){var p='link[rel="preload"][as="'+En(o)+'"]';o==="image"&&l&&l.imageSrcSet?(p+='[imagesrcset="'+En(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(p+='[imagesizes="'+En(l.imageSizes)+'"]')):p+='[href="'+En(s)+'"]';var v=p;switch(o){case"style":v=$o(s);break;case"script":v=Yo(s)}Qn.has(v)||(s=N({rel:"preload",href:o==="image"&&l&&l.imageSrcSet?void 0:s,as:o},l),Qn.set(v,s),u.querySelector(p)!==null||o==="style"&&u.querySelector(Il(v))||o==="script"&&u.querySelector(Nl(v))||(o=u.createElement("link"),tn(o,"link",s),Tt(o),u.head.appendChild(o)))}}function ES(s,o){ns.m(s,o);var l=Ho;if(l&&s){var u=o&&typeof o.as=="string"?o.as:"script",p='link[rel="modulepreload"][as="'+En(u)+'"][href="'+En(s)+'"]',v=p;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Yo(s)}if(!Qn.has(v)&&(s=N({rel:"modulepreload",href:s},o),Qn.set(v,s),l.querySelector(p)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Nl(v)))return}u=l.createElement("link"),tn(u,"link",s),Tt(u),l.head.appendChild(u)}}}function CS(s,o,l){ns.S(s,o,l);var u=Ho;if(u&&s){var p=Tn(u).hoistableStyles,v=$o(s);o=o||"default";var C=p.get(v);if(!C){var R={loading:0,preload:null};if(C=u.querySelector(Il(v)))R.loading=5;else{s=N({rel:"stylesheet",href:s,"data-precedence":o},l),(l=Qn.get(v))&&Dh(s,l);var V=C=u.createElement("link");Tt(V),tn(V,"link",s),V._p=new Promise(function(q,Z){V.onload=q,V.onerror=Z}),V.addEventListener("load",function(){R.loading|=1}),V.addEventListener("error",function(){R.loading|=2}),R.loading|=4,bc(C,o,u)}C={type:"stylesheet",instance:C,count:1,state:R},p.set(v,C)}}}function AS(s,o){ns.X(s,o);var l=Ho;if(l&&s){var u=Tn(l).hoistableScripts,p=Yo(s),v=u.get(p);v||(v=l.querySelector(Nl(p)),v||(s=N({src:s,async:!0},o),(o=Qn.get(p))&&Vh(s,o),v=l.createElement("script"),Tt(v),tn(v,"link",s),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},u.set(p,v))}}function SS(s,o){ns.M(s,o);var l=Ho;if(l&&s){var u=Tn(l).hoistableScripts,p=Yo(s),v=u.get(p);v||(v=l.querySelector(Nl(p)),v||(s=N({src:s,async:!0,type:"module"},o),(o=Qn.get(p))&&Vh(s,o),v=l.createElement("script"),Tt(v),tn(v,"link",s),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},u.set(p,v))}}function Iv(s,o,l,u){var p=(p=Ln.current)?Rc(p):null;if(!p)throw Error(n(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(o=$o(l.href),l=Tn(p).hoistableStyles,u=l.get(o),u||(u={type:"style",instance:null,count:0,state:null},l.set(o,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=$o(l.href);var v=Tn(p).hoistableStyles,C=v.get(s);if(C||(p=p.ownerDocument||p,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(s,C),(v=p.querySelector(Il(s)))&&!v._p&&(C.instance=v,C.state.loading=5),Qn.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Qn.set(s,l),v||xS(p,s,l,C.state))),o&&u===null)throw Error(n(528,""));return C}if(o&&u!==null)throw Error(n(529,""));return null;case"script":return o=l.async,l=l.src,typeof l=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Yo(l),l=Tn(p).hoistableScripts,u=l.get(o),u||(u={type:"script",instance:null,count:0,state:null},l.set(o,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,s))}}function $o(s){return'href="'+En(s)+'"'}function Il(s){return'link[rel="stylesheet"]['+s+"]"}function Nv(s){return N({},s,{"data-precedence":s.precedence,precedence:null})}function xS(s,o,l,u){s.querySelector('link[rel="preload"][as="style"]['+o+"]")?u.loading=1:(o=s.createElement("link"),u.preload=o,o.addEventListener("load",function(){return u.loading|=1}),o.addEventListener("error",function(){return u.loading|=2}),tn(o,"link",l),Tt(o),s.head.appendChild(o))}function Yo(s){return'[src="'+En(s)+'"]'}function Nl(s){return"script[async]"+s}function Mv(s,o,l){if(o.count++,o.instance===null)switch(o.type){case"style":var u=s.querySelector('style[data-href~="'+En(l.href)+'"]');if(u)return o.instance=u,Tt(u),u;var p=N({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(s.ownerDocument||s).createElement("style"),Tt(u),tn(u,"style",p),bc(u,l.precedence,s),o.instance=u;case"stylesheet":p=$o(l.href);var v=s.querySelector(Il(p));if(v)return o.state.loading|=4,o.instance=v,Tt(v),v;u=Nv(l),(p=Qn.get(p))&&Dh(u,p),v=(s.ownerDocument||s).createElement("link"),Tt(v);var C=v;return C._p=new Promise(function(R,V){C.onload=R,C.onerror=V}),tn(v,"link",u),o.state.loading|=4,bc(v,l.precedence,s),o.instance=v;case"script":return v=Yo(l.src),(p=s.querySelector(Nl(v)))?(o.instance=p,Tt(p),p):(u=l,(p=Qn.get(v))&&(u=N({},l),Vh(u,p)),s=s.ownerDocument||s,p=s.createElement("script"),Tt(p),tn(p,"link",u),s.head.appendChild(p),o.instance=p);case"void":return null;default:throw Error(n(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(u=o.instance,o.state.loading|=4,bc(u,l.precedence,s));return o.instance}function bc(s,o,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=u.length?u[u.length-1]:null,v=p,C=0;C<u.length;C++){var R=u[C];if(R.dataset.precedence===o)v=R;else if(v!==p)break}v?v.parentNode.insertBefore(s,v.nextSibling):(o=l.nodeType===9?l.head:l,o.insertBefore(s,o.firstChild))}function Dh(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.title==null&&(s.title=o.title)}function Vh(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.integrity==null&&(s.integrity=o.integrity)}var Ic=null;function Dv(s,o,l){if(Ic===null){var u=new Map,p=Ic=new Map;p.set(l,u)}else p=Ic,u=p.get(l),u||(u=new Map,p.set(l,u));if(u.has(s))return u;for(u.set(s,null),l=l.getElementsByTagName(s),p=0;p<l.length;p++){var v=l[p];if(!(v[gr]||v[qt]||s==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var C=v.getAttribute(o)||"";C=s+C;var R=u.get(C);R?R.push(v):u.set(C,[v])}}return u}function Vv(s,o,l){s=s.ownerDocument||s,s.head.insertBefore(l,o==="title"?s.querySelector("head > title"):null)}function wS(s,o,l){if(l===1||o.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return s=o.disabled,typeof o.precedence=="string"&&s==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function Pv(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Ml=null;function RS(){}function bS(s,o,l){if(Ml===null)throw Error(n(475));var u=Ml;if(o.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var p=$o(l.href),v=s.querySelector(Il(p));if(v){s=v._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(u.count++,u=Nc.bind(u),s.then(u,u)),o.state.loading|=4,o.instance=v,Tt(v);return}v=s.ownerDocument||s,l=Nv(l),(p=Qn.get(p))&&Dh(l,p),v=v.createElement("link"),Tt(v);var C=v;C._p=new Promise(function(R,V){C.onload=R,C.onerror=V}),tn(v,"link",l),o.instance=v}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(u.count++,o=Nc.bind(u),s.addEventListener("load",o),s.addEventListener("error",o))}}function IS(){if(Ml===null)throw Error(n(475));var s=Ml;return s.stylesheets&&s.count===0&&Ph(s,s.stylesheets),0<s.count?function(o){var l=setTimeout(function(){if(s.stylesheets&&Ph(s,s.stylesheets),s.unsuspend){var u=s.unsuspend;s.unsuspend=null,u()}},6e4);return s.unsuspend=o,function(){s.unsuspend=null,clearTimeout(l)}}:null}function Nc(){if(this.count--,this.count===0){if(this.stylesheets)Ph(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Mc=null;function Ph(s,o){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Mc=new Map,o.forEach(NS,s),Mc=null,Nc.call(s))}function NS(s,o){if(!(o.state.loading&4)){var l=Mc.get(s);if(l)var u=l.get(null);else{l=new Map,Mc.set(s,l);for(var p=s.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<p.length;v++){var C=p[v];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(l.set(C.dataset.precedence,C),u=C)}u&&l.set(null,u)}p=o.instance,C=p.getAttribute("data-precedence"),v=l.get(C)||u,v===u&&l.set(null,p),l.set(C,p),this.count++,u=Nc.bind(this),p.addEventListener("load",u),p.addEventListener("error",u),v?v.parentNode.insertBefore(p,v.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(p,s.firstChild)),o.state.loading|=4}}var Dl={$$typeof:I,Provider:null,Consumer:null,_currentValue:Fe,_currentValue2:Fe,_threadCount:0};function MS(s,o,l,u,p,v,C,R){this.tag=1,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Na(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Na(0),this.hiddenUpdates=Na(null),this.identifierPrefix=u,this.onUncaughtError=p,this.onCaughtError=v,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function kv(s,o,l,u,p,v,C,R,V,q,Z,ne){return s=new MS(s,o,l,C,R,V,q,ne),o=1,v===!0&&(o|=24),v=Yn(3,null,null,o),s.current=v,v.stateNode=s,o=dd(),o.refCount++,s.pooledCache=o,o.refCount++,v.memoizedState={element:u,isDehydrated:l,cache:o},Yd(v),s}function Lv(s){return s?(s=So,s):So}function Uv(s,o,l,u,p,v){p=Lv(p),u.context===null?u.context=p:u.pendingContext=p,u=Rs(o),u.payload={element:l},v=v===void 0?null:v,v!==null&&(u.callback=v),l=bs(s,u,o),l!==null&&(yn(l,s,o),pl(l,s,o))}function Ov(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<o?l:o}}function kh(s,o){Ov(s,o),(s=s.alternate)&&Ov(s,o)}function Fv(s){if(s.tag===13){var o=Ts(s,67108864);o!==null&&yn(o,s,67108864),kh(s,67108864)}}var Dc=!0;function DS(s,o,l,u){var p=x.T;x.T=null;var v=fe.p;try{fe.p=2,Lh(s,o,l,u)}finally{fe.p=v,x.T=p}}function VS(s,o,l,u){var p=x.T;x.T=null;var v=fe.p;try{fe.p=8,Lh(s,o,l,u)}finally{fe.p=v,x.T=p}}function Lh(s,o,l,u){if(Dc){var p=Uh(u);if(p===null)Sh(s,o,u,Vc,l),Bv(s,u);else if(kS(p,s,o,l,u))u.stopPropagation();else if(Bv(s,u),o&4&&-1<PS.indexOf(s)){for(;p!==null;){var v=vi(p);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var C=mi(v.pendingLanes);if(C!==0){var R=v;for(R.pendingLanes|=2,R.entangledLanes|=2;C;){var V=1<<31-an(C);R.entanglements[1]|=V,C&=~V}Ri(v),(vt&6)===0&&(gc=Un()+500,wl(0))}}break;case 13:R=Ts(v,2),R!==null&&yn(R,v,2),_c(),kh(v,2)}if(v=Uh(u),v===null&&Sh(s,o,u,Vc,l),v===p)break;p=v}p!==null&&u.stopPropagation()}else Sh(s,o,u,null,l)}}function Uh(s){return s=Ga(s),Oh(s)}var Vc=null;function Oh(s){if(Vc=null,s=yi(s),s!==null){var o=Ce(s);if(o===null)s=null;else{var l=o.tag;if(l===13){if(s=et(o),s!==null)return s;s=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null)}}return Vc=s,null}function qv(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(fr()){case Ra:return 2;case ba:return 8;case us:case Kf:return 32;case Eu:return 268435456;default:return 32}default:return 32}}var Fh=!1,ks=null,Ls=null,Us=null,Vl=new Map,Pl=new Map,Os=[],PS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Bv(s,o){switch(s){case"focusin":case"focusout":ks=null;break;case"dragenter":case"dragleave":Ls=null;break;case"mouseover":case"mouseout":Us=null;break;case"pointerover":case"pointerout":Vl.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pl.delete(o.pointerId)}}function kl(s,o,l,u,p,v){return s===null||s.nativeEvent!==v?(s={blockedOn:o,domEventName:l,eventSystemFlags:u,nativeEvent:v,targetContainers:[p]},o!==null&&(o=vi(o),o!==null&&Fv(o)),s):(s.eventSystemFlags|=u,o=s.targetContainers,p!==null&&o.indexOf(p)===-1&&o.push(p),s)}function kS(s,o,l,u,p){switch(o){case"focusin":return ks=kl(ks,s,o,l,u,p),!0;case"dragenter":return Ls=kl(Ls,s,o,l,u,p),!0;case"mouseover":return Us=kl(Us,s,o,l,u,p),!0;case"pointerover":var v=p.pointerId;return Vl.set(v,kl(Vl.get(v)||null,s,o,l,u,p)),!0;case"gotpointercapture":return v=p.pointerId,Pl.set(v,kl(Pl.get(v)||null,s,o,l,u,p)),!0}return!1}function zv(s){var o=yi(s.target);if(o!==null){var l=Ce(o);if(l!==null){if(o=l.tag,o===13){if(o=et(l),o!==null){s.blockedOn=o,Zf(s.priority,function(){if(l.tag===13){var u=Vn(),p=Ts(l,u);p!==null&&yn(p,l,u),kh(l,u)}});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Pc(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var l=Uh(s.nativeEvent);if(l===null){l=s.nativeEvent;var u=new l.constructor(l.type,l);za=u,l.target.dispatchEvent(u),za=null}else return o=vi(l),o!==null&&Fv(o),s.blockedOn=l,!1;o.shift()}return!0}function Gv(s,o,l){Pc(s)&&l.delete(o)}function LS(){Fh=!1,ks!==null&&Pc(ks)&&(ks=null),Ls!==null&&Pc(Ls)&&(Ls=null),Us!==null&&Pc(Us)&&(Us=null),Vl.forEach(Gv),Pl.forEach(Gv)}function kc(s,o){s.blockedOn===o&&(s.blockedOn=null,Fh||(Fh=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,LS)))}var Lc=null;function Hv(s){Lc!==s&&(Lc=s,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Lc===s&&(Lc=null);for(var o=0;o<s.length;o+=3){var l=s[o],u=s[o+1],p=s[o+2];if(typeof u!="function"){if(Oh(u||l)===null)continue;break}var v=vi(l);v!==null&&(s.splice(o,3),o-=3,bd(v,{pending:!0,data:p,method:l.method,action:u},u,p))}}))}function Ll(s){function o(V){return kc(V,s)}ks!==null&&kc(ks,s),Ls!==null&&kc(Ls,s),Us!==null&&kc(Us,s),Vl.forEach(o),Pl.forEach(o);for(var l=0;l<Os.length;l++){var u=Os[l];u.blockedOn===s&&(u.blockedOn=null)}for(;0<Os.length&&(l=Os[0],l.blockedOn===null);)zv(l),l.blockedOn===null&&Os.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var p=l[u],v=l[u+1],C=p[jt]||null;if(typeof v=="function")C||Hv(l);else if(C){var R=null;if(v&&v.hasAttribute("formAction")){if(p=v,C=v[jt]||null)R=C.formAction;else if(Oh(p)!==null)continue}else R=C.action;typeof R=="function"?l[u+1]=R:(l.splice(u,3),u-=3),Hv(l)}}}function qh(s){this._internalRoot=s}Uc.prototype.render=qh.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(n(409));var l=o.current,u=Vn();Uv(l,u,s,o,null,null)},Uc.prototype.unmount=qh.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;s.tag===0&&Bo(),Uv(s.current,2,null,s,null,null),_c(),o[gi]=null}};function Uc(s){this._internalRoot=s}Uc.prototype.unstable_scheduleHydration=function(s){if(s){var o=cs();s={blockedOn:null,target:s,priority:o};for(var l=0;l<Os.length&&o!==0&&o<Os[l].priority;l++);Os.splice(l,0,s),l===0&&zv(s)}};var $v=e.version;if($v!=="19.0.0")throw Error(n(527,$v,"19.0.0"));fe.findDOMNode=function(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=se(o),s=s!==null?Ae(s):null,s=s===null?null:s.stateNode,s};var US={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:x,findFiberByHostInstance:yi,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oc.isDisabled&&Oc.supportsFiber)try{ei=Oc.inject(US),Xt=Oc}catch{}}return Ol.createRoot=function(s,o){if(!r(s))throw Error(n(299));var l=!1,u="",p=ly,v=uy,C=cy,R=null;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(u=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(C=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(R=o.unstable_transitionCallbacks)),o=kv(s,1,!1,null,null,l,u,p,v,C,R,null),s[gi]=o.current,Ah(s.nodeType===8?s.parentNode:s),new qh(o)},Ol.hydrateRoot=function(s,o,l){if(!r(s))throw Error(n(299));var u=!1,p="",v=ly,C=uy,R=cy,V=null,q=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(v=l.onUncaughtError),l.onCaughtError!==void 0&&(C=l.onCaughtError),l.onRecoverableError!==void 0&&(R=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(V=l.unstable_transitionCallbacks),l.formState!==void 0&&(q=l.formState)),o=kv(s,1,!0,o,l??null,u,p,v,C,R,V,q),o.context=Lv(null),l=o.current,u=Vn(),p=Rs(u),p.callback=null,bs(l,p,u),o.current.lanes=u,mr(o,u),Ri(o),s[gi]=o.current,Ah(s),new Uc(o)},Ol.version="19.0.0",Ol}var t_;function KS(){if(t_)return Gh.exports;t_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Gh.exports=YS(),Gh.exports}var QS=KS();const ZS=z0(QS);var Bs=(i=>(i.BREAKFAST="Caf da Manh",i.SMOOTHIE="Vitamina de Frutas",i.LUNCH="Almoo",i.DESSERT="Sobremesa",i.DINNER="Jantar",i))(Bs||{});const H0=["Caf da Manh","Vitamina de Frutas","Almoo","Sobremesa","Jantar"],Zr=["Segunda","Tera","Quarta","Quinta","Sexta","Sbado","Domingo"];var We;(function(i){i.assertEqual=r=>{};function e(r){}i.assertIs=e;function t(r){throw new Error}i.assertNever=t,i.arrayToEnum=r=>{const a={};for(const c of r)a[c]=c;return a},i.getValidEnumValues=r=>{const a=i.objectKeys(r).filter(h=>typeof r[r[h]]!="number"),c={};for(const h of a)c[h]=r[h];return i.objectValues(c)},i.objectValues=r=>i.objectKeys(r).map(function(a){return r[a]}),i.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const a=[];for(const c in r)Object.prototype.hasOwnProperty.call(r,c)&&a.push(c);return a},i.find=(r,a)=>{for(const c of r)if(a(c))return c},i.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&Number.isFinite(r)&&Math.floor(r)===r;function n(r,a=" | "){return r.map(c=>typeof c=="string"?`'${c}'`:c).join(a)}i.joinValues=n,i.jsonStringifyReplacer=(r,a)=>typeof a=="bigint"?a.toString():a})(We||(We={}));var n_;(function(i){i.mergeShapes=(e,t)=>({...e,...t})})(n_||(n_={}));const pe=We.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),qs=i=>{switch(typeof i){case"undefined":return pe.undefined;case"string":return pe.string;case"number":return Number.isNaN(i)?pe.nan:pe.number;case"boolean":return pe.boolean;case"function":return pe.function;case"bigint":return pe.bigint;case"symbol":return pe.symbol;case"object":return Array.isArray(i)?pe.array:i===null?pe.null:i.then&&typeof i.then=="function"&&i.catch&&typeof i.catch=="function"?pe.promise:typeof Map<"u"&&i instanceof Map?pe.map:typeof Set<"u"&&i instanceof Set?pe.set:typeof Date<"u"&&i instanceof Date?pe.date:pe.object;default:return pe.unknown}},oe=We.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class is extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(a){return a.message},n={_errors:[]},r=a=>{for(const c of a.issues)if(c.code==="invalid_union")c.unionErrors.map(r);else if(c.code==="invalid_return_type")r(c.returnTypeError);else if(c.code==="invalid_arguments")r(c.argumentsError);else if(c.path.length===0)n._errors.push(t(c));else{let h=n,y=0;for(;y<c.path.length;){const g=c.path[y];y===c.path.length-1?(h[g]=h[g]||{_errors:[]},h[g]._errors.push(t(c))):h[g]=h[g]||{_errors:[]},h=h[g],y++}}};return r(this),n}static assert(e){if(!(e instanceof is))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,We.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},n=[];for(const r of this.issues)if(r.path.length>0){const a=r.path[0];t[a]=t[a]||[],t[a].push(e(r))}else n.push(e(r));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}is.create=i=>new is(i);const rm=(i,e)=>{let t;switch(i.code){case oe.invalid_type:i.received===pe.undefined?t="Required":t=`Expected ${i.expected}, received ${i.received}`;break;case oe.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(i.expected,We.jsonStringifyReplacer)}`;break;case oe.unrecognized_keys:t=`Unrecognized key(s) in object: ${We.joinValues(i.keys,", ")}`;break;case oe.invalid_union:t="Invalid input";break;case oe.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${We.joinValues(i.options)}`;break;case oe.invalid_enum_value:t=`Invalid enum value. Expected ${We.joinValues(i.options)}, received '${i.received}'`;break;case oe.invalid_arguments:t="Invalid function arguments";break;case oe.invalid_return_type:t="Invalid function return type";break;case oe.invalid_date:t="Invalid date";break;case oe.invalid_string:typeof i.validation=="object"?"includes"in i.validation?(t=`Invalid input: must include "${i.validation.includes}"`,typeof i.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${i.validation.position}`)):"startsWith"in i.validation?t=`Invalid input: must start with "${i.validation.startsWith}"`:"endsWith"in i.validation?t=`Invalid input: must end with "${i.validation.endsWith}"`:We.assertNever(i.validation):i.validation!=="regex"?t=`Invalid ${i.validation}`:t="Invalid";break;case oe.too_small:i.type==="array"?t=`Array must contain ${i.exact?"exactly":i.inclusive?"at least":"more than"} ${i.minimum} element(s)`:i.type==="string"?t=`String must contain ${i.exact?"exactly":i.inclusive?"at least":"over"} ${i.minimum} character(s)`:i.type==="number"?t=`Number must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${i.minimum}`:i.type==="bigint"?t=`Number must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${i.minimum}`:i.type==="date"?t=`Date must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(i.minimum))}`:t="Invalid input";break;case oe.too_big:i.type==="array"?t=`Array must contain ${i.exact?"exactly":i.inclusive?"at most":"less than"} ${i.maximum} element(s)`:i.type==="string"?t=`String must contain ${i.exact?"exactly":i.inclusive?"at most":"under"} ${i.maximum} character(s)`:i.type==="number"?t=`Number must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="bigint"?t=`BigInt must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="date"?t=`Date must be ${i.exact?"exactly":i.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(i.maximum))}`:t="Invalid input";break;case oe.custom:t="Invalid input";break;case oe.invalid_intersection_types:t="Intersection results could not be merged";break;case oe.not_multiple_of:t=`Number must be a multiple of ${i.multipleOf}`;break;case oe.not_finite:t="Number must be finite";break;default:t=e.defaultError,We.assertNever(i)}return{message:t}};let XS=rm;function JS(){return XS}const jS=i=>{const{data:e,path:t,errorMaps:n,issueData:r}=i,a=[...t,...r.path||[]],c={...r,path:a};if(r.message!==void 0)return{...r,path:a,message:r.message};let h="";const y=n.filter(g=>!!g).slice().reverse();for(const g of y)h=g(c,{data:e,defaultError:h}).message;return{...r,path:a,message:h}};function de(i,e){const t=JS(),n=jS({issueData:e,data:i.data,path:i.path,errorMaps:[i.common.contextualErrorMap,i.schemaErrorMap,t,t===rm?void 0:rm].filter(r=>!!r)});i.common.issues.push(n)}class _n{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const r of t){if(r.status==="aborted")return Me;r.status==="dirty"&&e.dirty(),n.push(r.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const r of t){const a=await r.key,c=await r.value;n.push({key:a,value:c})}return _n.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const r of t){const{key:a,value:c}=r;if(a.status==="aborted"||c.status==="aborted")return Me;a.status==="dirty"&&e.dirty(),c.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof c.value<"u"||r.alwaysSet)&&(n[a.value]=c.value)}return{status:e.value,value:n}}}const Me=Object.freeze({status:"aborted"}),ql=i=>({status:"dirty",value:i}),Wn=i=>({status:"valid",value:i}),i_=i=>i.status==="aborted",s_=i=>i.status==="dirty",oa=i=>i.status==="valid",tf=i=>typeof Promise<"u"&&i instanceof Promise;var ye;(function(i){i.errToObj=e=>typeof e=="string"?{message:e}:e||{},i.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ye||(ye={}));class ki{constructor(e,t,n,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=r}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const r_=(i,e)=>{if(oa(e))return{success:!0,data:e.value};if(!i.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new is(i.common.issues);return this._error=t,this._error}}};function Ue(i){if(!i)return{};const{errorMap:e,invalid_type_error:t,required_error:n,description:r}=i;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(c,h)=>{const{message:y}=i;return c.code==="invalid_enum_value"?{message:y??h.defaultError}:typeof h.data>"u"?{message:y??n??h.defaultError}:c.code!=="invalid_type"?{message:h.defaultError}:{message:y??t??h.defaultError}},description:r}}class Ye{get description(){return this._def.description}_getType(e){return qs(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:qs(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new _n,ctx:{common:e.parent.common,data:e.data,parsedType:qs(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(tf(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){const n={common:{issues:[],async:(t==null?void 0:t.async)??!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:qs(e)},r=this._parseSync({data:e,path:n.path,parent:n});return r_(n,r)}"~validate"(e){var n,r;const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:qs(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:t});return oa(a)?{value:a.value}:{issues:t.common.issues}}catch(a){(r=(n=a==null?void 0:a.message)==null?void 0:n.toLowerCase())!=null&&r.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(a=>oa(a)?{value:a.value}:{issues:t.common.issues})}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:qs(e)},r=this._parse({data:e,path:n.path,parent:n}),a=await(tf(r)?r:Promise.resolve(r));return r_(n,a)}refine(e,t){const n=r=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(r):t;return this._refinement((r,a)=>{const c=e(r),h=()=>a.addIssue({code:oe.custom,...n(r)});return typeof Promise<"u"&&c instanceof Promise?c.then(y=>y?!0:(h(),!1)):c?!0:(h(),!1)})}refinement(e,t){return this._refinement((n,r)=>e(n)?!0:(r.addIssue(typeof t=="function"?t(n,r):t),!1))}_refinement(e){return new ua({schema:this,typeName:Ie.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return Gs.create(this,this._def)}nullable(){return ca.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ni.create(this)}promise(){return af.create(this,this._def)}or(e){return sf.create([this,e],this._def)}and(e){return rf.create(this,e,this._def)}transform(e){return new ua({...Ue(this._def),schema:this,typeName:Ie.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new um({...Ue(this._def),innerType:this,defaultValue:t,typeName:Ie.ZodDefault})}brand(){return new Ex({typeName:Ie.ZodBranded,type:this,...Ue(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new cm({...Ue(this._def),innerType:this,catchValue:t,typeName:Ie.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return Km.create(this,e)}readonly(){return fm.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const WS=/^c[^\s-]{8,}$/i,ex=/^[0-9a-z]+$/,tx=/^[0-9A-HJKMNP-TV-Z]{26}$/i,nx=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,ix=/^[a-z0-9_-]{21}$/i,sx=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,rx=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,ox=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,ax="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Kh;const lx=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ux=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,cx=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,fx=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,dx=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,hx=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,$0="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",mx=new RegExp(`^${$0}$`);function Y0(i){let e="[0-5]\\d";i.precision?e=`${e}\\.\\d{${i.precision}}`:i.precision==null&&(e=`${e}(\\.\\d+)?`);const t=i.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function px(i){return new RegExp(`^${Y0(i)}$`)}function gx(i){let e=`${$0}T${Y0(i)}`;const t=[];return t.push(i.local?"Z?":"Z"),i.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function yx(i,e){return!!((e==="v4"||!e)&&lx.test(i)||(e==="v6"||!e)&&cx.test(i))}function vx(i,e){if(!sx.test(i))return!1;try{const[t]=i.split(".");if(!t)return!1;const n=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),r=JSON.parse(atob(n));return!(typeof r!="object"||r===null||"typ"in r&&(r==null?void 0:r.typ)!=="JWT"||!r.alg||e&&r.alg!==e)}catch{return!1}}function _x(i,e){return!!((e==="v4"||!e)&&ux.test(i)||(e==="v6"||!e)&&fx.test(i))}class Ii extends Ye{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==pe.string){const a=this._getOrReturnCtx(e);return de(a,{code:oe.invalid_type,expected:pe.string,received:a.parsedType}),Me}const n=new _n;let r;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(r=this._getOrReturnCtx(e,r),de(r,{code:oe.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="max")e.data.length>a.value&&(r=this._getOrReturnCtx(e,r),de(r,{code:oe.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="length"){const c=e.data.length>a.value,h=e.data.length<a.value;(c||h)&&(r=this._getOrReturnCtx(e,r),c?de(r,{code:oe.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):h&&de(r,{code:oe.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),n.dirty())}else if(a.kind==="email")ox.test(e.data)||(r=this._getOrReturnCtx(e,r),de(r,{validation:"email",code:oe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="emoji")Kh||(Kh=new RegExp(ax,"u")),Kh.test(e.data)||(r=this._getOrReturnCtx(e,r),de(r,{validation:"emoji",code:oe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="uuid")nx.test(e.data)||(r=this._getOrReturnCtx(e,r),de(r,{validation:"uuid",code:oe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="nanoid")ix.test(e.data)||(r=this._getOrReturnCtx(e,r),de(r,{validation:"nanoid",code:oe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid")WS.test(e.data)||(r=this._getOrReturnCtx(e,r),de(r,{validation:"cuid",code:oe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid2")ex.test(e.data)||(r=this._getOrReturnCtx(e,r),de(r,{validation:"cuid2",code:oe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="ulid")tx.test(e.data)||(r=this._getOrReturnCtx(e,r),de(r,{validation:"ulid",code:oe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),de(r,{validation:"url",code:oe.invalid_string,message:a.message}),n.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),de(r,{validation:"regex",code:oe.invalid_string,message:a.message}),n.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(r=this._getOrReturnCtx(e,r),de(r,{code:oe.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),n.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(r=this._getOrReturnCtx(e,r),de(r,{code:oe.invalid_string,validation:{startsWith:a.value},message:a.message}),n.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(r=this._getOrReturnCtx(e,r),de(r,{code:oe.invalid_string,validation:{endsWith:a.value},message:a.message}),n.dirty()):a.kind==="datetime"?gx(a).test(e.data)||(r=this._getOrReturnCtx(e,r),de(r,{code:oe.invalid_string,validation:"datetime",message:a.message}),n.dirty()):a.kind==="date"?mx.test(e.data)||(r=this._getOrReturnCtx(e,r),de(r,{code:oe.invalid_string,validation:"date",message:a.message}),n.dirty()):a.kind==="time"?px(a).test(e.data)||(r=this._getOrReturnCtx(e,r),de(r,{code:oe.invalid_string,validation:"time",message:a.message}),n.dirty()):a.kind==="duration"?rx.test(e.data)||(r=this._getOrReturnCtx(e,r),de(r,{validation:"duration",code:oe.invalid_string,message:a.message}),n.dirty()):a.kind==="ip"?yx(e.data,a.version)||(r=this._getOrReturnCtx(e,r),de(r,{validation:"ip",code:oe.invalid_string,message:a.message}),n.dirty()):a.kind==="jwt"?vx(e.data,a.alg)||(r=this._getOrReturnCtx(e,r),de(r,{validation:"jwt",code:oe.invalid_string,message:a.message}),n.dirty()):a.kind==="cidr"?_x(e.data,a.version)||(r=this._getOrReturnCtx(e,r),de(r,{validation:"cidr",code:oe.invalid_string,message:a.message}),n.dirty()):a.kind==="base64"?dx.test(e.data)||(r=this._getOrReturnCtx(e,r),de(r,{validation:"base64",code:oe.invalid_string,message:a.message}),n.dirty()):a.kind==="base64url"?hx.test(e.data)||(r=this._getOrReturnCtx(e,r),de(r,{validation:"base64url",code:oe.invalid_string,message:a.message}),n.dirty()):We.assertNever(a);return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(r=>e.test(r),{validation:t,code:oe.invalid_string,...ye.errToObj(n)})}_addCheck(e){return new Ii({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ye.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ye.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ye.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ye.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ye.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ye.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ye.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ye.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ye.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...ye.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...ye.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ye.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...ye.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...ye.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...ye.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...ye.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...ye.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...ye.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...ye.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...ye.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...ye.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...ye.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...ye.errToObj(t)})}nonempty(e){return this.min(1,ye.errToObj(e))}trim(){return new Ii({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ii({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ii({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Ii.create=i=>new Ii({checks:[],typeName:Ie.ZodString,coerce:(i==null?void 0:i.coerce)??!1,...Ue(i)});function Tx(i,e){const t=(i.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,r=t>n?t:n,a=Number.parseInt(i.toFixed(r).replace(".","")),c=Number.parseInt(e.toFixed(r).replace(".",""));return a%c/10**r}class Jr extends Ye{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==pe.number){const a=this._getOrReturnCtx(e);return de(a,{code:oe.invalid_type,expected:pe.number,received:a.parsedType}),Me}let n;const r=new _n;for(const a of this._def.checks)a.kind==="int"?We.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),de(n,{code:oe.invalid_type,expected:"integer",received:"float",message:a.message}),r.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),de(n,{code:oe.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),r.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),de(n,{code:oe.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),r.dirty()):a.kind==="multipleOf"?Tx(e.data,a.value)!==0&&(n=this._getOrReturnCtx(e,n),de(n,{code:oe.not_multiple_of,multipleOf:a.value,message:a.message}),r.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),de(n,{code:oe.not_finite,message:a.message}),r.dirty()):We.assertNever(a);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,ye.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ye.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ye.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ye.toString(t))}setLimit(e,t,n,r){return new Jr({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:ye.toString(r)}]})}_addCheck(e){return new Jr({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ye.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ye.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ye.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ye.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ye.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ye.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:ye.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ye.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ye.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&We.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Jr.create=i=>new Jr({checks:[],typeName:Ie.ZodNumber,coerce:(i==null?void 0:i.coerce)||!1,...Ue(i)});class jr extends Ye{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==pe.bigint)return this._getInvalidInput(e);let n;const r=new _n;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),de(n,{code:oe.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),r.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),de(n,{code:oe.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),r.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),de(n,{code:oe.not_multiple_of,multipleOf:a.value,message:a.message}),r.dirty()):We.assertNever(a);return{status:r.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return de(t,{code:oe.invalid_type,expected:pe.bigint,received:t.parsedType}),Me}gte(e,t){return this.setLimit("min",e,!0,ye.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ye.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ye.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ye.toString(t))}setLimit(e,t,n,r){return new jr({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:ye.toString(r)}]})}_addCheck(e){return new jr({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ye.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ye.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ye.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ye.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ye.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}jr.create=i=>new jr({checks:[],typeName:Ie.ZodBigInt,coerce:(i==null?void 0:i.coerce)??!1,...Ue(i)});class nf extends Ye{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==pe.boolean){const n=this._getOrReturnCtx(e);return de(n,{code:oe.invalid_type,expected:pe.boolean,received:n.parsedType}),Me}return Wn(e.data)}}nf.create=i=>new nf({typeName:Ie.ZodBoolean,coerce:(i==null?void 0:i.coerce)||!1,...Ue(i)});class aa extends Ye{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==pe.date){const a=this._getOrReturnCtx(e);return de(a,{code:oe.invalid_type,expected:pe.date,received:a.parsedType}),Me}if(Number.isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return de(a,{code:oe.invalid_date}),Me}const n=new _n;let r;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(r=this._getOrReturnCtx(e,r),de(r,{code:oe.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),n.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(r=this._getOrReturnCtx(e,r),de(r,{code:oe.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),n.dirty()):We.assertNever(a);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new aa({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:ye.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:ye.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}aa.create=i=>new aa({checks:[],coerce:(i==null?void 0:i.coerce)||!1,typeName:Ie.ZodDate,...Ue(i)});class o_ extends Ye{_parse(e){if(this._getType(e)!==pe.symbol){const n=this._getOrReturnCtx(e);return de(n,{code:oe.invalid_type,expected:pe.symbol,received:n.parsedType}),Me}return Wn(e.data)}}o_.create=i=>new o_({typeName:Ie.ZodSymbol,...Ue(i)});class a_ extends Ye{_parse(e){if(this._getType(e)!==pe.undefined){const n=this._getOrReturnCtx(e);return de(n,{code:oe.invalid_type,expected:pe.undefined,received:n.parsedType}),Me}return Wn(e.data)}}a_.create=i=>new a_({typeName:Ie.ZodUndefined,...Ue(i)});class l_ extends Ye{_parse(e){if(this._getType(e)!==pe.null){const n=this._getOrReturnCtx(e);return de(n,{code:oe.invalid_type,expected:pe.null,received:n.parsedType}),Me}return Wn(e.data)}}l_.create=i=>new l_({typeName:Ie.ZodNull,...Ue(i)});class u_ extends Ye{constructor(){super(...arguments),this._any=!0}_parse(e){return Wn(e.data)}}u_.create=i=>new u_({typeName:Ie.ZodAny,...Ue(i)});class om extends Ye{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Wn(e.data)}}om.create=i=>new om({typeName:Ie.ZodUnknown,...Ue(i)});class Zs extends Ye{_parse(e){const t=this._getOrReturnCtx(e);return de(t,{code:oe.invalid_type,expected:pe.never,received:t.parsedType}),Me}}Zs.create=i=>new Zs({typeName:Ie.ZodNever,...Ue(i)});class c_ extends Ye{_parse(e){if(this._getType(e)!==pe.undefined){const n=this._getOrReturnCtx(e);return de(n,{code:oe.invalid_type,expected:pe.void,received:n.parsedType}),Me}return Wn(e.data)}}c_.create=i=>new c_({typeName:Ie.ZodVoid,...Ue(i)});class Ni extends Ye{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),r=this._def;if(t.parsedType!==pe.array)return de(t,{code:oe.invalid_type,expected:pe.array,received:t.parsedType}),Me;if(r.exactLength!==null){const c=t.data.length>r.exactLength.value,h=t.data.length<r.exactLength.value;(c||h)&&(de(t,{code:c?oe.too_big:oe.too_small,minimum:h?r.exactLength.value:void 0,maximum:c?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),n.dirty())}if(r.minLength!==null&&t.data.length<r.minLength.value&&(de(t,{code:oe.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),n.dirty()),r.maxLength!==null&&t.data.length>r.maxLength.value&&(de(t,{code:oe.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((c,h)=>r.type._parseAsync(new ki(t,c,t.path,h)))).then(c=>_n.mergeArray(n,c));const a=[...t.data].map((c,h)=>r.type._parseSync(new ki(t,c,t.path,h)));return _n.mergeArray(n,a)}get element(){return this._def.type}min(e,t){return new Ni({...this._def,minLength:{value:e,message:ye.toString(t)}})}max(e,t){return new Ni({...this._def,maxLength:{value:e,message:ye.toString(t)}})}length(e,t){return new Ni({...this._def,exactLength:{value:e,message:ye.toString(t)}})}nonempty(e){return this.min(1,e)}}Ni.create=(i,e)=>new Ni({type:i,minLength:null,maxLength:null,exactLength:null,typeName:Ie.ZodArray,...Ue(e)});function Qo(i){if(i instanceof kt){const e={};for(const t in i.shape){const n=i.shape[t];e[t]=Gs.create(Qo(n))}return new kt({...i._def,shape:()=>e})}else return i instanceof Ni?new Ni({...i._def,type:Qo(i.element)}):i instanceof Gs?Gs.create(Qo(i.unwrap())):i instanceof ca?ca.create(Qo(i.unwrap())):i instanceof Wr?Wr.create(i.items.map(e=>Qo(e))):i}class kt extends Ye{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=We.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==pe.object){const g=this._getOrReturnCtx(e);return de(g,{code:oe.invalid_type,expected:pe.object,received:g.parsedType}),Me}const{status:n,ctx:r}=this._processInputParams(e),{shape:a,keys:c}=this._getCached(),h=[];if(!(this._def.catchall instanceof Zs&&this._def.unknownKeys==="strip"))for(const g in r.data)c.includes(g)||h.push(g);const y=[];for(const g of c){const _=a[g],E=r.data[g];y.push({key:{status:"valid",value:g},value:_._parse(new ki(r,E,r.path,g)),alwaysSet:g in r.data})}if(this._def.catchall instanceof Zs){const g=this._def.unknownKeys;if(g==="passthrough")for(const _ of h)y.push({key:{status:"valid",value:_},value:{status:"valid",value:r.data[_]}});else if(g==="strict")h.length>0&&(de(r,{code:oe.unrecognized_keys,keys:h}),n.dirty());else if(g!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const g=this._def.catchall;for(const _ of h){const E=r.data[_];y.push({key:{status:"valid",value:_},value:g._parse(new ki(r,E,r.path,_)),alwaysSet:_ in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const g=[];for(const _ of y){const E=await _.key,S=await _.value;g.push({key:E,value:S,alwaysSet:_.alwaysSet})}return g}).then(g=>_n.mergeObjectSync(n,g)):_n.mergeObjectSync(n,y)}get shape(){return this._def.shape()}strict(e){return ye.errToObj,new kt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{var a,c;const r=((c=(a=this._def).errorMap)==null?void 0:c.call(a,t,n).message)??n.defaultError;return t.code==="unrecognized_keys"?{message:ye.errToObj(e).message??r}:{message:r}}}:{}})}strip(){return new kt({...this._def,unknownKeys:"strip"})}passthrough(){return new kt({...this._def,unknownKeys:"passthrough"})}extend(e){return new kt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new kt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ie.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new kt({...this._def,catchall:e})}pick(e){const t={};for(const n of We.objectKeys(e))e[n]&&this.shape[n]&&(t[n]=this.shape[n]);return new kt({...this._def,shape:()=>t})}omit(e){const t={};for(const n of We.objectKeys(this.shape))e[n]||(t[n]=this.shape[n]);return new kt({...this._def,shape:()=>t})}deepPartial(){return Qo(this)}partial(e){const t={};for(const n of We.objectKeys(this.shape)){const r=this.shape[n];e&&!e[n]?t[n]=r:t[n]=r.optional()}return new kt({...this._def,shape:()=>t})}required(e){const t={};for(const n of We.objectKeys(this.shape))if(e&&!e[n])t[n]=this.shape[n];else{let a=this.shape[n];for(;a instanceof Gs;)a=a._def.innerType;t[n]=a}return new kt({...this._def,shape:()=>t})}keyof(){return K0(We.objectKeys(this.shape))}}kt.create=(i,e)=>new kt({shape:()=>i,unknownKeys:"strip",catchall:Zs.create(),typeName:Ie.ZodObject,...Ue(e)});kt.strictCreate=(i,e)=>new kt({shape:()=>i,unknownKeys:"strict",catchall:Zs.create(),typeName:Ie.ZodObject,...Ue(e)});kt.lazycreate=(i,e)=>new kt({shape:i,unknownKeys:"strip",catchall:Zs.create(),typeName:Ie.ZodObject,...Ue(e)});class sf extends Ye{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;function r(a){for(const h of a)if(h.result.status==="valid")return h.result;for(const h of a)if(h.result.status==="dirty")return t.common.issues.push(...h.ctx.common.issues),h.result;const c=a.map(h=>new is(h.ctx.common.issues));return de(t,{code:oe.invalid_union,unionErrors:c}),Me}if(t.common.async)return Promise.all(n.map(async a=>{const c={...t,common:{...t.common,issues:[]},parent:null};return{result:await a._parseAsync({data:t.data,path:t.path,parent:c}),ctx:c}})).then(r);{let a;const c=[];for(const y of n){const g={...t,common:{...t.common,issues:[]},parent:null},_=y._parseSync({data:t.data,path:t.path,parent:g});if(_.status==="valid")return _;_.status==="dirty"&&!a&&(a={result:_,ctx:g}),g.common.issues.length&&c.push(g.common.issues)}if(a)return t.common.issues.push(...a.ctx.common.issues),a.result;const h=c.map(y=>new is(y));return de(t,{code:oe.invalid_union,unionErrors:h}),Me}}get options(){return this._def.options}}sf.create=(i,e)=>new sf({options:i,typeName:Ie.ZodUnion,...Ue(e)});function am(i,e){const t=qs(i),n=qs(e);if(i===e)return{valid:!0,data:i};if(t===pe.object&&n===pe.object){const r=We.objectKeys(e),a=We.objectKeys(i).filter(h=>r.indexOf(h)!==-1),c={...i,...e};for(const h of a){const y=am(i[h],e[h]);if(!y.valid)return{valid:!1};c[h]=y.data}return{valid:!0,data:c}}else if(t===pe.array&&n===pe.array){if(i.length!==e.length)return{valid:!1};const r=[];for(let a=0;a<i.length;a++){const c=i[a],h=e[a],y=am(c,h);if(!y.valid)return{valid:!1};r.push(y.data)}return{valid:!0,data:r}}else return t===pe.date&&n===pe.date&&+i==+e?{valid:!0,data:i}:{valid:!1}}class rf extends Ye{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=(a,c)=>{if(i_(a)||i_(c))return Me;const h=am(a.value,c.value);return h.valid?((s_(a)||s_(c))&&t.dirty(),{status:t.value,value:h.data}):(de(n,{code:oe.invalid_intersection_types}),Me)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([a,c])=>r(a,c)):r(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}rf.create=(i,e,t)=>new rf({left:i,right:e,typeName:Ie.ZodIntersection,...Ue(t)});class Wr extends Ye{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==pe.array)return de(n,{code:oe.invalid_type,expected:pe.array,received:n.parsedType}),Me;if(n.data.length<this._def.items.length)return de(n,{code:oe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Me;!this._def.rest&&n.data.length>this._def.items.length&&(de(n,{code:oe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const a=[...n.data].map((c,h)=>{const y=this._def.items[h]||this._def.rest;return y?y._parse(new ki(n,c,n.path,h)):null}).filter(c=>!!c);return n.common.async?Promise.all(a).then(c=>_n.mergeArray(t,c)):_n.mergeArray(t,a)}get items(){return this._def.items}rest(e){return new Wr({...this._def,rest:e})}}Wr.create=(i,e)=>{if(!Array.isArray(i))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Wr({items:i,typeName:Ie.ZodTuple,rest:null,...Ue(e)})};class of extends Ye{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==pe.object)return de(n,{code:oe.invalid_type,expected:pe.object,received:n.parsedType}),Me;const r=[],a=this._def.keyType,c=this._def.valueType;for(const h in n.data)r.push({key:a._parse(new ki(n,h,n.path,h)),value:c._parse(new ki(n,n.data[h],n.path,h)),alwaysSet:h in n.data});return n.common.async?_n.mergeObjectAsync(t,r):_n.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,n){return t instanceof Ye?new of({keyType:e,valueType:t,typeName:Ie.ZodRecord,...Ue(n)}):new of({keyType:Ii.create(),valueType:e,typeName:Ie.ZodRecord,...Ue(t)})}}class f_ extends Ye{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==pe.map)return de(n,{code:oe.invalid_type,expected:pe.map,received:n.parsedType}),Me;const r=this._def.keyType,a=this._def.valueType,c=[...n.data.entries()].map(([h,y],g)=>({key:r._parse(new ki(n,h,n.path,[g,"key"])),value:a._parse(new ki(n,y,n.path,[g,"value"]))}));if(n.common.async){const h=new Map;return Promise.resolve().then(async()=>{for(const y of c){const g=await y.key,_=await y.value;if(g.status==="aborted"||_.status==="aborted")return Me;(g.status==="dirty"||_.status==="dirty")&&t.dirty(),h.set(g.value,_.value)}return{status:t.value,value:h}})}else{const h=new Map;for(const y of c){const g=y.key,_=y.value;if(g.status==="aborted"||_.status==="aborted")return Me;(g.status==="dirty"||_.status==="dirty")&&t.dirty(),h.set(g.value,_.value)}return{status:t.value,value:h}}}}f_.create=(i,e,t)=>new f_({valueType:e,keyType:i,typeName:Ie.ZodMap,...Ue(t)});class jl extends Ye{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==pe.set)return de(n,{code:oe.invalid_type,expected:pe.set,received:n.parsedType}),Me;const r=this._def;r.minSize!==null&&n.data.size<r.minSize.value&&(de(n,{code:oe.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),r.maxSize!==null&&n.data.size>r.maxSize.value&&(de(n,{code:oe.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());const a=this._def.valueType;function c(y){const g=new Set;for(const _ of y){if(_.status==="aborted")return Me;_.status==="dirty"&&t.dirty(),g.add(_.value)}return{status:t.value,value:g}}const h=[...n.data.values()].map((y,g)=>a._parse(new ki(n,y,n.path,g)));return n.common.async?Promise.all(h).then(y=>c(y)):c(h)}min(e,t){return new jl({...this._def,minSize:{value:e,message:ye.toString(t)}})}max(e,t){return new jl({...this._def,maxSize:{value:e,message:ye.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}jl.create=(i,e)=>new jl({valueType:i,minSize:null,maxSize:null,typeName:Ie.ZodSet,...Ue(e)});class lm extends Ye{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}lm.create=(i,e)=>new lm({getter:i,typeName:Ie.ZodLazy,...Ue(e)});class d_ extends Ye{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return de(t,{received:t.data,code:oe.invalid_literal,expected:this._def.value}),Me}return{status:"valid",value:e.data}}get value(){return this._def.value}}d_.create=(i,e)=>new d_({value:i,typeName:Ie.ZodLiteral,...Ue(e)});function K0(i,e){return new la({values:i,typeName:Ie.ZodEnum,...Ue(e)})}class la extends Ye{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),n=this._def.values;return de(t,{expected:We.joinValues(n),received:t.parsedType,code:oe.invalid_type}),Me}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return de(t,{received:t.data,code:oe.invalid_enum_value,options:n}),Me}return Wn(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return la.create(e,{...this._def,...t})}exclude(e,t=this._def){return la.create(this.options.filter(n=>!e.includes(n)),{...this._def,...t})}}la.create=K0;class h_ extends Ye{_parse(e){const t=We.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==pe.string&&n.parsedType!==pe.number){const r=We.objectValues(t);return de(n,{expected:We.joinValues(r),received:n.parsedType,code:oe.invalid_type}),Me}if(this._cache||(this._cache=new Set(We.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const r=We.objectValues(t);return de(n,{received:n.data,code:oe.invalid_enum_value,options:r}),Me}return Wn(e.data)}get enum(){return this._def.values}}h_.create=(i,e)=>new h_({values:i,typeName:Ie.ZodNativeEnum,...Ue(e)});class af extends Ye{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==pe.promise&&t.common.async===!1)return de(t,{code:oe.invalid_type,expected:pe.promise,received:t.parsedType}),Me;const n=t.parsedType===pe.promise?t.data:Promise.resolve(t.data);return Wn(n.then(r=>this._def.type.parseAsync(r,{path:t.path,errorMap:t.common.contextualErrorMap})))}}af.create=(i,e)=>new af({type:i,typeName:Ie.ZodPromise,...Ue(e)});class ua extends Ye{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ie.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=this._def.effect||null,a={addIssue:c=>{de(n,c),c.fatal?t.abort():t.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),r.type==="preprocess"){const c=r.transform(n.data,a);if(n.common.async)return Promise.resolve(c).then(async h=>{if(t.value==="aborted")return Me;const y=await this._def.schema._parseAsync({data:h,path:n.path,parent:n});return y.status==="aborted"?Me:y.status==="dirty"||t.value==="dirty"?ql(y.value):y});{if(t.value==="aborted")return Me;const h=this._def.schema._parseSync({data:c,path:n.path,parent:n});return h.status==="aborted"?Me:h.status==="dirty"||t.value==="dirty"?ql(h.value):h}}if(r.type==="refinement"){const c=h=>{const y=r.refinement(h,a);if(n.common.async)return Promise.resolve(y);if(y instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return h};if(n.common.async===!1){const h=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return h.status==="aborted"?Me:(h.status==="dirty"&&t.dirty(),c(h.value),{status:t.value,value:h.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(h=>h.status==="aborted"?Me:(h.status==="dirty"&&t.dirty(),c(h.value).then(()=>({status:t.value,value:h.value}))))}if(r.type==="transform")if(n.common.async===!1){const c=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!oa(c))return Me;const h=r.transform(c.value,a);if(h instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:h}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(c=>oa(c)?Promise.resolve(r.transform(c.value,a)).then(h=>({status:t.value,value:h})):Me);We.assertNever(r)}}ua.create=(i,e,t)=>new ua({schema:i,typeName:Ie.ZodEffects,effect:e,...Ue(t)});ua.createWithPreprocess=(i,e,t)=>new ua({schema:e,effect:{type:"preprocess",transform:i},typeName:Ie.ZodEffects,...Ue(t)});class Gs extends Ye{_parse(e){return this._getType(e)===pe.undefined?Wn(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Gs.create=(i,e)=>new Gs({innerType:i,typeName:Ie.ZodOptional,...Ue(e)});class ca extends Ye{_parse(e){return this._getType(e)===pe.null?Wn(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ca.create=(i,e)=>new ca({innerType:i,typeName:Ie.ZodNullable,...Ue(e)});class um extends Ye{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===pe.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}um.create=(i,e)=>new um({innerType:i,typeName:Ie.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ue(e)});class cm extends Ye{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return tf(r)?r.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new is(n.common.issues)},input:n.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new is(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}cm.create=(i,e)=>new cm({innerType:i,typeName:Ie.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ue(e)});class m_ extends Ye{_parse(e){if(this._getType(e)!==pe.nan){const n=this._getOrReturnCtx(e);return de(n,{code:oe.invalid_type,expected:pe.nan,received:n.parsedType}),Me}return{status:"valid",value:e.data}}}m_.create=i=>new m_({typeName:Ie.ZodNaN,...Ue(i)});class Ex extends Ye{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class Km extends Ye{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?Me:a.status==="dirty"?(t.dirty(),ql(a.value)):this._def.out._parseAsync({data:a.value,path:n.path,parent:n})})();{const r=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return r.status==="aborted"?Me:r.status==="dirty"?(t.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:n.path,parent:n})}}static create(e,t){return new Km({in:e,out:t,typeName:Ie.ZodPipeline})}}class fm extends Ye{_parse(e){const t=this._def.innerType._parse(e),n=r=>(oa(r)&&(r.value=Object.freeze(r.value)),r);return tf(t)?t.then(r=>n(r)):n(t)}unwrap(){return this._def.innerType}}fm.create=(i,e)=>new fm({innerType:i,typeName:Ie.ZodReadonly,...Ue(e)});var Ie;(function(i){i.ZodString="ZodString",i.ZodNumber="ZodNumber",i.ZodNaN="ZodNaN",i.ZodBigInt="ZodBigInt",i.ZodBoolean="ZodBoolean",i.ZodDate="ZodDate",i.ZodSymbol="ZodSymbol",i.ZodUndefined="ZodUndefined",i.ZodNull="ZodNull",i.ZodAny="ZodAny",i.ZodUnknown="ZodUnknown",i.ZodNever="ZodNever",i.ZodVoid="ZodVoid",i.ZodArray="ZodArray",i.ZodObject="ZodObject",i.ZodUnion="ZodUnion",i.ZodDiscriminatedUnion="ZodDiscriminatedUnion",i.ZodIntersection="ZodIntersection",i.ZodTuple="ZodTuple",i.ZodRecord="ZodRecord",i.ZodMap="ZodMap",i.ZodSet="ZodSet",i.ZodFunction="ZodFunction",i.ZodLazy="ZodLazy",i.ZodLiteral="ZodLiteral",i.ZodEnum="ZodEnum",i.ZodEffects="ZodEffects",i.ZodNativeEnum="ZodNativeEnum",i.ZodOptional="ZodOptional",i.ZodNullable="ZodNullable",i.ZodDefault="ZodDefault",i.ZodCatch="ZodCatch",i.ZodPromise="ZodPromise",i.ZodBranded="ZodBranded",i.ZodPipeline="ZodPipeline",i.ZodReadonly="ZodReadonly"})(Ie||(Ie={}));const Yr=Ii.create,p_=Jr.create;jr.create;const Cx=nf.create;aa.create;const g_=om.create;Zs.create;const Bl=Ni.create,Ax=kt.create,Sx=sf.create;rf.create;Wr.create;const xx=of.create,wx=lm.create,Rx=la.create;af.create;Gs.create;ca.create;const Ko={string:(i=>Ii.create({...i,coerce:!0})),number:(i=>Jr.create({...i,coerce:!0})),boolean:(i=>nf.create({...i,coerce:!0})),bigint:(i=>jr.create({...i,coerce:!0})),date:(i=>aa.create({...i,coerce:!0}))};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let bx,Ix;function Nx(){return{geminiUrl:bx,vertexUrl:Ix}}function Mx(i,e,t){var n,r,a;if(!(!((n=i.httpOptions)===null||n===void 0)&&n.baseUrl)){const c=Nx();return i.vertexai?(r=c.vertexUrl)!==null&&r!==void 0?r:e:(a=c.geminiUrl)!==null&&a!==void 0?a:t}return i.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class va{}function we(i,e){const t=/\{([^}]+)\}/g;return i.replace(t,(n,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const a=e[r];return a!=null?String(a):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function d(i,e,t){for(let a=0;a<e.length-1;a++){const c=e[a];if(c.endsWith("[]")){const h=c.slice(0,-2);if(!(h in i))if(Array.isArray(t))i[h]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(i[h])){const y=i[h];if(Array.isArray(t))for(let g=0;g<y.length;g++){const _=y[g];d(_,e.slice(a+1),t[g])}else for(const g of y)d(g,e.slice(a+1),t)}return}else if(c.endsWith("[0]")){const h=c.slice(0,-3);h in i||(i[h]=[{}]);const y=i[h];d(y[0],e.slice(a+1),t);return}(!i[c]||typeof i[c]!="object")&&(i[c]={}),i=i[c]}const n=e[e.length-1],r=i[n];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${n}`)}else i[n]=t}function f(i,e){try{if(e.length===1&&e[0]==="_self")return i;for(let t=0;t<e.length;t++){if(typeof i!="object"||i===null)return;const n=e[t];if(n.endsWith("[]")){const r=n.slice(0,-2);if(r in i){const a=i[r];return Array.isArray(a)?a.map(c=>f(c,e.slice(t+1))):void 0}else return}else i=i[n]}return i}catch(t){if(t instanceof TypeError)return;throw t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var y_;(function(i){i.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",i.OUTCOME_OK="OUTCOME_OK",i.OUTCOME_FAILED="OUTCOME_FAILED",i.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(y_||(y_={}));var v_;(function(i){i.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",i.PYTHON="PYTHON"})(v_||(v_={}));var Zn;(function(i){i.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",i.STRING="STRING",i.NUMBER="NUMBER",i.INTEGER="INTEGER",i.BOOLEAN="BOOLEAN",i.ARRAY="ARRAY",i.OBJECT="OBJECT",i.NULL="NULL"})(Zn||(Zn={}));var __;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(__||(__={}));var T_;(function(i){i.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",i.SEVERITY="SEVERITY",i.PROBABILITY="PROBABILITY"})(T_||(T_={}));var E_;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE",i.OFF="OFF"})(E_||(E_={}));var C_;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(C_||(C_={}));var A_;(function(i){i.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",i.NO_AUTH="NO_AUTH",i.API_KEY_AUTH="API_KEY_AUTH",i.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",i.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",i.OAUTH="OAUTH",i.OIDC_AUTH="OIDC_AUTH"})(A_||(A_={}));var S_;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.IMAGE_SAFETY="IMAGE_SAFETY",i.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(S_||(S_={}));var x_;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(x_||(x_={}));var w_;(function(i){i.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",i.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",i.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",i.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",i.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(w_||(w_={}));var R_;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(R_||(R_={}));var b_;(function(i){i.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",i.ON_DEMAND="ON_DEMAND",i.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(b_||(b_={}));var lf;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.AUDIO="AUDIO"})(lf||(lf={}));var I_;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(I_||(I_={}));var dm;(function(i){i.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",i.JOB_STATE_QUEUED="JOB_STATE_QUEUED",i.JOB_STATE_PENDING="JOB_STATE_PENDING",i.JOB_STATE_RUNNING="JOB_STATE_RUNNING",i.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",i.JOB_STATE_FAILED="JOB_STATE_FAILED",i.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",i.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",i.JOB_STATE_PAUSED="JOB_STATE_PAUSED",i.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",i.JOB_STATE_UPDATING="JOB_STATE_UPDATING",i.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(dm||(dm={}));var N_;(function(i){i.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",i.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",i.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",i.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",i.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",i.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",i.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(N_||(N_={}));var M_;(function(i){i.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",i.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",i.BALANCED="BALANCED",i.PRIORITIZE_COST="PRIORITIZE_COST"})(M_||(M_={}));var D_;(function(i){i.UNSPECIFIED="UNSPECIFIED",i.BLOCKING="BLOCKING",i.NON_BLOCKING="NON_BLOCKING"})(D_||(D_={}));var V_;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(V_||(V_={}));var P_;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE"})(P_||(P_={}));var k_;(function(i){i.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",i.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",i.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(k_||(k_={}));var L_;(function(i){i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(L_||(L_={}));var U_;(function(i){i.DONT_ALLOW="DONT_ALLOW",i.ALLOW_ADULT="ALLOW_ADULT",i.ALLOW_ALL="ALLOW_ALL"})(U_||(U_={}));var O_;(function(i){i.auto="auto",i.en="en",i.ja="ja",i.ko="ko",i.hi="hi"})(O_||(O_={}));var F_;(function(i){i.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",i.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",i.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",i.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",i.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(F_||(F_={}));var q_;(function(i){i.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",i.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",i.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",i.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(q_||(q_={}));var B_;(function(i){i.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",i.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",i.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",i.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(B_||(B_={}));var z_;(function(i){i.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",i.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",i.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",i.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",i.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",i.EDIT_MODE_STYLE="EDIT_MODE_STYLE",i.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",i.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(z_||(z_={}));var G_;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.PROCESSING="PROCESSING",i.ACTIVE="ACTIVE",i.FAILED="FAILED"})(G_||(G_={}));var H_;(function(i){i.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",i.UPLOADED="UPLOADED",i.GENERATED="GENERATED"})(H_||(H_={}));var $_;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.VIDEO="VIDEO",i.AUDIO="AUDIO",i.DOCUMENT="DOCUMENT"})($_||($_={}));var Y_;(function(i){i.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",i.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",i.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Y_||(Y_={}));var K_;(function(i){i.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",i.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",i.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(K_||(K_={}));var Q_;(function(i){i.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",i.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",i.NO_INTERRUPTION="NO_INTERRUPTION"})(Q_||(Q_={}));var Z_;(function(i){i.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",i.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",i.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Z_||(Z_={}));var X_;(function(i){i.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",i.SILENT="SILENT",i.WHEN_IDLE="WHEN_IDLE",i.INTERRUPT="INTERRUPT"})(X_||(X_={}));var J_;(function(i){i.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",i.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",i.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",i.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",i.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",i.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",i.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",i.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",i.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",i.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",i.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",i.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",i.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(J_||(J_={}));var Wo;(function(i){i.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",i.PLAY="PLAY",i.PAUSE="PAUSE",i.STOP="STOP",i.RESET_CONTEXT="RESET_CONTEXT"})(Wo||(Wo={}));class Fl{get text(){var e,t,n,r,a,c,h,y;if(((r=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let g="",_=!1;const E=[];for(const S of(y=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&y!==void 0?y:[]){for(const[I,U]of Object.entries(S))I!=="text"&&I!=="thought"&&(U!==null||U!==void 0)&&E.push(I);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;_=!0,g+=S.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),_?g:void 0}get data(){var e,t,n,r,a,c,h,y;if(((r=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let g="";const _=[];for(const E of(y=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&y!==void 0?y:[]){for(const[S,I]of Object.entries(E))S!=="inlineData"&&(I!==null||I!==void 0)&&_.push(S);E.inlineData&&typeof E.inlineData.data=="string"&&(g+=atob(E.inlineData.data))}return _.length>0&&console.warn(`there are non-data parts ${_} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),g.length>0?btoa(g):void 0}get functionCalls(){var e,t,n,r,a,c,h,y;if(((r=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const g=(y=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||y===void 0?void 0:y.filter(_=>_.functionCall).map(_=>_.functionCall).filter(_=>_!==void 0);if((g==null?void 0:g.length)!==0)return g}get executableCode(){var e,t,n,r,a,c,h,y,g;if(((r=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const _=(y=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||y===void 0?void 0:y.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((_==null?void 0:_.length)!==0)return(g=_==null?void 0:_[0])===null||g===void 0?void 0:g.code}get codeExecutionResult(){var e,t,n,r,a,c,h,y,g;if(((r=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const _=(y=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||y===void 0?void 0:y.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((_==null?void 0:_.length)!==0)return(g=_==null?void 0:_[0])===null||g===void 0?void 0:g.output}}class j_{}class W_{}class Dx{}class Vx{}class eT{}class tT{}class nT{}class Px{}class iT{}class sT{}class rT{}class kx{}class hm{constructor(e){const t={};for(const n of e.headers.entries())t[n[0]]=n[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Lx{}class Ux{}class Ox{get text(){var e,t,n;let r="",a=!1;const c=[];for(const h of(n=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&n!==void 0?n:[]){for(const[y,g]of Object.entries(h))y!=="text"&&y!=="thought"&&g!==null&&c.push(y);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;a=!0,r+=h.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?r:void 0}get data(){var e,t,n;let r="";const a=[];for(const c of(n=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&n!==void 0?n:[]){for(const[h,y]of Object.entries(c))h!=="inlineData"&&y!==null&&a.push(h);c.inlineData&&typeof c.inlineData.data=="string"&&(r+=atob(c.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class Fx{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dt(i,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(i.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Q0(i,e){const t=dt(i,e);return t?t.startsWith("publishers/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/${t}`:t.startsWith("models/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/publishers/google/${t}`:t:""}function Z0(i,e){return Array.isArray(e)?e.map(t=>uf(i,t)):[uf(i,e)]}function uf(i,e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function qx(i,e){const t=uf(i,e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Bx(i,e){const t=uf(i,e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function oT(i,e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function X0(i,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>oT(i,t)):[oT(i,e)]}function mm(i){return i!=null&&typeof i=="object"&&"parts"in i&&Array.isArray(i.parts)}function aT(i){return i!=null&&typeof i=="object"&&"functionCall"in i}function lT(i){return i!=null&&typeof i=="object"&&"functionResponse"in i}function vn(i,e){if(e==null)throw new Error("ContentUnion is required");return mm(e)?e:{role:"user",parts:X0(i,e)}}function J0(i,e){if(!e)return[];if(i.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const n=vn(i,t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]});if(i.isVertexAI()){const t=vn(i,e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>vn(i,t)):[vn(i,e)]}function fi(i,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(aT(e)||lT(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[vn(i,e)]}const t=[],n=[],r=mm(e[0]);for(const a of e){const c=mm(a);if(c!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(c)t.push(a);else{if(aT(a)||lT(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(a)}}return r||t.push({role:"user",parts:X0(i,n)}),t}const zx=new Set(["type","format","title","description","default","items","minItems","maxItems","enum","properties","required","minProperties","maxProperties","minimum","maximum","minLength","maxLength","pattern","anyOf","propertyOrdering"]),uT=Rx(["string","number","integer","object","array","boolean","null"]),Gx=Sx([uT,Bl(uT)]);function Hx(i=!0){const e=wx(()=>{const t=Ax({type:Gx.optional(),format:Yr().optional(),title:Yr().optional(),description:Yr().optional(),default:g_().optional(),items:e.optional(),minItems:Ko.string().optional(),maxItems:Ko.string().optional(),enum:Bl(g_()).optional(),properties:xx(Yr(),e).optional(),required:Bl(Yr()).optional(),minProperties:Ko.string().optional(),maxProperties:Ko.string().optional(),propertyOrdering:Bl(Yr()).optional(),minimum:p_().optional(),maximum:p_().optional(),minLength:Ko.string().optional(),maxLength:Ko.string().optional(),pattern:Yr().optional(),anyOf:Bl(e).optional(),additionalProperties:Cx().optional()});return i?t.strict():t});return e}function $x(i,e){i.includes("null")&&(e.nullable=!0);const t=i.filter(n=>n!=="null");if(t.length===1)e.type=Object.keys(Zn).includes(t[0].toUpperCase())?Zn[t[0].toUpperCase()]:Zn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const n of t)e.anyOf.push({type:Object.keys(Zn).includes(n.toUpperCase())?Zn[n.toUpperCase()]:Zn.TYPE_UNSPECIFIED})}}function ta(i){const e={},t=["items"],n=["anyOf"],r=["properties"];if(i.type&&i.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=i.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,i=a[1]):a[1].type==="null"&&(e.nullable=!0,i=a[0])),i.type instanceof Array&&$x(i.type,e);for(const[c,h]of Object.entries(i))if(h!=null)if(c=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.keys(Zn).includes(h.toUpperCase())?h.toUpperCase():Zn.TYPE_UNSPECIFIED}else if(t.includes(c))e[c]=ta(h);else if(n.includes(c)){const y=[];for(const g of h){if(g.type=="null"){e.nullable=!0;continue}y.push(ta(g))}e[c]=y}else if(r.includes(c)){const y={};for(const[g,_]of Object.entries(h))y[g]=ta(_);e[c]=y}else{if(c==="additionalProperties")continue;e[c]=h}return e}function cf(i,e){if(Object.keys(e).includes("$schema")){delete e.$schema;const t=Hx().parse(e);return ta(t)}else return ta(e)}function j0(i,e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function Qm(i,e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function fu(i,e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(t.parameters=cf(i,t.parameters)),t.response&&(t.response=cf(i,t.response));return e}function du(i,e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function Yx(i,e,t,n=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===n;return i.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${i.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${i.getProject()}/locations/${i.getLocation()}/${e}`:r?`projects/${i.getProject()}/locations/${i.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function ir(i,e){if(typeof e!="string")throw new Error("name must be a string");return Yx(i,e,"cachedContents")}function W0(i,e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function sr(i,e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}function Kx(i){return i!=null&&typeof i=="object"&&"name"in i}function Qx(i){return i!=null&&typeof i=="object"&&"video"in i}function Zx(i){return i!=null&&typeof i=="object"&&"uri"in i}function eE(i,e){var t;let n;if(Kx(e)&&(n=e.name),!(Zx(e)&&(n=e.uri,n===void 0))&&!(Qx(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const a=n.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${n}`);n=a[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function tE(i,e){let t;return i.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function nE(i,e){for(const t of["models","tunedModels","publisherModels"])if(Xx(e,t))return e[t];return[]}function Xx(i,e){return i!==null&&typeof i=="object"&&e in i}function Jx(i,e={}){const t=i,n={name:t.name,description:t.description,parameters:ta(Af(t.inputSchema))};return e.behavior&&(n.behavior=e.behavior),{functionDeclarations:[n]}}function jx(i,e={}){const t=[],n=new Set;for(const r of i){const a=r.name;if(n.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);n.add(a);const c=Jx(r,e);c.functionDeclarations&&t.push(...c.functionDeclarations)}return{functionDeclarations:t}}function Wx(i){const e=[];for(const t of i)e.push(Af(t));return e}function e1(i){const e={};for(const[t,n]of Object.entries(i)){const r=n;e[t]=Af(r)}return e}function Af(i){const e=new Set(["items"]),t=new Set(["anyOf"]),n=new Set(["properties"]),r={};for(const[a,c]of Object.entries(i))if(e.has(a))r[a]=Af(c);else if(t.has(a))r[a]=Wx(c);else if(n.has(a))r[a]=e1(c);else if(a==="type"){const h=c.toUpperCase();r[a]=Object.keys(Zn).includes(h)?h:Zn.TYPE_UNSPECIFIED}else zx.has(a)&&(r[a]=c);return r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function t1(i,e){const t={},n=f(e,["fps"]);n!=null&&d(t,["fps"],n);const r=f(e,["endOffset"]);r!=null&&d(t,["endOffset"],r);const a=f(e,["startOffset"]);return a!=null&&d(t,["startOffset"],a),t}function n1(i,e){const t={};if(f(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(e,["data"]);n!=null&&d(t,["data"],n);const r=f(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function i1(i,e){const t={};if(f(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(e,["fileUri"]);n!=null&&d(t,["fileUri"],n);const r=f(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function s1(i,e){const t={},n=f(e,["videoMetadata"]);n!=null&&d(t,["videoMetadata"],t1(i,n));const r=f(e,["thought"]);r!=null&&d(t,["thought"],r);const a=f(e,["inlineData"]);a!=null&&d(t,["inlineData"],n1(i,a));const c=f(e,["fileData"]);c!=null&&d(t,["fileData"],i1(i,c));const h=f(e,["thoughtSignature"]);h!=null&&d(t,["thoughtSignature"],h);const y=f(e,["codeExecutionResult"]);y!=null&&d(t,["codeExecutionResult"],y);const g=f(e,["executableCode"]);g!=null&&d(t,["executableCode"],g);const _=f(e,["functionCall"]);_!=null&&d(t,["functionCall"],_);const E=f(e,["functionResponse"]);E!=null&&d(t,["functionResponse"],E);const S=f(e,["text"]);return S!=null&&d(t,["text"],S),t}function cT(i,e){const t={},n=f(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(c=>s1(i,c))),d(t,["parts"],a)}const r=f(e,["role"]);return r!=null&&d(t,["role"],r),t}function r1(i,e){const t={},n=f(e,["behavior"]);n!=null&&d(t,["behavior"],n);const r=f(e,["description"]);r!=null&&d(t,["description"],r);const a=f(e,["name"]);a!=null&&d(t,["name"],a);const c=f(e,["parameters"]);c!=null&&d(t,["parameters"],c);const h=f(e,["response"]);return h!=null&&d(t,["response"],h),t}function o1(i,e){const t={},n=f(e,["startTime"]);n!=null&&d(t,["startTime"],n);const r=f(e,["endTime"]);return r!=null&&d(t,["endTime"],r),t}function a1(i,e){const t={},n=f(e,["timeRangeFilter"]);return n!=null&&d(t,["timeRangeFilter"],o1(i,n)),t}function l1(i,e){const t={},n=f(e,["mode"]);n!=null&&d(t,["mode"],n);const r=f(e,["dynamicThreshold"]);return r!=null&&d(t,["dynamicThreshold"],r),t}function u1(i,e){const t={},n=f(e,["dynamicRetrievalConfig"]);return n!=null&&d(t,["dynamicRetrievalConfig"],l1(i,n)),t}function c1(){return{}}function f1(i,e){const t={},n=f(e,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(g=>r1(i,g))),d(t,["functionDeclarations"],y)}if(f(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=f(e,["googleSearch"]);r!=null&&d(t,["googleSearch"],a1(i,r));const a=f(e,["googleSearchRetrieval"]);if(a!=null&&d(t,["googleSearchRetrieval"],u1(i,a)),f(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(f(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");f(e,["urlContext"])!=null&&d(t,["urlContext"],c1());const h=f(e,["codeExecution"]);return h!=null&&d(t,["codeExecution"],h),t}function d1(i,e){const t={},n=f(e,["mode"]);n!=null&&d(t,["mode"],n);const r=f(e,["allowedFunctionNames"]);return r!=null&&d(t,["allowedFunctionNames"],r),t}function h1(i,e){const t={},n=f(e,["latitude"]);n!=null&&d(t,["latitude"],n);const r=f(e,["longitude"]);return r!=null&&d(t,["longitude"],r),t}function m1(i,e){const t={},n=f(e,["latLng"]);n!=null&&d(t,["latLng"],h1(i,n));const r=f(e,["languageCode"]);return r!=null&&d(t,["languageCode"],r),t}function p1(i,e){const t={},n=f(e,["functionCallingConfig"]);n!=null&&d(t,["functionCallingConfig"],d1(i,n));const r=f(e,["retrievalConfig"]);return r!=null&&d(t,["retrievalConfig"],m1(i,r)),t}function g1(i,e,t){const n={},r=f(e,["ttl"]);t!==void 0&&r!=null&&d(t,["ttl"],r);const a=f(e,["expireTime"]);t!==void 0&&a!=null&&d(t,["expireTime"],a);const c=f(e,["displayName"]);t!==void 0&&c!=null&&d(t,["displayName"],c);const h=f(e,["contents"]);if(t!==void 0&&h!=null){let E=fi(i,h);Array.isArray(E)&&(E=E.map(S=>cT(i,S))),d(t,["contents"],E)}const y=f(e,["systemInstruction"]);t!==void 0&&y!=null&&d(t,["systemInstruction"],cT(i,vn(i,y)));const g=f(e,["tools"]);if(t!==void 0&&g!=null){let E=g;Array.isArray(E)&&(E=E.map(S=>f1(i,S))),d(t,["tools"],E)}const _=f(e,["toolConfig"]);if(t!==void 0&&_!=null&&d(t,["toolConfig"],p1(i,_)),f(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function y1(i,e){const t={},n=f(e,["model"]);n!=null&&d(t,["model"],Q0(i,n));const r=f(e,["config"]);return r!=null&&d(t,["config"],g1(i,r,t)),t}function v1(i,e){const t={},n=f(e,["name"]);n!=null&&d(t,["_url","name"],ir(i,n));const r=f(e,["config"]);return r!=null&&d(t,["config"],r),t}function _1(i,e){const t={},n=f(e,["name"]);n!=null&&d(t,["_url","name"],ir(i,n));const r=f(e,["config"]);return r!=null&&d(t,["config"],r),t}function T1(i,e,t){const n={},r=f(e,["ttl"]);t!==void 0&&r!=null&&d(t,["ttl"],r);const a=f(e,["expireTime"]);return t!==void 0&&a!=null&&d(t,["expireTime"],a),n}function E1(i,e){const t={},n=f(e,["name"]);n!=null&&d(t,["_url","name"],ir(i,n));const r=f(e,["config"]);return r!=null&&d(t,["config"],T1(i,r,t)),t}function C1(i,e,t){const n={},r=f(e,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);const a=f(e,["pageToken"]);return t!==void 0&&a!=null&&d(t,["_query","pageToken"],a),n}function A1(i,e){const t={},n=f(e,["config"]);return n!=null&&d(t,["config"],C1(i,n,t)),t}function S1(i,e){const t={},n=f(e,["fps"]);n!=null&&d(t,["fps"],n);const r=f(e,["endOffset"]);r!=null&&d(t,["endOffset"],r);const a=f(e,["startOffset"]);return a!=null&&d(t,["startOffset"],a),t}function x1(i,e){const t={},n=f(e,["displayName"]);n!=null&&d(t,["displayName"],n);const r=f(e,["data"]);r!=null&&d(t,["data"],r);const a=f(e,["mimeType"]);return a!=null&&d(t,["mimeType"],a),t}function w1(i,e){const t={},n=f(e,["displayName"]);n!=null&&d(t,["displayName"],n);const r=f(e,["fileUri"]);r!=null&&d(t,["fileUri"],r);const a=f(e,["mimeType"]);return a!=null&&d(t,["mimeType"],a),t}function R1(i,e){const t={},n=f(e,["videoMetadata"]);n!=null&&d(t,["videoMetadata"],S1(i,n));const r=f(e,["thought"]);r!=null&&d(t,["thought"],r);const a=f(e,["inlineData"]);a!=null&&d(t,["inlineData"],x1(i,a));const c=f(e,["fileData"]);c!=null&&d(t,["fileData"],w1(i,c));const h=f(e,["thoughtSignature"]);h!=null&&d(t,["thoughtSignature"],h);const y=f(e,["codeExecutionResult"]);y!=null&&d(t,["codeExecutionResult"],y);const g=f(e,["executableCode"]);g!=null&&d(t,["executableCode"],g);const _=f(e,["functionCall"]);_!=null&&d(t,["functionCall"],_);const E=f(e,["functionResponse"]);E!=null&&d(t,["functionResponse"],E);const S=f(e,["text"]);return S!=null&&d(t,["text"],S),t}function fT(i,e){const t={},n=f(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(c=>R1(i,c))),d(t,["parts"],a)}const r=f(e,["role"]);return r!=null&&d(t,["role"],r),t}function b1(i,e){const t={};if(f(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=f(e,["description"]);n!=null&&d(t,["description"],n);const r=f(e,["name"]);r!=null&&d(t,["name"],r);const a=f(e,["parameters"]);a!=null&&d(t,["parameters"],a);const c=f(e,["response"]);return c!=null&&d(t,["response"],c),t}function I1(i,e){const t={},n=f(e,["startTime"]);n!=null&&d(t,["startTime"],n);const r=f(e,["endTime"]);return r!=null&&d(t,["endTime"],r),t}function N1(i,e){const t={},n=f(e,["timeRangeFilter"]);return n!=null&&d(t,["timeRangeFilter"],I1(i,n)),t}function M1(i,e){const t={},n=f(e,["mode"]);n!=null&&d(t,["mode"],n);const r=f(e,["dynamicThreshold"]);return r!=null&&d(t,["dynamicThreshold"],r),t}function D1(i,e){const t={},n=f(e,["dynamicRetrievalConfig"]);return n!=null&&d(t,["dynamicRetrievalConfig"],M1(i,n)),t}function V1(){return{}}function P1(i,e){const t={},n=f(e,["apiKeyString"]);return n!=null&&d(t,["apiKeyString"],n),t}function k1(i,e){const t={},n=f(e,["apiKeyConfig"]);n!=null&&d(t,["apiKeyConfig"],P1(i,n));const r=f(e,["authType"]);r!=null&&d(t,["authType"],r);const a=f(e,["googleServiceAccountConfig"]);a!=null&&d(t,["googleServiceAccountConfig"],a);const c=f(e,["httpBasicAuthConfig"]);c!=null&&d(t,["httpBasicAuthConfig"],c);const h=f(e,["oauthConfig"]);h!=null&&d(t,["oauthConfig"],h);const y=f(e,["oidcConfig"]);return y!=null&&d(t,["oidcConfig"],y),t}function L1(i,e){const t={},n=f(e,["authConfig"]);return n!=null&&d(t,["authConfig"],k1(i,n)),t}function U1(i,e){const t={},n=f(e,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(E=>b1(i,E))),d(t,["functionDeclarations"],_)}const r=f(e,["retrieval"]);r!=null&&d(t,["retrieval"],r);const a=f(e,["googleSearch"]);a!=null&&d(t,["googleSearch"],N1(i,a));const c=f(e,["googleSearchRetrieval"]);c!=null&&d(t,["googleSearchRetrieval"],D1(i,c)),f(e,["enterpriseWebSearch"])!=null&&d(t,["enterpriseWebSearch"],V1());const y=f(e,["googleMaps"]);if(y!=null&&d(t,["googleMaps"],L1(i,y)),f(e,["urlContext"])!==void 0)throw new Error("urlContext parameter is not supported in Vertex AI.");const g=f(e,["codeExecution"]);return g!=null&&d(t,["codeExecution"],g),t}function O1(i,e){const t={},n=f(e,["mode"]);n!=null&&d(t,["mode"],n);const r=f(e,["allowedFunctionNames"]);return r!=null&&d(t,["allowedFunctionNames"],r),t}function F1(i,e){const t={},n=f(e,["latitude"]);n!=null&&d(t,["latitude"],n);const r=f(e,["longitude"]);return r!=null&&d(t,["longitude"],r),t}function q1(i,e){const t={},n=f(e,["latLng"]);n!=null&&d(t,["latLng"],F1(i,n));const r=f(e,["languageCode"]);return r!=null&&d(t,["languageCode"],r),t}function B1(i,e){const t={},n=f(e,["functionCallingConfig"]);n!=null&&d(t,["functionCallingConfig"],O1(i,n));const r=f(e,["retrievalConfig"]);return r!=null&&d(t,["retrievalConfig"],q1(i,r)),t}function z1(i,e,t){const n={},r=f(e,["ttl"]);t!==void 0&&r!=null&&d(t,["ttl"],r);const a=f(e,["expireTime"]);t!==void 0&&a!=null&&d(t,["expireTime"],a);const c=f(e,["displayName"]);t!==void 0&&c!=null&&d(t,["displayName"],c);const h=f(e,["contents"]);if(t!==void 0&&h!=null){let S=fi(i,h);Array.isArray(S)&&(S=S.map(I=>fT(i,I))),d(t,["contents"],S)}const y=f(e,["systemInstruction"]);t!==void 0&&y!=null&&d(t,["systemInstruction"],fT(i,vn(i,y)));const g=f(e,["tools"]);if(t!==void 0&&g!=null){let S=g;Array.isArray(S)&&(S=S.map(I=>U1(i,I))),d(t,["tools"],S)}const _=f(e,["toolConfig"]);t!==void 0&&_!=null&&d(t,["toolConfig"],B1(i,_));const E=f(e,["kmsKeyName"]);return t!==void 0&&E!=null&&d(t,["encryption_spec","kmsKeyName"],E),n}function G1(i,e){const t={},n=f(e,["model"]);n!=null&&d(t,["model"],Q0(i,n));const r=f(e,["config"]);return r!=null&&d(t,["config"],z1(i,r,t)),t}function H1(i,e){const t={},n=f(e,["name"]);n!=null&&d(t,["_url","name"],ir(i,n));const r=f(e,["config"]);return r!=null&&d(t,["config"],r),t}function $1(i,e){const t={},n=f(e,["name"]);n!=null&&d(t,["_url","name"],ir(i,n));const r=f(e,["config"]);return r!=null&&d(t,["config"],r),t}function Y1(i,e,t){const n={},r=f(e,["ttl"]);t!==void 0&&r!=null&&d(t,["ttl"],r);const a=f(e,["expireTime"]);return t!==void 0&&a!=null&&d(t,["expireTime"],a),n}function K1(i,e){const t={},n=f(e,["name"]);n!=null&&d(t,["_url","name"],ir(i,n));const r=f(e,["config"]);return r!=null&&d(t,["config"],Y1(i,r,t)),t}function Q1(i,e,t){const n={},r=f(e,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);const a=f(e,["pageToken"]);return t!==void 0&&a!=null&&d(t,["_query","pageToken"],a),n}function Z1(i,e){const t={},n=f(e,["config"]);return n!=null&&d(t,["config"],Q1(i,n,t)),t}function Yc(i,e){const t={},n=f(e,["name"]);n!=null&&d(t,["name"],n);const r=f(e,["displayName"]);r!=null&&d(t,["displayName"],r);const a=f(e,["model"]);a!=null&&d(t,["model"],a);const c=f(e,["createTime"]);c!=null&&d(t,["createTime"],c);const h=f(e,["updateTime"]);h!=null&&d(t,["updateTime"],h);const y=f(e,["expireTime"]);y!=null&&d(t,["expireTime"],y);const g=f(e,["usageMetadata"]);return g!=null&&d(t,["usageMetadata"],g),t}function X1(){return{}}function J1(i,e){const t={},n=f(e,["nextPageToken"]);n!=null&&d(t,["nextPageToken"],n);const r=f(e,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>Yc(i,c))),d(t,["cachedContents"],a)}return t}function Kc(i,e){const t={},n=f(e,["name"]);n!=null&&d(t,["name"],n);const r=f(e,["displayName"]);r!=null&&d(t,["displayName"],r);const a=f(e,["model"]);a!=null&&d(t,["model"],a);const c=f(e,["createTime"]);c!=null&&d(t,["createTime"],c);const h=f(e,["updateTime"]);h!=null&&d(t,["updateTime"],h);const y=f(e,["expireTime"]);y!=null&&d(t,["expireTime"],y);const g=f(e,["usageMetadata"]);return g!=null&&d(t,["usageMetadata"],g),t}function j1(){return{}}function W1(i,e){const t={},n=f(e,["nextPageToken"]);n!=null&&d(t,["nextPageToken"],n);const r=f(e,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>Kc(i,c))),d(t,["cachedContents"],a)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var fa;(function(i){i.PAGED_ITEM_BATCH_JOBS="batchJobs",i.PAGED_ITEM_MODELS="models",i.PAGED_ITEM_TUNING_JOBS="tuningJobs",i.PAGED_ITEM_FILES="files",i.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(fa||(fa={}));class Sf{constructor(e,t,n,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,n,r)}init(e,t,n){var r,a;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.idxInternal=0;let c={config:{}};n?typeof n=="object"?c=Object.assign({},n):c=n:c={config:{}},c.config&&(c.config.pageToken=t.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(a=(r=c.config)===null||r===void 0?void 0:r.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ew extends va{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Sf(fa.PAGED_ITEM_CACHED_CONTENTS,n=>this.listInternal(n),await this.listInternal(t),t)}async create(e){var t,n,r,a;let c,h="",y={};if(this.apiClient.isVertexAI()){const g=G1(this.apiClient,e);return h=we("cachedContents",g._url),y=g._query,delete g.config,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(_=>_.json()),c.then(_=>Kc(this.apiClient,_))}else{const g=y1(this.apiClient,e);return h=we("cachedContents",g._url),y=g._query,delete g.config,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(_=>Yc(this.apiClient,_))}}async get(e){var t,n,r,a;let c,h="",y={};if(this.apiClient.isVertexAI()){const g=H1(this.apiClient,e);return h=we("{name}",g._url),y=g._query,delete g.config,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(_=>_.json()),c.then(_=>Kc(this.apiClient,_))}else{const g=v1(this.apiClient,e);return h=we("{name}",g._url),y=g._query,delete g.config,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(_=>Yc(this.apiClient,_))}}async delete(e){var t,n,r,a;let c,h="",y={};if(this.apiClient.isVertexAI()){const g=$1(this.apiClient,e);return h=we("{name}",g._url),y=g._query,delete g.config,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(_=>_.json()),c.then(()=>{const _=j1(),E=new sT;return Object.assign(E,_),E})}else{const g=_1(this.apiClient,e);return h=we("{name}",g._url),y=g._query,delete g.config,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(()=>{const _=X1(),E=new sT;return Object.assign(E,_),E})}}async update(e){var t,n,r,a;let c,h="",y={};if(this.apiClient.isVertexAI()){const g=K1(this.apiClient,e);return h=we("{name}",g._url),y=g._query,delete g.config,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(_=>_.json()),c.then(_=>Kc(this.apiClient,_))}else{const g=E1(this.apiClient,e);return h=we("{name}",g._url),y=g._query,delete g.config,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(_=>Yc(this.apiClient,_))}}async listInternal(e){var t,n,r,a;let c,h="",y={};if(this.apiClient.isVertexAI()){const g=Z1(this.apiClient,e);return h=we("cachedContents",g._url),y=g._query,delete g.config,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(_=>_.json()),c.then(_=>{const E=W1(this.apiClient,_),S=new rT;return Object.assign(S,E),S})}else{const g=A1(this.apiClient,e);return h=we("cachedContents",g._url),y=g._query,delete g.config,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(_=>{const E=J1(this.apiClient,_),S=new rT;return Object.assign(S,E),S})}}}function dT(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],n=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function mt(i){return this instanceof mt?(this.v=i,this):new mt(i)}function na(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(i,e||[]),r,a=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",c),r[Symbol.asyncIterator]=function(){return this},r;function c(I){return function(U){return Promise.resolve(U).then(I,E)}}function h(I,U){n[I]&&(r[I]=function(G){return new Promise(function(B,W){a.push([I,G,B,W])>1||y(I,G)})},U&&(r[I]=U(r[I])))}function y(I,U){try{g(n[I](U))}catch(G){S(a[0][3],G)}}function g(I){I.value instanceof mt?Promise.resolve(I.value.v).then(_,E):S(a[0][2],I)}function _(I){y("next",I)}function E(I){y("throw",I)}function S(I,U){I(U),a.shift(),a.length&&y(a[0][0],a[0][1])}}function Yl(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof dT=="function"?dT(i):i[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(a){t[a]=i[a]&&function(c){return new Promise(function(h,y){c=i[a](c),r(h,y,c.done,c.value)})}}function r(a,c,h,y){Promise.resolve(y).then(function(g){a({value:g,done:h})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tw(i){var e;if(i.candidates==null||i.candidates.length===0)return!1;const t=(e=i.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:iE(t)}function iE(i){if(i.parts===void 0||i.parts.length===0)return!1;for(const e of i.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function nw(i){if(i.length!==0){for(const e of i)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function hT(i){if(i===void 0||i.length===0)return[];const e=[],t=i.length;let n=0;for(;n<t;)if(i[n].role==="user")e.push(i[n]),n++;else{const r=[];let a=!0;for(;n<t&&i[n].role==="model";)r.push(i[n]),a&&!iE(i[n])&&(a=!1),n++;a?e.push(...r):e.pop()}return e}class iw{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new sw(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class sw{constructor(e,t,n,r={},a=[]){this.apiClient=e,this.modelsModule=t,this.model=n,this.config=r,this.history=a,this.sendPromise=Promise.resolve(),nw(a)}async sendMessage(e){var t;await this.sendPromise;const n=vn(this.apiClient,e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var a,c,h;const y=await r,g=(c=(a=y.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content,_=y.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let S=[];_!=null&&(S=(h=_.slice(E))!==null&&h!==void 0?h:[]);const I=g?[g]:[];this.recordHistory(n,I,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const n=vn(this.apiClient,e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const a=await r;return this.processStreamResponse(a,n)}getHistory(e=!1){const t=e?hT(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var n,r;return na(this,arguments,function*(){var c,h,y,g;const _=[];try{for(var E=!0,S=Yl(e),I;I=yield mt(S.next()),c=I.done,!c;E=!0){g=I.value,E=!1;const U=g;if(tw(U)){const G=(r=(n=U.candidates)===null||n===void 0?void 0:n[0])===null||r===void 0?void 0:r.content;G!==void 0&&_.push(G)}yield yield mt(U)}}catch(U){h={error:U}}finally{try{!E&&!c&&(y=S.return)&&(yield mt(y.call(S)))}finally{if(h)throw h.error}}this.recordHistory(t,_)})}recordHistory(e,t,n){let r=[];t.length>0&&t.every(a=>a.role!==void 0)?r=t:r.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...hT(n)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rw(i,e,t){const n={},r=f(e,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);const a=f(e,["pageToken"]);return t!==void 0&&a!=null&&d(t,["_query","pageToken"],a),n}function ow(i,e){const t={},n=f(e,["config"]);return n!=null&&d(t,["config"],rw(i,n,t)),t}function aw(i,e){const t={},n=f(e,["details"]);n!=null&&d(t,["details"],n);const r=f(e,["message"]);r!=null&&d(t,["message"],r);const a=f(e,["code"]);return a!=null&&d(t,["code"],a),t}function lw(i,e){const t={},n=f(e,["name"]);n!=null&&d(t,["name"],n);const r=f(e,["displayName"]);r!=null&&d(t,["displayName"],r);const a=f(e,["mimeType"]);a!=null&&d(t,["mimeType"],a);const c=f(e,["sizeBytes"]);c!=null&&d(t,["sizeBytes"],c);const h=f(e,["createTime"]);h!=null&&d(t,["createTime"],h);const y=f(e,["expirationTime"]);y!=null&&d(t,["expirationTime"],y);const g=f(e,["updateTime"]);g!=null&&d(t,["updateTime"],g);const _=f(e,["sha256Hash"]);_!=null&&d(t,["sha256Hash"],_);const E=f(e,["uri"]);E!=null&&d(t,["uri"],E);const S=f(e,["downloadUri"]);S!=null&&d(t,["downloadUri"],S);const I=f(e,["state"]);I!=null&&d(t,["state"],I);const U=f(e,["source"]);U!=null&&d(t,["source"],U);const G=f(e,["videoMetadata"]);G!=null&&d(t,["videoMetadata"],G);const B=f(e,["error"]);return B!=null&&d(t,["error"],aw(i,B)),t}function uw(i,e){const t={},n=f(e,["file"]);n!=null&&d(t,["file"],lw(i,n));const r=f(e,["config"]);return r!=null&&d(t,["config"],r),t}function cw(i,e){const t={},n=f(e,["name"]);n!=null&&d(t,["_url","file"],eE(i,n));const r=f(e,["config"]);return r!=null&&d(t,["config"],r),t}function fw(i,e){const t={},n=f(e,["name"]);n!=null&&d(t,["_url","file"],eE(i,n));const r=f(e,["config"]);return r!=null&&d(t,["config"],r),t}function dw(i,e){const t={},n=f(e,["details"]);n!=null&&d(t,["details"],n);const r=f(e,["message"]);r!=null&&d(t,["message"],r);const a=f(e,["code"]);return a!=null&&d(t,["code"],a),t}function pm(i,e){const t={},n=f(e,["name"]);n!=null&&d(t,["name"],n);const r=f(e,["displayName"]);r!=null&&d(t,["displayName"],r);const a=f(e,["mimeType"]);a!=null&&d(t,["mimeType"],a);const c=f(e,["sizeBytes"]);c!=null&&d(t,["sizeBytes"],c);const h=f(e,["createTime"]);h!=null&&d(t,["createTime"],h);const y=f(e,["expirationTime"]);y!=null&&d(t,["expirationTime"],y);const g=f(e,["updateTime"]);g!=null&&d(t,["updateTime"],g);const _=f(e,["sha256Hash"]);_!=null&&d(t,["sha256Hash"],_);const E=f(e,["uri"]);E!=null&&d(t,["uri"],E);const S=f(e,["downloadUri"]);S!=null&&d(t,["downloadUri"],S);const I=f(e,["state"]);I!=null&&d(t,["state"],I);const U=f(e,["source"]);U!=null&&d(t,["source"],U);const G=f(e,["videoMetadata"]);G!=null&&d(t,["videoMetadata"],G);const B=f(e,["error"]);return B!=null&&d(t,["error"],dw(i,B)),t}function hw(i,e){const t={},n=f(e,["nextPageToken"]);n!=null&&d(t,["nextPageToken"],n);const r=f(e,["files"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>pm(i,c))),d(t,["files"],a)}return t}function mw(){return{}}function pw(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gw extends va{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Sf(fa.PAGED_ITEM_FILES,n=>this.listInternal(n),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>pm(this.apiClient,t))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,n;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=ow(this.apiClient,e);return a=we("files",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),r.then(y=>{const g=hw(this.apiClient,y),_=new kx;return Object.assign(_,g),_})}}async createInternal(e){var t,n;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=uw(this.apiClient,e);return a=we("upload/v1beta/files",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),r.then(()=>{const y=mw(),g=new Lx;return Object.assign(g,y),g})}}async get(e){var t,n;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=cw(this.apiClient,e);return a=we("files/{file}",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),r.then(y=>pm(this.apiClient,y))}}async delete(e){var t,n;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=fw(this.apiClient,e);return a=we("files/{file}",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),r.then(()=>{const y=pw(),g=new Ux;return Object.assign(g,y),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yw(i,e){const t={},n=f(e,["voiceName"]);return n!=null&&d(t,["voiceName"],n),t}function vw(i,e){const t={},n=f(e,["voiceName"]);return n!=null&&d(t,["voiceName"],n),t}function sE(i,e){const t={},n=f(e,["prebuiltVoiceConfig"]);return n!=null&&d(t,["prebuiltVoiceConfig"],yw(i,n)),t}function _w(i,e){const t={},n=f(e,["prebuiltVoiceConfig"]);return n!=null&&d(t,["prebuiltVoiceConfig"],vw(i,n)),t}function Tw(i,e){const t={},n=f(e,["speaker"]);n!=null&&d(t,["speaker"],n);const r=f(e,["voiceConfig"]);return r!=null&&d(t,["voiceConfig"],sE(i,r)),t}function Ew(i,e){const t={},n=f(e,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>Tw(i,a))),d(t,["speakerVoiceConfigs"],r)}return t}function Cw(i,e){const t={},n=f(e,["voiceConfig"]);n!=null&&d(t,["voiceConfig"],sE(i,n));const r=f(e,["multiSpeakerVoiceConfig"]);r!=null&&d(t,["multiSpeakerVoiceConfig"],Ew(i,r));const a=f(e,["languageCode"]);return a!=null&&d(t,["languageCode"],a),t}function Aw(i,e){const t={},n=f(e,["voiceConfig"]);if(n!=null&&d(t,["voiceConfig"],_w(i,n)),f(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=f(e,["languageCode"]);return r!=null&&d(t,["languageCode"],r),t}function Sw(i,e){const t={},n=f(e,["fps"]);n!=null&&d(t,["fps"],n);const r=f(e,["endOffset"]);r!=null&&d(t,["endOffset"],r);const a=f(e,["startOffset"]);return a!=null&&d(t,["startOffset"],a),t}function xw(i,e){const t={},n=f(e,["fps"]);n!=null&&d(t,["fps"],n);const r=f(e,["endOffset"]);r!=null&&d(t,["endOffset"],r);const a=f(e,["startOffset"]);return a!=null&&d(t,["startOffset"],a),t}function ww(i,e){const t={};if(f(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(e,["data"]);n!=null&&d(t,["data"],n);const r=f(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function Rw(i,e){const t={},n=f(e,["displayName"]);n!=null&&d(t,["displayName"],n);const r=f(e,["data"]);r!=null&&d(t,["data"],r);const a=f(e,["mimeType"]);return a!=null&&d(t,["mimeType"],a),t}function bw(i,e){const t={};if(f(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(e,["fileUri"]);n!=null&&d(t,["fileUri"],n);const r=f(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function Iw(i,e){const t={},n=f(e,["displayName"]);n!=null&&d(t,["displayName"],n);const r=f(e,["fileUri"]);r!=null&&d(t,["fileUri"],r);const a=f(e,["mimeType"]);return a!=null&&d(t,["mimeType"],a),t}function Nw(i,e){const t={},n=f(e,["videoMetadata"]);n!=null&&d(t,["videoMetadata"],Sw(i,n));const r=f(e,["thought"]);r!=null&&d(t,["thought"],r);const a=f(e,["inlineData"]);a!=null&&d(t,["inlineData"],ww(i,a));const c=f(e,["fileData"]);c!=null&&d(t,["fileData"],bw(i,c));const h=f(e,["thoughtSignature"]);h!=null&&d(t,["thoughtSignature"],h);const y=f(e,["codeExecutionResult"]);y!=null&&d(t,["codeExecutionResult"],y);const g=f(e,["executableCode"]);g!=null&&d(t,["executableCode"],g);const _=f(e,["functionCall"]);_!=null&&d(t,["functionCall"],_);const E=f(e,["functionResponse"]);E!=null&&d(t,["functionResponse"],E);const S=f(e,["text"]);return S!=null&&d(t,["text"],S),t}function Mw(i,e){const t={},n=f(e,["videoMetadata"]);n!=null&&d(t,["videoMetadata"],xw(i,n));const r=f(e,["thought"]);r!=null&&d(t,["thought"],r);const a=f(e,["inlineData"]);a!=null&&d(t,["inlineData"],Rw(i,a));const c=f(e,["fileData"]);c!=null&&d(t,["fileData"],Iw(i,c));const h=f(e,["thoughtSignature"]);h!=null&&d(t,["thoughtSignature"],h);const y=f(e,["codeExecutionResult"]);y!=null&&d(t,["codeExecutionResult"],y);const g=f(e,["executableCode"]);g!=null&&d(t,["executableCode"],g);const _=f(e,["functionCall"]);_!=null&&d(t,["functionCall"],_);const E=f(e,["functionResponse"]);E!=null&&d(t,["functionResponse"],E);const S=f(e,["text"]);return S!=null&&d(t,["text"],S),t}function Dw(i,e){const t={},n=f(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(c=>Nw(i,c))),d(t,["parts"],a)}const r=f(e,["role"]);return r!=null&&d(t,["role"],r),t}function Vw(i,e){const t={},n=f(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(c=>Mw(i,c))),d(t,["parts"],a)}const r=f(e,["role"]);return r!=null&&d(t,["role"],r),t}function Pw(i,e){const t={},n=f(e,["behavior"]);n!=null&&d(t,["behavior"],n);const r=f(e,["description"]);r!=null&&d(t,["description"],r);const a=f(e,["name"]);a!=null&&d(t,["name"],a);const c=f(e,["parameters"]);c!=null&&d(t,["parameters"],c);const h=f(e,["response"]);return h!=null&&d(t,["response"],h),t}function kw(i,e){const t={};if(f(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=f(e,["description"]);n!=null&&d(t,["description"],n);const r=f(e,["name"]);r!=null&&d(t,["name"],r);const a=f(e,["parameters"]);a!=null&&d(t,["parameters"],a);const c=f(e,["response"]);return c!=null&&d(t,["response"],c),t}function Lw(i,e){const t={},n=f(e,["startTime"]);n!=null&&d(t,["startTime"],n);const r=f(e,["endTime"]);return r!=null&&d(t,["endTime"],r),t}function Uw(i,e){const t={},n=f(e,["startTime"]);n!=null&&d(t,["startTime"],n);const r=f(e,["endTime"]);return r!=null&&d(t,["endTime"],r),t}function Ow(i,e){const t={},n=f(e,["timeRangeFilter"]);return n!=null&&d(t,["timeRangeFilter"],Lw(i,n)),t}function Fw(i,e){const t={},n=f(e,["timeRangeFilter"]);return n!=null&&d(t,["timeRangeFilter"],Uw(i,n)),t}function qw(i,e){const t={},n=f(e,["mode"]);n!=null&&d(t,["mode"],n);const r=f(e,["dynamicThreshold"]);return r!=null&&d(t,["dynamicThreshold"],r),t}function Bw(i,e){const t={},n=f(e,["mode"]);n!=null&&d(t,["mode"],n);const r=f(e,["dynamicThreshold"]);return r!=null&&d(t,["dynamicThreshold"],r),t}function zw(i,e){const t={},n=f(e,["dynamicRetrievalConfig"]);return n!=null&&d(t,["dynamicRetrievalConfig"],qw(i,n)),t}function Gw(i,e){const t={},n=f(e,["dynamicRetrievalConfig"]);return n!=null&&d(t,["dynamicRetrievalConfig"],Bw(i,n)),t}function Hw(){return{}}function $w(i,e){const t={},n=f(e,["apiKeyString"]);return n!=null&&d(t,["apiKeyString"],n),t}function Yw(i,e){const t={},n=f(e,["apiKeyConfig"]);n!=null&&d(t,["apiKeyConfig"],$w(i,n));const r=f(e,["authType"]);r!=null&&d(t,["authType"],r);const a=f(e,["googleServiceAccountConfig"]);a!=null&&d(t,["googleServiceAccountConfig"],a);const c=f(e,["httpBasicAuthConfig"]);c!=null&&d(t,["httpBasicAuthConfig"],c);const h=f(e,["oauthConfig"]);h!=null&&d(t,["oauthConfig"],h);const y=f(e,["oidcConfig"]);return y!=null&&d(t,["oidcConfig"],y),t}function Kw(i,e){const t={},n=f(e,["authConfig"]);return n!=null&&d(t,["authConfig"],Yw(i,n)),t}function Qw(){return{}}function Zw(i,e){const t={},n=f(e,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(g=>Pw(i,g))),d(t,["functionDeclarations"],y)}if(f(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=f(e,["googleSearch"]);r!=null&&d(t,["googleSearch"],Ow(i,r));const a=f(e,["googleSearchRetrieval"]);if(a!=null&&d(t,["googleSearchRetrieval"],zw(i,a)),f(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(f(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");f(e,["urlContext"])!=null&&d(t,["urlContext"],Qw());const h=f(e,["codeExecution"]);return h!=null&&d(t,["codeExecution"],h),t}function Xw(i,e){const t={},n=f(e,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(E=>kw(i,E))),d(t,["functionDeclarations"],_)}const r=f(e,["retrieval"]);r!=null&&d(t,["retrieval"],r);const a=f(e,["googleSearch"]);a!=null&&d(t,["googleSearch"],Fw(i,a));const c=f(e,["googleSearchRetrieval"]);c!=null&&d(t,["googleSearchRetrieval"],Gw(i,c)),f(e,["enterpriseWebSearch"])!=null&&d(t,["enterpriseWebSearch"],Hw());const y=f(e,["googleMaps"]);if(y!=null&&d(t,["googleMaps"],Kw(i,y)),f(e,["urlContext"])!==void 0)throw new Error("urlContext parameter is not supported in Vertex AI.");const g=f(e,["codeExecution"]);return g!=null&&d(t,["codeExecution"],g),t}function Jw(i,e){const t={},n=f(e,["handle"]);if(n!=null&&d(t,["handle"],n),f(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function jw(i,e){const t={},n=f(e,["handle"]);n!=null&&d(t,["handle"],n);const r=f(e,["transparent"]);return r!=null&&d(t,["transparent"],r),t}function mT(){return{}}function pT(){return{}}function Ww(i,e){const t={},n=f(e,["disabled"]);n!=null&&d(t,["disabled"],n);const r=f(e,["startOfSpeechSensitivity"]);r!=null&&d(t,["startOfSpeechSensitivity"],r);const a=f(e,["endOfSpeechSensitivity"]);a!=null&&d(t,["endOfSpeechSensitivity"],a);const c=f(e,["prefixPaddingMs"]);c!=null&&d(t,["prefixPaddingMs"],c);const h=f(e,["silenceDurationMs"]);return h!=null&&d(t,["silenceDurationMs"],h),t}function eR(i,e){const t={},n=f(e,["disabled"]);n!=null&&d(t,["disabled"],n);const r=f(e,["startOfSpeechSensitivity"]);r!=null&&d(t,["startOfSpeechSensitivity"],r);const a=f(e,["endOfSpeechSensitivity"]);a!=null&&d(t,["endOfSpeechSensitivity"],a);const c=f(e,["prefixPaddingMs"]);c!=null&&d(t,["prefixPaddingMs"],c);const h=f(e,["silenceDurationMs"]);return h!=null&&d(t,["silenceDurationMs"],h),t}function tR(i,e){const t={},n=f(e,["automaticActivityDetection"]);n!=null&&d(t,["automaticActivityDetection"],Ww(i,n));const r=f(e,["activityHandling"]);r!=null&&d(t,["activityHandling"],r);const a=f(e,["turnCoverage"]);return a!=null&&d(t,["turnCoverage"],a),t}function nR(i,e){const t={},n=f(e,["automaticActivityDetection"]);n!=null&&d(t,["automaticActivityDetection"],eR(i,n));const r=f(e,["activityHandling"]);r!=null&&d(t,["activityHandling"],r);const a=f(e,["turnCoverage"]);return a!=null&&d(t,["turnCoverage"],a),t}function iR(i,e){const t={},n=f(e,["targetTokens"]);return n!=null&&d(t,["targetTokens"],n),t}function sR(i,e){const t={},n=f(e,["targetTokens"]);return n!=null&&d(t,["targetTokens"],n),t}function rR(i,e){const t={},n=f(e,["triggerTokens"]);n!=null&&d(t,["triggerTokens"],n);const r=f(e,["slidingWindow"]);return r!=null&&d(t,["slidingWindow"],iR(i,r)),t}function oR(i,e){const t={},n=f(e,["triggerTokens"]);n!=null&&d(t,["triggerTokens"],n);const r=f(e,["slidingWindow"]);return r!=null&&d(t,["slidingWindow"],sR(i,r)),t}function aR(i,e){const t={},n=f(e,["proactiveAudio"]);return n!=null&&d(t,["proactiveAudio"],n),t}function lR(i,e){const t={},n=f(e,["proactiveAudio"]);return n!=null&&d(t,["proactiveAudio"],n),t}function uR(i,e,t){const n={},r=f(e,["generationConfig"]);t!==void 0&&r!=null&&d(t,["setup","generationConfig"],r);const a=f(e,["responseModalities"]);t!==void 0&&a!=null&&d(t,["setup","generationConfig","responseModalities"],a);const c=f(e,["temperature"]);t!==void 0&&c!=null&&d(t,["setup","generationConfig","temperature"],c);const h=f(e,["topP"]);t!==void 0&&h!=null&&d(t,["setup","generationConfig","topP"],h);const y=f(e,["topK"]);t!==void 0&&y!=null&&d(t,["setup","generationConfig","topK"],y);const g=f(e,["maxOutputTokens"]);t!==void 0&&g!=null&&d(t,["setup","generationConfig","maxOutputTokens"],g);const _=f(e,["mediaResolution"]);t!==void 0&&_!=null&&d(t,["setup","generationConfig","mediaResolution"],_);const E=f(e,["seed"]);t!==void 0&&E!=null&&d(t,["setup","generationConfig","seed"],E);const S=f(e,["speechConfig"]);t!==void 0&&S!=null&&d(t,["setup","generationConfig","speechConfig"],Cw(i,Qm(i,S)));const I=f(e,["enableAffectiveDialog"]);t!==void 0&&I!=null&&d(t,["setup","generationConfig","enableAffectiveDialog"],I);const U=f(e,["systemInstruction"]);t!==void 0&&U!=null&&d(t,["setup","systemInstruction"],Dw(i,vn(i,U)));const G=f(e,["tools"]);if(t!==void 0&&G!=null){let le=du(i,G);Array.isArray(le)&&(le=le.map(L=>Zw(i,fu(i,L)))),d(t,["setup","tools"],le)}const B=f(e,["sessionResumption"]);t!==void 0&&B!=null&&d(t,["setup","sessionResumption"],Jw(i,B));const W=f(e,["inputAudioTranscription"]);t!==void 0&&W!=null&&d(t,["setup","inputAudioTranscription"],mT());const J=f(e,["outputAudioTranscription"]);t!==void 0&&J!=null&&d(t,["setup","outputAudioTranscription"],mT());const te=f(e,["realtimeInputConfig"]);t!==void 0&&te!=null&&d(t,["setup","realtimeInputConfig"],tR(i,te));const re=f(e,["contextWindowCompression"]);t!==void 0&&re!=null&&d(t,["setup","contextWindowCompression"],rR(i,re));const ie=f(e,["proactivity"]);return t!==void 0&&ie!=null&&d(t,["setup","proactivity"],aR(i,ie)),n}function cR(i,e,t){const n={},r=f(e,["generationConfig"]);t!==void 0&&r!=null&&d(t,["setup","generationConfig"],r);const a=f(e,["responseModalities"]);t!==void 0&&a!=null&&d(t,["setup","generationConfig","responseModalities"],a);const c=f(e,["temperature"]);t!==void 0&&c!=null&&d(t,["setup","generationConfig","temperature"],c);const h=f(e,["topP"]);t!==void 0&&h!=null&&d(t,["setup","generationConfig","topP"],h);const y=f(e,["topK"]);t!==void 0&&y!=null&&d(t,["setup","generationConfig","topK"],y);const g=f(e,["maxOutputTokens"]);t!==void 0&&g!=null&&d(t,["setup","generationConfig","maxOutputTokens"],g);const _=f(e,["mediaResolution"]);t!==void 0&&_!=null&&d(t,["setup","generationConfig","mediaResolution"],_);const E=f(e,["seed"]);t!==void 0&&E!=null&&d(t,["setup","generationConfig","seed"],E);const S=f(e,["speechConfig"]);t!==void 0&&S!=null&&d(t,["setup","generationConfig","speechConfig"],Aw(i,Qm(i,S)));const I=f(e,["enableAffectiveDialog"]);t!==void 0&&I!=null&&d(t,["setup","generationConfig","enableAffectiveDialog"],I);const U=f(e,["systemInstruction"]);t!==void 0&&U!=null&&d(t,["setup","systemInstruction"],Vw(i,vn(i,U)));const G=f(e,["tools"]);if(t!==void 0&&G!=null){let le=du(i,G);Array.isArray(le)&&(le=le.map(L=>Xw(i,fu(i,L)))),d(t,["setup","tools"],le)}const B=f(e,["sessionResumption"]);t!==void 0&&B!=null&&d(t,["setup","sessionResumption"],jw(i,B));const W=f(e,["inputAudioTranscription"]);t!==void 0&&W!=null&&d(t,["setup","inputAudioTranscription"],pT());const J=f(e,["outputAudioTranscription"]);t!==void 0&&J!=null&&d(t,["setup","outputAudioTranscription"],pT());const te=f(e,["realtimeInputConfig"]);t!==void 0&&te!=null&&d(t,["setup","realtimeInputConfig"],nR(i,te));const re=f(e,["contextWindowCompression"]);t!==void 0&&re!=null&&d(t,["setup","contextWindowCompression"],oR(i,re));const ie=f(e,["proactivity"]);return t!==void 0&&ie!=null&&d(t,["setup","proactivity"],lR(i,ie)),n}function fR(i,e){const t={},n=f(e,["model"]);n!=null&&d(t,["setup","model"],dt(i,n));const r=f(e,["config"]);return r!=null&&d(t,["config"],uR(i,r,t)),t}function dR(i,e){const t={},n=f(e,["model"]);n!=null&&d(t,["setup","model"],dt(i,n));const r=f(e,["config"]);return r!=null&&d(t,["config"],cR(i,r,t)),t}function hR(){return{}}function mR(){return{}}function pR(){return{}}function gR(){return{}}function yR(i,e){const t={},n=f(e,["media"]);n!=null&&d(t,["mediaChunks"],Z0(i,n));const r=f(e,["audio"]);r!=null&&d(t,["audio"],Bx(i,r));const a=f(e,["audioStreamEnd"]);a!=null&&d(t,["audioStreamEnd"],a);const c=f(e,["video"]);c!=null&&d(t,["video"],qx(i,c));const h=f(e,["text"]);return h!=null&&d(t,["text"],h),f(e,["activityStart"])!=null&&d(t,["activityStart"],hR()),f(e,["activityEnd"])!=null&&d(t,["activityEnd"],pR()),t}function vR(i,e){const t={},n=f(e,["media"]);if(n!=null&&d(t,["mediaChunks"],Z0(i,n)),f(e,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const r=f(e,["audioStreamEnd"]);if(r!=null&&d(t,["audioStreamEnd"],r),f(e,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(f(e,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return f(e,["activityStart"])!=null&&d(t,["activityStart"],mR()),f(e,["activityEnd"])!=null&&d(t,["activityEnd"],gR()),t}function rE(i,e){const t={},n=f(e,["text"]);n!=null&&d(t,["text"],n);const r=f(e,["weight"]);return r!=null&&d(t,["weight"],r),t}function _R(i,e){const t={},n=f(e,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>rE(i,a))),d(t,["weightedPrompts"],r)}return t}function oE(i,e){const t={},n=f(e,["temperature"]);n!=null&&d(t,["temperature"],n);const r=f(e,["topK"]);r!=null&&d(t,["topK"],r);const a=f(e,["seed"]);a!=null&&d(t,["seed"],a);const c=f(e,["guidance"]);c!=null&&d(t,["guidance"],c);const h=f(e,["bpm"]);h!=null&&d(t,["bpm"],h);const y=f(e,["density"]);y!=null&&d(t,["density"],y);const g=f(e,["brightness"]);g!=null&&d(t,["brightness"],g);const _=f(e,["scale"]);_!=null&&d(t,["scale"],_);const E=f(e,["muteBass"]);E!=null&&d(t,["muteBass"],E);const S=f(e,["muteDrums"]);S!=null&&d(t,["muteDrums"],S);const I=f(e,["onlyBassAndDrums"]);return I!=null&&d(t,["onlyBassAndDrums"],I),t}function TR(i,e){const t={},n=f(e,["musicGenerationConfig"]);return n!=null&&d(t,["musicGenerationConfig"],oE(i,n)),t}function aE(i,e){const t={},n=f(e,["model"]);return n!=null&&d(t,["model"],n),t}function lE(i,e){const t={},n=f(e,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>rE(i,a))),d(t,["weightedPrompts"],r)}return t}function gm(i,e){const t={},n=f(e,["setup"]);n!=null&&d(t,["setup"],aE(i,n));const r=f(e,["clientContent"]);r!=null&&d(t,["clientContent"],lE(i,r));const a=f(e,["musicGenerationConfig"]);a!=null&&d(t,["musicGenerationConfig"],oE(i,a));const c=f(e,["playbackControl"]);return c!=null&&d(t,["playbackControl"],c),t}function ER(){return{}}function CR(){return{}}function AR(i,e){const t={},n=f(e,["fps"]);n!=null&&d(t,["fps"],n);const r=f(e,["endOffset"]);r!=null&&d(t,["endOffset"],r);const a=f(e,["startOffset"]);return a!=null&&d(t,["startOffset"],a),t}function SR(i,e){const t={},n=f(e,["fps"]);n!=null&&d(t,["fps"],n);const r=f(e,["endOffset"]);r!=null&&d(t,["endOffset"],r);const a=f(e,["startOffset"]);return a!=null&&d(t,["startOffset"],a),t}function xR(i,e){const t={},n=f(e,["data"]);n!=null&&d(t,["data"],n);const r=f(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function wR(i,e){const t={},n=f(e,["displayName"]);n!=null&&d(t,["displayName"],n);const r=f(e,["data"]);r!=null&&d(t,["data"],r);const a=f(e,["mimeType"]);return a!=null&&d(t,["mimeType"],a),t}function RR(i,e){const t={},n=f(e,["fileUri"]);n!=null&&d(t,["fileUri"],n);const r=f(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function bR(i,e){const t={},n=f(e,["displayName"]);n!=null&&d(t,["displayName"],n);const r=f(e,["fileUri"]);r!=null&&d(t,["fileUri"],r);const a=f(e,["mimeType"]);return a!=null&&d(t,["mimeType"],a),t}function IR(i,e){const t={},n=f(e,["videoMetadata"]);n!=null&&d(t,["videoMetadata"],AR(i,n));const r=f(e,["thought"]);r!=null&&d(t,["thought"],r);const a=f(e,["inlineData"]);a!=null&&d(t,["inlineData"],xR(i,a));const c=f(e,["fileData"]);c!=null&&d(t,["fileData"],RR(i,c));const h=f(e,["thoughtSignature"]);h!=null&&d(t,["thoughtSignature"],h);const y=f(e,["codeExecutionResult"]);y!=null&&d(t,["codeExecutionResult"],y);const g=f(e,["executableCode"]);g!=null&&d(t,["executableCode"],g);const _=f(e,["functionCall"]);_!=null&&d(t,["functionCall"],_);const E=f(e,["functionResponse"]);E!=null&&d(t,["functionResponse"],E);const S=f(e,["text"]);return S!=null&&d(t,["text"],S),t}function NR(i,e){const t={},n=f(e,["videoMetadata"]);n!=null&&d(t,["videoMetadata"],SR(i,n));const r=f(e,["thought"]);r!=null&&d(t,["thought"],r);const a=f(e,["inlineData"]);a!=null&&d(t,["inlineData"],wR(i,a));const c=f(e,["fileData"]);c!=null&&d(t,["fileData"],bR(i,c));const h=f(e,["thoughtSignature"]);h!=null&&d(t,["thoughtSignature"],h);const y=f(e,["codeExecutionResult"]);y!=null&&d(t,["codeExecutionResult"],y);const g=f(e,["executableCode"]);g!=null&&d(t,["executableCode"],g);const _=f(e,["functionCall"]);_!=null&&d(t,["functionCall"],_);const E=f(e,["functionResponse"]);E!=null&&d(t,["functionResponse"],E);const S=f(e,["text"]);return S!=null&&d(t,["text"],S),t}function MR(i,e){const t={},n=f(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(c=>IR(i,c))),d(t,["parts"],a)}const r=f(e,["role"]);return r!=null&&d(t,["role"],r),t}function DR(i,e){const t={},n=f(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(c=>NR(i,c))),d(t,["parts"],a)}const r=f(e,["role"]);return r!=null&&d(t,["role"],r),t}function gT(i,e){const t={},n=f(e,["text"]);n!=null&&d(t,["text"],n);const r=f(e,["finished"]);return r!=null&&d(t,["finished"],r),t}function yT(i,e){const t={},n=f(e,["text"]);n!=null&&d(t,["text"],n);const r=f(e,["finished"]);return r!=null&&d(t,["finished"],r),t}function VR(i,e){const t={},n=f(e,["retrievedUrl"]);n!=null&&d(t,["retrievedUrl"],n);const r=f(e,["urlRetrievalStatus"]);return r!=null&&d(t,["urlRetrievalStatus"],r),t}function PR(i,e){const t={},n=f(e,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>VR(i,a))),d(t,["urlMetadata"],r)}return t}function kR(i,e){const t={},n=f(e,["modelTurn"]);n!=null&&d(t,["modelTurn"],MR(i,n));const r=f(e,["turnComplete"]);r!=null&&d(t,["turnComplete"],r);const a=f(e,["interrupted"]);a!=null&&d(t,["interrupted"],a);const c=f(e,["groundingMetadata"]);c!=null&&d(t,["groundingMetadata"],c);const h=f(e,["generationComplete"]);h!=null&&d(t,["generationComplete"],h);const y=f(e,["inputTranscription"]);y!=null&&d(t,["inputTranscription"],gT(i,y));const g=f(e,["outputTranscription"]);g!=null&&d(t,["outputTranscription"],gT(i,g));const _=f(e,["urlContextMetadata"]);return _!=null&&d(t,["urlContextMetadata"],PR(i,_)),t}function LR(i,e){const t={},n=f(e,["modelTurn"]);n!=null&&d(t,["modelTurn"],DR(i,n));const r=f(e,["turnComplete"]);r!=null&&d(t,["turnComplete"],r);const a=f(e,["interrupted"]);a!=null&&d(t,["interrupted"],a);const c=f(e,["groundingMetadata"]);c!=null&&d(t,["groundingMetadata"],c);const h=f(e,["generationComplete"]);h!=null&&d(t,["generationComplete"],h);const y=f(e,["inputTranscription"]);y!=null&&d(t,["inputTranscription"],yT(i,y));const g=f(e,["outputTranscription"]);return g!=null&&d(t,["outputTranscription"],yT(i,g)),t}function UR(i,e){const t={},n=f(e,["id"]);n!=null&&d(t,["id"],n);const r=f(e,["args"]);r!=null&&d(t,["args"],r);const a=f(e,["name"]);return a!=null&&d(t,["name"],a),t}function OR(i,e){const t={},n=f(e,["args"]);n!=null&&d(t,["args"],n);const r=f(e,["name"]);return r!=null&&d(t,["name"],r),t}function FR(i,e){const t={},n=f(e,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>UR(i,a))),d(t,["functionCalls"],r)}return t}function qR(i,e){const t={},n=f(e,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>OR(i,a))),d(t,["functionCalls"],r)}return t}function BR(i,e){const t={},n=f(e,["ids"]);return n!=null&&d(t,["ids"],n),t}function zR(i,e){const t={},n=f(e,["ids"]);return n!=null&&d(t,["ids"],n),t}function Fc(i,e){const t={},n=f(e,["modality"]);n!=null&&d(t,["modality"],n);const r=f(e,["tokenCount"]);return r!=null&&d(t,["tokenCount"],r),t}function qc(i,e){const t={},n=f(e,["modality"]);n!=null&&d(t,["modality"],n);const r=f(e,["tokenCount"]);return r!=null&&d(t,["tokenCount"],r),t}function GR(i,e){const t={},n=f(e,["promptTokenCount"]);n!=null&&d(t,["promptTokenCount"],n);const r=f(e,["cachedContentTokenCount"]);r!=null&&d(t,["cachedContentTokenCount"],r);const a=f(e,["responseTokenCount"]);a!=null&&d(t,["responseTokenCount"],a);const c=f(e,["toolUsePromptTokenCount"]);c!=null&&d(t,["toolUsePromptTokenCount"],c);const h=f(e,["thoughtsTokenCount"]);h!=null&&d(t,["thoughtsTokenCount"],h);const y=f(e,["totalTokenCount"]);y!=null&&d(t,["totalTokenCount"],y);const g=f(e,["promptTokensDetails"]);if(g!=null){let I=g;Array.isArray(I)&&(I=I.map(U=>Fc(i,U))),d(t,["promptTokensDetails"],I)}const _=f(e,["cacheTokensDetails"]);if(_!=null){let I=_;Array.isArray(I)&&(I=I.map(U=>Fc(i,U))),d(t,["cacheTokensDetails"],I)}const E=f(e,["responseTokensDetails"]);if(E!=null){let I=E;Array.isArray(I)&&(I=I.map(U=>Fc(i,U))),d(t,["responseTokensDetails"],I)}const S=f(e,["toolUsePromptTokensDetails"]);if(S!=null){let I=S;Array.isArray(I)&&(I=I.map(U=>Fc(i,U))),d(t,["toolUsePromptTokensDetails"],I)}return t}function HR(i,e){const t={},n=f(e,["promptTokenCount"]);n!=null&&d(t,["promptTokenCount"],n);const r=f(e,["cachedContentTokenCount"]);r!=null&&d(t,["cachedContentTokenCount"],r);const a=f(e,["candidatesTokenCount"]);a!=null&&d(t,["responseTokenCount"],a);const c=f(e,["toolUsePromptTokenCount"]);c!=null&&d(t,["toolUsePromptTokenCount"],c);const h=f(e,["thoughtsTokenCount"]);h!=null&&d(t,["thoughtsTokenCount"],h);const y=f(e,["totalTokenCount"]);y!=null&&d(t,["totalTokenCount"],y);const g=f(e,["promptTokensDetails"]);if(g!=null){let U=g;Array.isArray(U)&&(U=U.map(G=>qc(i,G))),d(t,["promptTokensDetails"],U)}const _=f(e,["cacheTokensDetails"]);if(_!=null){let U=_;Array.isArray(U)&&(U=U.map(G=>qc(i,G))),d(t,["cacheTokensDetails"],U)}const E=f(e,["candidatesTokensDetails"]);if(E!=null){let U=E;Array.isArray(U)&&(U=U.map(G=>qc(i,G))),d(t,["responseTokensDetails"],U)}const S=f(e,["toolUsePromptTokensDetails"]);if(S!=null){let U=S;Array.isArray(U)&&(U=U.map(G=>qc(i,G))),d(t,["toolUsePromptTokensDetails"],U)}const I=f(e,["trafficType"]);return I!=null&&d(t,["trafficType"],I),t}function $R(i,e){const t={},n=f(e,["timeLeft"]);return n!=null&&d(t,["timeLeft"],n),t}function YR(i,e){const t={},n=f(e,["timeLeft"]);return n!=null&&d(t,["timeLeft"],n),t}function KR(i,e){const t={},n=f(e,["newHandle"]);n!=null&&d(t,["newHandle"],n);const r=f(e,["resumable"]);r!=null&&d(t,["resumable"],r);const a=f(e,["lastConsumedClientMessageIndex"]);return a!=null&&d(t,["lastConsumedClientMessageIndex"],a),t}function QR(i,e){const t={},n=f(e,["newHandle"]);n!=null&&d(t,["newHandle"],n);const r=f(e,["resumable"]);r!=null&&d(t,["resumable"],r);const a=f(e,["lastConsumedClientMessageIndex"]);return a!=null&&d(t,["lastConsumedClientMessageIndex"],a),t}function ZR(i,e){const t={};f(e,["setupComplete"])!=null&&d(t,["setupComplete"],ER());const r=f(e,["serverContent"]);r!=null&&d(t,["serverContent"],kR(i,r));const a=f(e,["toolCall"]);a!=null&&d(t,["toolCall"],FR(i,a));const c=f(e,["toolCallCancellation"]);c!=null&&d(t,["toolCallCancellation"],BR(i,c));const h=f(e,["usageMetadata"]);h!=null&&d(t,["usageMetadata"],GR(i,h));const y=f(e,["goAway"]);y!=null&&d(t,["goAway"],$R(i,y));const g=f(e,["sessionResumptionUpdate"]);return g!=null&&d(t,["sessionResumptionUpdate"],KR(i,g)),t}function XR(i,e){const t={};f(e,["setupComplete"])!=null&&d(t,["setupComplete"],CR());const r=f(e,["serverContent"]);r!=null&&d(t,["serverContent"],LR(i,r));const a=f(e,["toolCall"]);a!=null&&d(t,["toolCall"],qR(i,a));const c=f(e,["toolCallCancellation"]);c!=null&&d(t,["toolCallCancellation"],zR(i,c));const h=f(e,["usageMetadata"]);h!=null&&d(t,["usageMetadata"],HR(i,h));const y=f(e,["goAway"]);y!=null&&d(t,["goAway"],YR(i,y));const g=f(e,["sessionResumptionUpdate"]);return g!=null&&d(t,["sessionResumptionUpdate"],QR(i,g)),t}function JR(){return{}}function jR(i,e){const t={},n=f(e,["text"]);n!=null&&d(t,["text"],n);const r=f(e,["weight"]);return r!=null&&d(t,["weight"],r),t}function WR(i,e){const t={},n=f(e,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>jR(i,a))),d(t,["weightedPrompts"],r)}return t}function eb(i,e){const t={},n=f(e,["temperature"]);n!=null&&d(t,["temperature"],n);const r=f(e,["topK"]);r!=null&&d(t,["topK"],r);const a=f(e,["seed"]);a!=null&&d(t,["seed"],a);const c=f(e,["guidance"]);c!=null&&d(t,["guidance"],c);const h=f(e,["bpm"]);h!=null&&d(t,["bpm"],h);const y=f(e,["density"]);y!=null&&d(t,["density"],y);const g=f(e,["brightness"]);g!=null&&d(t,["brightness"],g);const _=f(e,["scale"]);_!=null&&d(t,["scale"],_);const E=f(e,["muteBass"]);E!=null&&d(t,["muteBass"],E);const S=f(e,["muteDrums"]);S!=null&&d(t,["muteDrums"],S);const I=f(e,["onlyBassAndDrums"]);return I!=null&&d(t,["onlyBassAndDrums"],I),t}function tb(i,e){const t={},n=f(e,["clientContent"]);n!=null&&d(t,["clientContent"],WR(i,n));const r=f(e,["musicGenerationConfig"]);return r!=null&&d(t,["musicGenerationConfig"],eb(i,r)),t}function nb(i,e){const t={},n=f(e,["data"]);n!=null&&d(t,["data"],n);const r=f(e,["mimeType"]);r!=null&&d(t,["mimeType"],r);const a=f(e,["sourceMetadata"]);return a!=null&&d(t,["sourceMetadata"],tb(i,a)),t}function ib(i,e){const t={},n=f(e,["audioChunks"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>nb(i,a))),d(t,["audioChunks"],r)}return t}function sb(i,e){const t={},n=f(e,["text"]);n!=null&&d(t,["text"],n);const r=f(e,["filteredReason"]);return r!=null&&d(t,["filteredReason"],r),t}function rb(i,e){const t={};f(e,["setupComplete"])!=null&&d(t,["setupComplete"],JR());const r=f(e,["serverContent"]);r!=null&&d(t,["serverContent"],ib(i,r));const a=f(e,["filteredPrompt"]);return a!=null&&d(t,["filteredPrompt"],sb(i,a)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ob(i,e){const t={},n=f(e,["fps"]);n!=null&&d(t,["fps"],n);const r=f(e,["endOffset"]);r!=null&&d(t,["endOffset"],r);const a=f(e,["startOffset"]);return a!=null&&d(t,["startOffset"],a),t}function ab(i,e){const t={};if(f(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(e,["data"]);n!=null&&d(t,["data"],n);const r=f(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function lb(i,e){const t={};if(f(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(e,["fileUri"]);n!=null&&d(t,["fileUri"],n);const r=f(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function ub(i,e){const t={},n=f(e,["videoMetadata"]);n!=null&&d(t,["videoMetadata"],ob(i,n));const r=f(e,["thought"]);r!=null&&d(t,["thought"],r);const a=f(e,["inlineData"]);a!=null&&d(t,["inlineData"],ab(i,a));const c=f(e,["fileData"]);c!=null&&d(t,["fileData"],lb(i,c));const h=f(e,["thoughtSignature"]);h!=null&&d(t,["thoughtSignature"],h);const y=f(e,["codeExecutionResult"]);y!=null&&d(t,["codeExecutionResult"],y);const g=f(e,["executableCode"]);g!=null&&d(t,["executableCode"],g);const _=f(e,["functionCall"]);_!=null&&d(t,["functionCall"],_);const E=f(e,["functionResponse"]);E!=null&&d(t,["functionResponse"],E);const S=f(e,["text"]);return S!=null&&d(t,["text"],S),t}function xf(i,e){const t={},n=f(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(c=>ub(i,c))),d(t,["parts"],a)}const r=f(e,["role"]);return r!=null&&d(t,["role"],r),t}function cb(i,e){const t={},n=f(e,["anyOf"]);n!=null&&d(t,["anyOf"],n);const r=f(e,["default"]);r!=null&&d(t,["default"],r);const a=f(e,["description"]);a!=null&&d(t,["description"],a);const c=f(e,["enum"]);c!=null&&d(t,["enum"],c);const h=f(e,["example"]);h!=null&&d(t,["example"],h);const y=f(e,["format"]);y!=null&&d(t,["format"],y);const g=f(e,["items"]);g!=null&&d(t,["items"],g);const _=f(e,["maxItems"]);_!=null&&d(t,["maxItems"],_);const E=f(e,["maxLength"]);E!=null&&d(t,["maxLength"],E);const S=f(e,["maxProperties"]);S!=null&&d(t,["maxProperties"],S);const I=f(e,["maximum"]);I!=null&&d(t,["maximum"],I);const U=f(e,["minItems"]);U!=null&&d(t,["minItems"],U);const G=f(e,["minLength"]);G!=null&&d(t,["minLength"],G);const B=f(e,["minProperties"]);B!=null&&d(t,["minProperties"],B);const W=f(e,["minimum"]);W!=null&&d(t,["minimum"],W);const J=f(e,["nullable"]);J!=null&&d(t,["nullable"],J);const te=f(e,["pattern"]);te!=null&&d(t,["pattern"],te);const re=f(e,["properties"]);re!=null&&d(t,["properties"],re);const ie=f(e,["propertyOrdering"]);ie!=null&&d(t,["propertyOrdering"],ie);const le=f(e,["required"]);le!=null&&d(t,["required"],le);const L=f(e,["title"]);L!=null&&d(t,["title"],L);const D=f(e,["type"]);return D!=null&&d(t,["type"],D),t}function fb(i,e){const t={};if(f(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=f(e,["category"]);n!=null&&d(t,["category"],n);const r=f(e,["threshold"]);return r!=null&&d(t,["threshold"],r),t}function db(i,e){const t={},n=f(e,["behavior"]);n!=null&&d(t,["behavior"],n);const r=f(e,["description"]);r!=null&&d(t,["description"],r);const a=f(e,["name"]);a!=null&&d(t,["name"],a);const c=f(e,["parameters"]);c!=null&&d(t,["parameters"],c);const h=f(e,["response"]);return h!=null&&d(t,["response"],h),t}function hb(i,e){const t={},n=f(e,["startTime"]);n!=null&&d(t,["startTime"],n);const r=f(e,["endTime"]);return r!=null&&d(t,["endTime"],r),t}function mb(i,e){const t={},n=f(e,["timeRangeFilter"]);return n!=null&&d(t,["timeRangeFilter"],hb(i,n)),t}function pb(i,e){const t={},n=f(e,["mode"]);n!=null&&d(t,["mode"],n);const r=f(e,["dynamicThreshold"]);return r!=null&&d(t,["dynamicThreshold"],r),t}function gb(i,e){const t={},n=f(e,["dynamicRetrievalConfig"]);return n!=null&&d(t,["dynamicRetrievalConfig"],pb(i,n)),t}function yb(){return{}}function vb(i,e){const t={},n=f(e,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(g=>db(i,g))),d(t,["functionDeclarations"],y)}if(f(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=f(e,["googleSearch"]);r!=null&&d(t,["googleSearch"],mb(i,r));const a=f(e,["googleSearchRetrieval"]);if(a!=null&&d(t,["googleSearchRetrieval"],gb(i,a)),f(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(f(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");f(e,["urlContext"])!=null&&d(t,["urlContext"],yb());const h=f(e,["codeExecution"]);return h!=null&&d(t,["codeExecution"],h),t}function _b(i,e){const t={},n=f(e,["mode"]);n!=null&&d(t,["mode"],n);const r=f(e,["allowedFunctionNames"]);return r!=null&&d(t,["allowedFunctionNames"],r),t}function Tb(i,e){const t={},n=f(e,["latitude"]);n!=null&&d(t,["latitude"],n);const r=f(e,["longitude"]);return r!=null&&d(t,["longitude"],r),t}function Eb(i,e){const t={},n=f(e,["latLng"]);n!=null&&d(t,["latLng"],Tb(i,n));const r=f(e,["languageCode"]);return r!=null&&d(t,["languageCode"],r),t}function Cb(i,e){const t={},n=f(e,["functionCallingConfig"]);n!=null&&d(t,["functionCallingConfig"],_b(i,n));const r=f(e,["retrievalConfig"]);return r!=null&&d(t,["retrievalConfig"],Eb(i,r)),t}function Ab(i,e){const t={},n=f(e,["voiceName"]);return n!=null&&d(t,["voiceName"],n),t}function uE(i,e){const t={},n=f(e,["prebuiltVoiceConfig"]);return n!=null&&d(t,["prebuiltVoiceConfig"],Ab(i,n)),t}function Sb(i,e){const t={},n=f(e,["speaker"]);n!=null&&d(t,["speaker"],n);const r=f(e,["voiceConfig"]);return r!=null&&d(t,["voiceConfig"],uE(i,r)),t}function xb(i,e){const t={},n=f(e,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>Sb(i,a))),d(t,["speakerVoiceConfigs"],r)}return t}function wb(i,e){const t={},n=f(e,["voiceConfig"]);n!=null&&d(t,["voiceConfig"],uE(i,n));const r=f(e,["multiSpeakerVoiceConfig"]);r!=null&&d(t,["multiSpeakerVoiceConfig"],xb(i,r));const a=f(e,["languageCode"]);return a!=null&&d(t,["languageCode"],a),t}function Rb(i,e){const t={},n=f(e,["includeThoughts"]);n!=null&&d(t,["includeThoughts"],n);const r=f(e,["thinkingBudget"]);return r!=null&&d(t,["thinkingBudget"],r),t}function bb(i,e,t){const n={},r=f(e,["systemInstruction"]);t!==void 0&&r!=null&&d(t,["systemInstruction"],xf(i,vn(i,r)));const a=f(e,["temperature"]);a!=null&&d(n,["temperature"],a);const c=f(e,["topP"]);c!=null&&d(n,["topP"],c);const h=f(e,["topK"]);h!=null&&d(n,["topK"],h);const y=f(e,["candidateCount"]);y!=null&&d(n,["candidateCount"],y);const g=f(e,["maxOutputTokens"]);g!=null&&d(n,["maxOutputTokens"],g);const _=f(e,["stopSequences"]);_!=null&&d(n,["stopSequences"],_);const E=f(e,["responseLogprobs"]);E!=null&&d(n,["responseLogprobs"],E);const S=f(e,["logprobs"]);S!=null&&d(n,["logprobs"],S);const I=f(e,["presencePenalty"]);I!=null&&d(n,["presencePenalty"],I);const U=f(e,["frequencyPenalty"]);U!=null&&d(n,["frequencyPenalty"],U);const G=f(e,["seed"]);G!=null&&d(n,["seed"],G);const B=f(e,["responseMimeType"]);B!=null&&d(n,["responseMimeType"],B);const W=f(e,["responseSchema"]);if(W!=null&&d(n,["responseSchema"],cb(i,cf(i,W))),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const J=f(e,["safetySettings"]);if(t!==void 0&&J!=null){let N=J;Array.isArray(N)&&(N=N.map(k=>fb(i,k))),d(t,["safetySettings"],N)}const te=f(e,["tools"]);if(t!==void 0&&te!=null){let N=du(i,te);Array.isArray(N)&&(N=N.map(k=>vb(i,fu(i,k)))),d(t,["tools"],N)}const re=f(e,["toolConfig"]);if(t!==void 0&&re!=null&&d(t,["toolConfig"],Cb(i,re)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ie=f(e,["cachedContent"]);t!==void 0&&ie!=null&&d(t,["cachedContent"],ir(i,ie));const le=f(e,["responseModalities"]);le!=null&&d(n,["responseModalities"],le);const L=f(e,["mediaResolution"]);L!=null&&d(n,["mediaResolution"],L);const D=f(e,["speechConfig"]);if(D!=null&&d(n,["speechConfig"],wb(i,j0(i,D))),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const x=f(e,["thinkingConfig"]);return x!=null&&d(n,["thinkingConfig"],Rb(i,x)),n}function vT(i,e){const t={},n=f(e,["model"]);n!=null&&d(t,["_url","model"],dt(i,n));const r=f(e,["contents"]);if(r!=null){let c=fi(i,r);Array.isArray(c)&&(c=c.map(h=>xf(i,h))),d(t,["contents"],c)}const a=f(e,["config"]);return a!=null&&d(t,["generationConfig"],bb(i,a,t)),t}function Ib(i,e,t){const n={},r=f(e,["taskType"]);t!==void 0&&r!=null&&d(t,["requests[]","taskType"],r);const a=f(e,["title"]);t!==void 0&&a!=null&&d(t,["requests[]","title"],a);const c=f(e,["outputDimensionality"]);if(t!==void 0&&c!=null&&d(t,["requests[]","outputDimensionality"],c),f(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Nb(i,e){const t={},n=f(e,["model"]);n!=null&&d(t,["_url","model"],dt(i,n));const r=f(e,["contents"]);r!=null&&d(t,["requests[]","content"],J0(i,r));const a=f(e,["config"]);a!=null&&d(t,["config"],Ib(i,a,t));const c=f(e,["model"]);return c!==void 0&&d(t,["requests[]","model"],dt(i,c)),t}function Mb(i,e,t){const n={};if(f(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=f(e,["numberOfImages"]);t!==void 0&&r!=null&&d(t,["parameters","sampleCount"],r);const a=f(e,["aspectRatio"]);t!==void 0&&a!=null&&d(t,["parameters","aspectRatio"],a);const c=f(e,["guidanceScale"]);if(t!==void 0&&c!=null&&d(t,["parameters","guidanceScale"],c),f(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const h=f(e,["safetyFilterLevel"]);t!==void 0&&h!=null&&d(t,["parameters","safetySetting"],h);const y=f(e,["personGeneration"]);t!==void 0&&y!=null&&d(t,["parameters","personGeneration"],y);const g=f(e,["includeSafetyAttributes"]);t!==void 0&&g!=null&&d(t,["parameters","includeSafetyAttributes"],g);const _=f(e,["includeRaiReason"]);t!==void 0&&_!=null&&d(t,["parameters","includeRaiReason"],_);const E=f(e,["language"]);t!==void 0&&E!=null&&d(t,["parameters","language"],E);const S=f(e,["outputMimeType"]);t!==void 0&&S!=null&&d(t,["parameters","outputOptions","mimeType"],S);const I=f(e,["outputCompressionQuality"]);if(t!==void 0&&I!=null&&d(t,["parameters","outputOptions","compressionQuality"],I),f(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Db(i,e){const t={},n=f(e,["model"]);n!=null&&d(t,["_url","model"],dt(i,n));const r=f(e,["prompt"]);r!=null&&d(t,["instances[0]","prompt"],r);const a=f(e,["config"]);return a!=null&&d(t,["config"],Mb(i,a,t)),t}function Vb(i,e){const t={},n=f(e,["model"]);n!=null&&d(t,["_url","name"],dt(i,n));const r=f(e,["config"]);return r!=null&&d(t,["config"],r),t}function Pb(i,e,t){const n={},r=f(e,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);const a=f(e,["pageToken"]);t!==void 0&&a!=null&&d(t,["_query","pageToken"],a);const c=f(e,["filter"]);t!==void 0&&c!=null&&d(t,["_query","filter"],c);const h=f(e,["queryBase"]);return t!==void 0&&h!=null&&d(t,["_url","models_url"],tE(i,h)),n}function kb(i,e){const t={},n=f(e,["config"]);return n!=null&&d(t,["config"],Pb(i,n,t)),t}function Lb(i,e,t){const n={},r=f(e,["displayName"]);t!==void 0&&r!=null&&d(t,["displayName"],r);const a=f(e,["description"]);t!==void 0&&a!=null&&d(t,["description"],a);const c=f(e,["defaultCheckpointId"]);return t!==void 0&&c!=null&&d(t,["defaultCheckpointId"],c),n}function Ub(i,e){const t={},n=f(e,["model"]);n!=null&&d(t,["_url","name"],dt(i,n));const r=f(e,["config"]);return r!=null&&d(t,["config"],Lb(i,r,t)),t}function Ob(i,e){const t={},n=f(e,["model"]);n!=null&&d(t,["_url","name"],dt(i,n));const r=f(e,["config"]);return r!=null&&d(t,["config"],r),t}function Fb(i,e){const t={};if(f(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function qb(i,e){const t={},n=f(e,["model"]);n!=null&&d(t,["_url","model"],dt(i,n));const r=f(e,["contents"]);if(r!=null){let c=fi(i,r);Array.isArray(c)&&(c=c.map(h=>xf(i,h))),d(t,["contents"],c)}const a=f(e,["config"]);return a!=null&&d(t,["config"],Fb(i,a)),t}function Bb(i,e){const t={};if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=f(e,["imageBytes"]);n!=null&&d(t,["bytesBase64Encoded"],sr(i,n));const r=f(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function zb(i,e,t){const n={},r=f(e,["numberOfVideos"]);if(t!==void 0&&r!=null&&d(t,["parameters","sampleCount"],r),f(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=f(e,["durationSeconds"]);if(t!==void 0&&a!=null&&d(t,["parameters","durationSeconds"],a),f(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=f(e,["aspectRatio"]);if(t!==void 0&&c!=null&&d(t,["parameters","aspectRatio"],c),f(e,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const h=f(e,["personGeneration"]);if(t!==void 0&&h!=null&&d(t,["parameters","personGeneration"],h),f(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const y=f(e,["negativePrompt"]);if(t!==void 0&&y!=null&&d(t,["parameters","negativePrompt"],y),f(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");if(f(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");return n}function Gb(i,e){const t={},n=f(e,["model"]);n!=null&&d(t,["_url","model"],dt(i,n));const r=f(e,["prompt"]);r!=null&&d(t,["instances[0]","prompt"],r);const a=f(e,["image"]);a!=null&&d(t,["instances[0]","image"],Bb(i,a));const c=f(e,["config"]);return c!=null&&d(t,["config"],zb(i,c,t)),t}function Hb(i,e){const t={},n=f(e,["fps"]);n!=null&&d(t,["fps"],n);const r=f(e,["endOffset"]);r!=null&&d(t,["endOffset"],r);const a=f(e,["startOffset"]);return a!=null&&d(t,["startOffset"],a),t}function $b(i,e){const t={},n=f(e,["displayName"]);n!=null&&d(t,["displayName"],n);const r=f(e,["data"]);r!=null&&d(t,["data"],r);const a=f(e,["mimeType"]);return a!=null&&d(t,["mimeType"],a),t}function Yb(i,e){const t={},n=f(e,["displayName"]);n!=null&&d(t,["displayName"],n);const r=f(e,["fileUri"]);r!=null&&d(t,["fileUri"],r);const a=f(e,["mimeType"]);return a!=null&&d(t,["mimeType"],a),t}function Kb(i,e){const t={},n=f(e,["videoMetadata"]);n!=null&&d(t,["videoMetadata"],Hb(i,n));const r=f(e,["thought"]);r!=null&&d(t,["thought"],r);const a=f(e,["inlineData"]);a!=null&&d(t,["inlineData"],$b(i,a));const c=f(e,["fileData"]);c!=null&&d(t,["fileData"],Yb(i,c));const h=f(e,["thoughtSignature"]);h!=null&&d(t,["thoughtSignature"],h);const y=f(e,["codeExecutionResult"]);y!=null&&d(t,["codeExecutionResult"],y);const g=f(e,["executableCode"]);g!=null&&d(t,["executableCode"],g);const _=f(e,["functionCall"]);_!=null&&d(t,["functionCall"],_);const E=f(e,["functionResponse"]);E!=null&&d(t,["functionResponse"],E);const S=f(e,["text"]);return S!=null&&d(t,["text"],S),t}function _a(i,e){const t={},n=f(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(c=>Kb(i,c))),d(t,["parts"],a)}const r=f(e,["role"]);return r!=null&&d(t,["role"],r),t}function Qb(i,e){const t={},n=f(e,["anyOf"]);n!=null&&d(t,["anyOf"],n);const r=f(e,["default"]);r!=null&&d(t,["default"],r);const a=f(e,["description"]);a!=null&&d(t,["description"],a);const c=f(e,["enum"]);c!=null&&d(t,["enum"],c);const h=f(e,["example"]);h!=null&&d(t,["example"],h);const y=f(e,["format"]);y!=null&&d(t,["format"],y);const g=f(e,["items"]);g!=null&&d(t,["items"],g);const _=f(e,["maxItems"]);_!=null&&d(t,["maxItems"],_);const E=f(e,["maxLength"]);E!=null&&d(t,["maxLength"],E);const S=f(e,["maxProperties"]);S!=null&&d(t,["maxProperties"],S);const I=f(e,["maximum"]);I!=null&&d(t,["maximum"],I);const U=f(e,["minItems"]);U!=null&&d(t,["minItems"],U);const G=f(e,["minLength"]);G!=null&&d(t,["minLength"],G);const B=f(e,["minProperties"]);B!=null&&d(t,["minProperties"],B);const W=f(e,["minimum"]);W!=null&&d(t,["minimum"],W);const J=f(e,["nullable"]);J!=null&&d(t,["nullable"],J);const te=f(e,["pattern"]);te!=null&&d(t,["pattern"],te);const re=f(e,["properties"]);re!=null&&d(t,["properties"],re);const ie=f(e,["propertyOrdering"]);ie!=null&&d(t,["propertyOrdering"],ie);const le=f(e,["required"]);le!=null&&d(t,["required"],le);const L=f(e,["title"]);L!=null&&d(t,["title"],L);const D=f(e,["type"]);return D!=null&&d(t,["type"],D),t}function Zb(i,e){const t={},n=f(e,["featureSelectionPreference"]);return n!=null&&d(t,["featureSelectionPreference"],n),t}function Xb(i,e){const t={},n=f(e,["method"]);n!=null&&d(t,["method"],n);const r=f(e,["category"]);r!=null&&d(t,["category"],r);const a=f(e,["threshold"]);return a!=null&&d(t,["threshold"],a),t}function Jb(i,e){const t={};if(f(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=f(e,["description"]);n!=null&&d(t,["description"],n);const r=f(e,["name"]);r!=null&&d(t,["name"],r);const a=f(e,["parameters"]);a!=null&&d(t,["parameters"],a);const c=f(e,["response"]);return c!=null&&d(t,["response"],c),t}function jb(i,e){const t={},n=f(e,["startTime"]);n!=null&&d(t,["startTime"],n);const r=f(e,["endTime"]);return r!=null&&d(t,["endTime"],r),t}function Wb(i,e){const t={},n=f(e,["timeRangeFilter"]);return n!=null&&d(t,["timeRangeFilter"],jb(i,n)),t}function eI(i,e){const t={},n=f(e,["mode"]);n!=null&&d(t,["mode"],n);const r=f(e,["dynamicThreshold"]);return r!=null&&d(t,["dynamicThreshold"],r),t}function tI(i,e){const t={},n=f(e,["dynamicRetrievalConfig"]);return n!=null&&d(t,["dynamicRetrievalConfig"],eI(i,n)),t}function nI(){return{}}function iI(i,e){const t={},n=f(e,["apiKeyString"]);return n!=null&&d(t,["apiKeyString"],n),t}function sI(i,e){const t={},n=f(e,["apiKeyConfig"]);n!=null&&d(t,["apiKeyConfig"],iI(i,n));const r=f(e,["authType"]);r!=null&&d(t,["authType"],r);const a=f(e,["googleServiceAccountConfig"]);a!=null&&d(t,["googleServiceAccountConfig"],a);const c=f(e,["httpBasicAuthConfig"]);c!=null&&d(t,["httpBasicAuthConfig"],c);const h=f(e,["oauthConfig"]);h!=null&&d(t,["oauthConfig"],h);const y=f(e,["oidcConfig"]);return y!=null&&d(t,["oidcConfig"],y),t}function rI(i,e){const t={},n=f(e,["authConfig"]);return n!=null&&d(t,["authConfig"],sI(i,n)),t}function cE(i,e){const t={},n=f(e,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(E=>Jb(i,E))),d(t,["functionDeclarations"],_)}const r=f(e,["retrieval"]);r!=null&&d(t,["retrieval"],r);const a=f(e,["googleSearch"]);a!=null&&d(t,["googleSearch"],Wb(i,a));const c=f(e,["googleSearchRetrieval"]);c!=null&&d(t,["googleSearchRetrieval"],tI(i,c)),f(e,["enterpriseWebSearch"])!=null&&d(t,["enterpriseWebSearch"],nI());const y=f(e,["googleMaps"]);if(y!=null&&d(t,["googleMaps"],rI(i,y)),f(e,["urlContext"])!==void 0)throw new Error("urlContext parameter is not supported in Vertex AI.");const g=f(e,["codeExecution"]);return g!=null&&d(t,["codeExecution"],g),t}function oI(i,e){const t={},n=f(e,["mode"]);n!=null&&d(t,["mode"],n);const r=f(e,["allowedFunctionNames"]);return r!=null&&d(t,["allowedFunctionNames"],r),t}function aI(i,e){const t={},n=f(e,["latitude"]);n!=null&&d(t,["latitude"],n);const r=f(e,["longitude"]);return r!=null&&d(t,["longitude"],r),t}function lI(i,e){const t={},n=f(e,["latLng"]);n!=null&&d(t,["latLng"],aI(i,n));const r=f(e,["languageCode"]);return r!=null&&d(t,["languageCode"],r),t}function uI(i,e){const t={},n=f(e,["functionCallingConfig"]);n!=null&&d(t,["functionCallingConfig"],oI(i,n));const r=f(e,["retrievalConfig"]);return r!=null&&d(t,["retrievalConfig"],lI(i,r)),t}function cI(i,e){const t={},n=f(e,["voiceName"]);return n!=null&&d(t,["voiceName"],n),t}function fI(i,e){const t={},n=f(e,["prebuiltVoiceConfig"]);return n!=null&&d(t,["prebuiltVoiceConfig"],cI(i,n)),t}function dI(i,e){const t={},n=f(e,["voiceConfig"]);if(n!=null&&d(t,["voiceConfig"],fI(i,n)),f(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=f(e,["languageCode"]);return r!=null&&d(t,["languageCode"],r),t}function hI(i,e){const t={},n=f(e,["includeThoughts"]);n!=null&&d(t,["includeThoughts"],n);const r=f(e,["thinkingBudget"]);return r!=null&&d(t,["thinkingBudget"],r),t}function mI(i,e,t){const n={},r=f(e,["systemInstruction"]);t!==void 0&&r!=null&&d(t,["systemInstruction"],_a(i,vn(i,r)));const a=f(e,["temperature"]);a!=null&&d(n,["temperature"],a);const c=f(e,["topP"]);c!=null&&d(n,["topP"],c);const h=f(e,["topK"]);h!=null&&d(n,["topK"],h);const y=f(e,["candidateCount"]);y!=null&&d(n,["candidateCount"],y);const g=f(e,["maxOutputTokens"]);g!=null&&d(n,["maxOutputTokens"],g);const _=f(e,["stopSequences"]);_!=null&&d(n,["stopSequences"],_);const E=f(e,["responseLogprobs"]);E!=null&&d(n,["responseLogprobs"],E);const S=f(e,["logprobs"]);S!=null&&d(n,["logprobs"],S);const I=f(e,["presencePenalty"]);I!=null&&d(n,["presencePenalty"],I);const U=f(e,["frequencyPenalty"]);U!=null&&d(n,["frequencyPenalty"],U);const G=f(e,["seed"]);G!=null&&d(n,["seed"],G);const B=f(e,["responseMimeType"]);B!=null&&d(n,["responseMimeType"],B);const W=f(e,["responseSchema"]);W!=null&&d(n,["responseSchema"],Qb(i,cf(i,W)));const J=f(e,["routingConfig"]);J!=null&&d(n,["routingConfig"],J);const te=f(e,["modelSelectionConfig"]);te!=null&&d(n,["modelConfig"],Zb(i,te));const re=f(e,["safetySettings"]);if(t!==void 0&&re!=null){let ge=re;Array.isArray(ge)&&(ge=ge.map(be=>Xb(i,be))),d(t,["safetySettings"],ge)}const ie=f(e,["tools"]);if(t!==void 0&&ie!=null){let ge=du(i,ie);Array.isArray(ge)&&(ge=ge.map(be=>cE(i,fu(i,be)))),d(t,["tools"],ge)}const le=f(e,["toolConfig"]);t!==void 0&&le!=null&&d(t,["toolConfig"],uI(i,le));const L=f(e,["labels"]);t!==void 0&&L!=null&&d(t,["labels"],L);const D=f(e,["cachedContent"]);t!==void 0&&D!=null&&d(t,["cachedContent"],ir(i,D));const x=f(e,["responseModalities"]);x!=null&&d(n,["responseModalities"],x);const N=f(e,["mediaResolution"]);N!=null&&d(n,["mediaResolution"],N);const k=f(e,["speechConfig"]);k!=null&&d(n,["speechConfig"],dI(i,j0(i,k)));const P=f(e,["audioTimestamp"]);P!=null&&d(n,["audioTimestamp"],P);const M=f(e,["thinkingConfig"]);return M!=null&&d(n,["thinkingConfig"],hI(i,M)),n}function _T(i,e){const t={},n=f(e,["model"]);n!=null&&d(t,["_url","model"],dt(i,n));const r=f(e,["contents"]);if(r!=null){let c=fi(i,r);Array.isArray(c)&&(c=c.map(h=>_a(i,h))),d(t,["contents"],c)}const a=f(e,["config"]);return a!=null&&d(t,["generationConfig"],mI(i,a,t)),t}function pI(i,e,t){const n={},r=f(e,["taskType"]);t!==void 0&&r!=null&&d(t,["instances[]","task_type"],r);const a=f(e,["title"]);t!==void 0&&a!=null&&d(t,["instances[]","title"],a);const c=f(e,["outputDimensionality"]);t!==void 0&&c!=null&&d(t,["parameters","outputDimensionality"],c);const h=f(e,["mimeType"]);t!==void 0&&h!=null&&d(t,["instances[]","mimeType"],h);const y=f(e,["autoTruncate"]);return t!==void 0&&y!=null&&d(t,["parameters","autoTruncate"],y),n}function gI(i,e){const t={},n=f(e,["model"]);n!=null&&d(t,["_url","model"],dt(i,n));const r=f(e,["contents"]);r!=null&&d(t,["instances[]","content"],J0(i,r));const a=f(e,["config"]);return a!=null&&d(t,["config"],pI(i,a,t)),t}function yI(i,e,t){const n={},r=f(e,["outputGcsUri"]);t!==void 0&&r!=null&&d(t,["parameters","storageUri"],r);const a=f(e,["negativePrompt"]);t!==void 0&&a!=null&&d(t,["parameters","negativePrompt"],a);const c=f(e,["numberOfImages"]);t!==void 0&&c!=null&&d(t,["parameters","sampleCount"],c);const h=f(e,["aspectRatio"]);t!==void 0&&h!=null&&d(t,["parameters","aspectRatio"],h);const y=f(e,["guidanceScale"]);t!==void 0&&y!=null&&d(t,["parameters","guidanceScale"],y);const g=f(e,["seed"]);t!==void 0&&g!=null&&d(t,["parameters","seed"],g);const _=f(e,["safetyFilterLevel"]);t!==void 0&&_!=null&&d(t,["parameters","safetySetting"],_);const E=f(e,["personGeneration"]);t!==void 0&&E!=null&&d(t,["parameters","personGeneration"],E);const S=f(e,["includeSafetyAttributes"]);t!==void 0&&S!=null&&d(t,["parameters","includeSafetyAttributes"],S);const I=f(e,["includeRaiReason"]);t!==void 0&&I!=null&&d(t,["parameters","includeRaiReason"],I);const U=f(e,["language"]);t!==void 0&&U!=null&&d(t,["parameters","language"],U);const G=f(e,["outputMimeType"]);t!==void 0&&G!=null&&d(t,["parameters","outputOptions","mimeType"],G);const B=f(e,["outputCompressionQuality"]);t!==void 0&&B!=null&&d(t,["parameters","outputOptions","compressionQuality"],B);const W=f(e,["addWatermark"]);t!==void 0&&W!=null&&d(t,["parameters","addWatermark"],W);const J=f(e,["enhancePrompt"]);return t!==void 0&&J!=null&&d(t,["parameters","enhancePrompt"],J),n}function vI(i,e){const t={},n=f(e,["model"]);n!=null&&d(t,["_url","model"],dt(i,n));const r=f(e,["prompt"]);r!=null&&d(t,["instances[0]","prompt"],r);const a=f(e,["config"]);return a!=null&&d(t,["config"],yI(i,a,t)),t}function Zm(i,e){const t={},n=f(e,["gcsUri"]);n!=null&&d(t,["gcsUri"],n);const r=f(e,["imageBytes"]);r!=null&&d(t,["bytesBase64Encoded"],sr(i,r));const a=f(e,["mimeType"]);return a!=null&&d(t,["mimeType"],a),t}function _I(i,e){const t={},n=f(e,["maskMode"]);n!=null&&d(t,["maskMode"],n);const r=f(e,["segmentationClasses"]);r!=null&&d(t,["maskClasses"],r);const a=f(e,["maskDilation"]);return a!=null&&d(t,["dilation"],a),t}function TI(i,e){const t={},n=f(e,["controlType"]);n!=null&&d(t,["controlType"],n);const r=f(e,["enableControlImageComputation"]);return r!=null&&d(t,["computeControl"],r),t}function EI(i,e){const t={},n=f(e,["styleDescription"]);return n!=null&&d(t,["styleDescription"],n),t}function CI(i,e){const t={},n=f(e,["subjectType"]);n!=null&&d(t,["subjectType"],n);const r=f(e,["subjectDescription"]);return r!=null&&d(t,["subjectDescription"],r),t}function AI(i,e){const t={},n=f(e,["referenceImage"]);n!=null&&d(t,["referenceImage"],Zm(i,n));const r=f(e,["referenceId"]);r!=null&&d(t,["referenceId"],r);const a=f(e,["referenceType"]);a!=null&&d(t,["referenceType"],a);const c=f(e,["maskImageConfig"]);c!=null&&d(t,["maskImageConfig"],_I(i,c));const h=f(e,["controlImageConfig"]);h!=null&&d(t,["controlImageConfig"],TI(i,h));const y=f(e,["styleImageConfig"]);y!=null&&d(t,["styleImageConfig"],EI(i,y));const g=f(e,["subjectImageConfig"]);return g!=null&&d(t,["subjectImageConfig"],CI(i,g)),t}function SI(i,e,t){const n={},r=f(e,["outputGcsUri"]);t!==void 0&&r!=null&&d(t,["parameters","storageUri"],r);const a=f(e,["negativePrompt"]);t!==void 0&&a!=null&&d(t,["parameters","negativePrompt"],a);const c=f(e,["numberOfImages"]);t!==void 0&&c!=null&&d(t,["parameters","sampleCount"],c);const h=f(e,["aspectRatio"]);t!==void 0&&h!=null&&d(t,["parameters","aspectRatio"],h);const y=f(e,["guidanceScale"]);t!==void 0&&y!=null&&d(t,["parameters","guidanceScale"],y);const g=f(e,["seed"]);t!==void 0&&g!=null&&d(t,["parameters","seed"],g);const _=f(e,["safetyFilterLevel"]);t!==void 0&&_!=null&&d(t,["parameters","safetySetting"],_);const E=f(e,["personGeneration"]);t!==void 0&&E!=null&&d(t,["parameters","personGeneration"],E);const S=f(e,["includeSafetyAttributes"]);t!==void 0&&S!=null&&d(t,["parameters","includeSafetyAttributes"],S);const I=f(e,["includeRaiReason"]);t!==void 0&&I!=null&&d(t,["parameters","includeRaiReason"],I);const U=f(e,["language"]);t!==void 0&&U!=null&&d(t,["parameters","language"],U);const G=f(e,["outputMimeType"]);t!==void 0&&G!=null&&d(t,["parameters","outputOptions","mimeType"],G);const B=f(e,["outputCompressionQuality"]);t!==void 0&&B!=null&&d(t,["parameters","outputOptions","compressionQuality"],B);const W=f(e,["editMode"]);t!==void 0&&W!=null&&d(t,["parameters","editMode"],W);const J=f(e,["baseSteps"]);return t!==void 0&&J!=null&&d(t,["parameters","editConfig","baseSteps"],J),n}function xI(i,e){const t={},n=f(e,["model"]);n!=null&&d(t,["_url","model"],dt(i,n));const r=f(e,["prompt"]);r!=null&&d(t,["instances[0]","prompt"],r);const a=f(e,["referenceImages"]);if(a!=null){let h=a;Array.isArray(h)&&(h=h.map(y=>AI(i,y))),d(t,["instances[0]","referenceImages"],h)}const c=f(e,["config"]);return c!=null&&d(t,["config"],SI(i,c,t)),t}function wI(i,e,t){const n={},r=f(e,["includeRaiReason"]);t!==void 0&&r!=null&&d(t,["parameters","includeRaiReason"],r);const a=f(e,["outputMimeType"]);t!==void 0&&a!=null&&d(t,["parameters","outputOptions","mimeType"],a);const c=f(e,["outputCompressionQuality"]);t!==void 0&&c!=null&&d(t,["parameters","outputOptions","compressionQuality"],c);const h=f(e,["numberOfImages"]);t!==void 0&&h!=null&&d(t,["parameters","sampleCount"],h);const y=f(e,["mode"]);return t!==void 0&&y!=null&&d(t,["parameters","mode"],y),n}function RI(i,e){const t={},n=f(e,["model"]);n!=null&&d(t,["_url","model"],dt(i,n));const r=f(e,["image"]);r!=null&&d(t,["instances[0]","image"],Zm(i,r));const a=f(e,["upscaleFactor"]);a!=null&&d(t,["parameters","upscaleConfig","upscaleFactor"],a);const c=f(e,["config"]);return c!=null&&d(t,["config"],wI(i,c,t)),t}function bI(i,e){const t={},n=f(e,["model"]);n!=null&&d(t,["_url","name"],dt(i,n));const r=f(e,["config"]);return r!=null&&d(t,["config"],r),t}function II(i,e,t){const n={},r=f(e,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);const a=f(e,["pageToken"]);t!==void 0&&a!=null&&d(t,["_query","pageToken"],a);const c=f(e,["filter"]);t!==void 0&&c!=null&&d(t,["_query","filter"],c);const h=f(e,["queryBase"]);return t!==void 0&&h!=null&&d(t,["_url","models_url"],tE(i,h)),n}function NI(i,e){const t={},n=f(e,["config"]);return n!=null&&d(t,["config"],II(i,n,t)),t}function MI(i,e,t){const n={},r=f(e,["displayName"]);t!==void 0&&r!=null&&d(t,["displayName"],r);const a=f(e,["description"]);t!==void 0&&a!=null&&d(t,["description"],a);const c=f(e,["defaultCheckpointId"]);return t!==void 0&&c!=null&&d(t,["defaultCheckpointId"],c),n}function DI(i,e){const t={},n=f(e,["model"]);n!=null&&d(t,["_url","model"],dt(i,n));const r=f(e,["config"]);return r!=null&&d(t,["config"],MI(i,r,t)),t}function VI(i,e){const t={},n=f(e,["model"]);n!=null&&d(t,["_url","name"],dt(i,n));const r=f(e,["config"]);return r!=null&&d(t,["config"],r),t}function PI(i,e,t){const n={},r=f(e,["systemInstruction"]);t!==void 0&&r!=null&&d(t,["systemInstruction"],_a(i,vn(i,r)));const a=f(e,["tools"]);if(t!==void 0&&a!=null){let h=a;Array.isArray(h)&&(h=h.map(y=>cE(i,y))),d(t,["tools"],h)}const c=f(e,["generationConfig"]);return t!==void 0&&c!=null&&d(t,["generationConfig"],c),n}function kI(i,e){const t={},n=f(e,["model"]);n!=null&&d(t,["_url","model"],dt(i,n));const r=f(e,["contents"]);if(r!=null){let c=fi(i,r);Array.isArray(c)&&(c=c.map(h=>_a(i,h))),d(t,["contents"],c)}const a=f(e,["config"]);return a!=null&&d(t,["config"],PI(i,a,t)),t}function LI(i,e){const t={},n=f(e,["model"]);n!=null&&d(t,["_url","model"],dt(i,n));const r=f(e,["contents"]);if(r!=null){let c=fi(i,r);Array.isArray(c)&&(c=c.map(h=>_a(i,h))),d(t,["contents"],c)}const a=f(e,["config"]);return a!=null&&d(t,["config"],a),t}function UI(i,e,t){const n={},r=f(e,["numberOfVideos"]);t!==void 0&&r!=null&&d(t,["parameters","sampleCount"],r);const a=f(e,["outputGcsUri"]);t!==void 0&&a!=null&&d(t,["parameters","storageUri"],a);const c=f(e,["fps"]);t!==void 0&&c!=null&&d(t,["parameters","fps"],c);const h=f(e,["durationSeconds"]);t!==void 0&&h!=null&&d(t,["parameters","durationSeconds"],h);const y=f(e,["seed"]);t!==void 0&&y!=null&&d(t,["parameters","seed"],y);const g=f(e,["aspectRatio"]);t!==void 0&&g!=null&&d(t,["parameters","aspectRatio"],g);const _=f(e,["resolution"]);t!==void 0&&_!=null&&d(t,["parameters","resolution"],_);const E=f(e,["personGeneration"]);t!==void 0&&E!=null&&d(t,["parameters","personGeneration"],E);const S=f(e,["pubsubTopic"]);t!==void 0&&S!=null&&d(t,["parameters","pubsubTopic"],S);const I=f(e,["negativePrompt"]);t!==void 0&&I!=null&&d(t,["parameters","negativePrompt"],I);const U=f(e,["enhancePrompt"]);t!==void 0&&U!=null&&d(t,["parameters","enhancePrompt"],U);const G=f(e,["generateAudio"]);return t!==void 0&&G!=null&&d(t,["parameters","generateAudio"],G),n}function OI(i,e){const t={},n=f(e,["model"]);n!=null&&d(t,["_url","model"],dt(i,n));const r=f(e,["prompt"]);r!=null&&d(t,["instances[0]","prompt"],r);const a=f(e,["image"]);a!=null&&d(t,["instances[0]","image"],Zm(i,a));const c=f(e,["config"]);return c!=null&&d(t,["config"],UI(i,c,t)),t}function FI(i,e){const t={},n=f(e,["fps"]);n!=null&&d(t,["fps"],n);const r=f(e,["endOffset"]);r!=null&&d(t,["endOffset"],r);const a=f(e,["startOffset"]);return a!=null&&d(t,["startOffset"],a),t}function qI(i,e){const t={},n=f(e,["data"]);n!=null&&d(t,["data"],n);const r=f(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function BI(i,e){const t={},n=f(e,["fileUri"]);n!=null&&d(t,["fileUri"],n);const r=f(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function zI(i,e){const t={},n=f(e,["videoMetadata"]);n!=null&&d(t,["videoMetadata"],FI(i,n));const r=f(e,["thought"]);r!=null&&d(t,["thought"],r);const a=f(e,["inlineData"]);a!=null&&d(t,["inlineData"],qI(i,a));const c=f(e,["fileData"]);c!=null&&d(t,["fileData"],BI(i,c));const h=f(e,["thoughtSignature"]);h!=null&&d(t,["thoughtSignature"],h);const y=f(e,["codeExecutionResult"]);y!=null&&d(t,["codeExecutionResult"],y);const g=f(e,["executableCode"]);g!=null&&d(t,["executableCode"],g);const _=f(e,["functionCall"]);_!=null&&d(t,["functionCall"],_);const E=f(e,["functionResponse"]);E!=null&&d(t,["functionResponse"],E);const S=f(e,["text"]);return S!=null&&d(t,["text"],S),t}function GI(i,e){const t={},n=f(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(c=>zI(i,c))),d(t,["parts"],a)}const r=f(e,["role"]);return r!=null&&d(t,["role"],r),t}function HI(i,e){const t={},n=f(e,["citationSources"]);return n!=null&&d(t,["citations"],n),t}function $I(i,e){const t={},n=f(e,["retrievedUrl"]);n!=null&&d(t,["retrievedUrl"],n);const r=f(e,["urlRetrievalStatus"]);return r!=null&&d(t,["urlRetrievalStatus"],r),t}function YI(i,e){const t={},n=f(e,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>$I(i,a))),d(t,["urlMetadata"],r)}return t}function KI(i,e){const t={},n=f(e,["content"]);n!=null&&d(t,["content"],GI(i,n));const r=f(e,["citationMetadata"]);r!=null&&d(t,["citationMetadata"],HI(i,r));const a=f(e,["tokenCount"]);a!=null&&d(t,["tokenCount"],a);const c=f(e,["finishReason"]);c!=null&&d(t,["finishReason"],c);const h=f(e,["urlContextMetadata"]);h!=null&&d(t,["urlContextMetadata"],YI(i,h));const y=f(e,["avgLogprobs"]);y!=null&&d(t,["avgLogprobs"],y);const g=f(e,["groundingMetadata"]);g!=null&&d(t,["groundingMetadata"],g);const _=f(e,["index"]);_!=null&&d(t,["index"],_);const E=f(e,["logprobsResult"]);E!=null&&d(t,["logprobsResult"],E);const S=f(e,["safetyRatings"]);return S!=null&&d(t,["safetyRatings"],S),t}function TT(i,e){const t={},n=f(e,["candidates"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(y=>KI(i,y))),d(t,["candidates"],h)}const r=f(e,["modelVersion"]);r!=null&&d(t,["modelVersion"],r);const a=f(e,["promptFeedback"]);a!=null&&d(t,["promptFeedback"],a);const c=f(e,["usageMetadata"]);return c!=null&&d(t,["usageMetadata"],c),t}function QI(i,e){const t={},n=f(e,["values"]);return n!=null&&d(t,["values"],n),t}function ZI(){return{}}function XI(i,e){const t={},n=f(e,["embeddings"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(c=>QI(i,c))),d(t,["embeddings"],a)}return f(e,["metadata"])!=null&&d(t,["metadata"],ZI()),t}function JI(i,e){const t={},n=f(e,["bytesBase64Encoded"]);n!=null&&d(t,["imageBytes"],sr(i,n));const r=f(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function fE(i,e){const t={},n=f(e,["safetyAttributes","categories"]);n!=null&&d(t,["categories"],n);const r=f(e,["safetyAttributes","scores"]);r!=null&&d(t,["scores"],r);const a=f(e,["contentType"]);return a!=null&&d(t,["contentType"],a),t}function jI(i,e){const t={},n=f(e,["_self"]);n!=null&&d(t,["image"],JI(i,n));const r=f(e,["raiFilteredReason"]);r!=null&&d(t,["raiFilteredReason"],r);const a=f(e,["_self"]);return a!=null&&d(t,["safetyAttributes"],fE(i,a)),t}function WI(i,e){const t={},n=f(e,["predictions"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(c=>jI(i,c))),d(t,["generatedImages"],a)}const r=f(e,["positivePromptSafetyAttributes"]);return r!=null&&d(t,["positivePromptSafetyAttributes"],fE(i,r)),t}function eN(i,e){const t={},n=f(e,["baseModel"]);n!=null&&d(t,["baseModel"],n);const r=f(e,["createTime"]);r!=null&&d(t,["createTime"],r);const a=f(e,["updateTime"]);return a!=null&&d(t,["updateTime"],a),t}function ym(i,e){const t={},n=f(e,["name"]);n!=null&&d(t,["name"],n);const r=f(e,["displayName"]);r!=null&&d(t,["displayName"],r);const a=f(e,["description"]);a!=null&&d(t,["description"],a);const c=f(e,["version"]);c!=null&&d(t,["version"],c);const h=f(e,["_self"]);h!=null&&d(t,["tunedModelInfo"],eN(i,h));const y=f(e,["inputTokenLimit"]);y!=null&&d(t,["inputTokenLimit"],y);const g=f(e,["outputTokenLimit"]);g!=null&&d(t,["outputTokenLimit"],g);const _=f(e,["supportedGenerationMethods"]);return _!=null&&d(t,["supportedActions"],_),t}function tN(i,e){const t={},n=f(e,["nextPageToken"]);n!=null&&d(t,["nextPageToken"],n);const r=f(e,["_self"]);if(r!=null){let a=nE(i,r);Array.isArray(a)&&(a=a.map(c=>ym(i,c))),d(t,["models"],a)}return t}function nN(){return{}}function iN(i,e){const t={},n=f(e,["totalTokens"]);n!=null&&d(t,["totalTokens"],n);const r=f(e,["cachedContentTokenCount"]);return r!=null&&d(t,["cachedContentTokenCount"],r),t}function sN(i,e){const t={},n=f(e,["video","uri"]);n!=null&&d(t,["uri"],n);const r=f(e,["video","encodedVideo"]);r!=null&&d(t,["videoBytes"],sr(i,r));const a=f(e,["encoding"]);return a!=null&&d(t,["mimeType"],a),t}function rN(i,e){const t={},n=f(e,["_self"]);return n!=null&&d(t,["video"],sN(i,n)),t}function oN(i,e){const t={},n=f(e,["generatedSamples"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(h=>rN(i,h))),d(t,["generatedVideos"],c)}const r=f(e,["raiMediaFilteredCount"]);r!=null&&d(t,["raiMediaFilteredCount"],r);const a=f(e,["raiMediaFilteredReasons"]);return a!=null&&d(t,["raiMediaFilteredReasons"],a),t}function aN(i,e){const t={},n=f(e,["name"]);n!=null&&d(t,["name"],n);const r=f(e,["metadata"]);r!=null&&d(t,["metadata"],r);const a=f(e,["done"]);a!=null&&d(t,["done"],a);const c=f(e,["error"]);c!=null&&d(t,["error"],c);const h=f(e,["response","generateVideoResponse"]);return h!=null&&d(t,["response"],oN(i,h)),t}function lN(i,e){const t={},n=f(e,["fps"]);n!=null&&d(t,["fps"],n);const r=f(e,["endOffset"]);r!=null&&d(t,["endOffset"],r);const a=f(e,["startOffset"]);return a!=null&&d(t,["startOffset"],a),t}function uN(i,e){const t={},n=f(e,["displayName"]);n!=null&&d(t,["displayName"],n);const r=f(e,["data"]);r!=null&&d(t,["data"],r);const a=f(e,["mimeType"]);return a!=null&&d(t,["mimeType"],a),t}function cN(i,e){const t={},n=f(e,["displayName"]);n!=null&&d(t,["displayName"],n);const r=f(e,["fileUri"]);r!=null&&d(t,["fileUri"],r);const a=f(e,["mimeType"]);return a!=null&&d(t,["mimeType"],a),t}function fN(i,e){const t={},n=f(e,["videoMetadata"]);n!=null&&d(t,["videoMetadata"],lN(i,n));const r=f(e,["thought"]);r!=null&&d(t,["thought"],r);const a=f(e,["inlineData"]);a!=null&&d(t,["inlineData"],uN(i,a));const c=f(e,["fileData"]);c!=null&&d(t,["fileData"],cN(i,c));const h=f(e,["thoughtSignature"]);h!=null&&d(t,["thoughtSignature"],h);const y=f(e,["codeExecutionResult"]);y!=null&&d(t,["codeExecutionResult"],y);const g=f(e,["executableCode"]);g!=null&&d(t,["executableCode"],g);const _=f(e,["functionCall"]);_!=null&&d(t,["functionCall"],_);const E=f(e,["functionResponse"]);E!=null&&d(t,["functionResponse"],E);const S=f(e,["text"]);return S!=null&&d(t,["text"],S),t}function dN(i,e){const t={},n=f(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(c=>fN(i,c))),d(t,["parts"],a)}const r=f(e,["role"]);return r!=null&&d(t,["role"],r),t}function hN(i,e){const t={},n=f(e,["citations"]);return n!=null&&d(t,["citations"],n),t}function mN(i,e){const t={},n=f(e,["content"]);n!=null&&d(t,["content"],dN(i,n));const r=f(e,["citationMetadata"]);r!=null&&d(t,["citationMetadata"],hN(i,r));const a=f(e,["finishMessage"]);a!=null&&d(t,["finishMessage"],a);const c=f(e,["finishReason"]);c!=null&&d(t,["finishReason"],c);const h=f(e,["avgLogprobs"]);h!=null&&d(t,["avgLogprobs"],h);const y=f(e,["groundingMetadata"]);y!=null&&d(t,["groundingMetadata"],y);const g=f(e,["index"]);g!=null&&d(t,["index"],g);const _=f(e,["logprobsResult"]);_!=null&&d(t,["logprobsResult"],_);const E=f(e,["safetyRatings"]);return E!=null&&d(t,["safetyRatings"],E),t}function ET(i,e){const t={},n=f(e,["candidates"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(_=>mN(i,_))),d(t,["candidates"],g)}const r=f(e,["createTime"]);r!=null&&d(t,["createTime"],r);const a=f(e,["responseId"]);a!=null&&d(t,["responseId"],a);const c=f(e,["modelVersion"]);c!=null&&d(t,["modelVersion"],c);const h=f(e,["promptFeedback"]);h!=null&&d(t,["promptFeedback"],h);const y=f(e,["usageMetadata"]);return y!=null&&d(t,["usageMetadata"],y),t}function pN(i,e){const t={},n=f(e,["truncated"]);n!=null&&d(t,["truncated"],n);const r=f(e,["token_count"]);return r!=null&&d(t,["tokenCount"],r),t}function gN(i,e){const t={},n=f(e,["values"]);n!=null&&d(t,["values"],n);const r=f(e,["statistics"]);return r!=null&&d(t,["statistics"],pN(i,r)),t}function yN(i,e){const t={},n=f(e,["billableCharacterCount"]);return n!=null&&d(t,["billableCharacterCount"],n),t}function vN(i,e){const t={},n=f(e,["predictions[]","embeddings"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(c=>gN(i,c))),d(t,["embeddings"],a)}const r=f(e,["metadata"]);return r!=null&&d(t,["metadata"],yN(i,r)),t}function _N(i,e){const t={},n=f(e,["gcsUri"]);n!=null&&d(t,["gcsUri"],n);const r=f(e,["bytesBase64Encoded"]);r!=null&&d(t,["imageBytes"],sr(i,r));const a=f(e,["mimeType"]);return a!=null&&d(t,["mimeType"],a),t}function dE(i,e){const t={},n=f(e,["safetyAttributes","categories"]);n!=null&&d(t,["categories"],n);const r=f(e,["safetyAttributes","scores"]);r!=null&&d(t,["scores"],r);const a=f(e,["contentType"]);return a!=null&&d(t,["contentType"],a),t}function Xm(i,e){const t={},n=f(e,["_self"]);n!=null&&d(t,["image"],_N(i,n));const r=f(e,["raiFilteredReason"]);r!=null&&d(t,["raiFilteredReason"],r);const a=f(e,["_self"]);a!=null&&d(t,["safetyAttributes"],dE(i,a));const c=f(e,["prompt"]);return c!=null&&d(t,["enhancedPrompt"],c),t}function TN(i,e){const t={},n=f(e,["predictions"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(c=>Xm(i,c))),d(t,["generatedImages"],a)}const r=f(e,["positivePromptSafetyAttributes"]);return r!=null&&d(t,["positivePromptSafetyAttributes"],dE(i,r)),t}function EN(i,e){const t={},n=f(e,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>Xm(i,a))),d(t,["generatedImages"],r)}return t}function CN(i,e){const t={},n=f(e,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>Xm(i,a))),d(t,["generatedImages"],r)}return t}function AN(i,e){const t={},n=f(e,["endpoint"]);n!=null&&d(t,["name"],n);const r=f(e,["deployedModelId"]);return r!=null&&d(t,["deployedModelId"],r),t}function SN(i,e){const t={},n=f(e,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&d(t,["baseModel"],n);const r=f(e,["createTime"]);r!=null&&d(t,["createTime"],r);const a=f(e,["updateTime"]);return a!=null&&d(t,["updateTime"],a),t}function xN(i,e){const t={},n=f(e,["checkpointId"]);n!=null&&d(t,["checkpointId"],n);const r=f(e,["epoch"]);r!=null&&d(t,["epoch"],r);const a=f(e,["step"]);return a!=null&&d(t,["step"],a),t}function vm(i,e){const t={},n=f(e,["name"]);n!=null&&d(t,["name"],n);const r=f(e,["displayName"]);r!=null&&d(t,["displayName"],r);const a=f(e,["description"]);a!=null&&d(t,["description"],a);const c=f(e,["versionId"]);c!=null&&d(t,["version"],c);const h=f(e,["deployedModels"]);if(h!=null){let S=h;Array.isArray(S)&&(S=S.map(I=>AN(i,I))),d(t,["endpoints"],S)}const y=f(e,["labels"]);y!=null&&d(t,["labels"],y);const g=f(e,["_self"]);g!=null&&d(t,["tunedModelInfo"],SN(i,g));const _=f(e,["defaultCheckpointId"]);_!=null&&d(t,["defaultCheckpointId"],_);const E=f(e,["checkpoints"]);if(E!=null){let S=E;Array.isArray(S)&&(S=S.map(I=>xN(i,I))),d(t,["checkpoints"],S)}return t}function wN(i,e){const t={},n=f(e,["nextPageToken"]);n!=null&&d(t,["nextPageToken"],n);const r=f(e,["_self"]);if(r!=null){let a=nE(i,r);Array.isArray(a)&&(a=a.map(c=>vm(i,c))),d(t,["models"],a)}return t}function RN(){return{}}function bN(i,e){const t={},n=f(e,["totalTokens"]);return n!=null&&d(t,["totalTokens"],n),t}function IN(i,e){const t={},n=f(e,["tokensInfo"]);return n!=null&&d(t,["tokensInfo"],n),t}function NN(i,e){const t={},n=f(e,["gcsUri"]);n!=null&&d(t,["uri"],n);const r=f(e,["bytesBase64Encoded"]);r!=null&&d(t,["videoBytes"],sr(i,r));const a=f(e,["mimeType"]);return a!=null&&d(t,["mimeType"],a),t}function MN(i,e){const t={},n=f(e,["_self"]);return n!=null&&d(t,["video"],NN(i,n)),t}function DN(i,e){const t={},n=f(e,["videos"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(h=>MN(i,h))),d(t,["generatedVideos"],c)}const r=f(e,["raiMediaFilteredCount"]);r!=null&&d(t,["raiMediaFilteredCount"],r);const a=f(e,["raiMediaFilteredReasons"]);return a!=null&&d(t,["raiMediaFilteredReasons"],a),t}function VN(i,e){const t={},n=f(e,["name"]);n!=null&&d(t,["name"],n);const r=f(e,["metadata"]);r!=null&&d(t,["metadata"],r);const a=f(e,["done"]);a!=null&&d(t,["done"],a);const c=f(e,["error"]);c!=null&&d(t,["error"],c);const h=f(e,["response"]);return h!=null&&d(t,["response"],DN(i,h)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const PN="Content-Type",kN="X-Server-Timeout",LN="User-Agent",_m="x-goog-api-client",UN="1.3.0",ON=`google-genai-sdk/${UN}`,FN="v1beta1",qN="v1beta",CT=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class hE extends Error{constructor(e,t){t?super(e,{cause:t}):super(e,{cause:new Error().stack}),this.message=e,this.name="ClientError"}}class Tm extends Error{constructor(e,t){t?super(e,{cause:t}):super(e,{cause:new Error().stack}),this.message=e,this.name="ServerError"}}class BN{constructor(e){var t,n;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:FN,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:qN,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const n=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&n.push(e.apiVersion),n.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,n){const r=[this.getRequestUrlInternal(t)];return n&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,n);if(e.queryParams)for(const[c,h]of Object.entries(e.queryParams))r.searchParams.append(c,String(h));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,t,e.abortSignal),this.unaryApiCall(r,a,e.httpMethod)}patchHttpOptions(e,t){const n=JSON.parse(JSON.stringify(e));for(const[r,a]of Object.entries(t))typeof a=="object"?n[r]=Object.assign(Object.assign({},n[r]),a):a!==void 0&&(n[r]=a);return n}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,n);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,t,e.abortSignal),this.streamApiCall(r,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,n){if(t&&t.timeout||n){const r=new AbortController,a=r.signal;t.timeout&&(t==null?void 0:t.timeout)>0&&setTimeout(()=>r.abort(),t.timeout),n&&n.addEventListener("abort",()=>{r.abort()}),e.signal=a}return e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then(async r=>(await AT(r),new hm(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then(async r=>(await AT(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var t;return na(this,arguments,function*(){const r=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),a=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let c="";for(;;){const{done:h,value:y}=yield mt(r.read());if(h){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const g=a.decode(y);try{const E=JSON.parse(g);if("error"in E){const S=JSON.parse(JSON.stringify(E.error)),I=S.status,U=S.code,G=`got status: ${I}. ${JSON.stringify(E)}`;if(U>=400&&U<500)throw new hE(G);if(U>=500&&U<600)throw new Tm(G)}}catch(E){const S=E;if(S.name==="ClientError"||S.name==="ServerError")throw E}c+=g;let _=c.match(CT);for(;_;){const E=_[1];try{const S=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield mt(new hm(S)),c=c.slice(_[0].length),_=c.match(CT)}catch(S){throw new Error(`exception parsing stream chunk ${E}. ${S}`)}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(n=>{throw new Error(`exception ${n} sending request`)})}getDefaultHeaders(){const e={},t=ON+" "+this.clientOptions.userAgentExtra;return e[LN]=t,e[_m]=t,e[PN]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[n,r]of Object.entries(e.headers))t.append(n,r);e.timeout&&e.timeout>0&&t.append(kN,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var n;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const a=this.clientOptions.uploader,c=await a.stat(e);r.sizeBytes=String(c.size);const h=(n=t==null?void 0:t.mimeType)!==null&&n!==void 0?n:c.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=h;const y=await this.fetchUploadUrl(r,t);return a.upload(e,y,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t){var n;let r={};t!=null&&t.httpOptions?r=t.httpOptions:r={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const a={file:e},c=await this.request({path:we("upload/v1beta/files",a._url),body:JSON.stringify(a),httpMethod:"POST",httpOptions:r});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const h=(n=c==null?void 0:c.headers)===null||n===void 0?void 0:n["x-goog-upload-url"];if(h===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return h}}async function AT(i){var e;if(i===void 0)throw new Tm("response is undefined");if(!i.ok){const t=i.status,n=i.statusText;let r;!((e=i.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await i.json():r={error:{message:await i.text(),code:i.status,status:i.statusText}};const a=`got status: ${t} ${n}. ${JSON.stringify(r)}`;throw t>=400&&t<500?new hE(a):t>=500&&t<600?new Tm(a):new Error(a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zN="mcp_used/unknown";function mE(i){for(const e of i)if(Jm(e)||typeof e=="object"&&"inputSchema"in e)return!0;return!1}function pE(i){var e;const t=(e=i[_m])!==null&&e!==void 0?e:"";i[_m]=(t+` ${zN}`).trimStart()}function GN(i){var e,t,n;return(n=(t=(e=i.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>Jm(r)))!==null&&n!==void 0?n:!1}function HN(i){var e,t,n;return(n=(t=(e=i.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>!Jm(r)))!==null&&n!==void 0?n:!1}function Jm(i){return i!==null&&typeof i=="object"&&i instanceof jm}function $N(i,e=100){return na(this,arguments,function*(){let n,r=0;for(;r<e;){const a=yield mt(i.listTools({cursor:n}));for(const c of a.tools)yield yield mt(c),r++;if(!a.nextCursor)break;n=a.nextCursor}})}class jm{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new jm(e,t)}async initialize(){var e,t,n,r;if(this.mcpTools.length>0)return;const a={},c=[];for(const _ of this.mcpClients)try{for(var h=!0,y=(t=void 0,Yl($N(_))),g;g=await y.next(),e=g.done,!e;h=!0){r=g.value,h=!1;const E=r;c.push(E);const S=E.name;if(a[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);a[S]=_}}catch(E){t={error:E}}finally{try{!h&&!e&&(n=y.return)&&await n.call(y)}finally{if(t)throw t.error}}this.mcpTools=c,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),jx(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const n of e)if(n.name in this.functionNameToMcpClient){const a=await this.functionNameToMcpClient[n.name].callTool({name:n.name,arguments:n.args});t.push({functionResponse:{name:n.name,response:a.isError?{error:a}:a}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function YN(i,e,t){const n=new Fx;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data);const a=rb(i,r);Object.assign(n,a),e(n)}class KN{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n}async connect(e){var t,n;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),c=XN(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),y=`${r}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${h}`;let g=()=>{};const _=new Promise(te=>{g=te}),E=e.callbacks,S=function(){g({})},I=this.apiClient,U={onopen:S,onmessage:te=>{YN(I,E.onmessage,te)},onerror:(t=E==null?void 0:E.onerror)!==null&&t!==void 0?t:function(te){},onclose:(n=E==null?void 0:E.onclose)!==null&&n!==void 0?n:function(te){}},G=this.webSocketFactory.create(y,ZN(c),U);G.connect(),await _;const B=dt(this.apiClient,e.model),W=aE(this.apiClient,{model:B}),J=gm(this.apiClient,{setup:W});return G.send(JSON.stringify(J)),new QN(G,this.apiClient)}}class QN{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=_R(this.apiClient,e),n=lE(this.apiClient,t);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=TR(this.apiClient,e),n=gm(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const t=gm(this.apiClient,{playbackControl:e});this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Wo.PLAY)}pause(){this.sendPlaybackControl(Wo.PAUSE)}stop(){this.sendPlaybackControl(Wo.STOP)}resetContext(){this.sendPlaybackControl(Wo.RESET_CONTEXT)}close(){this.conn.close()}}function ZN(i){const e={};return i.forEach((t,n)=>{e[n]=t}),e}function XN(i){const e=new Headers;for(const[t,n]of Object.entries(i))e.append(t,n);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const JN="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function jN(i,e,t){const n=new Ox;let r;if(t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data),i.isVertexAI()){const a=XR(i,r);Object.assign(n,a)}else{const a=ZR(i,r);Object.assign(n,a)}e(n)}class WN{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n,this.music=new KN(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,n,r,a,c,h;const y=this.apiClient.getWebsocketBaseUrl(),g=this.apiClient.getApiVersion();let _;const E=this.apiClient.getDefaultHeaders();e.config&&e.config.tools&&mE(e.config.tools)&&pE(E);const S=iM(E);if(this.apiClient.isVertexAI())_=`${y}/ws/google.cloud.aiplatform.${g}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S);else{const x=this.apiClient.getApiKey();let N="BidiGenerateContent",k="key";x!=null&&x.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),N="BidiGenerateContentConstrained",k="access_token"),_=`${y}/ws/google.ai.generativelanguage.${g}.GenerativeService.${N}?${k}=${x}`}let I=()=>{};const U=new Promise(x=>{I=x}),G=e.callbacks,B=function(){var x;(x=G==null?void 0:G.onopen)===null||x===void 0||x.call(G),I({})},W=this.apiClient,J={onopen:B,onmessage:x=>{jN(W,G.onmessage,x)},onerror:(t=G==null?void 0:G.onerror)!==null&&t!==void 0?t:function(x){},onclose:(n=G==null?void 0:G.onclose)!==null&&n!==void 0?n:function(x){}},te=this.webSocketFactory.create(_,nM(S),J);te.connect(),await U;let re=dt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&re.startsWith("publishers/")){const x=this.apiClient.getProject(),N=this.apiClient.getLocation();re=`projects/${x}/locations/${N}/`+re}let ie={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[lf.AUDIO]}:e.config.responseModalities=[lf.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const le=(h=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[],L=[];for(const x of le)if(this.isCallableTool(x)){const N=x;L.push(await N.tool())}else L.push(x);L.length>0&&(e.config.tools=L);const D={model:re,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?ie=dR(this.apiClient,D):ie=fR(this.apiClient,D),delete ie.config,te.send(JSON.stringify(ie)),new tM(te,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const eM={turnComplete:!0};class tM{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let n=[];try{n=fi(e,t.turns),e.isVertexAI()?n=n.map(r=>_a(e,r)):n=n.map(r=>xf(e,r))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:n,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let n=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?n=t.functionResponses:n=[t.functionResponses],n.length===0)throw new Error("functionResponses is required.");for(const a of n){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(JN)}return{toolResponse:{functionResponses:n}}}sendClientContent(e){e=Object.assign(Object.assign({},eM),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:vR(this.apiClient,e)}:t={realtimeInput:yR(this.apiClient,e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function nM(i){const e={};return i.forEach((t,n)=>{e[n]=t}),e}function iM(i){const e=new Headers;for(const[t,n]of Object.entries(i))e.append(t,n);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ST=10;function xT(i){var e,t,n;if(!((e=i==null?void 0:i.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const c of(t=i==null?void 0:i.tools)!==null&&t!==void 0?t:[])if(Qc(c)){r=!0;break}if(!r)return!0;const a=(n=i==null?void 0:i.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Qc(i){return"callTool"in i&&typeof i.callTool=="function"}function wT(i){var e;return!(!((e=i==null?void 0:i.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sM extends va{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var n,r,a,c,h;const y=await this.processParamsForMcpUsage(t);if(!GN(t)||xT(t.config))return await this.generateContentInternal(y);if(HN(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let g,_;const E=fi(this.apiClient,y.contents),S=(a=(r=(n=y.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&a!==void 0?a:ST;let I=0;for(;I<S&&(g=await this.generateContentInternal(y),!(!g.functionCalls||g.functionCalls.length===0));){const U=g.candidates[0].content,G=[];for(const B of(h=(c=t.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[])if(Qc(B)){const J=await B.callTool(g.functionCalls);G.push(...J)}I++,_={role:"user",parts:G},y.contents=fi(this.apiClient,y.contents),y.contents.push(U),y.contents.push(_),wT(y.config)&&(E.push(U),E.push(_))}return wT(y.config)&&(g.automaticFunctionCallingHistory=E),g},this.generateContentStream=async t=>{if(xT(t.config)){const n=await this.processParamsForMcpUsage(t);return await this.generateContentStreamInternal(n)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(n=>{var r;let a;const c=[];if(n!=null&&n.generatedImages)for(const y of n.generatedImages)y&&(y!=null&&y.safetyAttributes)&&((r=y==null?void 0:y.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?a=y==null?void 0:y.safetyAttributes:c.push(y);let h;return a?h={generatedImages:c,positivePromptSafetyAttributes:a}:h={generatedImages:c},h}),this.list=async t=>{var n;const c={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((n=c.config)===null||n===void 0)&&n.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new Sf(fa.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(c),c)},this.editImage=async t=>{const n={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(n.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(n)},this.upscaleImage=async t=>{let n={numberOfImages:1,mode:"upscale"};t.config&&(n=Object.assign(Object.assign({},n),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:n};return await this.upscaleImageInternal(r)}}async processParamsForMcpUsage(e){var t,n,r;const a=(t=e.config)===null||t===void 0?void 0:t.tools;if(!a)return e;const c=await Promise.all(a.map(async y=>Qc(y)?await y.tool():y)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(h.config.tools=c,e.config&&e.config.tools&&mE(e.config.tools)){const y=(r=(n=e.config.httpOptions)===null||n===void 0?void 0:n.headers)!==null&&r!==void 0?r:{};let g=Object.assign({},y);Object.keys(g).length===0&&(g=this.apiClient.getDefaultHeaders()),pE(g),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:g})}return h}async initAfcToolsMap(e){var t,n,r;const a=new Map;for(const c of(n=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&n!==void 0?n:[])if(Qc(c)){const h=c,y=await h.tool();for(const g of(r=y.functionDeclarations)!==null&&r!==void 0?r:[]){if(!g.name)throw new Error("Function declaration name is required.");if(a.has(g.name))throw new Error(`Duplicate tool declaration name: ${g.name}`);a.set(g.name,h)}}return a}async processAfcStream(e){var t,n,r;const a=(r=(n=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls)!==null&&r!==void 0?r:ST;let c=!1,h=0;const y=await this.initAfcToolsMap(e);return(function(g,_,E){var S,I;return na(this,arguments,function*(){for(var U,G,B,W;h<a;){c&&(h++,c=!1);const ie=yield mt(g.processParamsForMcpUsage(E)),le=yield mt(g.generateContentStreamInternal(ie)),L=[],D=[];try{for(var J=!0,te=(G=void 0,Yl(le)),re;re=yield mt(te.next()),U=re.done,!U;J=!0){W=re.value,J=!1;const x=W;if(yield yield mt(x),x.candidates&&(!((S=x.candidates[0])===null||S===void 0)&&S.content)){D.push(x.candidates[0].content);for(const N of(I=x.candidates[0].content.parts)!==null&&I!==void 0?I:[])if(h<a&&N.functionCall){if(!N.functionCall.name)throw new Error("Function call name was not returned by the model.");if(_.has(N.functionCall.name)){const k=yield mt(_.get(N.functionCall.name).callTool([N.functionCall]));L.push(...k)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${_.keys()}, mising tool: ${N.functionCall.name}`)}}}}catch(x){G={error:x}}finally{try{!J&&!U&&(B=te.return)&&(yield mt(B.call(te)))}finally{if(G)throw G.error}}if(L.length>0){c=!0;const x=new Fl;x.candidates=[{content:{role:"user",parts:L}}],yield yield mt(x);const N=[];N.push(...D),N.push({role:"user",parts:L});const k=fi(g.apiClient,E.contents).concat(N);E.contents=k}else break}})})(this,y,e)}async generateContentInternal(e){var t,n,r,a;let c,h="",y={};if(this.apiClient.isVertexAI()){const g=_T(this.apiClient,e);return h=we("{model}:generateContent",g._url),y=g._query,delete g.config,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(_=>_.json()),c.then(_=>{const E=ET(this.apiClient,_),S=new Fl;return Object.assign(S,E),S})}else{const g=vT(this.apiClient,e);return h=we("{model}:generateContent",g._url),y=g._query,delete g.config,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(_=>{const E=TT(this.apiClient,_),S=new Fl;return Object.assign(S,E),S})}}async generateContentStreamInternal(e){var t,n,r,a;let c,h="",y={};if(this.apiClient.isVertexAI()){const g=_T(this.apiClient,e);h=we("{model}:streamGenerateContent?alt=sse",g._url),y=g._query,delete g.config,delete g._url,delete g._query;const _=this.apiClient;return c=_.requestStream({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}),c.then(function(E){return na(this,arguments,function*(){var S,I,U,G;try{for(var B=!0,W=Yl(E),J;J=yield mt(W.next()),S=J.done,!S;B=!0){G=J.value,B=!1;const re=ET(_,yield mt(G.json())),ie=new Fl;Object.assign(ie,re),yield yield mt(ie)}}catch(te){I={error:te}}finally{try{!B&&!S&&(U=W.return)&&(yield mt(U.call(W)))}finally{if(I)throw I.error}}})})}else{const g=vT(this.apiClient,e);h=we("{model}:streamGenerateContent?alt=sse",g._url),y=g._query,delete g.config,delete g._url,delete g._query;const _=this.apiClient;return c=_.requestStream({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),c.then(function(E){return na(this,arguments,function*(){var S,I,U,G;try{for(var B=!0,W=Yl(E),J;J=yield mt(W.next()),S=J.done,!S;B=!0){G=J.value,B=!1;const re=TT(_,yield mt(G.json())),ie=new Fl;Object.assign(ie,re),yield yield mt(ie)}}catch(te){I={error:te}}finally{try{!B&&!S&&(U=W.return)&&(yield mt(U.call(W)))}finally{if(I)throw I.error}}})})}}async embedContent(e){var t,n,r,a;let c,h="",y={};if(this.apiClient.isVertexAI()){const g=gI(this.apiClient,e);return h=we("{model}:predict",g._url),y=g._query,delete g.config,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(_=>_.json()),c.then(_=>{const E=vN(this.apiClient,_),S=new j_;return Object.assign(S,E),S})}else{const g=Nb(this.apiClient,e);return h=we("{model}:batchEmbedContents",g._url),y=g._query,delete g.config,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(_=>{const E=XI(this.apiClient,_),S=new j_;return Object.assign(S,E),S})}}async generateImagesInternal(e){var t,n,r,a;let c,h="",y={};if(this.apiClient.isVertexAI()){const g=vI(this.apiClient,e);return h=we("{model}:predict",g._url),y=g._query,delete g.config,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(_=>_.json()),c.then(_=>{const E=TN(this.apiClient,_),S=new W_;return Object.assign(S,E),S})}else{const g=Db(this.apiClient,e);return h=we("{model}:predict",g._url),y=g._query,delete g.config,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(_=>{const E=WI(this.apiClient,_),S=new W_;return Object.assign(S,E),S})}}async editImageInternal(e){var t,n;let r,a="",c={};if(this.apiClient.isVertexAI()){const h=xI(this.apiClient,e);return a=we("{model}:predict",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),r.then(y=>{const g=EN(this.apiClient,y),_=new Dx;return Object.assign(_,g),_})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,n;let r,a="",c={};if(this.apiClient.isVertexAI()){const h=RI(this.apiClient,e);return a=we("{model}:predict",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),r.then(y=>{const g=CN(this.apiClient,y),_=new Vx;return Object.assign(_,g),_})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,n,r,a;let c,h="",y={};if(this.apiClient.isVertexAI()){const g=bI(this.apiClient,e);return h=we("{name}",g._url),y=g._query,delete g.config,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(_=>_.json()),c.then(_=>vm(this.apiClient,_))}else{const g=Vb(this.apiClient,e);return h=we("{name}",g._url),y=g._query,delete g.config,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(_=>ym(this.apiClient,_))}}async listInternal(e){var t,n,r,a;let c,h="",y={};if(this.apiClient.isVertexAI()){const g=NI(this.apiClient,e);return h=we("{models_url}",g._url),y=g._query,delete g.config,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(_=>_.json()),c.then(_=>{const E=wN(this.apiClient,_),S=new eT;return Object.assign(S,E),S})}else{const g=kb(this.apiClient,e);return h=we("{models_url}",g._url),y=g._query,delete g.config,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(_=>{const E=tN(this.apiClient,_),S=new eT;return Object.assign(S,E),S})}}async update(e){var t,n,r,a;let c,h="",y={};if(this.apiClient.isVertexAI()){const g=DI(this.apiClient,e);return h=we("{model}",g._url),y=g._query,delete g.config,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(_=>_.json()),c.then(_=>vm(this.apiClient,_))}else{const g=Ub(this.apiClient,e);return h=we("{name}",g._url),y=g._query,delete g.config,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(_=>ym(this.apiClient,_))}}async delete(e){var t,n,r,a;let c,h="",y={};if(this.apiClient.isVertexAI()){const g=VI(this.apiClient,e);return h=we("{name}",g._url),y=g._query,delete g.config,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(_=>_.json()),c.then(()=>{const _=RN(),E=new tT;return Object.assign(E,_),E})}else{const g=Ob(this.apiClient,e);return h=we("{name}",g._url),y=g._query,delete g.config,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(()=>{const _=nN(),E=new tT;return Object.assign(E,_),E})}}async countTokens(e){var t,n,r,a;let c,h="",y={};if(this.apiClient.isVertexAI()){const g=kI(this.apiClient,e);return h=we("{model}:countTokens",g._url),y=g._query,delete g.config,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(_=>_.json()),c.then(_=>{const E=bN(this.apiClient,_),S=new nT;return Object.assign(S,E),S})}else{const g=qb(this.apiClient,e);return h=we("{model}:countTokens",g._url),y=g._query,delete g.config,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(_=>{const E=iN(this.apiClient,_),S=new nT;return Object.assign(S,E),S})}}async computeTokens(e){var t,n;let r,a="",c={};if(this.apiClient.isVertexAI()){const h=LI(this.apiClient,e);return a=we("{model}:computeTokens",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),r.then(y=>{const g=IN(this.apiClient,y),_=new Px;return Object.assign(_,g),_})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var t,n,r,a;let c,h="",y={};if(this.apiClient.isVertexAI()){const g=OI(this.apiClient,e);return h=we("{model}:predictLongRunning",g._url),y=g._query,delete g.config,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(_=>_.json()),c.then(_=>VN(this.apiClient,_))}else{const g=Gb(this.apiClient,e);return h=we("{model}:predictLongRunning",g._url),y=g._query,delete g.config,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(_=>aN(this.apiClient,_))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rM(i,e){const t={},n=f(e,["operationName"]);n!=null&&d(t,["_url","operationName"],n);const r=f(e,["config"]);return r!=null&&d(t,["config"],r),t}function oM(i,e){const t={},n=f(e,["operationName"]);n!=null&&d(t,["_url","operationName"],n);const r=f(e,["config"]);return r!=null&&d(t,["config"],r),t}function aM(i,e){const t={},n=f(e,["operationName"]);n!=null&&d(t,["operationName"],n);const r=f(e,["resourceName"]);r!=null&&d(t,["_url","resourceName"],r);const a=f(e,["config"]);return a!=null&&d(t,["config"],a),t}function lM(i,e){const t={},n=f(e,["video","uri"]);n!=null&&d(t,["uri"],n);const r=f(e,["video","encodedVideo"]);r!=null&&d(t,["videoBytes"],sr(i,r));const a=f(e,["encoding"]);return a!=null&&d(t,["mimeType"],a),t}function uM(i,e){const t={},n=f(e,["_self"]);return n!=null&&d(t,["video"],lM(i,n)),t}function cM(i,e){const t={},n=f(e,["generatedSamples"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(h=>uM(i,h))),d(t,["generatedVideos"],c)}const r=f(e,["raiMediaFilteredCount"]);r!=null&&d(t,["raiMediaFilteredCount"],r);const a=f(e,["raiMediaFilteredReasons"]);return a!=null&&d(t,["raiMediaFilteredReasons"],a),t}function fM(i,e){const t={},n=f(e,["name"]);n!=null&&d(t,["name"],n);const r=f(e,["metadata"]);r!=null&&d(t,["metadata"],r);const a=f(e,["done"]);a!=null&&d(t,["done"],a);const c=f(e,["error"]);c!=null&&d(t,["error"],c);const h=f(e,["response","generateVideoResponse"]);return h!=null&&d(t,["response"],cM(i,h)),t}function dM(i,e){const t={},n=f(e,["gcsUri"]);n!=null&&d(t,["uri"],n);const r=f(e,["bytesBase64Encoded"]);r!=null&&d(t,["videoBytes"],sr(i,r));const a=f(e,["mimeType"]);return a!=null&&d(t,["mimeType"],a),t}function hM(i,e){const t={},n=f(e,["_self"]);return n!=null&&d(t,["video"],dM(i,n)),t}function mM(i,e){const t={},n=f(e,["videos"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(h=>hM(i,h))),d(t,["generatedVideos"],c)}const r=f(e,["raiMediaFilteredCount"]);r!=null&&d(t,["raiMediaFilteredCount"],r);const a=f(e,["raiMediaFilteredReasons"]);return a!=null&&d(t,["raiMediaFilteredReasons"],a),t}function RT(i,e){const t={},n=f(e,["name"]);n!=null&&d(t,["name"],n);const r=f(e,["metadata"]);r!=null&&d(t,["metadata"],r);const a=f(e,["done"]);a!=null&&d(t,["done"],a);const c=f(e,["error"]);c!=null&&d(t,["error"],c);const h=f(e,["response"]);return h!=null&&d(t,["response"],mM(i,h)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pM extends va{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,n=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let a;return n&&"httpOptions"in n&&(a=n.httpOptions),this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:a}})}else return this.getVideosOperationInternal({operationName:t.name,config:n})}async getVideosOperationInternal(e){var t,n,r,a;let c,h="",y={};if(this.apiClient.isVertexAI()){const g=oM(this.apiClient,e);return h=we("{operationName}",g._url),y=g._query,delete g.config,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(_=>_.json()),c.then(_=>RT(this.apiClient,_))}else{const g=rM(this.apiClient,e);return h=we("{operationName}",g._url),y=g._query,delete g.config,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(_=>fM(this.apiClient,_))}}async fetchPredictVideosOperationInternal(e){var t,n;let r,a="",c={};if(this.apiClient.isVertexAI()){const h=aM(this.apiClient,e);return a=we("{resourceName}:fetchPredictOperation",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),r.then(y=>RT(this.apiClient,y))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gM(i,e){const t={},n=f(e,["voiceName"]);return n!=null&&d(t,["voiceName"],n),t}function gE(i,e){const t={},n=f(e,["prebuiltVoiceConfig"]);return n!=null&&d(t,["prebuiltVoiceConfig"],gM(i,n)),t}function yM(i,e){const t={},n=f(e,["speaker"]);n!=null&&d(t,["speaker"],n);const r=f(e,["voiceConfig"]);return r!=null&&d(t,["voiceConfig"],gE(i,r)),t}function vM(i,e){const t={},n=f(e,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>yM(i,a))),d(t,["speakerVoiceConfigs"],r)}return t}function _M(i,e){const t={},n=f(e,["voiceConfig"]);n!=null&&d(t,["voiceConfig"],gE(i,n));const r=f(e,["multiSpeakerVoiceConfig"]);r!=null&&d(t,["multiSpeakerVoiceConfig"],vM(i,r));const a=f(e,["languageCode"]);return a!=null&&d(t,["languageCode"],a),t}function TM(i,e){const t={},n=f(e,["fps"]);n!=null&&d(t,["fps"],n);const r=f(e,["endOffset"]);r!=null&&d(t,["endOffset"],r);const a=f(e,["startOffset"]);return a!=null&&d(t,["startOffset"],a),t}function EM(i,e){const t={};if(f(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(e,["data"]);n!=null&&d(t,["data"],n);const r=f(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function CM(i,e){const t={};if(f(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(e,["fileUri"]);n!=null&&d(t,["fileUri"],n);const r=f(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function AM(i,e){const t={},n=f(e,["videoMetadata"]);n!=null&&d(t,["videoMetadata"],TM(i,n));const r=f(e,["thought"]);r!=null&&d(t,["thought"],r);const a=f(e,["inlineData"]);a!=null&&d(t,["inlineData"],EM(i,a));const c=f(e,["fileData"]);c!=null&&d(t,["fileData"],CM(i,c));const h=f(e,["thoughtSignature"]);h!=null&&d(t,["thoughtSignature"],h);const y=f(e,["codeExecutionResult"]);y!=null&&d(t,["codeExecutionResult"],y);const g=f(e,["executableCode"]);g!=null&&d(t,["executableCode"],g);const _=f(e,["functionCall"]);_!=null&&d(t,["functionCall"],_);const E=f(e,["functionResponse"]);E!=null&&d(t,["functionResponse"],E);const S=f(e,["text"]);return S!=null&&d(t,["text"],S),t}function SM(i,e){const t={},n=f(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(c=>AM(i,c))),d(t,["parts"],a)}const r=f(e,["role"]);return r!=null&&d(t,["role"],r),t}function xM(i,e){const t={},n=f(e,["behavior"]);n!=null&&d(t,["behavior"],n);const r=f(e,["description"]);r!=null&&d(t,["description"],r);const a=f(e,["name"]);a!=null&&d(t,["name"],a);const c=f(e,["parameters"]);c!=null&&d(t,["parameters"],c);const h=f(e,["response"]);return h!=null&&d(t,["response"],h),t}function wM(i,e){const t={},n=f(e,["startTime"]);n!=null&&d(t,["startTime"],n);const r=f(e,["endTime"]);return r!=null&&d(t,["endTime"],r),t}function RM(i,e){const t={},n=f(e,["timeRangeFilter"]);return n!=null&&d(t,["timeRangeFilter"],wM(i,n)),t}function bM(i,e){const t={},n=f(e,["mode"]);n!=null&&d(t,["mode"],n);const r=f(e,["dynamicThreshold"]);return r!=null&&d(t,["dynamicThreshold"],r),t}function IM(i,e){const t={},n=f(e,["dynamicRetrievalConfig"]);return n!=null&&d(t,["dynamicRetrievalConfig"],bM(i,n)),t}function NM(){return{}}function MM(i,e){const t={},n=f(e,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(g=>xM(i,g))),d(t,["functionDeclarations"],y)}if(f(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=f(e,["googleSearch"]);r!=null&&d(t,["googleSearch"],RM(i,r));const a=f(e,["googleSearchRetrieval"]);if(a!=null&&d(t,["googleSearchRetrieval"],IM(i,a)),f(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(f(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");f(e,["urlContext"])!=null&&d(t,["urlContext"],NM());const h=f(e,["codeExecution"]);return h!=null&&d(t,["codeExecution"],h),t}function DM(i,e){const t={},n=f(e,["handle"]);if(n!=null&&d(t,["handle"],n),f(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function bT(){return{}}function VM(i,e){const t={},n=f(e,["disabled"]);n!=null&&d(t,["disabled"],n);const r=f(e,["startOfSpeechSensitivity"]);r!=null&&d(t,["startOfSpeechSensitivity"],r);const a=f(e,["endOfSpeechSensitivity"]);a!=null&&d(t,["endOfSpeechSensitivity"],a);const c=f(e,["prefixPaddingMs"]);c!=null&&d(t,["prefixPaddingMs"],c);const h=f(e,["silenceDurationMs"]);return h!=null&&d(t,["silenceDurationMs"],h),t}function PM(i,e){const t={},n=f(e,["automaticActivityDetection"]);n!=null&&d(t,["automaticActivityDetection"],VM(i,n));const r=f(e,["activityHandling"]);r!=null&&d(t,["activityHandling"],r);const a=f(e,["turnCoverage"]);return a!=null&&d(t,["turnCoverage"],a),t}function kM(i,e){const t={},n=f(e,["targetTokens"]);return n!=null&&d(t,["targetTokens"],n),t}function LM(i,e){const t={},n=f(e,["triggerTokens"]);n!=null&&d(t,["triggerTokens"],n);const r=f(e,["slidingWindow"]);return r!=null&&d(t,["slidingWindow"],kM(i,r)),t}function UM(i,e){const t={},n=f(e,["proactiveAudio"]);return n!=null&&d(t,["proactiveAudio"],n),t}function OM(i,e,t){const n={},r=f(e,["generationConfig"]);t!==void 0&&r!=null&&d(t,["setup","generationConfig"],r);const a=f(e,["responseModalities"]);t!==void 0&&a!=null&&d(t,["setup","generationConfig","responseModalities"],a);const c=f(e,["temperature"]);t!==void 0&&c!=null&&d(t,["setup","generationConfig","temperature"],c);const h=f(e,["topP"]);t!==void 0&&h!=null&&d(t,["setup","generationConfig","topP"],h);const y=f(e,["topK"]);t!==void 0&&y!=null&&d(t,["setup","generationConfig","topK"],y);const g=f(e,["maxOutputTokens"]);t!==void 0&&g!=null&&d(t,["setup","generationConfig","maxOutputTokens"],g);const _=f(e,["mediaResolution"]);t!==void 0&&_!=null&&d(t,["setup","generationConfig","mediaResolution"],_);const E=f(e,["seed"]);t!==void 0&&E!=null&&d(t,["setup","generationConfig","seed"],E);const S=f(e,["speechConfig"]);t!==void 0&&S!=null&&d(t,["setup","generationConfig","speechConfig"],_M(i,Qm(i,S)));const I=f(e,["enableAffectiveDialog"]);t!==void 0&&I!=null&&d(t,["setup","generationConfig","enableAffectiveDialog"],I);const U=f(e,["systemInstruction"]);t!==void 0&&U!=null&&d(t,["setup","systemInstruction"],SM(i,vn(i,U)));const G=f(e,["tools"]);if(t!==void 0&&G!=null){let le=du(i,G);Array.isArray(le)&&(le=le.map(L=>MM(i,fu(i,L)))),d(t,["setup","tools"],le)}const B=f(e,["sessionResumption"]);t!==void 0&&B!=null&&d(t,["setup","sessionResumption"],DM(i,B));const W=f(e,["inputAudioTranscription"]);t!==void 0&&W!=null&&d(t,["setup","inputAudioTranscription"],bT());const J=f(e,["outputAudioTranscription"]);t!==void 0&&J!=null&&d(t,["setup","outputAudioTranscription"],bT());const te=f(e,["realtimeInputConfig"]);t!==void 0&&te!=null&&d(t,["setup","realtimeInputConfig"],PM(i,te));const re=f(e,["contextWindowCompression"]);t!==void 0&&re!=null&&d(t,["setup","contextWindowCompression"],LM(i,re));const ie=f(e,["proactivity"]);return t!==void 0&&ie!=null&&d(t,["setup","proactivity"],UM(i,ie)),n}function FM(i,e){const t={},n=f(e,["model"]);n!=null&&d(t,["setup","model"],dt(i,n));const r=f(e,["config"]);return r!=null&&d(t,["config"],OM(i,r,t)),t}function qM(i,e,t){const n={},r=f(e,["expireTime"]);t!==void 0&&r!=null&&d(t,["expireTime"],r);const a=f(e,["newSessionExpireTime"]);t!==void 0&&a!=null&&d(t,["newSessionExpireTime"],a);const c=f(e,["uses"]);t!==void 0&&c!=null&&d(t,["uses"],c);const h=f(e,["liveConnectConstraints"]);t!==void 0&&h!=null&&d(t,["bidiGenerateContentSetup"],FM(i,h));const y=f(e,["lockAdditionalFields"]);return t!==void 0&&y!=null&&d(t,["fieldMask"],y),n}function BM(i,e){const t={},n=f(e,["config"]);return n!=null&&d(t,["config"],qM(i,n,t)),t}function zM(i,e){const t={},n=f(e,["name"]);return n!=null&&d(t,["name"],n),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GM(i){const e=[];for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t)){const n=i[t];if(typeof n=="object"&&n!=null&&Object.keys(n).length>0){const r=Object.keys(n).map(a=>`${t}.${a}`);e.push(...r)}else e.push(t)}return e.join(",")}function HM(i,e){let t=null;const n=i.bidiGenerateContentSetup;if(typeof n=="object"&&n!==null&&"setup"in n){const a=n.setup;typeof a=="object"&&a!==null?(i.bidiGenerateContentSetup=a,t=a):delete i.bidiGenerateContentSetup}else n!==void 0&&delete i.bidiGenerateContentSetup;const r=i.fieldMask;if(t){const a=GM(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?i.fieldMask=a:delete i.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];r.length>0&&(h=r.map(g=>c.includes(g)?`generationConfig.${g}`:g));const y=[];a&&y.push(a),h.length>0&&y.push(...h),y.length>0?i.fieldMask=y.join(","):delete i.fieldMask}else delete i.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?i.fieldMask=r.join(","):delete i.fieldMask;return i}class $M extends va{constructor(e){super(),this.apiClient=e}async create(e){var t,n;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=BM(this.apiClient,e);a=we("auth_tokens",h._url),c=h._query,delete h.config,delete h._url,delete h._query;const y=HM(h,e.config);return r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(g=>g.json()),r.then(g=>zM(this.apiClient,g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YM(i,e){const t={},n=f(e,["name"]);n!=null&&d(t,["_url","name"],n);const r=f(e,["config"]);return r!=null&&d(t,["config"],r),t}function KM(i,e,t){const n={},r=f(e,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);const a=f(e,["pageToken"]);t!==void 0&&a!=null&&d(t,["_query","pageToken"],a);const c=f(e,["filter"]);return t!==void 0&&c!=null&&d(t,["_query","filter"],c),n}function QM(i,e){const t={},n=f(e,["config"]);return n!=null&&d(t,["config"],KM(i,n,t)),t}function ZM(i,e){const t={},n=f(e,["textInput"]);n!=null&&d(t,["textInput"],n);const r=f(e,["output"]);return r!=null&&d(t,["output"],r),t}function XM(i,e){const t={};if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=f(e,["examples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>ZM(i,a))),d(t,["examples","examples"],r)}return t}function JM(i,e,t){const n={};if(f(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=f(e,["tunedModelDisplayName"]);if(t!==void 0&&r!=null&&d(t,["displayName"],r),f(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=f(e,["epochCount"]);t!==void 0&&a!=null&&d(t,["tuningTask","hyperparameters","epochCount"],a);const c=f(e,["learningRateMultiplier"]);if(c!=null&&d(n,["tuningTask","hyperparameters","learningRateMultiplier"],c),f(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const h=f(e,["batchSize"]);t!==void 0&&h!=null&&d(t,["tuningTask","hyperparameters","batchSize"],h);const y=f(e,["learningRate"]);return t!==void 0&&y!=null&&d(t,["tuningTask","hyperparameters","learningRate"],y),n}function jM(i,e){const t={},n=f(e,["baseModel"]);n!=null&&d(t,["baseModel"],n);const r=f(e,["trainingDataset"]);r!=null&&d(t,["tuningTask","trainingData"],XM(i,r));const a=f(e,["config"]);return a!=null&&d(t,["config"],JM(i,a,t)),t}function WM(i,e){const t={},n=f(e,["name"]);n!=null&&d(t,["_url","name"],n);const r=f(e,["config"]);return r!=null&&d(t,["config"],r),t}function e2(i,e,t){const n={},r=f(e,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);const a=f(e,["pageToken"]);t!==void 0&&a!=null&&d(t,["_query","pageToken"],a);const c=f(e,["filter"]);return t!==void 0&&c!=null&&d(t,["_query","filter"],c),n}function t2(i,e){const t={},n=f(e,["config"]);return n!=null&&d(t,["config"],e2(i,n,t)),t}function n2(i,e,t){const n={},r=f(e,["gcsUri"]);if(t!==void 0&&r!=null&&d(t,["supervisedTuningSpec","trainingDatasetUri"],r),f(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function i2(i,e){const t={},n=f(e,["gcsUri"]);return n!=null&&d(t,["validationDatasetUri"],n),t}function s2(i,e,t){const n={},r=f(e,["validationDataset"]);t!==void 0&&r!=null&&d(t,["supervisedTuningSpec"],i2(i,r));const a=f(e,["tunedModelDisplayName"]);t!==void 0&&a!=null&&d(t,["tunedModelDisplayName"],a);const c=f(e,["description"]);t!==void 0&&c!=null&&d(t,["description"],c);const h=f(e,["epochCount"]);t!==void 0&&h!=null&&d(t,["supervisedTuningSpec","hyperParameters","epochCount"],h);const y=f(e,["learningRateMultiplier"]);t!==void 0&&y!=null&&d(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],y);const g=f(e,["exportLastCheckpointOnly"]);t!==void 0&&g!=null&&d(t,["supervisedTuningSpec","exportLastCheckpointOnly"],g);const _=f(e,["adapterSize"]);if(t!==void 0&&_!=null&&d(t,["supervisedTuningSpec","hyperParameters","adapterSize"],_),f(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function r2(i,e){const t={},n=f(e,["baseModel"]);n!=null&&d(t,["baseModel"],n);const r=f(e,["trainingDataset"]);r!=null&&d(t,["supervisedTuningSpec","trainingDatasetUri"],n2(i,r,t));const a=f(e,["config"]);return a!=null&&d(t,["config"],s2(i,a,t)),t}function o2(i,e){const t={},n=f(e,["name"]);n!=null&&d(t,["model"],n);const r=f(e,["name"]);return r!=null&&d(t,["endpoint"],r),t}function yE(i,e){const t={},n=f(e,["name"]);n!=null&&d(t,["name"],n);const r=f(e,["state"]);r!=null&&d(t,["state"],W0(i,r));const a=f(e,["createTime"]);a!=null&&d(t,["createTime"],a);const c=f(e,["tuningTask","startTime"]);c!=null&&d(t,["startTime"],c);const h=f(e,["tuningTask","completeTime"]);h!=null&&d(t,["endTime"],h);const y=f(e,["updateTime"]);y!=null&&d(t,["updateTime"],y);const g=f(e,["description"]);g!=null&&d(t,["description"],g);const _=f(e,["baseModel"]);_!=null&&d(t,["baseModel"],_);const E=f(e,["_self"]);E!=null&&d(t,["tunedModel"],o2(i,E));const S=f(e,["distillationSpec"]);S!=null&&d(t,["distillationSpec"],S);const I=f(e,["experiment"]);I!=null&&d(t,["experiment"],I);const U=f(e,["labels"]);U!=null&&d(t,["labels"],U);const G=f(e,["pipelineJob"]);G!=null&&d(t,["pipelineJob"],G);const B=f(e,["serviceAccount"]);B!=null&&d(t,["serviceAccount"],B);const W=f(e,["tunedModelDisplayName"]);return W!=null&&d(t,["tunedModelDisplayName"],W),t}function a2(i,e){const t={},n=f(e,["nextPageToken"]);n!=null&&d(t,["nextPageToken"],n);const r=f(e,["tunedModels"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>yE(i,c))),d(t,["tuningJobs"],a)}return t}function l2(i,e){const t={},n=f(e,["name"]);n!=null&&d(t,["name"],n);const r=f(e,["metadata"]);r!=null&&d(t,["metadata"],r);const a=f(e,["done"]);a!=null&&d(t,["done"],a);const c=f(e,["error"]);return c!=null&&d(t,["error"],c),t}function u2(i,e){const t={},n=f(e,["checkpointId"]);n!=null&&d(t,["checkpointId"],n);const r=f(e,["epoch"]);r!=null&&d(t,["epoch"],r);const a=f(e,["step"]);a!=null&&d(t,["step"],a);const c=f(e,["endpoint"]);return c!=null&&d(t,["endpoint"],c),t}function c2(i,e){const t={},n=f(e,["model"]);n!=null&&d(t,["model"],n);const r=f(e,["endpoint"]);r!=null&&d(t,["endpoint"],r);const a=f(e,["checkpoints"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>u2(i,h))),d(t,["checkpoints"],c)}return t}function Em(i,e){const t={},n=f(e,["name"]);n!=null&&d(t,["name"],n);const r=f(e,["state"]);r!=null&&d(t,["state"],W0(i,r));const a=f(e,["createTime"]);a!=null&&d(t,["createTime"],a);const c=f(e,["startTime"]);c!=null&&d(t,["startTime"],c);const h=f(e,["endTime"]);h!=null&&d(t,["endTime"],h);const y=f(e,["updateTime"]);y!=null&&d(t,["updateTime"],y);const g=f(e,["error"]);g!=null&&d(t,["error"],g);const _=f(e,["description"]);_!=null&&d(t,["description"],_);const E=f(e,["baseModel"]);E!=null&&d(t,["baseModel"],E);const S=f(e,["tunedModel"]);S!=null&&d(t,["tunedModel"],c2(i,S));const I=f(e,["supervisedTuningSpec"]);I!=null&&d(t,["supervisedTuningSpec"],I);const U=f(e,["tuningDataStats"]);U!=null&&d(t,["tuningDataStats"],U);const G=f(e,["encryptionSpec"]);G!=null&&d(t,["encryptionSpec"],G);const B=f(e,["partnerModelTuningSpec"]);B!=null&&d(t,["partnerModelTuningSpec"],B);const W=f(e,["distillationSpec"]);W!=null&&d(t,["distillationSpec"],W);const J=f(e,["experiment"]);J!=null&&d(t,["experiment"],J);const te=f(e,["labels"]);te!=null&&d(t,["labels"],te);const re=f(e,["pipelineJob"]);re!=null&&d(t,["pipelineJob"],re);const ie=f(e,["serviceAccount"]);ie!=null&&d(t,["serviceAccount"],ie);const le=f(e,["tunedModelDisplayName"]);return le!=null&&d(t,["tunedModelDisplayName"],le),t}function f2(i,e){const t={},n=f(e,["nextPageToken"]);n!=null&&d(t,["nextPageToken"],n);const r=f(e,["tuningJobs"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>Em(i,c))),d(t,["tuningJobs"],a)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class d2 extends va{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new Sf(fa.PAGED_ITEM_TUNING_JOBS,n=>this.listInternal(n),await this.listInternal(t),t),this.tune=async t=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(t);{const n=await this.tuneMldevInternal(t);let r="";return n.metadata!==void 0&&n.metadata.tunedModel!==void 0?r=n.metadata.tunedModel:n.name!==void 0&&n.name.includes("/operations/")&&(r=n.name.split("/operations/")[0]),{name:r,state:dm.JOB_STATE_QUEUED}}}}async getInternal(e){var t,n,r,a;let c,h="",y={};if(this.apiClient.isVertexAI()){const g=WM(this.apiClient,e);return h=we("{name}",g._url),y=g._query,delete g.config,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(_=>_.json()),c.then(_=>Em(this.apiClient,_))}else{const g=YM(this.apiClient,e);return h=we("{name}",g._url),y=g._query,delete g.config,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(_=>yE(this.apiClient,_))}}async listInternal(e){var t,n,r,a;let c,h="",y={};if(this.apiClient.isVertexAI()){const g=t2(this.apiClient,e);return h=we("tuningJobs",g._url),y=g._query,delete g.config,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(_=>_.json()),c.then(_=>{const E=f2(this.apiClient,_),S=new iT;return Object.assign(S,E),S})}else{const g=QM(this.apiClient,e);return h=we("tunedModels",g._url),y=g._query,delete g.config,delete g._url,delete g._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(_=>{const E=a2(this.apiClient,_),S=new iT;return Object.assign(S,E),S})}}async tuneInternal(e){var t,n;let r,a="",c={};if(this.apiClient.isVertexAI()){const h=r2(this.apiClient,e);return a=we("tuningJobs",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),r.then(y=>Em(this.apiClient,y))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,n;let r,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=jM(this.apiClient,e);return a=we("tunedModels",h._url),c=h._query,delete h.config,delete h._url,delete h._query,r=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),r.then(y=>l2(this.apiClient,y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class h2{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const m2=1024*1024*8,p2=3,g2=1e3,y2=2,Qh="x-goog-upload-status";async function v2(i,e,t){var n,r,a;let c=0,h=0,y=new hm(new Response),g="upload";for(c=i.size;h<c;){const E=Math.min(m2,c-h),S=i.slice(h,h+E);h+E>=c&&(g+=", finalize");let I=0,U=g2;for(;I<p2&&(y=await t.request({path:"",body:S,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(h),"Content-Length":String(E)}}}),!(!((n=y==null?void 0:y.headers)===null||n===void 0)&&n[Qh]));)I++,await T2(U),U=U*y2;if(h+=E,((r=y==null?void 0:y.headers)===null||r===void 0?void 0:r[Qh])!=="active")break;if(c<=h)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const _=await(y==null?void 0:y.json());if(((a=y==null?void 0:y.headers)===null||a===void 0?void 0:a[Qh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return _.file}async function _2(i){return{size:i.size,type:i.type}}function T2(i){return new Promise(e=>setTimeout(e,i))}class E2{async upload(e,t,n){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await v2(e,t,n)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await _2(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class C2{create(e,t,n){return new A2(e,t,n)}}class A2{constructor(e,t,n){this.url=e,this.headers=t,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const IT="x-goog-api-key";class S2{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(IT)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(IT,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const x2="gl-node/";class w2{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const n=Mx(e,void 0,void 0);n&&(e.httpOptions?e.httpOptions.baseUrl=n:e.httpOptions={baseUrl:n}),this.apiVersion=e.apiVersion;const r=new S2(this.apiKey);this.apiClient=new BN({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:x2+"web",uploader:new E2,downloader:new h2}),this.models=new sM(this.apiClient),this.live=new WN(this.apiClient,r,new C2),this.chats=new iw(this.models,this.apiClient),this.caches=new ew(this.apiClient),this.files=new gw(this.apiClient),this.operations=new pM(this.apiClient),this.authTokens=new $M(this.apiClient),this.tunings=new d2(this.apiClient)}}const R2=async i=>{const e=new w2({apiKey:void 0}),t=Object.entries(i).map(([n,r])=>`${n}: ${r.join(", ")}`).join(`
`);try{return(await e.models.generateContent({model:"gemini-3-flash-preview",contents:`O usurio montou o seguinte kit semanal de marmitas congeladas organizado por dias da semana:
      ${t}
      
      Como um nutricionista especialista, d um feedback curto e motivador sobre esse planejamento semanal em portugus brasileiro. 
      Analise se a distribuio das refeies ao longo dos dias est variada e equilibrada.
      Mantenha o tom profissional mas acolhedor. No mximo 3 pargrafos curtos.`,config:{maxOutputTokens:500,thinkingConfig:{thinkingBudget:400},temperature:.7}})).text||"Seu planejamento semanal est excelente! Uma jornada nutritiva e saborosa te espera."}catch(n){return console.error("Gemini Insight Error:",n),"Sua escolha foi excelente! Equilbrio e sabor para todos os seus dias."}},NT=({selection:i,onFinish:e})=>{const[t,n]=$e.useState(null),[r,a]=$e.useState(!1),c=Object.values(i).reduce((E,S)=>E+Object.keys(S).length,0),h=c>0,y=c===35,g=$e.useMemo(()=>Object.values(i).reduce((E,S)=>E+Object.values(S).reduce((I,U)=>I+((U==null?void 0:U.price)||0),0),0),[i]),_=async()=>{a(!0);const E={};Zr.forEach(I=>{const U=i[I]||{};E[I]=Object.values(U).map(G=>G.name)});const S=await R2(E);n(S),a(!1)};return w.jsxs("div",{className:"h-fit",children:[w.jsxs("h2",{className:"text-xl font-bold mb-6 flex items-center gap-3 text-slate-800 border-b pb-2",children:[w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5 text-[#A61919]",children:w.jsx("path",{fillRule:"evenodd",d:"M7.5 6v.75H5.513c-.96 0-1.764.724-1.865 1.679l-1.263 12A1.875 1.875 0 0 0 4.25 22.5h15.5a1.875 1.875 0 0 0 1.865-2.071l-1.263-12a1.875 1.875 0 0 0-1.865-1.679H16.5V6a4.5 4.5 0 1 0-9 0ZM12 3a3 3 0 0 0-3 3v.75h6V6a3 3 0 0 0-3-3Zm-3 8.25a.75.75 0 0 1 .75-.75H13.5a.75.75 0 0 1 0 1.5H9.75a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})}),"Progresso do Kit"]}),w.jsx("div",{className:"space-y-3 mb-8",children:Zr.map(E=>{const S=Object.keys(i[E]||{}).length,I=S===H0.length;return w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsx("span",{className:`text-[11px] font-bold tracking-tight ${I?"text-[#009246]":"text-slate-400 uppercase"}`,children:E}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsxs("span",{className:`text-[10px] font-black ${I?"text-[#009246]":"text-slate-300"}`,children:[S,"/5"]}),I?w.jsx("div",{className:"w-2 h-2 rounded-full bg-[#009246] shadow-lg shadow-[#009246]/30 animate-pulse"}):w.jsx("div",{className:"w-2 h-2 rounded-full border-2 border-slate-100"})]})]},E)})}),w.jsxs("div",{className:"bg-[#F9F4ED] rounded-2xl p-4 mb-6 text-center border border-[#A61919]/5",children:[w.jsx("div",{className:"text-[9px] text-slate-400 font-black uppercase tracking-widest mb-1",children:"Total Estimado"}),w.jsxs("div",{className:"text-3xl font-black text-[#A61919] tracking-tighter",children:["R$ ",g.toFixed(2)]}),w.jsxs("div",{className:"text-[8px] text-slate-300 font-bold uppercase mt-1",children:[c,"/35 Itens"]})]}),w.jsx("button",{disabled:!h,onClick:e,className:`w-full py-4 rounded-xl font-bold text-base transition-all shadow-lg ${h?"bg-[#A61919] text-white hover:bg-[#8C1515] shadow-[#A61919]/30":"bg-slate-100 text-slate-300 cursor-not-allowed"}`,children:y?"FINALIZAR KIT":"FINALIZAR KIT PARCIAL"}),h&&w.jsx("button",{onClick:_,disabled:r,className:"mt-4 w-full flex items-center justify-center gap-2 text-[#009246] font-bold text-xs hover:underline",children:r?w.jsx("div",{className:"w-3 h-3 border-2 border-[#009246] border-t-transparent rounded-full animate-spin"}):"Anlise Nutricional Matelli"}),t&&w.jsx("div",{className:"mt-6 p-4 bg-[#F9F4ED] rounded-2xl border-l-4 border-[#009246] animate-fade-in",children:w.jsxs("p",{className:"text-[11px] text-slate-700 leading-relaxed font-medium italic",children:['"',t,'"']})})]})},b2=({category:i,selectedMeal:e,onSelect:t,customCatalog:n})=>{const[r,a]=G0.useState(!1),c=(n||[]).filter(h=>h.category===i);return w.jsxs("div",{className:"mb-6",children:[w.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[w.jsx("h3",{className:"text-xl font-bold text-[#A61919] min-w-[120px]",children:i}),w.jsx("div",{className:"h-px flex-grow bg-slate-100"})]}),e&&!r?w.jsxs("div",{className:"bg-[#F9F4ED] rounded-[2rem] p-4 sm:p-6 border border-[#A61919]/10 flex flex-col sm:flex-row items-start sm:items-center gap-4 sm:gap-6 animate-fade-in hover:shadow-lg transition-all",children:[w.jsxs("div",{className:"flex items-center gap-4 w-full sm:w-auto",children:[w.jsx("img",{src:e.image,className:"w-20 h-20 sm:w-24 sm:h-24 object-cover rounded-2xl shadow-md border-2 border-white flex-shrink-0",alt:e.name}),w.jsxs("div",{className:"flex-grow sm:hidden",children:[w.jsx("h4",{className:"text-lg font-bold text-slate-800 leading-tight",children:e.name}),w.jsxs("div",{className:"flex gap-2 mt-1 items-center",children:[w.jsx("span",{className:"text-[8px] bg-white px-2 py-0.5 rounded-full text-[#A61919] font-black uppercase tracking-widest border border-[#A61919]/10",children:e.weight}),w.jsxs("span",{className:"text-[10px] font-black text-[#A61919]",children:["R$ ",e.price.toFixed(2)]})]})]})]}),w.jsxs("div",{className:"flex-grow hidden sm:block",children:[w.jsx("h4",{className:"text-xl font-bold text-slate-800",children:e.name}),w.jsxs("div",{className:"mt-2 flex gap-3 items-center",children:[w.jsx("span",{className:"text-[9px] bg-white px-3 py-1 rounded-full text-[#A61919] font-black uppercase tracking-widest border border-[#A61919]/20",children:e.weight}),w.jsxs("span",{className:"text-lg font-black text-[#A61919]",children:["R$ ",e.price.toFixed(2)]}),w.jsx("span",{className:"text-[9px] bg-[#009246] px-3 py-1 rounded-full text-white font-black uppercase tracking-widest",children:"Selecionado"})]})]}),w.jsx("button",{onClick:()=>a(!0),className:"w-full sm:w-auto text-[#A61919] font-black text-[10px] uppercase tracking-widest bg-white sm:bg-transparent hover:bg-white px-6 py-3 rounded-xl border border-[#A61919]/10 transition-all text-center",children:"TROCAR"})]}):w.jsxs("div",{className:"bg-white rounded-[2rem] p-6 border-2 border-dashed border-slate-100 hover:border-[#A61919]/20 transition-all",children:[w.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[c.map(h=>w.jsxs("button",{onClick:()=>{t(h),a(!1)},className:`flex flex-col text-left group transition-all rounded-2xl overflow-hidden border-2 ${(e==null?void 0:e.id)===h.id?"border-[#A61919] ring-4 ring-[#A61919]/5":"border-[#F9F4ED] hover:border-[#A61919]/20"}`,children:[w.jsxs("div",{className:"relative h-24 sm:h-28 overflow-hidden",children:[w.jsx("img",{src:h.image,className:"h-full w-full object-cover group-hover:scale-110 transition-transform duration-700"}),w.jsx("div",{className:"absolute bottom-2 right-2 bg-white/90 backdrop-blur-sm px-2 py-0.5 rounded text-[8px] font-black text-[#A61919] uppercase tracking-widest",children:h.weight})]}),w.jsxs("div",{className:"p-3 bg-white",children:[w.jsx("h5",{className:"font-bold text-[11px] sm:text-sm text-slate-800 line-clamp-1",children:h.name}),w.jsxs("p",{className:"text-[11px] text-[#A61919] font-black mt-1",children:["R$ ",h.price.toFixed(2)]})]})]},h.id)),c.length===0&&w.jsx("p",{className:"col-span-full text-slate-300 font-bold uppercase text-[9px] tracking-widest text-center py-6",children:"Nenhum item disponvel"})]}),r&&w.jsx("button",{onClick:()=>a(!1),className:"mt-4 w-full text-slate-400 text-[10px] font-black uppercase tracking-widest hover:text-[#A61919] transition-colors",children:"Fechar Opes"})]})]})},I2=({meal:i,count:e,onAdd:t,onRemove:n,isMaxed:r})=>w.jsxs("div",{className:"bg-white rounded-[2rem] shadow-sm hover:shadow-2xl transition-all duration-500 overflow-hidden border border-[#A61919]/5 flex flex-col h-full group",children:[w.jsxs("div",{className:"relative h-64 overflow-hidden",children:[w.jsx("img",{src:i.image,alt:i.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-1000"}),w.jsx("div",{className:"absolute top-4 left-4 flex flex-col gap-2",children:i.tags.map(a=>w.jsx("span",{className:"px-3 py-1 bg-[#009246] text-[9px] font-black uppercase tracking-widest text-white rounded-lg shadow-lg",children:a},a))}),w.jsx("div",{className:"absolute top-4 right-4",children:w.jsx("span",{className:"bg-white/90 backdrop-blur-sm px-3 py-1 rounded-lg text-[10px] font-black text-[#A61919] uppercase tracking-widest border border-[#A61919]/20 shadow-sm",children:i.weight})}),e>0&&w.jsx("div",{className:"absolute inset-0 bg-[#A61919]/5 backdrop-blur-[1px]"})]}),w.jsxs("div",{className:"p-8 flex flex-col flex-grow",children:[w.jsx("div",{className:"mb-3",children:w.jsx("h3",{className:"text-2xl font-bold text-slate-800 leading-tight group-hover:text-[#A61919] transition-colors",children:i.name})}),w.jsx("p",{className:"text-slate-500 text-sm line-clamp-2 mb-8 flex-grow leading-relaxed font-medium",children:i.description}),w.jsxs("div",{className:"flex items-center justify-between mt-auto",children:[w.jsxs("div",{className:"flex flex-col",children:[w.jsx("span",{className:"text-[10px] font-black text-slate-300 uppercase tracking-widest",children:"Preo"}),w.jsxs("span",{className:"text-[#A61919] font-black text-2xl tracking-tighter",children:["R$ ",i.price.toFixed(2)]})]}),w.jsxs("div",{className:"flex items-center bg-[#F9F4ED] p-1.5 rounded-2xl border border-[#A61919]/5",children:[w.jsx("button",{onClick:()=>n(i),disabled:e===0,className:`p-2.5 rounded-xl transition-all ${e===0?"text-slate-300":"text-slate-600 hover:bg-white active:scale-90"}`,children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:3,stroke:"currentColor",className:"w-5 h-5",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 12H6"})})}),w.jsx("span",{className:`text-lg font-black w-10 text-center ${e>0?"text-[#A61919]":"text-slate-300"}`,children:e}),w.jsx("button",{onClick:()=>t(i),disabled:r,className:`p-2.5 rounded-xl transition-all ${r?"text-slate-200":"text-[#A61919] hover:bg-white active:scale-90"}`,children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:3,stroke:"currentColor",className:"w-5 h-5",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})})})]})]})]})]}),N2=()=>{};var MT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE=function(i){const e=[];let t=0;for(let n=0;n<i.length;n++){let r=i.charCodeAt(n);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&n+1<i.length&&(i.charCodeAt(n+1)&64512)===56320?(r=65536+((r&1023)<<10)+(i.charCodeAt(++n)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},M2=function(i){const e=[];let t=0,n=0;for(;t<i.length;){const r=i[t++];if(r<128)e[n++]=String.fromCharCode(r);else if(r>191&&r<224){const a=i[t++];e[n++]=String.fromCharCode((r&31)<<6|a&63)}else if(r>239&&r<365){const a=i[t++],c=i[t++],h=i[t++],y=((r&7)<<18|(a&63)<<12|(c&63)<<6|h&63)-65536;e[n++]=String.fromCharCode(55296+(y>>10)),e[n++]=String.fromCharCode(56320+(y&1023))}else{const a=i[t++],c=i[t++];e[n++]=String.fromCharCode((r&15)<<12|(a&63)<<6|c&63)}}return e.join("")},_E={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let r=0;r<i.length;r+=3){const a=i[r],c=r+1<i.length,h=c?i[r+1]:0,y=r+2<i.length,g=y?i[r+2]:0,_=a>>2,E=(a&3)<<4|h>>4;let S=(h&15)<<2|g>>6,I=g&63;y||(I=64,c||(S=64)),n.push(t[_],t[E],t[S],t[I])}return n.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(vE(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):M2(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let r=0;r<i.length;){const a=t[i.charAt(r++)],h=r<i.length?t[i.charAt(r)]:0;++r;const g=r<i.length?t[i.charAt(r)]:64;++r;const E=r<i.length?t[i.charAt(r)]:64;if(++r,a==null||h==null||g==null||E==null)throw new D2;const S=a<<2|h>>4;if(n.push(S),g!==64){const I=h<<4&240|g>>2;if(n.push(I),E!==64){const U=g<<6&192|E;n.push(U)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class D2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const V2=function(i){const e=vE(i);return _E.encodeByteArray(e,!0)},ff=function(i){return V2(i).replace(/\./g,"")},P2=function(i){try{return _E.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2=()=>k2().__FIREBASE_DEFAULTS__,U2=()=>{if(typeof process>"u"||typeof MT>"u")return;const i=MT.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},O2=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&P2(i[1]);return e&&JSON.parse(e)},Wm=()=>{try{return N2()||L2()||U2()||O2()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},F2=i=>{var e,t;return(t=(e=Wm())==null?void 0:e.emulatorHosts)==null?void 0:t[i]},q2=i=>{const e=F2(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},TE=()=>{var i;return(i=Wm())==null?void 0:i.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function z2(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G2(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",r=i.iat||0,a=i.sub||i.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...i};return[ff(JSON.stringify(t)),ff(JSON.stringify(c)),""].join(".")}const Kl={};function H2(){const i={prod:[],emulator:[]};for(const e of Object.keys(Kl))Kl[e]?i.emulator.push(e):i.prod.push(e);return i}function $2(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let DT=!1;function Y2(i,e){if(typeof window>"u"||typeof document>"u"||!ep(window.location.host)||Kl[i]===e||Kl[i]||DT)return;Kl[i]=e;function t(S){return`__firebase__banner__${S}`}const n="__firebase__banner",a=H2().prod.length>0;function c(){const S=document.getElementById(n);S&&S.remove()}function h(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function y(S,I){S.setAttribute("width","24"),S.setAttribute("id",I),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function g(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{DT=!0,c()},S}function _(S,I){S.setAttribute("id",I),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=$2(n),I=t("text"),U=document.getElementById(I)||document.createElement("span"),G=t("learnmore"),B=document.getElementById(G)||document.createElement("a"),W=t("preprendIcon"),J=document.getElementById(W)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const te=S.element;h(te),_(B,G);const re=g();y(J,W),te.append(J,U,B,re),document.body.appendChild(te)}a?(U.innerText="Preview backend disconnected.",J.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(J.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,U.innerText="Preview backend running in this workspace."),U.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K2(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Q2(){var e;const i=(e=Wm())==null?void 0:e.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Z2(){return!Q2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function X2(){try{return typeof indexedDB=="object"}catch{return!1}}function J2(){return new Promise((i,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(n);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(n),i(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var a;e(((a=r.error)==null?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2="FirebaseError";class Ta extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=j2,Object.setPrototypeOf(this,Ta.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,EE.prototype.create)}}class EE{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,a=this.errors[e],c=a?W2(a,n):"Error",h=`${this.serviceName}: ${c} (${r}).`;return new Ta(r,h,n)}}function W2(i,e){return i.replace(eD,(t,n)=>{const r=e[n];return r!=null?String(r):`<${n}?>`})}const eD=/\{\$([^}]+)}/g;function df(i,e){if(i===e)return!0;const t=Object.keys(i),n=Object.keys(e);for(const r of t){if(!n.includes(r))return!1;const a=i[r],c=e[r];if(VT(a)&&VT(c)){if(!df(a,c))return!1}else if(a!==c)return!1}for(const r of n)if(!t.includes(r))return!1;return!0}function VT(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(i){return i&&i._delegate?i._delegate:i}class Wl{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new B2;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(n)return null;throw r}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(iD(e))try{this.getOrInitializeService({instanceIdentifier:Kr})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:r});n.resolve(a)}catch{}}}}clearInstance(e=Kr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Kr){return this.instances.has(e)}getOptions(e=Kr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[a,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);n===h&&c.resolve(r)}return r}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(n)??new Set;r.add(e),this.onInitCallbacks.set(n,r);const a=this.instances.get(n);return a&&e(a,n),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:nD(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Kr){return this.component?this.component.multipleInstances?e:Kr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function nD(i){return i===Kr?void 0:i}function iD(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new tD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xe;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Xe||(Xe={}));const rD={debug:Xe.DEBUG,verbose:Xe.VERBOSE,info:Xe.INFO,warn:Xe.WARN,error:Xe.ERROR,silent:Xe.SILENT},oD=Xe.INFO,aD={[Xe.DEBUG]:"log",[Xe.VERBOSE]:"log",[Xe.INFO]:"info",[Xe.WARN]:"warn",[Xe.ERROR]:"error"},lD=(i,e,...t)=>{if(e<i.logLevel)return;const n=new Date().toISOString(),r=aD[e];if(r)console[r](`[${n}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class CE{constructor(e){this.name=e,this._logLevel=oD,this._logHandler=lD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?rD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xe.DEBUG,...e),this._logHandler(this,Xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xe.VERBOSE,...e),this._logHandler(this,Xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xe.INFO,...e),this._logHandler(this,Xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xe.WARN,...e),this._logHandler(this,Xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xe.ERROR,...e),this._logHandler(this,Xe.ERROR,...e)}}const uD=(i,e)=>e.some(t=>i instanceof t);let PT,kT;function cD(){return PT||(PT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fD(){return kT||(kT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const AE=new WeakMap,Cm=new WeakMap,SE=new WeakMap,Zh=new WeakMap,tp=new WeakMap;function dD(i){const e=new Promise((t,n)=>{const r=()=>{i.removeEventListener("success",a),i.removeEventListener("error",c)},a=()=>{t(Hs(i.result)),r()},c=()=>{n(i.error),r()};i.addEventListener("success",a),i.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&AE.set(t,i)}).catch(()=>{}),tp.set(e,i),e}function hD(i){if(Cm.has(i))return;const e=new Promise((t,n)=>{const r=()=>{i.removeEventListener("complete",a),i.removeEventListener("error",c),i.removeEventListener("abort",c)},a=()=>{t(),r()},c=()=>{n(i.error||new DOMException("AbortError","AbortError")),r()};i.addEventListener("complete",a),i.addEventListener("error",c),i.addEventListener("abort",c)});Cm.set(i,e)}let Am={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return Cm.get(i);if(e==="objectStoreNames")return i.objectStoreNames||SE.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Hs(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function mD(i){Am=i(Am)}function pD(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=i.call(Xh(this),e,...t);return SE.set(n,e.sort?e.sort():[e]),Hs(n)}:fD().includes(i)?function(...e){return i.apply(Xh(this),e),Hs(AE.get(this))}:function(...e){return Hs(i.apply(Xh(this),e))}}function gD(i){return typeof i=="function"?pD(i):(i instanceof IDBTransaction&&hD(i),uD(i,cD())?new Proxy(i,Am):i)}function Hs(i){if(i instanceof IDBRequest)return dD(i);if(Zh.has(i))return Zh.get(i);const e=gD(i);return e!==i&&(Zh.set(i,e),tp.set(e,i)),e}const Xh=i=>tp.get(i);function yD(i,e,{blocked:t,upgrade:n,blocking:r,terminated:a}={}){const c=indexedDB.open(i,e),h=Hs(c);return n&&c.addEventListener("upgradeneeded",y=>{n(Hs(c.result),y.oldVersion,y.newVersion,Hs(c.transaction),y)}),t&&c.addEventListener("blocked",y=>t(y.oldVersion,y.newVersion,y)),h.then(y=>{a&&y.addEventListener("close",()=>a()),r&&y.addEventListener("versionchange",g=>r(g.oldVersion,g.newVersion,g))}).catch(()=>{}),h}const vD=["get","getKey","getAll","getAllKeys","count"],_D=["put","add","delete","clear"],Jh=new Map;function LT(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Jh.get(e))return Jh.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,r=_D.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(r||vD.includes(t)))return;const a=async function(c,...h){const y=this.transaction(c,r?"readwrite":"readonly");let g=y.store;return n&&(g=g.index(h.shift())),(await Promise.all([g[t](...h),r&&y.done]))[0]};return Jh.set(e,a),a}mD(i=>({...i,get:(e,t,n)=>LT(e,t)||i.get(e,t,n),has:(e,t)=>!!LT(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(ED(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function ED(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Sm="@firebase/app",UT="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss=new CE("@firebase/app"),CD="@firebase/app-compat",AD="@firebase/analytics-compat",SD="@firebase/analytics",xD="@firebase/app-check-compat",wD="@firebase/app-check",RD="@firebase/auth",bD="@firebase/auth-compat",ID="@firebase/database",ND="@firebase/data-connect",MD="@firebase/database-compat",DD="@firebase/functions",VD="@firebase/functions-compat",PD="@firebase/installations",kD="@firebase/installations-compat",LD="@firebase/messaging",UD="@firebase/messaging-compat",OD="@firebase/performance",FD="@firebase/performance-compat",qD="@firebase/remote-config",BD="@firebase/remote-config-compat",zD="@firebase/storage",GD="@firebase/storage-compat",HD="@firebase/firestore",$D="@firebase/ai",YD="@firebase/firestore-compat",KD="firebase",QD="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xm="[DEFAULT]",ZD={[Sm]:"fire-core",[CD]:"fire-core-compat",[SD]:"fire-analytics",[AD]:"fire-analytics-compat",[wD]:"fire-app-check",[xD]:"fire-app-check-compat",[RD]:"fire-auth",[bD]:"fire-auth-compat",[ID]:"fire-rtdb",[ND]:"fire-data-connect",[MD]:"fire-rtdb-compat",[DD]:"fire-fn",[VD]:"fire-fn-compat",[PD]:"fire-iid",[kD]:"fire-iid-compat",[LD]:"fire-fcm",[UD]:"fire-fcm-compat",[OD]:"fire-perf",[FD]:"fire-perf-compat",[qD]:"fire-rc",[BD]:"fire-rc-compat",[zD]:"fire-gcs",[GD]:"fire-gcs-compat",[HD]:"fire-fst",[YD]:"fire-fst-compat",[$D]:"fire-vertex","fire-js":"fire-js",[KD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eu=new Map,XD=new Map,wm=new Map;function OT(i,e){try{i.container.addComponent(e)}catch(t){ss.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function hf(i){const e=i.name;if(wm.has(e))return ss.debug(`There were multiple attempts to register component ${e}.`),!1;wm.set(e,i);for(const t of eu.values())OT(t,i);for(const t of XD.values())OT(t,i);return!0}function JD(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function jD(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$s=new EE("app","Firebase",WD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Wl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $s.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tV=QD;function xE(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const n={name:xm,automaticDataCollectionEnabled:!0,...e},r=n.name;if(typeof r!="string"||!r)throw $s.create("bad-app-name",{appName:String(r)});if(t||(t=TE()),!t)throw $s.create("no-options");const a=eu.get(r);if(a){if(df(t,a.options)&&df(n,a.config))return a;throw $s.create("duplicate-app",{appName:r})}const c=new sD(r);for(const y of wm.values())c.addComponent(y);const h=new eV(t,n,c);return eu.set(r,h),h}function wE(i=xm){const e=eu.get(i);if(!e&&i===xm&&TE())return xE();if(!e)throw $s.create("no-app",{appName:i});return e}function nV(){return Array.from(eu.values())}function ia(i,e,t){let n=ZD[i]??i;t&&(n+=`-${t}`);const r=n.match(/\s|\//),a=e.match(/\s|\//);if(r||a){const c=[`Unable to register library "${n}" with version "${e}":`];r&&c.push(`library name "${n}" contains illegal characters (whitespace or "/")`),r&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ss.warn(c.join(" "));return}hf(new Wl(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iV="firebase-heartbeat-database",sV=1,tu="firebase-heartbeat-store";let jh=null;function RE(){return jh||(jh=yD(iV,sV,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(tu)}catch(t){console.warn(t)}}}}).catch(i=>{throw $s.create("idb-open",{originalErrorMessage:i.message})})),jh}async function rV(i){try{const t=(await RE()).transaction(tu),n=await t.objectStore(tu).get(bE(i));return await t.done,n}catch(e){if(e instanceof Ta)ss.warn(e.message);else{const t=$s.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ss.warn(t.message)}}}async function FT(i,e){try{const n=(await RE()).transaction(tu,"readwrite");await n.objectStore(tu).put(e,bE(i)),await n.done}catch(t){if(t instanceof Ta)ss.warn(t.message);else{const n=$s.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ss.warn(n.message)}}}function bE(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oV=1024,aV=30;class lV{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new cV(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=qT();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:r}),this._heartbeatsCache.heartbeats.length>aV){const c=fV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){ss.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=qT(),{heartbeatsToSend:n,unsentEntries:r}=uV(this._heartbeatsCache.heartbeats),a=ff(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return ss.warn(t),""}}}function qT(){return new Date().toISOString().substring(0,10)}function uV(i,e=oV){const t=[];let n=i.slice();for(const r of i){const a=t.find(c=>c.agent===r.agent);if(a){if(a.dates.push(r.date),BT(t)>e){a.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),BT(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class cV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return X2()?J2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await rV(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return FT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return FT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function BT(i){return ff(JSON.stringify({version:2,heartbeats:i})).length}function fV(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let n=1;n<i.length;n++)i[n].date<t&&(t=i[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dV(i){hf(new Wl("platform-logger",e=>new TD(e),"PRIVATE")),hf(new Wl("heartbeat",e=>new lV(e),"PRIVATE")),ia(Sm,UT,i),ia(Sm,UT,"esm2020"),ia("fire-js","")}dV("");var hV="firebase",mV="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ia(hV,mV,"app");var zT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ys,IE;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(L,D){function x(){}x.prototype=D.prototype,L.F=D.prototype,L.prototype=new x,L.prototype.constructor=L,L.D=function(N,k,P){for(var M=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)M[ge-2]=arguments[ge];return D.prototype[k].apply(N,M)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,t),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(L,D,x){x||(x=0);const N=Array(16);if(typeof D=="string")for(var k=0;k<16;++k)N[k]=D.charCodeAt(x++)|D.charCodeAt(x++)<<8|D.charCodeAt(x++)<<16|D.charCodeAt(x++)<<24;else for(k=0;k<16;++k)N[k]=D[x++]|D[x++]<<8|D[x++]<<16|D[x++]<<24;D=L.g[0],x=L.g[1],k=L.g[2];let P=L.g[3],M;M=D+(P^x&(k^P))+N[0]+3614090360&4294967295,D=x+(M<<7&4294967295|M>>>25),M=P+(k^D&(x^k))+N[1]+3905402710&4294967295,P=D+(M<<12&4294967295|M>>>20),M=k+(x^P&(D^x))+N[2]+606105819&4294967295,k=P+(M<<17&4294967295|M>>>15),M=x+(D^k&(P^D))+N[3]+3250441966&4294967295,x=k+(M<<22&4294967295|M>>>10),M=D+(P^x&(k^P))+N[4]+4118548399&4294967295,D=x+(M<<7&4294967295|M>>>25),M=P+(k^D&(x^k))+N[5]+1200080426&4294967295,P=D+(M<<12&4294967295|M>>>20),M=k+(x^P&(D^x))+N[6]+2821735955&4294967295,k=P+(M<<17&4294967295|M>>>15),M=x+(D^k&(P^D))+N[7]+4249261313&4294967295,x=k+(M<<22&4294967295|M>>>10),M=D+(P^x&(k^P))+N[8]+1770035416&4294967295,D=x+(M<<7&4294967295|M>>>25),M=P+(k^D&(x^k))+N[9]+2336552879&4294967295,P=D+(M<<12&4294967295|M>>>20),M=k+(x^P&(D^x))+N[10]+4294925233&4294967295,k=P+(M<<17&4294967295|M>>>15),M=x+(D^k&(P^D))+N[11]+2304563134&4294967295,x=k+(M<<22&4294967295|M>>>10),M=D+(P^x&(k^P))+N[12]+1804603682&4294967295,D=x+(M<<7&4294967295|M>>>25),M=P+(k^D&(x^k))+N[13]+4254626195&4294967295,P=D+(M<<12&4294967295|M>>>20),M=k+(x^P&(D^x))+N[14]+2792965006&4294967295,k=P+(M<<17&4294967295|M>>>15),M=x+(D^k&(P^D))+N[15]+1236535329&4294967295,x=k+(M<<22&4294967295|M>>>10),M=D+(k^P&(x^k))+N[1]+4129170786&4294967295,D=x+(M<<5&4294967295|M>>>27),M=P+(x^k&(D^x))+N[6]+3225465664&4294967295,P=D+(M<<9&4294967295|M>>>23),M=k+(D^x&(P^D))+N[11]+643717713&4294967295,k=P+(M<<14&4294967295|M>>>18),M=x+(P^D&(k^P))+N[0]+3921069994&4294967295,x=k+(M<<20&4294967295|M>>>12),M=D+(k^P&(x^k))+N[5]+3593408605&4294967295,D=x+(M<<5&4294967295|M>>>27),M=P+(x^k&(D^x))+N[10]+38016083&4294967295,P=D+(M<<9&4294967295|M>>>23),M=k+(D^x&(P^D))+N[15]+3634488961&4294967295,k=P+(M<<14&4294967295|M>>>18),M=x+(P^D&(k^P))+N[4]+3889429448&4294967295,x=k+(M<<20&4294967295|M>>>12),M=D+(k^P&(x^k))+N[9]+568446438&4294967295,D=x+(M<<5&4294967295|M>>>27),M=P+(x^k&(D^x))+N[14]+3275163606&4294967295,P=D+(M<<9&4294967295|M>>>23),M=k+(D^x&(P^D))+N[3]+4107603335&4294967295,k=P+(M<<14&4294967295|M>>>18),M=x+(P^D&(k^P))+N[8]+1163531501&4294967295,x=k+(M<<20&4294967295|M>>>12),M=D+(k^P&(x^k))+N[13]+2850285829&4294967295,D=x+(M<<5&4294967295|M>>>27),M=P+(x^k&(D^x))+N[2]+4243563512&4294967295,P=D+(M<<9&4294967295|M>>>23),M=k+(D^x&(P^D))+N[7]+1735328473&4294967295,k=P+(M<<14&4294967295|M>>>18),M=x+(P^D&(k^P))+N[12]+2368359562&4294967295,x=k+(M<<20&4294967295|M>>>12),M=D+(x^k^P)+N[5]+4294588738&4294967295,D=x+(M<<4&4294967295|M>>>28),M=P+(D^x^k)+N[8]+2272392833&4294967295,P=D+(M<<11&4294967295|M>>>21),M=k+(P^D^x)+N[11]+1839030562&4294967295,k=P+(M<<16&4294967295|M>>>16),M=x+(k^P^D)+N[14]+4259657740&4294967295,x=k+(M<<23&4294967295|M>>>9),M=D+(x^k^P)+N[1]+2763975236&4294967295,D=x+(M<<4&4294967295|M>>>28),M=P+(D^x^k)+N[4]+1272893353&4294967295,P=D+(M<<11&4294967295|M>>>21),M=k+(P^D^x)+N[7]+4139469664&4294967295,k=P+(M<<16&4294967295|M>>>16),M=x+(k^P^D)+N[10]+3200236656&4294967295,x=k+(M<<23&4294967295|M>>>9),M=D+(x^k^P)+N[13]+681279174&4294967295,D=x+(M<<4&4294967295|M>>>28),M=P+(D^x^k)+N[0]+3936430074&4294967295,P=D+(M<<11&4294967295|M>>>21),M=k+(P^D^x)+N[3]+3572445317&4294967295,k=P+(M<<16&4294967295|M>>>16),M=x+(k^P^D)+N[6]+76029189&4294967295,x=k+(M<<23&4294967295|M>>>9),M=D+(x^k^P)+N[9]+3654602809&4294967295,D=x+(M<<4&4294967295|M>>>28),M=P+(D^x^k)+N[12]+3873151461&4294967295,P=D+(M<<11&4294967295|M>>>21),M=k+(P^D^x)+N[15]+530742520&4294967295,k=P+(M<<16&4294967295|M>>>16),M=x+(k^P^D)+N[2]+3299628645&4294967295,x=k+(M<<23&4294967295|M>>>9),M=D+(k^(x|~P))+N[0]+4096336452&4294967295,D=x+(M<<6&4294967295|M>>>26),M=P+(x^(D|~k))+N[7]+1126891415&4294967295,P=D+(M<<10&4294967295|M>>>22),M=k+(D^(P|~x))+N[14]+2878612391&4294967295,k=P+(M<<15&4294967295|M>>>17),M=x+(P^(k|~D))+N[5]+4237533241&4294967295,x=k+(M<<21&4294967295|M>>>11),M=D+(k^(x|~P))+N[12]+1700485571&4294967295,D=x+(M<<6&4294967295|M>>>26),M=P+(x^(D|~k))+N[3]+2399980690&4294967295,P=D+(M<<10&4294967295|M>>>22),M=k+(D^(P|~x))+N[10]+4293915773&4294967295,k=P+(M<<15&4294967295|M>>>17),M=x+(P^(k|~D))+N[1]+2240044497&4294967295,x=k+(M<<21&4294967295|M>>>11),M=D+(k^(x|~P))+N[8]+1873313359&4294967295,D=x+(M<<6&4294967295|M>>>26),M=P+(x^(D|~k))+N[15]+4264355552&4294967295,P=D+(M<<10&4294967295|M>>>22),M=k+(D^(P|~x))+N[6]+2734768916&4294967295,k=P+(M<<15&4294967295|M>>>17),M=x+(P^(k|~D))+N[13]+1309151649&4294967295,x=k+(M<<21&4294967295|M>>>11),M=D+(k^(x|~P))+N[4]+4149444226&4294967295,D=x+(M<<6&4294967295|M>>>26),M=P+(x^(D|~k))+N[11]+3174756917&4294967295,P=D+(M<<10&4294967295|M>>>22),M=k+(D^(P|~x))+N[2]+718787259&4294967295,k=P+(M<<15&4294967295|M>>>17),M=x+(P^(k|~D))+N[9]+3951481745&4294967295,L.g[0]=L.g[0]+D&4294967295,L.g[1]=L.g[1]+(k+(M<<21&4294967295|M>>>11))&4294967295,L.g[2]=L.g[2]+k&4294967295,L.g[3]=L.g[3]+P&4294967295}n.prototype.v=function(L,D){D===void 0&&(D=L.length);const x=D-this.blockSize,N=this.C;let k=this.h,P=0;for(;P<D;){if(k==0)for(;P<=x;)r(this,L,P),P+=this.blockSize;if(typeof L=="string"){for(;P<D;)if(N[k++]=L.charCodeAt(P++),k==this.blockSize){r(this,N),k=0;break}}else for(;P<D;)if(N[k++]=L[P++],k==this.blockSize){r(this,N),k=0;break}}this.h=k,this.o+=D},n.prototype.A=function(){var L=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);L[0]=128;for(var D=1;D<L.length-8;++D)L[D]=0;D=this.o*8;for(var x=L.length-8;x<L.length;++x)L[x]=D&255,D/=256;for(this.v(L),L=Array(16),D=0,x=0;x<4;++x)for(let N=0;N<32;N+=8)L[D++]=this.g[x]>>>N&255;return L};function a(L,D){var x=h;return Object.prototype.hasOwnProperty.call(x,L)?x[L]:x[L]=D(L)}function c(L,D){this.h=D;const x=[];let N=!0;for(let k=L.length-1;k>=0;k--){const P=L[k]|0;N&&P==D||(x[k]=P,N=!1)}this.g=x}var h={};function y(L){return-128<=L&&L<128?a(L,function(D){return new c([D|0],D<0?-1:0)}):new c([L|0],L<0?-1:0)}function g(L){if(isNaN(L)||!isFinite(L))return E;if(L<0)return B(g(-L));const D=[];let x=1;for(let N=0;L>=x;N++)D[N]=L/x|0,x*=4294967296;return new c(D,0)}function _(L,D){if(L.length==0)throw Error("number format error: empty string");if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(L.charAt(0)=="-")return B(_(L.substring(1),D));if(L.indexOf("-")>=0)throw Error('number format error: interior "-" character');const x=g(Math.pow(D,8));let N=E;for(let P=0;P<L.length;P+=8){var k=Math.min(8,L.length-P);const M=parseInt(L.substring(P,P+k),D);k<8?(k=g(Math.pow(D,k)),N=N.j(k).add(g(M))):(N=N.j(x),N=N.add(g(M)))}return N}var E=y(0),S=y(1),I=y(16777216);i=c.prototype,i.m=function(){if(G(this))return-B(this).m();let L=0,D=1;for(let x=0;x<this.g.length;x++){const N=this.i(x);L+=(N>=0?N:4294967296+N)*D,D*=4294967296}return L},i.toString=function(L){if(L=L||10,L<2||36<L)throw Error("radix out of range: "+L);if(U(this))return"0";if(G(this))return"-"+B(this).toString(L);const D=g(Math.pow(L,6));var x=this;let N="";for(;;){const k=re(x,D).g;x=W(x,k.j(D));let P=((x.g.length>0?x.g[0]:x.h)>>>0).toString(L);if(x=k,U(x))return P+N;for(;P.length<6;)P="0"+P;N=P+N}},i.i=function(L){return L<0?0:L<this.g.length?this.g[L]:this.h};function U(L){if(L.h!=0)return!1;for(let D=0;D<L.g.length;D++)if(L.g[D]!=0)return!1;return!0}function G(L){return L.h==-1}i.l=function(L){return L=W(this,L),G(L)?-1:U(L)?0:1};function B(L){const D=L.g.length,x=[];for(let N=0;N<D;N++)x[N]=~L.g[N];return new c(x,~L.h).add(S)}i.abs=function(){return G(this)?B(this):this},i.add=function(L){const D=Math.max(this.g.length,L.g.length),x=[];let N=0;for(let k=0;k<=D;k++){let P=N+(this.i(k)&65535)+(L.i(k)&65535),M=(P>>>16)+(this.i(k)>>>16)+(L.i(k)>>>16);N=M>>>16,P&=65535,M&=65535,x[k]=M<<16|P}return new c(x,x[x.length-1]&-2147483648?-1:0)};function W(L,D){return L.add(B(D))}i.j=function(L){if(U(this)||U(L))return E;if(G(this))return G(L)?B(this).j(B(L)):B(B(this).j(L));if(G(L))return B(this.j(B(L)));if(this.l(I)<0&&L.l(I)<0)return g(this.m()*L.m());const D=this.g.length+L.g.length,x=[];for(var N=0;N<2*D;N++)x[N]=0;for(N=0;N<this.g.length;N++)for(let k=0;k<L.g.length;k++){const P=this.i(N)>>>16,M=this.i(N)&65535,ge=L.i(k)>>>16,be=L.i(k)&65535;x[2*N+2*k]+=M*be,J(x,2*N+2*k),x[2*N+2*k+1]+=P*be,J(x,2*N+2*k+1),x[2*N+2*k+1]+=M*ge,J(x,2*N+2*k+1),x[2*N+2*k+2]+=P*ge,J(x,2*N+2*k+2)}for(L=0;L<D;L++)x[L]=x[2*L+1]<<16|x[2*L];for(L=D;L<2*D;L++)x[L]=0;return new c(x,0)};function J(L,D){for(;(L[D]&65535)!=L[D];)L[D+1]+=L[D]>>>16,L[D]&=65535,D++}function te(L,D){this.g=L,this.h=D}function re(L,D){if(U(D))throw Error("division by zero");if(U(L))return new te(E,E);if(G(L))return D=re(B(L),D),new te(B(D.g),B(D.h));if(G(D))return D=re(L,B(D)),new te(B(D.g),D.h);if(L.g.length>30){if(G(L)||G(D))throw Error("slowDivide_ only works with positive integers.");for(var x=S,N=D;N.l(L)<=0;)x=ie(x),N=ie(N);var k=le(x,1),P=le(N,1);for(N=le(N,2),x=le(x,2);!U(N);){var M=P.add(N);M.l(L)<=0&&(k=k.add(x),P=M),N=le(N,1),x=le(x,1)}return D=W(L,k.j(D)),new te(k,D)}for(k=E;L.l(D)>=0;){for(x=Math.max(1,Math.floor(L.m()/D.m())),N=Math.ceil(Math.log(x)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),P=g(x),M=P.j(D);G(M)||M.l(L)>0;)x-=N,P=g(x),M=P.j(D);U(P)&&(P=S),k=k.add(P),L=W(L,M)}return new te(k,L)}i.B=function(L){return re(this,L).h},i.and=function(L){const D=Math.max(this.g.length,L.g.length),x=[];for(let N=0;N<D;N++)x[N]=this.i(N)&L.i(N);return new c(x,this.h&L.h)},i.or=function(L){const D=Math.max(this.g.length,L.g.length),x=[];for(let N=0;N<D;N++)x[N]=this.i(N)|L.i(N);return new c(x,this.h|L.h)},i.xor=function(L){const D=Math.max(this.g.length,L.g.length),x=[];for(let N=0;N<D;N++)x[N]=this.i(N)^L.i(N);return new c(x,this.h^L.h)};function ie(L){const D=L.g.length+1,x=[];for(let N=0;N<D;N++)x[N]=L.i(N)<<1|L.i(N-1)>>>31;return new c(x,L.h)}function le(L,D){const x=D>>5;D%=32;const N=L.g.length-x,k=[];for(let P=0;P<N;P++)k[P]=D>0?L.i(P+x)>>>D|L.i(P+x+1)<<32-D:L.i(P+x);return new c(k,L.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,IE=n,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=_,Ys=c}).apply(typeof zT<"u"?zT:typeof self<"u"?self:typeof window<"u"?window:{});var Bc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var NE,zl,ME,Zc,Rm,DE,VE,PE;(function(){var i,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bc=="object"&&Bc];for(var T=0;T<m.length;++T){var A=m[T];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var n=t(this);function r(m,T){if(T)e:{var A=n;m=m.split(".");for(var b=0;b<m.length-1;b++){var H=m[b];if(!(H in A))break e;A=A[H]}m=m[m.length-1],b=A[m],T=T(b),T!=b&&T!=null&&e(A,m,{configurable:!0,writable:!0,value:T})}}r("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(m){return m||function(T){var A=[],b;for(b in T)Object.prototype.hasOwnProperty.call(T,b)&&A.push([b,T[b]]);return A}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function h(m){var T=typeof m;return T=="object"&&m!=null||T=="function"}function y(m,T,A){return m.call.apply(m.bind,arguments)}function g(m,T,A){return g=y,g.apply(null,arguments)}function _(m,T){var A=Array.prototype.slice.call(arguments,1);return function(){var b=A.slice();return b.push.apply(b,arguments),m.apply(this,b)}}function E(m,T){function A(){}A.prototype=T.prototype,m.Z=T.prototype,m.prototype=new A,m.prototype.constructor=m,m.Ob=function(b,H,K){for(var ae=Array(arguments.length-2),De=2;De<arguments.length;De++)ae[De-2]=arguments[De];return T.prototype[H].apply(b,ae)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function I(m){const T=m.length;if(T>0){const A=Array(T);for(let b=0;b<T;b++)A[b]=m[b];return A}return[]}function U(m,T){for(let b=1;b<arguments.length;b++){const H=arguments[b];var A=typeof H;if(A=A!="object"?A:H?Array.isArray(H)?"array":A:"null",A=="array"||A=="object"&&typeof H.length=="number"){A=m.length||0;const K=H.length||0;m.length=A+K;for(let ae=0;ae<K;ae++)m[A+ae]=H[ae]}else m.push(H)}}class G{constructor(T,A){this.i=T,this.j=A,this.h=0,this.g=null}get(){let T;return this.h>0?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function B(m){c.setTimeout(()=>{throw m},0)}function W(){var m=L;let T=null;return m.g&&(T=m.g,m.g=m.g.next,m.g||(m.h=null),T.next=null),T}class J{constructor(){this.h=this.g=null}add(T,A){const b=te.get();b.set(T,A),this.h?this.h.next=b:this.g=b,this.h=b}}var te=new G(()=>new re,m=>m.reset());class re{constructor(){this.next=this.g=this.h=null}set(T,A){this.h=T,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,le=!1,L=new J,D=()=>{const m=Promise.resolve(void 0);ie=()=>{m.then(x)}};function x(){for(var m;m=W();){try{m.h.call(m.g)}catch(A){B(A)}var T=te;T.j(m),T.h<100&&(T.h++,m.next=T.g,T.g=m)}le=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(m,T){this.type=m,this.g=this.target=T,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var P=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var m=!1,T=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const A=()=>{};c.addEventListener("test",A,T),c.removeEventListener("test",A,T)}catch{}return m})();function M(m){return/^[\s\xa0]*$/.test(m)}function ge(m,T){k.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,T)}E(ge,k),ge.prototype.init=function(m,T){const A=this.type=m.type,b=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=T,T=m.relatedTarget,T||(A=="mouseover"?T=m.fromElement:A=="mouseout"&&(T=m.toElement)),this.relatedTarget=T,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&ge.Z.h.call(this)},ge.prototype.h=function(){ge.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var be="closure_listenable_"+(Math.random()*1e6|0),ue=0;function Re(m,T,A,b,H){this.listener=m,this.proxy=null,this.src=T,this.type=A,this.capture=!!b,this.ha=H,this.key=++ue,this.da=this.fa=!1}function Ce(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function et(m,T,A){for(const b in m)T.call(A,m[b],b,m)}function O(m,T){for(const A in m)T.call(void 0,m[A],A,m)}function se(m){const T={};for(const A in m)T[A]=m[A];return T}const Ae="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ee(m,T){let A,b;for(let H=1;H<arguments.length;H++){b=arguments[H];for(A in b)m[A]=b[A];for(let K=0;K<Ae.length;K++)A=Ae[K],Object.prototype.hasOwnProperty.call(b,A)&&(m[A]=b[A])}}function fe(m){this.src=m,this.g={},this.h=0}fe.prototype.add=function(m,T,A,b,H){const K=m.toString();m=this.g[K],m||(m=this.g[K]=[],this.h++);const ae=ke(m,T,b,H);return ae>-1?(T=m[ae],A||(T.fa=!1)):(T=new Re(T,this.src,K,!!b,H),T.fa=A,m.push(T)),T};function Fe(m,T){const A=T.type;if(A in m.g){var b=m.g[A],H=Array.prototype.indexOf.call(b,T,void 0),K;(K=H>=0)&&Array.prototype.splice.call(b,H,1),K&&(Ce(T),m.g[A].length==0&&(delete m.g[A],m.h--))}}function ke(m,T,A,b){for(let H=0;H<m.length;++H){const K=m[H];if(!K.da&&K.listener==T&&K.capture==!!A&&K.ha==b)return H}return-1}var Ot="closure_lm_"+(Math.random()*1e6|0),Ke={};function gt(m,T,A,b,H){if(Array.isArray(T)){for(let K=0;K<T.length;K++)gt(m,T[K],A,b,H);return null}return A=cr(A),m&&m[be]?m.J(T,A,h(b)?!!b.capture:!1,H):at(m,T,A,!1,b,H)}function at(m,T,A,b,H,K){if(!T)throw Error("Invalid event type");const ae=h(H)?!!H.capture:!!H;let De=hi(m);if(De||(m[Ot]=De=new fe(m)),A=De.add(T,A,b,ae,K),A.proxy)return A;if(b=kn(),A.proxy=b,b.src=m,b.listener=A,m.addEventListener)P||(H=ae),H===void 0&&(H=!1),m.addEventListener(T.toString(),b,H);else if(m.attachEvent)m.attachEvent(lr(T.toString()),b);else if(m.addListener&&m.removeListener)m.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return A}function kn(){function m(A){return T.call(m.src,m.listener,A)}const T=ro;return m}function as(m,T,A,b,H){if(Array.isArray(T))for(var K=0;K<T.length;K++)as(m,T[K],A,b,H);else b=h(b)?!!b.capture:!!b,A=cr(A),m&&m[be]?(m=m.i,K=String(T).toString(),K in m.g&&(T=m.g[K],A=ke(T,A,b,H),A>-1&&(Ce(T[A]),Array.prototype.splice.call(T,A,1),T.length==0&&(delete m.g[K],m.h--)))):m&&(m=hi(m))&&(T=m.g[T.toString()],m=-1,T&&(m=ke(T,A,b,H)),(A=m>-1?T[m]:null)&&Ln(A))}function Ln(m){if(typeof m!="number"&&m&&!m.da){var T=m.src;if(T&&T[be])Fe(T.i,m);else{var A=m.type,b=m.proxy;T.removeEventListener?T.removeEventListener(A,b,m.capture):T.detachEvent?T.detachEvent(lr(A),b):T.addListener&&T.removeListener&&T.removeListener(b),(A=hi(T))?(Fe(A,m),A.h==0&&(A.src=null,T[Ot]=null)):Ce(m)}}}function lr(m){return m in Ke?Ke[m]:Ke[m]="on"+m}function ro(m,T){if(m.da)m=!0;else{T=new ge(T,this);const A=m.listener,b=m.ha||m.src;m.fa&&Ln(m),m=A.call(b,T)}return m}function hi(m){return m=m[Ot],m instanceof fe?m:null}var ur="__closure_events_fn_"+(Math.random()*1e9>>>0);function cr(m){return typeof m=="function"?m:(m[ur]||(m[ur]=function(T){return m.handleEvent(T)}),m[ur])}function bt(){N.call(this),this.i=new fe(this),this.M=this,this.G=null}E(bt,N),bt.prototype[be]=!0,bt.prototype.removeEventListener=function(m,T,A,b){as(this,m,T,A,b)};function Ft(m,T){var A,b=m.G;if(b)for(A=[];b;b=b.G)A.push(b);if(m=m.M,b=T.type||T,typeof T=="string")T=new k(T,m);else if(T instanceof k)T.target=T.target||m;else{var H=T;T=new k(b,m),Ee(T,H)}H=!0;let K,ae;if(A)for(ae=A.length-1;ae>=0;ae--)K=T.g=A[ae],H=ls(K,b,!0,T)&&H;if(K=T.g=m,H=ls(K,b,!0,T)&&H,H=ls(K,b,!1,T)&&H,A)for(ae=0;ae<A.length;ae++)K=T.g=A[ae],H=ls(K,b,!1,T)&&H}bt.prototype.N=function(){if(bt.Z.N.call(this),this.i){var m=this.i;for(const T in m.g){const A=m.g[T];for(let b=0;b<A.length;b++)Ce(A[b]);delete m.g[T],m.h--}}this.G=null},bt.prototype.J=function(m,T,A,b){return this.i.add(String(m),T,!1,A,b)},bt.prototype.K=function(m,T,A,b){return this.i.add(String(m),T,!0,A,b)};function ls(m,T,A,b){if(T=m.i.g[String(T)],!T)return!0;T=T.concat();let H=!0;for(let K=0;K<T.length;++K){const ae=T[K];if(ae&&!ae.da&&ae.capture==A){const De=ae.listener,ht=ae.ha||ae.src;ae.fa&&Fe(m.i,ae),H=De.call(ht,b)!==!1&&H}}return H&&!b.defaultPrevented}function Yf(m,T){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=g(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(T)>2147483647?-1:c.setTimeout(m,T||0)}function Tu(m){m.g=Yf(()=>{m.g=null,m.i&&(m.i=!1,Tu(m))},m.l);const T=m.h;m.h=null,m.m.apply(null,T)}class Un extends N{constructor(T,A){super(),this.m=T,this.l=A,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:Tu(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fr(m){N.call(this),this.h=m,this.g={}}E(fr,N);var Ra=[];function ba(m){et(m.g,function(T,A){this.g.hasOwnProperty(A)&&Ln(T)},m),m.g={}}fr.prototype.N=function(){fr.Z.N.call(this),ba(this)},fr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var us=c.JSON.stringify,Kf=c.JSON.parse,Eu=class{stringify(m){return c.JSON.stringify(m,void 0)}parse(m){return c.JSON.parse(m,void 0)}};function Cu(){}function Au(){}var ei={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Xt(){k.call(this,"d")}E(Xt,k);function Ia(){k.call(this,"c")}E(Ia,k);var on={},an=null;function oo(){return an=an||new bt}on.Ia="serverreachability";function Su(m){k.call(this,on.Ia,m)}E(Su,k);function dr(m){const T=oo();Ft(T,new Su(T))}on.STAT_EVENT="statevent";function hr(m,T){k.call(this,on.STAT_EVENT,m),this.stat=T}E(hr,k);function It(m){const T=oo();Ft(T,new hr(T,m))}on.Ja="timingevent";function mi(m,T){k.call(this,on.Ja,m),this.size=T}E(mi,k);function pi(m,T){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){m()},T)}function ti(){this.g=!0}ti.prototype.ua=function(){this.g=!1};function Qf(m,T,A,b,H,K){m.info(function(){if(m.g)if(K){var ae="",De=K.split("&");for(let it=0;it<De.length;it++){var ht=De[it].split("=");if(ht.length>1){const xt=ht[0];ht=ht[1];const bn=xt.split("_");ae=bn.length>=2&&bn[1]=="type"?ae+(xt+"="+ht+"&"):ae+(xt+"=redacted&")}}}else ae=null;else ae=K;return"XMLHTTP REQ ("+b+") [attempt "+H+"]: "+T+`
`+A+`
`+ae})}function xu(m,T,A,b,H,K,ae){m.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+H+"]: "+T+`
`+A+`
`+K+" "+ae})}function Oi(m,T,A,b){m.info(function(){return"XMLHTTP TEXT ("+T+"): "+mr(m,A)+(b?" "+b:"")})}function Na(m,T){m.info(function(){return"TIMEOUT: "+T})}ti.prototype.info=function(){};function mr(m,T){if(!m.g)return T;if(!T)return null;try{const K=JSON.parse(T);if(K){for(m=0;m<K.length;m++)if(Array.isArray(K[m])){var A=K[m];if(!(A.length<2)){var b=A[1];if(Array.isArray(b)&&!(b.length<1)){var H=b[0];if(H!="noop"&&H!="stop"&&H!="close")for(let ae=1;ae<b.length;ae++)b[ae]=""}}}}return us(K)}catch{return T}}var ao={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ma={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Da;function lo(){}E(lo,Cu),lo.prototype.g=function(){return new XMLHttpRequest},Da=new lo;function cs(m){return encodeURIComponent(String(m))}function Zf(m){var T=1;m=m.split(":");const A=[];for(;T>0&&m.length;)A.push(m.shift()),T--;return m.length&&A.push(m.join(":")),A}function Jt(m,T,A,b){this.j=m,this.i=T,this.l=A,this.S=b||1,this.V=new fr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new qt}function qt(){this.i=null,this.g="",this.h=!1}var jt={},gi={};function pr(m,T,A){m.M=1,m.A=yr(Nt(T)),m.u=A,m.R=!0,wu(m,null)}function wu(m,T){m.F=Date.now(),fs(m),m.B=Nt(m.A);var A=m.B,b=m.S;Array.isArray(b)||(b=[String(b)]),fo(A.i,"t",b),m.C=0,A=m.j.L,m.h=new qt,m.g=_o(m.j,A?T:null,!m.u),m.P>0&&(m.O=new Un(g(m.Y,m,m.g),m.P)),T=m.V,A=m.g,b=m.ba;var H="readystatechange";Array.isArray(H)||(H&&(Ra[0]=H.toString()),H=Ra);for(let K=0;K<H.length;K++){const ae=gt(A,H[K],b||T.handleEvent,!1,T.h||T);if(!ae)break;T.g[ae.key]=ae}T=m.J?se(m.J):{},m.u?(m.v||(m.v="POST"),T["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,T)):(m.v="GET",m.g.ea(m.B,m.v,null,T)),dr(),Qf(m.i,m.v,m.B,m.l,m.S,m.u)}Jt.prototype.ba=function(m){m=m.target;const T=this.O;T&&ln(m)==3?T.j():this.Y(m)},Jt.prototype.Y=function(m){try{if(m==this.g)e:{const De=ln(this.g),ht=this.g.ya(),it=this.g.ca();if(!(De<3)&&(De!=3||this.g&&(this.h.h||this.g.la()||Er(this.g)))){this.K||De!=4||ht==7||(ht==8||it<=0?dr(3):dr(2)),vi(this);var T=this.g.ca();this.X=T;var A=Xf(this);if(this.o=T==200,xu(this.i,this.v,this.B,this.l,this.S,De,T),this.o){if(this.U&&!this.L){t:{if(this.g){var b,H=this.g;if((b=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(b)){var K=b;break t}}K=null}if(m=K)Oi(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Tt(this,m);else{this.o=!1,this.m=3,It(12),Tn(this),ni(this);break e}}if(this.R){m=!0;let xt;for(;!this.K&&this.C<A.length;)if(xt=gr(this,A),xt==gi){De==4&&(this.m=4,It(14),m=!1),Oi(this.i,this.l,null,"[Incomplete Response]");break}else if(xt==jt){this.m=4,It(15),Oi(this.i,this.l,A,"[Invalid Chunk]"),m=!1;break}else Oi(this.i,this.l,xt,null),Tt(this,xt);if(Va(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),De!=4||A.length!=0||this.h.h||(this.m=1,It(16),m=!1),this.o=this.o&&m,!m)Oi(this.i,this.l,A,"[Invalid Chunked Response]"),Tn(this),ni(this);else if(A.length>0&&!this.W){this.W=!0;var ae=this.j;ae.g==this&&ae.aa&&!ae.P&&(ae.j.info("Great, no buffering proxy detected. Bytes received: "+A.length),Ka(ae),ae.P=!0,It(11))}}else Oi(this.i,this.l,A,null),Tt(this,A);De==4&&Tn(this),this.o&&!this.K&&(De==4?Qa(this.j,this):(this.o=!1,fs(this)))}else Cr(this.g),T==400&&A.indexOf("Unknown SID")>0?(this.m=3,It(12)):(this.m=0,It(13)),Tn(this),ni(this)}}}catch{}finally{}};function Xf(m){if(!Va(m))return m.g.la();const T=Er(m.g);if(T==="")return"";let A="";const b=T.length,H=ln(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return Tn(m),ni(m),"";m.h.i=new c.TextDecoder}for(let K=0;K<b;K++)m.h.h=!0,A+=m.h.i.decode(T[K],{stream:!(H&&K==b-1)});return T.length=0,m.h.g+=A,m.C=0,m.h.g}function Va(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function gr(m,T){var A=m.C,b=T.indexOf(`
`,A);return b==-1?gi:(A=Number(T.substring(A,b)),isNaN(A)?jt:(b+=1,b+A>T.length?gi:(T=T.slice(b,b+A),m.C=b+A,T)))}Jt.prototype.cancel=function(){this.K=!0,Tn(this)};function fs(m){m.T=Date.now()+m.H,yi(m,m.H)}function yi(m,T){if(m.D!=null)throw Error("WatchDog timer not null");m.D=pi(g(m.aa,m),T)}function vi(m){m.D&&(c.clearTimeout(m.D),m.D=null)}Jt.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(Na(this.i,this.B),this.M!=2&&(dr(),It(17)),Tn(this),this.m=2,ni(this)):yi(this,this.T-m)};function ni(m){m.j.I==0||m.K||Qa(m.j,m)}function Tn(m){vi(m);var T=m.O;T&&typeof T.dispose=="function"&&T.dispose(),m.O=null,ba(m.V),m.g&&(T=m.g,m.g=null,T.abort(),T.dispose())}function Tt(m,T){try{var A=m.j;if(A.I!=0&&(A.g==m||wn(A.h,m))){if(!m.L&&wn(A.h,m)&&A.I==3){try{var b=A.Ba.g.parse(T)}catch{b=null}if(Array.isArray(b)&&b.length==3){var H=b;if(H[0]==0){e:if(!A.v){if(A.g)if(A.g.F+3e3<m.F)vo(A),Ei(A);else break e;Ya(A),It(18)}}else A.xa=H[1],0<A.xa-A.K&&H[2]<37500&&A.F&&A.A==0&&!A.C&&(A.C=pi(g(A.Va,A),6e3));Fi(A.h)<=1&&A.ta&&(A.ta=void 0)}else Bi(A,11)}else if((m.L||A.g==m)&&vo(A),!M(T))for(H=A.Ba.g.parse(T),T=0;T<H.length;T++){let it=H[T];const xt=it[0];if(!(xt<=A.K))if(A.K=xt,it=it[1],A.I==2)if(it[0]=="c"){A.M=it[1],A.ba=it[2];const bn=it[3];bn!=null&&(A.ka=bn,A.j.info("VER="+A.ka));const Ci=it[4];Ci!=null&&(A.za=Ci,A.j.info("SVER="+A.za));const si=it[5];si!=null&&typeof si=="number"&&si>0&&(b=1.5*si,A.O=b,A.j.info("backChannelRequestTimeoutMs_="+b)),b=A;const ri=m.g;if(ri){const oi=ri.g?ri.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oi){var K=b.h;K.g||oi.indexOf("spdy")==-1&&oi.indexOf("quic")==-1&&oi.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(ka(K,K.h),K.h=null))}if(b.G){const Xa=ri.g?ri.g.getResponseHeader("X-HTTP-Session-Id"):null;Xa&&(b.wa=Xa,tt(b.J,b.G,Xa))}}A.I=3,A.l&&A.l.ra(),A.aa&&(A.T=Date.now()-m.F,A.j.info("Handshake RTT: "+A.T+"ms")),b=A;var ae=m;if(b.na=Fu(b,b.L?b.ba:null,b.W),ae.L){La(b.h,ae);var De=ae,ht=b.O;ht&&(De.H=ht),De.D&&(vi(De),fs(De)),b.g=ae}else ku(b);A.i.length>0&&wr(A)}else it[0]!="stop"&&it[0]!="close"||Bi(A,7);else A.I==3&&(it[0]=="stop"||it[0]=="close"?it[0]=="stop"?Bi(A,7):Sr(A):it[0]!="noop"&&A.l&&A.l.qa(it),A.A=0)}}dr(4)}catch{}}var Ru=class{constructor(m,T){this.g=m,this.map=T}};function Pa(m){this.l=m||10,c.PerformanceNavigationTiming?(m=c.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function _i(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Fi(m){return m.h?1:m.g?m.g.size:0}function wn(m,T){return m.h?m.h==T:m.g?m.g.has(T):!1}function ka(m,T){m.g?m.g.add(T):m.h=T}function La(m,T){m.h&&m.h==T?m.h=null:m.g&&m.g.has(T)&&m.g.delete(T)}Pa.prototype.cancel=function(){if(this.i=Ua(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Ua(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let T=m.i;for(const A of m.g.values())T=T.concat(A.G);return T}return I(m.i)}var bu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function uo(m,T){if(m){m=m.split("&");for(let A=0;A<m.length;A++){const b=m[A].indexOf("=");let H,K=null;b>=0?(H=m[A].substring(0,b),K=m[A].substring(b+1)):H=m[A],T(H,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function Rn(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let T;m instanceof Rn?(this.l=m.l,$t(this,m.j),this.o=m.o,this.g=m.g,ds(this,m.u),this.h=m.h,Oa(this,Du(m.i)),this.m=m.m):m&&(T=String(m).match(bu))?(this.l=!1,$t(this,T[1]||"",!0),this.o=Ti(T[2]||""),this.g=Ti(T[3]||"",!0),ds(this,T[4]),this.h=Ti(T[5]||"",!0),Oa(this,T[6]||"",!0),this.m=Ti(T[7]||"")):(this.l=!1,this.i=new ms(null,this.l))}Rn.prototype.toString=function(){const m=[];var T=this.j;T&&m.push(vr(T,co,!0),":");var A=this.g;return(A||T=="file")&&(m.push("//"),(T=this.o)&&m.push(vr(T,co,!0),"@"),m.push(cs(A).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.u,A!=null&&m.push(":",String(A))),(A=this.h)&&(this.g&&A.charAt(0)!="/"&&m.push("/"),m.push(vr(A,A.charAt(0)=="/"?Fa:Iu,!0))),(A=this.i.toString())&&m.push("?",A),(A=this.m)&&m.push("#",vr(A,Nu)),m.join("")},Rn.prototype.resolve=function(m){const T=Nt(this);let A=!!m.j;A?$t(T,m.j):A=!!m.o,A?T.o=m.o:A=!!m.g,A?T.g=m.g:A=m.u!=null;var b=m.h;if(A)ds(T,m.u);else if(A=!!m.h){if(b.charAt(0)!="/")if(this.g&&!this.h)b="/"+b;else{var H=T.h.lastIndexOf("/");H!=-1&&(b=T.h.slice(0,H+1)+b)}if(H=b,H==".."||H==".")b="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){b=H.lastIndexOf("/",0)==0,H=H.split("/");const K=[];for(let ae=0;ae<H.length;){const De=H[ae++];De=="."?b&&ae==H.length&&K.push(""):De==".."?((K.length>1||K.length==1&&K[0]!="")&&K.pop(),b&&ae==H.length&&K.push("")):(K.push(De),b=!0)}b=K.join("/")}else b=H}return A?T.h=b:A=m.i.toString()!=="",A?Oa(T,Du(m.i)):A=!!m.m,A&&(T.m=m.m),T};function Nt(m){return new Rn(m)}function $t(m,T,A){m.j=A?Ti(T,!0):T,m.j&&(m.j=m.j.replace(/:$/,""))}function ds(m,T){if(T){if(T=Number(T),isNaN(T)||T<0)throw Error("Bad port number "+T);m.u=T}else m.u=null}function Oa(m,T,A){T instanceof ms?(m.i=T,ho(m.i,m.l)):(A||(T=vr(T,hs)),m.i=new ms(T,m.l))}function tt(m,T,A){m.i.set(T,A)}function yr(m){return tt(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function Ti(m,T){return m?T?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function vr(m,T,A){return typeof m=="string"?(m=encodeURI(m).replace(T,En),A&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function En(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var co=/[#\/\?@]/g,Iu=/[#\?:]/g,Fa=/[#\?]/g,hs=/[#\?@]/g,Nu=/#/g;function ms(m,T){this.h=this.g=null,this.i=m||null,this.j=!!T}function Cn(m){m.g||(m.g=new Map,m.h=0,m.i&&uo(m.i,function(T,A){m.add(decodeURIComponent(T.replace(/\+/g," ")),A)}))}i=ms.prototype,i.add=function(m,T){Cn(this),this.i=null,m=ps(this,m);let A=this.g.get(m);return A||this.g.set(m,A=[]),A.push(T),this.h+=1,this};function Mu(m,T){Cn(m),T=ps(m,T),m.g.has(T)&&(m.i=null,m.h-=m.g.get(T).length,m.g.delete(T))}function qa(m,T){return Cn(m),T=ps(m,T),m.g.has(T)}i.forEach=function(m,T){Cn(this),this.g.forEach(function(A,b){A.forEach(function(H){m.call(T,H,b,this)},this)},this)};function Ba(m,T){Cn(m);let A=[];if(typeof T=="string")qa(m,T)&&(A=A.concat(m.g.get(ps(m,T))));else for(m=Array.from(m.g.values()),T=0;T<m.length;T++)A=A.concat(m[T]);return A}i.set=function(m,T){return Cn(this),this.i=null,m=ps(this,m),qa(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[T]),this.h+=1,this},i.get=function(m,T){return m?(m=Ba(this,m),m.length>0?String(m[0]):T):T};function fo(m,T,A){Mu(m,T),A.length>0&&(m.i=null,m.g.set(ps(m,T),I(A)),m.h+=A.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],T=Array.from(this.g.keys());for(let b=0;b<T.length;b++){var A=T[b];const H=cs(A);A=Ba(this,A);for(let K=0;K<A.length;K++){let ae=H;A[K]!==""&&(ae+="="+cs(A[K])),m.push(ae)}}return this.i=m.join("&")};function Du(m){const T=new ms;return T.i=m.i,m.g&&(T.g=new Map(m.g),T.h=m.h),T}function ps(m,T){return T=String(T),m.j&&(T=T.toLowerCase()),T}function ho(m,T){T&&!m.j&&(Cn(m),m.i=null,m.g.forEach(function(A,b){const H=b.toLowerCase();b!=H&&(Mu(this,b),fo(this,H,A))},m)),m.j=T}function za(m,T){const A=new ti;if(c.Image){const b=new Image;b.onload=_(mn,A,"TestLoadImage: loaded",!0,T,b),b.onerror=_(mn,A,"TestLoadImage: error",!1,T,b),b.onabort=_(mn,A,"TestLoadImage: abort",!1,T,b),b.ontimeout=_(mn,A,"TestLoadImage: timeout",!1,T,b),c.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=m}else T(!1)}function Ga(m,T){const A=new ti,b=new AbortController,H=setTimeout(()=>{b.abort(),mn(A,"TestPingServer: timeout",!1,T)},1e4);fetch(m,{signal:b.signal}).then(K=>{clearTimeout(H),K.ok?mn(A,"TestPingServer: ok",!0,T):mn(A,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(H),mn(A,"TestPingServer: error",!1,T)})}function mn(m,T,A,b,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),b(A)}catch{}}function gs(){this.g=new Eu}function mo(m){this.i=m.Sb||null,this.h=m.ab||!1}E(mo,Cu),mo.prototype.g=function(){return new ys(this.i,this.h)};function ys(m,T){bt.call(this),this.H=m,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(ys,bt),i=ys.prototype,i.open=function(m,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=T,this.readyState=1,qi(this)},i.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const T={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(T.body=m),(this.H||c).fetch(new Request(this.D,T)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ii(this)),this.readyState=0},i.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,qi(this)),this.g&&(this.readyState=3,qi(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ha(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ha(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}i.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var T=m.value?m.value:new Uint8Array(0);(T=this.B.decode(T,{stream:!m.done}))&&(this.response=this.responseText+=T)}m.done?ii(this):qi(this),this.readyState==3&&Ha(this)}},i.Oa=function(m){this.g&&(this.response=this.responseText=m,ii(this))},i.Na=function(m){this.g&&(this.response=m,ii(this))},i.ga=function(){this.g&&ii(this)};function ii(m){m.readyState=4,m.l=null,m.j=null,m.B=null,qi(m)}i.setRequestHeader=function(m,T){this.A.append(m,T)},i.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],T=this.h.entries();for(var A=T.next();!A.done;)A=A.value,m.push(A[0]+": "+A[1]),A=T.next();return m.join(`\r
`)};function qi(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(ys.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function vs(m){let T="";return et(m,function(A,b){T+=b,T+=":",T+=A,T+=`\r
`}),T}function On(m,T,A){e:{for(b in A){var b=!1;break e}b=!0}b||(A=vs(A),typeof m=="string"?A!=null&&cs(A):tt(m,T,A))}function lt(m){bt.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(lt,bt);var po=/^https?$/i,Vu=["POST","PUT"];i=lt.prototype,i.Fa=function(m){this.H=m},i.ea=function(m,T,A,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);T=T?T.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Da.g(),this.g.onreadystatechange=S(g(this.Ca,this));try{this.B=!0,this.g.open(T,String(m),!0),this.B=!1}catch(K){_r(this,K);return}if(m=A||"",A=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var H in b)A.set(H,b[H]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const K of b.keys())A.set(K,b.get(K));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(A.keys()).find(K=>K.toLowerCase()=="content-type"),H=c.FormData&&m instanceof c.FormData,!(Array.prototype.indexOf.call(Vu,T,void 0)>=0)||b||H||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,ae]of A)this.g.setRequestHeader(K,ae);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(K){_r(this,K)}};function _r(m,T){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=T,m.o=5,Tr(m),Bt(m)}function Tr(m){m.A||(m.A=!0,Ft(m,"complete"),Ft(m,"error"))}i.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,Ft(this,"complete"),Ft(this,"abort"),Bt(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bt(this,!0)),lt.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?$a(this):this.Xa())},i.Xa=function(){$a(this)};function $a(m){if(m.h&&typeof a<"u"){if(m.v&&ln(m)==4)setTimeout(m.Ca.bind(m),0);else if(Ft(m,"readystatechange"),ln(m)==4){m.h=!1;try{const K=m.ca();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var A;if(!(A=T)){var b;if(b=K===0){let ae=String(m.D).match(bu)[1]||null;!ae&&c.self&&c.self.location&&(ae=c.self.location.protocol.slice(0,-1)),b=!po.test(ae?ae.toLowerCase():"")}A=b}if(A)Ft(m,"complete"),Ft(m,"success");else{m.o=6;try{var H=ln(m)>2?m.g.statusText:""}catch{H=""}m.l=H+" ["+m.ca()+"]",Tr(m)}}finally{Bt(m)}}}}function Bt(m,T){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const A=m.g;m.g=null,T||Ft(m,"ready");try{A.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function ln(m){return m.g?m.g.readyState:0}i.ca=function(){try{return ln(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(m){if(this.g){var T=this.g.responseText;return m&&T.indexOf(m)==0&&(T=T.substring(m.length)),Kf(T)}};function Er(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Cr(m){const T={};m=(m.g&&ln(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<m.length;b++){if(M(m[b]))continue;var A=Zf(m[b]);const H=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const K=T[H]||[];T[H]=K,K.push(A)}O(T,function(b){return b.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ar(m,T,A){return A&&A.internalChannelParams&&A.internalChannelParams[m]||T}function go(m){this.za=0,this.i=[],this.j=new ti,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ar("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ar("baseRetryDelayMs",5e3,m),this.Za=Ar("retryDelaySeedMs",1e4,m),this.Ta=Ar("forwardChannelMaxRetries",2,m),this.va=Ar("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new Pa(m&&m.concurrentRequestLimit),this.Ba=new gs,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=go.prototype,i.ka=8,i.I=1,i.connect=function(m,T,A,b){It(0),this.W=m,this.H=T||{},A&&b!==void 0&&(this.H.OSID=A,this.H.OAID=b),this.F=this.X,this.J=Fu(this,null,this.W),wr(this)};function Sr(m){if(xr(m),m.I==3){var T=m.V++,A=Nt(m.J);if(tt(A,"SID",m.M),tt(A,"RID",T),tt(A,"TYPE","terminate"),Rr(m,A),T=new Jt(m,m.j,T),T.M=2,T.A=yr(Nt(A)),A=!1,c.navigator&&c.navigator.sendBeacon)try{A=c.navigator.sendBeacon(T.A.toString(),"")}catch{}!A&&c.Image&&(new Image().src=T.A,A=!0),A||(T.g=_o(T.j,null),T.g.ea(T.A)),T.F=Date.now(),fs(T)}Ou(m)}function Ei(m){m.g&&(Ka(m),m.g.cancel(),m.g=null)}function xr(m){Ei(m),m.v&&(c.clearTimeout(m.v),m.v=null),vo(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&c.clearTimeout(m.m),m.m=null)}function wr(m){if(!_i(m.h)&&!m.m){m.m=!0;var T=m.Ea;ie||D(),le||(ie(),le=!0),L.add(T,m),m.D=0}}function Jf(m,T){return Fi(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=T.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=pi(g(m.Ea,m,T),Uu(m,m.D)),m.D++,!0)}i.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const H=new Jt(this,this.j,m);let K=this.o;if(this.U&&(K?(K=se(K),Ee(K,this.U)):K=this.U),this.u!==null||this.R||(H.J=K,K=null),this.S)e:{for(var T=0,A=0;A<this.i.length;A++){t:{var b=this.i[A];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(T+=b,T>4096){T=A;break e}if(T===4096||A===this.i.length-1){T=A+1;break e}}T=1e3}else T=1e3;T=yo(this,H,T),A=Nt(this.J),tt(A,"RID",m),tt(A,"CVER",22),this.G&&tt(A,"X-HTTP-Session-Id",this.G),Rr(this,A),K&&(this.R?T="headers="+cs(vs(K))+"&"+T:this.u&&On(A,this.u,K)),ka(this.h,H),this.Ra&&tt(A,"TYPE","init"),this.S?(tt(A,"$req",T),tt(A,"SID","null"),H.U=!0,pr(H,A,null)):pr(H,A,T),this.I=2}}else this.I==3&&(m?Pu(this,m):this.i.length==0||_i(this.h)||Pu(this))};function Pu(m,T){var A;T?A=T.l:A=m.V++;const b=Nt(m.J);tt(b,"SID",m.M),tt(b,"RID",A),tt(b,"AID",m.K),Rr(m,b),m.u&&m.o&&On(b,m.u,m.o),A=new Jt(m,m.j,A,m.D+1),m.u===null&&(A.J=m.o),T&&(m.i=T.G.concat(m.i)),T=yo(m,A,1e3),A.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),ka(m.h,A),pr(A,b,T)}function Rr(m,T){m.H&&et(m.H,function(A,b){tt(T,b,A)}),m.l&&et({},function(A,b){tt(T,b,A)})}function yo(m,T,A){A=Math.min(m.i.length,A);const b=m.l?g(m.l.Ka,m.l,m):null;e:{var H=m.i;let De=-1;for(;;){const ht=["count="+A];De==-1?A>0?(De=H[0].g,ht.push("ofs="+De)):De=0:ht.push("ofs="+De);let it=!0;for(let xt=0;xt<A;xt++){var K=H[xt].g;const bn=H[xt].map;if(K-=De,K<0)De=Math.max(0,H[xt].g-100),it=!1;else try{K="req"+K+"_"||"";try{var ae=bn instanceof Map?bn:Object.entries(bn);for(const[Ci,si]of ae){let ri=si;h(si)&&(ri=us(si)),ht.push(K+Ci+"="+encodeURIComponent(ri))}}catch(Ci){throw ht.push(K+"type="+encodeURIComponent("_badmap")),Ci}}catch{b&&b(bn)}}if(it){ae=ht.join("&");break e}}ae=void 0}return m=m.i.splice(0,A),T.G=m,ae}function ku(m){if(!m.g&&!m.v){m.Y=1;var T=m.Da;ie||D(),le||(ie(),le=!0),L.add(T,m),m.A=0}}function Ya(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=pi(g(m.Da,m),Uu(m,m.A)),m.A++,!0)}i.Da=function(){if(this.v=null,Lu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=pi(g(this.Wa,this),m)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,It(10),Ei(this),Lu(this))};function Ka(m){m.B!=null&&(c.clearTimeout(m.B),m.B=null)}function Lu(m){m.g=new Jt(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var T=Nt(m.na);tt(T,"RID","rpc"),tt(T,"SID",m.M),tt(T,"AID",m.K),tt(T,"CI",m.F?"0":"1"),!m.F&&m.ia&&tt(T,"TO",m.ia),tt(T,"TYPE","xmlhttp"),Rr(m,T),m.u&&m.o&&On(T,m.u,m.o),m.O&&(m.g.H=m.O);var A=m.g;m=m.ba,A.M=1,A.A=yr(Nt(T)),A.u=null,A.R=!0,wu(A,m)}i.Va=function(){this.C!=null&&(this.C=null,Ei(this),Ya(this),It(19))};function vo(m){m.C!=null&&(c.clearTimeout(m.C),m.C=null)}function Qa(m,T){var A=null;if(m.g==T){vo(m),Ka(m),m.g=null;var b=2}else if(wn(m.h,T))A=T.G,La(m.h,T),b=1;else return;if(m.I!=0){if(T.o)if(b==1){A=T.u?T.u.length:0,T=Date.now()-T.F;var H=m.D;b=oo(),Ft(b,new mi(b,A)),wr(m)}else ku(m);else if(H=T.m,H==3||H==0&&T.X>0||!(b==1&&Jf(m,T)||b==2&&Ya(m)))switch(A&&A.length>0&&(T=m.h,T.i=T.i.concat(A)),H){case 1:Bi(m,5);break;case 4:Bi(m,10);break;case 3:Bi(m,6);break;default:Bi(m,2)}}}function Uu(m,T){let A=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(A*=2),A*T}function Bi(m,T){if(m.j.info("Error code "+T),T==2){var A=g(m.bb,m),b=m.Ua;const H=!b;b=new Rn(b||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||$t(b,"https"),yr(b),H?za(b.toString(),A):Ga(b.toString(),A)}else It(2);m.I=0,m.l&&m.l.pa(T),Ou(m),xr(m)}i.bb=function(m){m?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function Ou(m){if(m.I=0,m.ja=[],m.l){const T=Ua(m.h);(T.length!=0||m.i.length!=0)&&(U(m.ja,T),U(m.ja,m.i),m.h.i.length=0,I(m.i),m.i.length=0),m.l.oa()}}function Fu(m,T,A){var b=A instanceof Rn?Nt(A):new Rn(A);if(b.g!="")T&&(b.g=T+"."+b.g),ds(b,b.u);else{var H=c.location;b=H.protocol,T=T?T+"."+H.hostname:H.hostname,H=+H.port;const K=new Rn(null);b&&$t(K,b),T&&(K.g=T),H&&ds(K,H),A&&(K.h=A),b=K}return A=m.G,T=m.wa,A&&T&&tt(b,A,T),tt(b,"VER",m.ka),Rr(m,b),b}function _o(m,T,A){if(T&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return T=m.Aa&&!m.ma?new lt(new mo({ab:A})):new lt(m.ma),T.Fa(m.L),T}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function qu(){}i=qu.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function To(){}To.prototype.g=function(m,T){return new pn(m,T)};function pn(m,T){bt.call(this),this.g=new go(T),this.l=m,this.h=T&&T.messageUrlParams||null,m=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(m?m["X-WebChannel-Content-Type"]=T.messageContentType:m={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.sa&&(m?m["X-WebChannel-Client-Profile"]=T.sa:m={"X-WebChannel-Client-Profile":T.sa}),this.g.U=m,(m=T&&T.Qb)&&!M(m)&&(this.g.u=m),this.A=T&&T.supportsCrossDomainXhr||!1,this.v=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!M(T)&&(this.g.G=T,m=this.h,m!==null&&T in m&&(m=this.h,T in m&&delete m[T])),this.j=new _s(this)}E(pn,bt),pn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},pn.prototype.close=function(){Sr(this.g)},pn.prototype.o=function(m){var T=this.g;if(typeof m=="string"){var A={};A.__data__=m,m=A}else this.v&&(A={},A.__data__=us(m),m=A);T.i.push(new Ru(T.Ya++,m)),T.I==3&&wr(T)},pn.prototype.N=function(){this.g.l=null,delete this.j,Sr(this.g),delete this.g,pn.Z.N.call(this)};function Za(m){Xt.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var T=m.__sm__;if(T){e:{for(const A in T){m=A;break e}m=void 0}(this.i=m)&&(m=this.i,T=T!==null&&m in T?T[m]:void 0),this.data=T}else this.data=m}E(Za,Xt);function Bu(){Ia.call(this),this.status=1}E(Bu,Ia);function _s(m){this.g=m}E(_s,qu),_s.prototype.ra=function(){Ft(this.g,"a")},_s.prototype.qa=function(m){Ft(this.g,new Za(m))},_s.prototype.pa=function(m){Ft(this.g,new Bu)},_s.prototype.oa=function(){Ft(this.g,"b")},To.prototype.createWebChannel=To.prototype.g,pn.prototype.send=pn.prototype.o,pn.prototype.open=pn.prototype.m,pn.prototype.close=pn.prototype.close,PE=function(){return new To},VE=function(){return oo()},DE=on,Rm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ao.NO_ERROR=0,ao.TIMEOUT=8,ao.HTTP_ERROR=6,Zc=ao,Ma.COMPLETE="complete",ME=Ma,Au.EventType=ei,ei.OPEN="a",ei.CLOSE="b",ei.ERROR="c",ei.MESSAGE="d",bt.prototype.listen=bt.prototype.J,zl=Au,lt.prototype.listenOnce=lt.prototype.K,lt.prototype.getLastError=lt.prototype.Ha,lt.prototype.getLastErrorCode=lt.prototype.ya,lt.prototype.getStatus=lt.prototype.ca,lt.prototype.getResponseJson=lt.prototype.La,lt.prototype.getResponseText=lt.prototype.la,lt.prototype.send=lt.prototype.ea,lt.prototype.setWithCredentials=lt.prototype.Fa,NE=lt}).apply(typeof Bc<"u"?Bc:typeof self<"u"?self:typeof window<"u"?window:{});const GT="@firebase/firestore",HT="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}dn.UNAUTHENTICATED=new dn(null),dn.GOOGLE_CREDENTIALS=new dn("google-credentials-uid"),dn.FIRST_PARTY=new dn("first-party-uid"),dn.MOCK_USER=new dn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ea="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo=new CE("@firebase/firestore");function Zo(){return eo.logLevel}function he(i,...e){if(eo.logLevel<=Xe.DEBUG){const t=e.map(np);eo.debug(`Firestore (${Ea}): ${i}`,...t)}}function rs(i,...e){if(eo.logLevel<=Xe.ERROR){const t=e.map(np);eo.error(`Firestore (${Ea}): ${i}`,...t)}}function da(i,...e){if(eo.logLevel<=Xe.WARN){const t=e.map(np);eo.warn(`Firestore (${Ea}): ${i}`,...t)}}function np(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(i,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,kE(i,n,t)}function kE(i,e,t){let n=`FIRESTORE (${Ea}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw rs(n),new Error(n)}function nt(i,e,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,i||kE(e,r,n)}function Pe(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends Ta{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(dn.UNAUTHENTICATED)))}shutdown(){}}class gV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class yV{constructor(e){this.t=e,this.currentUser=dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){nt(this.o===void 0,42304);let n=this.i;const r=y=>this.i!==n?(n=this.i,t(y)):Promise.resolve();let a=new Ks;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Ks,e.enqueueRetryable((()=>r(this.currentUser)))};const c=()=>{const y=a;e.enqueueRetryable((async()=>{await y.promise,await r(this.currentUser)}))},h=y=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((y=>h(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?h(y):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ks)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((n=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(nt(typeof n.accessToken=="string",31837,{l:n}),new LE(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return nt(e===null||typeof e=="string",2055,{h:e}),new dn(e)}}class vV{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=dn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class _V{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new vV(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(dn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class $T{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TV{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,jD(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){nt(this.o===void 0,3512);const n=a=>{a.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.m;return this.m=a.token,he("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>n(a)))};const r=a=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>r(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?r(a):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new $T(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(nt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new $T(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EV(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<i;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const r=EV(40);for(let a=0;a<r.length;++a)n.length<20&&r[a]<t&&(n+=e.charAt(r[a]%62))}return n}}function ze(i,e){return i<e?-1:i>e?1:0}function bm(i,e){const t=Math.min(i.length,e.length);for(let n=0;n<t;n++){const r=i.charAt(n),a=e.charAt(n);if(r!==a)return Wh(r)===Wh(a)?ze(r,a):Wh(r)?1:-1}return ze(i.length,e.length)}const CV=55296,AV=57343;function Wh(i){const e=i.charCodeAt(0);return e>=CV&&e<=AV}function ha(i,e,t){return i.length===e.length&&i.every(((n,r)=>t(n,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT="__name__";class bi{constructor(e,t,n){t===void 0?t=0:t>e.length&&xe(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&xe(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return bi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof bi?e.forEach((n=>{t.push(n)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const a=bi.compareSegments(e.get(r),t.get(r));if(a!==0)return a}return ze(e.length,t.length)}static compareSegments(e,t){const n=bi.isNumericId(e),r=bi.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?bi.extractNumericId(e).compare(bi.extractNumericId(t)):bm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ys.fromString(e.substring(4,e.length-2))}}class ft extends bi{construct(e,t,n){return new ft(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new ce(X.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((r=>r.length>0)))}return new ft(t)}static emptyPath(){return new ft([])}}const SV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class sn extends bi{construct(e,t,n){return new sn(e,t,n)}static isValidIdentifier(e){return SV.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),sn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===YT}static keyField(){return new sn([YT])}static fromServerFormat(e){const t=[];let n="",r=0;const a=()=>{if(n.length===0)throw new ce(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let c=!1;for(;r<e.length;){const h=e[r];if(h==="\\"){if(r+1===e.length)throw new ce(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[r+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new ce(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=y,r+=2}else h==="`"?(c=!c,r++):h!=="."||c?(n+=h,r++):(a(),r++)}if(a(),c)throw new ce(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new sn(t)}static emptyPath(){return new sn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(ft.fromString(e))}static fromName(e){return new Te(ft.fromString(e).popFirst(5))}static empty(){return new Te(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ft.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new ft(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UE(i,e,t){if(!t)throw new ce(X.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function xV(i,e,t,n){if(e===!0&&n===!0)throw new ce(X.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function KT(i){if(!Te.isDocumentKey(i))throw new ce(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function QT(i){if(Te.isDocumentKey(i))throw new ce(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function OE(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function wf(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":xe(12329,{type:typeof i})}function Jn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ce(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=wf(i);throw new ce(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(i,e){const t={typeString:i};return e&&(t.value=e),t}function hu(i,e){if(!OE(i))throw new ce(X.INVALID_ARGUMENT,"JSON must be an object");let t;for(const n in e)if(e[n]){const r=e[n].typeString,a="value"in e[n]?{value:e[n].value}:void 0;if(!(n in i)){t=`JSON missing required field: '${n}'`;break}const c=i[n];if(r&&typeof c!==r){t=`JSON field '${n}' must be a ${r}.`;break}if(a!==void 0&&c!==a.value){t=`Expected '${n}' field to equal '${a.value}'`;break}}if(t)throw new ce(X.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT=-62135596800,XT=1e6;class pt{static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*XT);return new pt(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ce(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ce(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ZT)throw new ce(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/XT}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:pt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(hu(e,pt._jsonSchema))return new pt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ZT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}pt._jsonSchemaVersion="firestore/timestamp/1.0",pt._jsonSchema={type:Ut("string",pt._jsonSchemaVersion),seconds:Ut("number"),nanoseconds:Ut("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new pt(0,0))}static max(){return new Ne(new pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nu=-1;function wV(i,e){const t=i.toTimestamp().seconds,n=i.toTimestamp().nanoseconds+1,r=Ne.fromTimestamp(n===1e9?new pt(t+1,0):new pt(t,n));return new Xs(r,Te.empty(),e)}function RV(i){return new Xs(i.readTime,i.key,nu)}class Xs{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Xs(Ne.min(),Te.empty(),nu)}static max(){return new Xs(Ne.max(),Te.empty(),nu)}}function bV(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=Te.comparator(i.documentKey,e.documentKey),t!==0?t:ze(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class NV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ca(i){if(i.code!==X.FAILED_PRECONDITION||i.message!==IV)throw i;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ee(((n,r)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,r)},this.catchCallback=a=>{this.wrapFailure(t,a).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ee?t:ee.resolve(t)}catch(t){return ee.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ee.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ee.reject(t)}static resolve(e){return new ee(((t,n)=>{t(e)}))}static reject(e){return new ee(((t,n)=>{n(e)}))}static waitFor(e){return new ee(((t,n)=>{let r=0,a=0,c=!1;e.forEach((h=>{++r,h.next((()=>{++a,c&&a===r&&t()}),(y=>n(y)))})),c=!0,a===r&&t()}))}static or(e){let t=ee.resolve(!1);for(const n of e)t=t.next((r=>r?ee.resolve(r):n()));return t}static forEach(e,t){const n=[];return e.forEach(((r,a)=>{n.push(t.call(this,r,a))})),this.waitFor(n)}static mapArray(e,t){return new ee(((n,r)=>{const a=e.length,c=new Array(a);let h=0;for(let y=0;y<a;y++){const g=y;t(e[g]).next((_=>{c[g]=_,++h,h===a&&n(c)}),(_=>r(_)))}}))}static doWhile(e,t){return new ee(((n,r)=>{const a=()=>{e()===!0?t().next((()=>{a()}),r):n()};a()}))}}function MV(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Aa(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>t.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Rf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp=-1;function bf(i){return i==null}function mf(i){return i===0&&1/i==-1/0}function DV(i){return typeof i=="number"&&Number.isInteger(i)&&!mf(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE="";function VV(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=JT(e)),e=PV(i.get(t),e);return JT(e)}function PV(i,e){let t=e;const n=i.length;for(let r=0;r<n;r++){const a=i.charAt(r);switch(a){case"\0":t+="";break;case FE:t+="";break;default:t+=a}}return t}function JT(i){return i+FE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function rr(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function qE(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,t){this.comparator=e,this.root=t||nn.EMPTY}insert(e,t){return new _t(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,nn.BLACK,null,null))}remove(e){return new _t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zc(this.root,e,this.comparator,!1)}getReverseIterator(){return new zc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zc(this.root,e,this.comparator,!0)}}class zc{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?n(e.key,t):1,t&&r&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nn{constructor(e,t,n,r,a){this.key=e,this.value=t,this.color=n??nn.RED,this.left=r??nn.EMPTY,this.right=a??nn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,a){return new nn(e??this.key,t??this.value,n??this.color,r??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const a=n(e,r.key);return r=a<0?r.copy(null,null,null,r.left.insert(e,t,n),null):a===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return nn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return nn.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw xe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw xe(27949);return e+(this.isRed()?0:1)}}nn.EMPTY=null,nn.RED=!0,nn.BLACK=!1;nn.EMPTY=new class{constructor(){this.size=0}get key(){throw xe(57766)}get value(){throw xe(16141)}get color(){throw xe(16727)}get left(){throw xe(29726)}get right(){throw xe(36894)}copy(e,t,n,r,a){return this}insert(e,t,n){return new nn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.comparator=e,this.data=new _t(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new WT(this.data.getIterator())}getIteratorFrom(e){return new WT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((n=>{t=t.add(n)})),t}isEqual(e){if(!(e instanceof Ht)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,a=n.getNext().key;if(this.comparator(r,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ht(this.comparator);return t.data=e,t}}class WT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.fields=e,e.sort(sn.comparator)}static empty(){return new Pn([])}unionWith(e){let t=new Ht(sn.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Pn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ha(this.fields,e.fields,((t,n)=>t.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new BE("Invalid base64 string: "+a):a}})(e);return new rn(t)}static fromUint8Array(e){const t=(function(r){let a="";for(let c=0;c<r.length;++c)a+=String.fromCharCode(r[c]);return a})(e);return new rn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rn.EMPTY_BYTE_STRING=new rn("");const kV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Js(i){if(nt(!!i,39018),typeof i=="string"){let e=0;const t=kV.exec(i);if(nt(!!t,46558,{timestamp:i}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const n=new Date(i);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Rt(i.seconds),nanos:Rt(i.nanos)}}function Rt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function js(i){return typeof i=="string"?rn.fromBase64String(i):rn.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zE="server_timestamp",GE="__type__",HE="__previous_value__",$E="__local_write_time__";function rp(i){var t,n;return((n=(((t=i==null?void 0:i.mapValue)==null?void 0:t.fields)||{})[GE])==null?void 0:n.stringValue)===zE}function If(i){const e=i.mapValue.fields[HE];return rp(e)?If(e):e}function iu(i){const e=Js(i.mapValue.fields[$E].timestampValue);return new pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV{constructor(e,t,n,r,a,c,h,y,g,_){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=y,this.useFetchStreams=g,this.isUsingEmulator=_}}const pf="(default)";class su{constructor(e,t){this.projectId=e,this.database=t||pf}static empty(){return new su("","")}get isDefaultDatabase(){return this.database===pf}isEqual(e){return e instanceof su&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE="__type__",UV="__max__",Gc={mapValue:{}},KE="__vector__",gf="value";function Ws(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?rp(i)?4:FV(i)?9007199254740991:OV(i)?10:11:xe(28295,{value:i})}function Ui(i,e){if(i===e)return!0;const t=Ws(i);if(t!==Ws(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return iu(i).isEqual(iu(e));case 3:return(function(r,a){if(typeof r.timestampValue=="string"&&typeof a.timestampValue=="string"&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const c=Js(r.timestampValue),h=Js(a.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(r,a){return js(r.bytesValue).isEqual(js(a.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(r,a){return Rt(r.geoPointValue.latitude)===Rt(a.geoPointValue.latitude)&&Rt(r.geoPointValue.longitude)===Rt(a.geoPointValue.longitude)})(i,e);case 2:return(function(r,a){if("integerValue"in r&&"integerValue"in a)return Rt(r.integerValue)===Rt(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const c=Rt(r.doubleValue),h=Rt(a.doubleValue);return c===h?mf(c)===mf(h):isNaN(c)&&isNaN(h)}return!1})(i,e);case 9:return ha(i.arrayValue.values||[],e.arrayValue.values||[],Ui);case 10:case 11:return(function(r,a){const c=r.mapValue.fields||{},h=a.mapValue.fields||{};if(jT(c)!==jT(h))return!1;for(const y in c)if(c.hasOwnProperty(y)&&(h[y]===void 0||!Ui(c[y],h[y])))return!1;return!0})(i,e);default:return xe(52216,{left:i})}}function ru(i,e){return(i.values||[]).find((t=>Ui(t,e)))!==void 0}function ma(i,e){if(i===e)return 0;const t=Ws(i),n=Ws(e);if(t!==n)return ze(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return ze(i.booleanValue,e.booleanValue);case 2:return(function(a,c){const h=Rt(a.integerValue||a.doubleValue),y=Rt(c.integerValue||c.doubleValue);return h<y?-1:h>y?1:h===y?0:isNaN(h)?isNaN(y)?0:-1:1})(i,e);case 3:return e0(i.timestampValue,e.timestampValue);case 4:return e0(iu(i),iu(e));case 5:return bm(i.stringValue,e.stringValue);case 6:return(function(a,c){const h=js(a),y=js(c);return h.compareTo(y)})(i.bytesValue,e.bytesValue);case 7:return(function(a,c){const h=a.split("/"),y=c.split("/");for(let g=0;g<h.length&&g<y.length;g++){const _=ze(h[g],y[g]);if(_!==0)return _}return ze(h.length,y.length)})(i.referenceValue,e.referenceValue);case 8:return(function(a,c){const h=ze(Rt(a.latitude),Rt(c.latitude));return h!==0?h:ze(Rt(a.longitude),Rt(c.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return t0(i.arrayValue,e.arrayValue);case 10:return(function(a,c){var S,I,U,G;const h=a.fields||{},y=c.fields||{},g=(S=h[gf])==null?void 0:S.arrayValue,_=(I=y[gf])==null?void 0:I.arrayValue,E=ze(((U=g==null?void 0:g.values)==null?void 0:U.length)||0,((G=_==null?void 0:_.values)==null?void 0:G.length)||0);return E!==0?E:t0(g,_)})(i.mapValue,e.mapValue);case 11:return(function(a,c){if(a===Gc.mapValue&&c===Gc.mapValue)return 0;if(a===Gc.mapValue)return 1;if(c===Gc.mapValue)return-1;const h=a.fields||{},y=Object.keys(h),g=c.fields||{},_=Object.keys(g);y.sort(),_.sort();for(let E=0;E<y.length&&E<_.length;++E){const S=bm(y[E],_[E]);if(S!==0)return S;const I=ma(h[y[E]],g[_[E]]);if(I!==0)return I}return ze(y.length,_.length)})(i.mapValue,e.mapValue);default:throw xe(23264,{he:t})}}function e0(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return ze(i,e);const t=Js(i),n=Js(e),r=ze(t.seconds,n.seconds);return r!==0?r:ze(t.nanos,n.nanos)}function t0(i,e){const t=i.values||[],n=e.values||[];for(let r=0;r<t.length&&r<n.length;++r){const a=ma(t[r],n[r]);if(a)return a}return ze(t.length,n.length)}function pa(i){return Im(i)}function Im(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(t){const n=Js(t);return`time(${n.seconds},${n.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(t){return js(t).toBase64()})(i.bytesValue):"referenceValue"in i?(function(t){return Te.fromName(t).toString()})(i.referenceValue):"geoPointValue"in i?(function(t){return`geo(${t.latitude},${t.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(t){let n="[",r=!0;for(const a of t.values||[])r?r=!1:n+=",",n+=Im(a);return n+"]"})(i.arrayValue):"mapValue"in i?(function(t){const n=Object.keys(t.fields||{}).sort();let r="{",a=!0;for(const c of n)a?a=!1:r+=",",r+=`${c}:${Im(t.fields[c])}`;return r+"}"})(i.mapValue):xe(61005,{value:i})}function Xc(i){switch(Ws(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=If(i);return e?16+Xc(e):16;case 5:return 2*i.stringValue.length;case 6:return js(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((r,a)=>r+Xc(a)),0)})(i.arrayValue);case 10:case 11:return(function(n){let r=0;return rr(n.fields,((a,c)=>{r+=a.length+Xc(c)})),r})(i.mapValue);default:throw xe(13486,{value:i})}}function n0(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Nm(i){return!!i&&"integerValue"in i}function op(i){return!!i&&"arrayValue"in i}function i0(i){return!!i&&"nullValue"in i}function s0(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Jc(i){return!!i&&"mapValue"in i}function OV(i){var t,n;return((n=(((t=i==null?void 0:i.mapValue)==null?void 0:t.fields)||{})[YE])==null?void 0:n.stringValue)===KE}function Ql(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return rr(i.mapValue.fields,((t,n)=>e.mapValue.fields[t]=Ql(n))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ql(i.arrayValue.values[t]);return e}return{...i}}function FV(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===UV}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.value=e}static empty(){return new xn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Jc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ql(t)}setAll(e){let t=sn.emptyPath(),n={},r=[];e.forEach(((c,h)=>{if(!t.isImmediateParentOf(h)){const y=this.getFieldsMap(t);this.applyChanges(y,n,r),n={},r=[],t=h.popLast()}c?n[h.lastSegment()]=Ql(c):r.push(h.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,n,r)}delete(e){const t=this.field(e.popLast());Jc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ui(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Jc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){rr(t,((r,a)=>e[r]=a));for(const r of n)delete e[r]}clone(){return new xn(Ql(this.value))}}function QE(i){const e=[];return rr(i.fields,((t,n)=>{const r=new sn([t]);if(Jc(n)){const a=QE(n.mapValue).fields;if(a.length===0)e.push(r);else for(const c of a)e.push(r.child(c))}else e.push(r)})),new Pn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e,t,n,r,a,c,h){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=a,this.data=c,this.documentState=h}static newInvalidDocument(e){return new hn(e,0,Ne.min(),Ne.min(),Ne.min(),xn.empty(),0)}static newFoundDocument(e,t,n,r){return new hn(e,1,t,Ne.min(),n,r,0)}static newNoDocument(e,t){return new hn(e,2,t,Ne.min(),Ne.min(),xn.empty(),0)}static newUnknownDocument(e,t){return new hn(e,3,t,Ne.min(),Ne.min(),xn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof hn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new hn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e,t){this.position=e,this.inclusive=t}}function r0(i,e,t){let n=0;for(let r=0;r<i.position.length;r++){const a=e[r],c=i.position[r];if(a.field.isKeyField()?n=Te.comparator(Te.fromName(c.referenceValue),t.key):n=ma(c,t.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function o0(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Ui(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e,t="asc"){this.field=e,this.dir=t}}function qV(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{}class Lt extends ZE{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new zV(e,t,n):t==="array-contains"?new $V(e,n):t==="in"?new YV(e,n):t==="not-in"?new KV(e,n):t==="array-contains-any"?new QV(e,n):new Lt(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new GV(e,n):new HV(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ma(t,this.value)):t!==null&&Ws(this.value)===Ws(t)&&this.matchesComparison(ma(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class di extends ZE{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new di(e,t)}matches(e){return XE(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function XE(i){return i.op==="and"}function JE(i){return BV(i)&&XE(i)}function BV(i){for(const e of i.filters)if(e instanceof di)return!1;return!0}function Mm(i){if(i instanceof Lt)return i.field.canonicalString()+i.op.toString()+pa(i.value);if(JE(i))return i.filters.map((e=>Mm(e))).join(",");{const e=i.filters.map((t=>Mm(t))).join(",");return`${i.op}(${e})`}}function jE(i,e){return i instanceof Lt?(function(n,r){return r instanceof Lt&&n.op===r.op&&n.field.isEqual(r.field)&&Ui(n.value,r.value)})(i,e):i instanceof di?(function(n,r){return r instanceof di&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce(((a,c,h)=>a&&jE(c,r.filters[h])),!0):!1})(i,e):void xe(19439)}function WE(i){return i instanceof Lt?(function(t){return`${t.field.canonicalString()} ${t.op} ${pa(t.value)}`})(i):i instanceof di?(function(t){return t.op.toString()+" {"+t.getFilters().map(WE).join(" ,")+"}"})(i):"Filter"}class zV extends Lt{constructor(e,t,n){super(e,t,n),this.key=Te.fromName(n.referenceValue)}matches(e){const t=Te.comparator(e.key,this.key);return this.matchesComparison(t)}}class GV extends Lt{constructor(e,t){super(e,"in",t),this.keys=eC("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class HV extends Lt{constructor(e,t){super(e,"not-in",t),this.keys=eC("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function eC(i,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((n=>Te.fromName(n.referenceValue)))}class $V extends Lt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return op(t)&&ru(t.arrayValue,this.value)}}class YV extends Lt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ru(this.value.arrayValue,t)}}class KV extends Lt{constructor(e,t){super(e,"not-in",t)}matches(e){if(ru(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ru(this.value.arrayValue,t)}}class QV extends Lt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!op(t)||!t.arrayValue.values)&&t.arrayValue.values.some((n=>ru(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(e,t=null,n=[],r=[],a=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=a,this.startAt=c,this.endAt=h,this.Te=null}}function a0(i,e=null,t=[],n=[],r=null,a=null,c=null){return new ZV(i,e,t,n,r,a,c)}function ap(i){const e=Pe(i);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((n=>Mm(n))).join(","),t+="|ob:",t+=e.orderBy.map((n=>(function(a){return a.field.canonicalString()+a.dir})(n))).join(","),bf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((n=>pa(n))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((n=>pa(n))).join(",")),e.Te=t}return e.Te}function lp(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!qV(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!jE(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!o0(i.startAt,e.startAt)&&o0(i.endAt,e.endAt)}function Dm(i){return Te.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,t=null,n=[],r=[],a=null,c="F",h=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=a,this.limitType=c,this.startAt=h,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function XV(i,e,t,n,r,a,c,h){return new Sa(i,e,t,n,r,a,c,h)}function Nf(i){return new Sa(i)}function l0(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function tC(i){return i.collectionGroup!==null}function Zl(i){const e=Pe(i);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new Ht(sn.comparator);return c.filters.forEach((y=>{y.getFlattenedFilters().forEach((g=>{g.isInequality()&&(h=h.add(g.field))}))})),h})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new ou(a,n))})),t.has(sn.keyField().canonicalString())||e.Ie.push(new ou(sn.keyField(),n))}return e.Ie}function Mi(i){const e=Pe(i);return e.Ee||(e.Ee=JV(e,Zl(i))),e.Ee}function JV(i,e){if(i.limitType==="F")return a0(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((r=>{const a=r.dir==="desc"?"asc":"desc";return new ou(r.field,a)}));const t=i.endAt?new yf(i.endAt.position,i.endAt.inclusive):null,n=i.startAt?new yf(i.startAt.position,i.startAt.inclusive):null;return a0(i.path,i.collectionGroup,e,i.filters,i.limit,t,n)}}function Vm(i,e){const t=i.filters.concat([e]);return new Sa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function Pm(i,e,t){return new Sa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Mf(i,e){return lp(Mi(i),Mi(e))&&i.limitType===e.limitType}function nC(i){return`${ap(Mi(i))}|lt:${i.limitType}`}function Xo(i){return`Query(target=${(function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map((r=>WE(r))).join(", ")}]`),bf(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map((r=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(r))).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((r=>pa(r))).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((r=>pa(r))).join(",")),`Target(${n})`})(Mi(i))}; limitType=${i.limitType})`}function Df(i,e){return e.isFoundDocument()&&(function(n,r){const a=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):Te.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)})(i,e)&&(function(n,r){for(const a of Zl(n))if(!a.field.isKeyField()&&r.data.field(a.field)===null)return!1;return!0})(i,e)&&(function(n,r){for(const a of n.filters)if(!a.matches(r))return!1;return!0})(i,e)&&(function(n,r){return!(n.startAt&&!(function(c,h,y){const g=r0(c,h,y);return c.inclusive?g<=0:g<0})(n.startAt,Zl(n),r)||n.endAt&&!(function(c,h,y){const g=r0(c,h,y);return c.inclusive?g>=0:g>0})(n.endAt,Zl(n),r))})(i,e)}function jV(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function iC(i){return(e,t)=>{let n=!1;for(const r of Zl(i)){const a=WV(r,e,t);if(a!==0)return a;n=n||r.field.isKeyField()}return 0}}function WV(i,e,t){const n=i.field.isKeyField()?Te.comparator(e.key,t.key):(function(a,c,h){const y=c.data.field(a),g=h.data.field(a);return y!==null&&g!==null?ma(y,g):xe(42886)})(i.field,e,t);switch(i.dir){case"asc":return n;case"desc":return-1*n;default:return xe(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[r,a]of n)if(this.equalsFn(r,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return void(r[a]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return n.length===1?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){rr(this.inner,((t,n)=>{for(const[r,a]of n)e(r,a)}))}isEmpty(){return qE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e4=new _t(Te.comparator);function os(){return e4}const sC=new _t(Te.comparator);function Gl(...i){let e=sC;for(const t of i)e=e.insert(t.key,t);return e}function rC(i){let e=sC;return i.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function Qr(){return Xl()}function oC(){return Xl()}function Xl(){return new no((i=>i.toString()),((i,e)=>i.isEqual(e)))}const t4=new _t(Te.comparator),n4=new Ht(Te.comparator);function Ge(...i){let e=n4;for(const t of i)e=e.add(t);return e}const i4=new Ht(ze);function s4(){return i4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mf(e)?"-0":e}}function aC(i){return{integerValue:""+i}}function lC(i,e){return DV(e)?aC(e):up(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(){this._=void 0}}function r4(i,e,t){return i instanceof au?(function(r,a){const c={fields:{[GE]:{stringValue:zE},[$E]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&rp(a)&&(a=If(a)),a&&(c.fields[HE]=a),{mapValue:c}})(t,e):i instanceof lu?cC(i,e):i instanceof uu?fC(i,e):(function(r,a){const c=uC(r,a),h=u0(c)+u0(r.Ae);return Nm(c)&&Nm(r.Ae)?aC(h):up(r.serializer,h)})(i,e)}function o4(i,e,t){return i instanceof lu?cC(i,e):i instanceof uu?fC(i,e):t}function uC(i,e){return i instanceof cu?(function(n){return Nm(n)||(function(a){return!!a&&"doubleValue"in a})(n)})(e)?e:{integerValue:0}:null}class au extends Vf{}class lu extends Vf{constructor(e){super(),this.elements=e}}function cC(i,e){const t=dC(e);for(const n of i.elements)t.some((r=>Ui(r,n)))||t.push(n);return{arrayValue:{values:t}}}class uu extends Vf{constructor(e){super(),this.elements=e}}function fC(i,e){let t=dC(e);for(const n of i.elements)t=t.filter((r=>!Ui(r,n)));return{arrayValue:{values:t}}}class cu extends Vf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function u0(i){return Rt(i.integerValue||i.doubleValue)}function dC(i){return op(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e,t){this.field=e,this.transform=t}}function a4(i,e){return i.field.isEqual(e.field)&&(function(n,r){return n instanceof lu&&r instanceof lu||n instanceof uu&&r instanceof uu?ha(n.elements,r.elements,Ui):n instanceof cu&&r instanceof cu?Ui(n.Ae,r.Ae):n instanceof au&&r instanceof au})(i.transform,e.transform)}class l4{constructor(e,t){this.version=e,this.transformResults=t}}class jn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new jn}static exists(e){return new jn(void 0,e)}static updateTime(e){return new jn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jc(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Pf{}function mC(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new cp(i.key,jn.none()):new mu(i.key,i.data,jn.none());{const t=i.data,n=xn.empty();let r=new Ht(sn.comparator);for(let a of e.fields)if(!r.has(a)){let c=t.field(a);c===null&&a.length>1&&(a=a.popLast(),c=t.field(a)),c===null?n.delete(a):n.set(a,c),r=r.add(a)}return new or(i.key,n,new Pn(r.toArray()),jn.none())}}function u4(i,e,t){i instanceof mu?(function(r,a,c){const h=r.value.clone(),y=f0(r.fieldTransforms,a,c.transformResults);h.setAll(y),a.convertToFoundDocument(c.version,h).setHasCommittedMutations()})(i,e,t):i instanceof or?(function(r,a,c){if(!jc(r.precondition,a))return void a.convertToUnknownDocument(c.version);const h=f0(r.fieldTransforms,a,c.transformResults),y=a.data;y.setAll(pC(r)),y.setAll(h),a.convertToFoundDocument(c.version,y).setHasCommittedMutations()})(i,e,t):(function(r,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Jl(i,e,t,n){return i instanceof mu?(function(a,c,h,y){if(!jc(a.precondition,c))return h;const g=a.value.clone(),_=d0(a.fieldTransforms,y,c);return g.setAll(_),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(i,e,t,n):i instanceof or?(function(a,c,h,y){if(!jc(a.precondition,c))return h;const g=d0(a.fieldTransforms,y,c),_=c.data;return _.setAll(pC(a)),_.setAll(g),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((E=>E.field)))})(i,e,t,n):(function(a,c,h){return jc(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h})(i,e,t)}function c4(i,e){let t=null;for(const n of i.fieldTransforms){const r=e.data.field(n.field),a=uC(n.transform,r||null);a!=null&&(t===null&&(t=xn.empty()),t.set(n.field,a))}return t||null}function c0(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&ha(n,r,((a,c)=>a4(a,c)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class mu extends Pf{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class or extends Pf{constructor(e,t,n,r,a=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function pC(i){const e=new Map;return i.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const n=i.data.field(t);e.set(t,n)}})),e}function f0(i,e,t){const n=new Map;nt(i.length===t.length,32656,{Re:t.length,Ve:i.length});for(let r=0;r<t.length;r++){const a=i[r],c=a.transform,h=e.data.field(a.field);n.set(a.field,o4(c,h,t[r]))}return n}function d0(i,e,t){const n=new Map;for(const r of i){const a=r.transform,c=t.data.field(r.field);n.set(r.field,r4(a,c,e))}return n}class cp extends Pf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class f4 extends Pf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const a=this.mutations[r];a.key.isEqual(e.key)&&u4(a,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Jl(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Jl(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=oC();return this.mutations.forEach((r=>{const a=e.get(r.key),c=a.overlayedDocument;let h=this.applyToLocalView(c,a.mutatedFields);h=t.has(r.key)?null:h;const y=mC(c,h);y!==null&&n.set(r.key,y),c.isValidDocument()||c.convertToNoDocument(Ne.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ge())}isEqual(e){return this.batchId===e.batchId&&ha(this.mutations,e.mutations,((t,n)=>c0(t,n)))&&ha(this.baseMutations,e.baseMutations,((t,n)=>c0(t,n)))}}class fp{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){nt(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=(function(){return t4})();const a=e.mutations;for(let c=0;c<a.length;c++)r=r.insert(a[c].key,n[c].version);return new fp(e,t,n,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt,Ze;function p4(i){switch(i){case X.OK:return xe(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return xe(15467,{code:i})}}function gC(i){if(i===void 0)return rs("GRPC error has no .code"),X.UNKNOWN;switch(i){case Pt.OK:return X.OK;case Pt.CANCELLED:return X.CANCELLED;case Pt.UNKNOWN:return X.UNKNOWN;case Pt.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case Pt.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case Pt.INTERNAL:return X.INTERNAL;case Pt.UNAVAILABLE:return X.UNAVAILABLE;case Pt.UNAUTHENTICATED:return X.UNAUTHENTICATED;case Pt.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case Pt.NOT_FOUND:return X.NOT_FOUND;case Pt.ALREADY_EXISTS:return X.ALREADY_EXISTS;case Pt.PERMISSION_DENIED:return X.PERMISSION_DENIED;case Pt.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case Pt.ABORTED:return X.ABORTED;case Pt.OUT_OF_RANGE:return X.OUT_OF_RANGE;case Pt.UNIMPLEMENTED:return X.UNIMPLEMENTED;case Pt.DATA_LOSS:return X.DATA_LOSS;default:return xe(39323,{code:i})}}(Ze=Pt||(Pt={}))[Ze.OK=0]="OK",Ze[Ze.CANCELLED=1]="CANCELLED",Ze[Ze.UNKNOWN=2]="UNKNOWN",Ze[Ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ze[Ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ze[Ze.NOT_FOUND=5]="NOT_FOUND",Ze[Ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ze[Ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ze[Ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ze[Ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ze[Ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ze[Ze.ABORTED=10]="ABORTED",Ze[Ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ze[Ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ze[Ze.INTERNAL=13]="INTERNAL",Ze[Ze.UNAVAILABLE=14]="UNAVAILABLE",Ze[Ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y4=new Ys([4294967295,4294967295],0);function h0(i){const e=g4().encode(i),t=new IE;return t.update(e),new Uint8Array(t.digest())}function m0(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),r=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Ys([t,n],0),new Ys([r,a],0)]}class dp{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Hl(`Invalid padding: ${t}`);if(n<0)throw new Hl(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Hl(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new Hl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ys.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(Ys.fromNumber(n)));return r.compare(y4)===1&&(r=new Ys([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=h0(e),[n,r]=m0(t);for(let a=0;a<this.hashCount;a++){const c=this.ye(n,r,a);if(!this.we(c))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new dp(a,r,t);return n.forEach((h=>c.insert(h))),c}insert(e){if(this.ge===0)return;const t=h0(e),[n,r]=m0(t);for(let a=0;a<this.hashCount;a++){const c=this.ye(n,r,a);this.Se(c)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Hl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,t,n,r,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,pu.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new kf(Ne.min(),r,new _t(ze),os(),Ge())}}class pu{constructor(e,t,n,r,a){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new pu(n,t,Ge(),Ge(),Ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class yC{constructor(e,t){this.targetId=e,this.Ce=t}}class vC{constructor(e,t,n=rn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class p0{constructor(){this.ve=0,this.Fe=g0(),this.Me=rn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ge(),t=Ge(),n=Ge();return this.Fe.forEach(((r,a)=>{switch(a){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:xe(38017,{changeType:a})}})),new pu(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=g0()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,nt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class v4{constructor(e){this.Ge=e,this.ze=new Map,this.je=os(),this.Je=Hc(),this.He=Hc(),this.Ye=new _t(ze)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:xe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((n,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const a=r.target;if(Dm(a))if(n===0){const c=new Te(a.path);this.et(t,c,hn.newNoDocument(c,Ne.min()))}else nt(n===1,20013,{expectedCount:n});else{const c=this._t(t);if(c!==n){const h=this.ut(e),y=h?this.ct(h,e,c):1;if(y!==0){this.it(t);const g=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:a=0}=t;let c,h;try{c=js(n).toUint8Array()}catch(y){if(y instanceof BE)return da("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{h=new dp(c,r,a)}catch(y){return da(y instanceof Hl?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return h.ge===0?null:h}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach((a=>{const c=this.Ge.ht(),h=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(h)||(this.et(t,a,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((a,c)=>{const h=this.ot(c);if(h){if(a.current&&Dm(h.target)){const y=new Te(h.target.path);this.It(y).has(c)||this.Et(c,y)||this.et(c,y,hn.newNoDocument(y,e))}a.Be&&(t.set(c,a.ke()),a.qe())}}));let n=Ge();this.He.forEach(((a,c)=>{let h=!0;c.forEachWhile((y=>{const g=this.ot(y);return!g||g.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(n=n.add(a))})),this.je.forEach(((a,c)=>c.setReadTime(e)));const r=new kf(e,t,this.Ye,this.je,n);return this.je=os(),this.Je=Hc(),this.He=Hc(),this.Ye=new _t(ze),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new p0,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Ht(ze),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Ht(ze),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||he("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new p0),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Hc(){return new _t(Te.comparator)}function g0(){return new _t(Te.comparator)}const _4={asc:"ASCENDING",desc:"DESCENDING"},T4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},E4={and:"AND",or:"OR"};class C4{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function km(i,e){return i.useProto3Json||bf(e)?e:{value:e}}function vf(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _C(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function A4(i,e){return vf(i,e.toTimestamp())}function Di(i){return nt(!!i,49232),Ne.fromTimestamp((function(t){const n=Js(t);return new pt(n.seconds,n.nanos)})(i))}function hp(i,e){return Lm(i,e).canonicalString()}function Lm(i,e){const t=(function(r){return new ft(["projects",r.projectId,"databases",r.database])})(i).child("documents");return e===void 0?t:t.child(e)}function TC(i){const e=ft.fromString(i);return nt(xC(e),10190,{key:e.toString()}),e}function Um(i,e){return hp(i.databaseId,e.path)}function em(i,e){const t=TC(e);if(t.get(1)!==i.databaseId.projectId)throw new ce(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new ce(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Te(CC(t))}function EC(i,e){return hp(i.databaseId,e)}function S4(i){const e=TC(i);return e.length===4?ft.emptyPath():CC(e)}function Om(i){return new ft(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function CC(i){return nt(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function y0(i,e,t){return{name:Um(i,e),fields:t.value.mapValue.fields}}function x4(i,e){let t;if("targetChange"in e){e.targetChange;const n=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:xe(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],a=(function(g,_){return g.useProto3Json?(nt(_===void 0||typeof _=="string",58123),rn.fromBase64String(_||"")):(nt(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),rn.fromUint8Array(_||new Uint8Array))})(i,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&(function(g){const _=g.code===void 0?X.UNKNOWN:gC(g.code);return new ce(_,g.message||"")})(c);t=new vC(n,r,a,h||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const r=em(i,n.document.name),a=Di(n.document.updateTime),c=n.document.createTime?Di(n.document.createTime):Ne.min(),h=new xn({mapValue:{fields:n.document.fields}}),y=hn.newFoundDocument(r,a,c,h),g=n.targetIds||[],_=n.removedTargetIds||[];t=new Wc(g,_,y.key,y)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const r=em(i,n.document),a=n.readTime?Di(n.readTime):Ne.min(),c=hn.newNoDocument(r,a),h=n.removedTargetIds||[];t=new Wc([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const r=em(i,n.document),a=n.removedTargetIds||[];t=new Wc([],a,r,null)}else{if(!("filter"in e))return xe(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:r=0,unchangedNames:a}=n,c=new m4(r,a),h=n.targetId;t=new yC(h,c)}}return t}function w4(i,e){let t;if(e instanceof mu)t={update:y0(i,e.key,e.value)};else if(e instanceof cp)t={delete:Um(i,e.key)};else if(e instanceof or)t={update:y0(i,e.key,e.data),updateMask:k4(e.fieldMask)};else{if(!(e instanceof f4))return xe(16599,{Vt:e.type});t={verify:Um(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((n=>(function(a,c){const h=c.transform;if(h instanceof au)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof lu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof uu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof cu)return{fieldPath:c.field.canonicalString(),increment:h.Ae};throw xe(20930,{transform:c.transform})})(0,n)))),e.precondition.isNone||(t.currentDocument=(function(r,a){return a.updateTime!==void 0?{updateTime:A4(r,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:xe(27497)})(i,e.precondition)),t}function R4(i,e){return i&&i.length>0?(nt(e!==void 0,14353),i.map((t=>(function(r,a){let c=r.updateTime?Di(r.updateTime):Di(a);return c.isEqual(Ne.min())&&(c=Di(a)),new l4(c,r.transformResults||[])})(t,e)))):[]}function b4(i,e){return{documents:[EC(i,e.path)]}}function I4(i,e){const t={structuredQuery:{}},n=e.path;let r;e.collectionGroup!==null?(r=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=EC(i,r);const a=(function(g){if(g.length!==0)return SC(di.create(g,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const c=(function(g){if(g.length!==0)return g.map((_=>(function(S){return{field:Jo(S.field),direction:D4(S.dir)}})(_)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=km(i,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:r}}function N4(i){let e=S4(i.parent);const t=i.structuredQuery,n=t.from?t.from.length:0;let r=null;if(n>0){nt(n===1,65062);const _=t.from[0];_.allDescendants?r=_.collectionId:e=e.child(_.collectionId)}let a=[];t.where&&(a=(function(E){const S=AC(E);return S instanceof di&&JE(S)?S.getFilters():[S]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((S=>(function(U){return new ou(jo(U.field),(function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(U.direction))})(S)))})(t.orderBy));let h=null;t.limit&&(h=(function(E){let S;return S=typeof E=="object"?E.value:E,bf(S)?null:S})(t.limit));let y=null;t.startAt&&(y=(function(E){const S=!!E.before,I=E.values||[];return new yf(I,S)})(t.startAt));let g=null;return t.endAt&&(g=(function(E){const S=!E.before,I=E.values||[];return new yf(I,S)})(t.endAt)),XV(e,r,c,a,h,"F",y,g)}function M4(i,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function AC(i){return i.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=jo(t.unaryFilter.field);return Lt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=jo(t.unaryFilter.field);return Lt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=jo(t.unaryFilter.field);return Lt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=jo(t.unaryFilter.field);return Lt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return xe(61313);default:return xe(60726)}})(i):i.fieldFilter!==void 0?(function(t){return Lt.create(jo(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return xe(58110);default:return xe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(t){return di.create(t.compositeFilter.filters.map((n=>AC(n))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return xe(1026)}})(t.compositeFilter.op))})(i):xe(30097,{filter:i})}function D4(i){return _4[i]}function V4(i){return T4[i]}function P4(i){return E4[i]}function Jo(i){return{fieldPath:i.canonicalString()}}function jo(i){return sn.fromServerFormat(i.fieldPath)}function SC(i){return i instanceof Lt?(function(t){if(t.op==="=="){if(s0(t.value))return{unaryFilter:{field:Jo(t.field),op:"IS_NAN"}};if(i0(t.value))return{unaryFilter:{field:Jo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(s0(t.value))return{unaryFilter:{field:Jo(t.field),op:"IS_NOT_NAN"}};if(i0(t.value))return{unaryFilter:{field:Jo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jo(t.field),op:V4(t.op),value:t.value}}})(i):i instanceof di?(function(t){const n=t.getFilters().map((r=>SC(r)));return n.length===1?n[0]:{compositeFilter:{op:P4(t.op),filters:n}}})(i):xe(54877,{filter:i})}function k4(i){const e=[];return i.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function xC(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e,t,n,r,a=Ne.min(),c=Ne.min(),h=rn.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=y}withSequenceNumber(e){return new zs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new zs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(e){this.yt=e}}function U4(i){const e=N4({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Pm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(){this.Cn=new F4}addToCollectionParentIndex(e,t){return this.Cn.add(t),ee.resolve()}getCollectionParents(e,t){return ee.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ee.resolve()}deleteFieldIndex(e,t){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,t){return ee.resolve()}getDocumentsMatchingTarget(e,t){return ee.resolve(null)}getIndexType(e,t){return ee.resolve(0)}getFieldIndexes(e,t){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,t){return ee.resolve(Xs.min())}getMinOffsetFromCollectionGroup(e,t){return ee.resolve(Xs.min())}updateCollectionGroup(e,t,n){return ee.resolve()}updateIndexEntries(e,t){return ee.resolve()}}class F4{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ht(ft.comparator),a=!r.has(n);return this.index[t]=r.add(n),a}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Ht(ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},wC=41943040;class Sn{static withCacheSize(e){return new Sn(e,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sn.DEFAULT_COLLECTION_PERCENTILE=10,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Sn.DEFAULT=new Sn(wC,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Sn.DISABLED=new Sn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ga(0)}static cr(){return new ga(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0="LruGarbageCollector",q4=1048576;function T0([i,e],[t,n]){const r=ze(i,t);return r===0?ze(e,n):r}class B4{constructor(e){this.Ir=e,this.buffer=new Ht(T0),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();T0(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class z4{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){he(_0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Aa(t)?he(_0,"Ignoring IndexedDB error during garbage collection: ",t):await Ca(t)}await this.Vr(3e5)}))}}class G4{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((n=>Math.floor(t/100*n)))}nthSequenceNumber(e,t){if(t===0)return ee.resolve(Rf.ce);const n=new B4(t);return this.mr.forEachTarget(e,(r=>n.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>n.Ar(r))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(v0)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),v0):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,a,c,h,y,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),r=this.params.maximumSequenceNumbersToCollect):r=E,c=Date.now(),this.nthSequenceNumber(e,r)))).next((E=>(n=E,h=Date.now(),this.removeTargets(e,n,t)))).next((E=>(a=E,y=Date.now(),this.removeOrphanedDocuments(e,n)))).next((E=>(g=Date.now(),Zo()<=Xe.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${r} in `+(h-c)+`ms
	Removed ${a} targets in `+(y-h)+`ms
	Removed ${E} documents in `+(g-y)+`ms
Total Duration: ${g-_}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:a,documentsRemoved:E}))))}}function H4(i,e){return new G4(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(){this.changes=new no((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,hn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?ee.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(n!==null&&Jl(n.mutation,r,Pn.empty(),pt.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.getLocalViewOfDocuments(e,n,Ge()).next((()=>n))))}getLocalViewOfDocuments(e,t,n=Ge()){const r=Qr();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((a=>{let c=Gl();return a.forEach(((h,y)=>{c=c.insert(h,y.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const n=Qr();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Ge())))}populateOverlays(e,t,n){const r=[];return n.forEach((a=>{t.has(a)||r.push(a)})),this.documentOverlayCache.getOverlays(e,r).next((a=>{a.forEach(((c,h)=>{t.set(c,h)}))}))}computeViews(e,t,n,r){let a=os();const c=Xl(),h=(function(){return Xl()})();return t.forEach(((y,g)=>{const _=n.get(g.key);r.has(g.key)&&(_===void 0||_.mutation instanceof or)?a=a.insert(g.key,g):_!==void 0?(c.set(g.key,_.mutation.getFieldMask()),Jl(_.mutation,g,_.mutation.getFieldMask(),pt.now())):c.set(g.key,Pn.empty())})),this.recalculateAndSaveOverlays(e,a).next((y=>(y.forEach(((g,_)=>c.set(g,_))),t.forEach(((g,_)=>h.set(g,new Y4(_,c.get(g)??null)))),h)))}recalculateAndSaveOverlays(e,t){const n=Xl();let r=new _t(((c,h)=>c-h)),a=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const h of c)h.keys().forEach((y=>{const g=t.get(y);if(g===null)return;let _=n.get(y)||Pn.empty();_=h.applyToLocalView(g,_),n.set(y,_);const E=(r.get(h.batchId)||Ge()).add(y);r=r.insert(h.batchId,E)}))})).next((()=>{const c=[],h=r.getReverseIterator();for(;h.hasNext();){const y=h.getNext(),g=y.key,_=y.value,E=oC();_.forEach((S=>{if(!a.has(S)){const I=mC(t.get(S),n.get(S));I!==null&&E.set(S,I),a=a.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,E))}return ee.waitFor(c)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,t,n,r){return(function(c){return Te.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):tC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((a=>{const c=r-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):ee.resolve(Qr());let h=nu,y=a;return c.next((g=>ee.forEach(g,((_,E)=>(h<E.largestBatchId&&(h=E.largestBatchId),a.get(_)?ee.resolve():this.remoteDocumentCache.getEntry(e,_).next((S=>{y=y.insert(_,S)}))))).next((()=>this.populateOverlays(e,g,a))).next((()=>this.computeViews(e,y,g,Ge()))).next((_=>({batchId:h,changes:rC(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Te(t)).next((n=>{let r=Gl();return n.isFoundDocument()&&(r=r.insert(n.key,n)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const a=t.collectionGroup;let c=Gl();return this.indexManager.getCollectionParents(e,a).next((h=>ee.forEach(h,(y=>{const g=(function(E,S){return new Sa(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,y.child(a));return this.getDocumentsMatchingCollectionQuery(e,g,n,r).next((_=>{_.forEach(((E,S)=>{c=c.insert(E,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,a,r)))).next((c=>{a.forEach(((y,g)=>{const _=g.getKey();c.get(_)===null&&(c=c.insert(_,hn.newInvalidDocument(_)))}));let h=Gl();return c.forEach(((y,g)=>{const _=a.get(y);_!==void 0&&Jl(_.mutation,g,Pn.empty(),pt.now()),Df(t,g)&&(h=h.insert(y,g))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q4{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ee.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:Di(r.createTime)}})(t)),ee.resolve()}getNamedQuery(e,t){return ee.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(r){return{name:r.name,query:U4(r.bundledQuery),readTime:Di(r.readTime)}})(t)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(){this.overlays=new _t(Te.comparator),this.qr=new Map}getOverlay(e,t){return ee.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Qr();return ee.forEach(t,(r=>this.getOverlay(e,r).next((a=>{a!==null&&n.set(r,a)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((r,a)=>{this.St(e,t,a)})),ee.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return r!==void 0&&(r.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(n)),ee.resolve()}getOverlaysForCollection(e,t,n){const r=Qr(),a=t.length+1,c=new Te(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const y=h.getNext().value,g=y.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===a&&y.largestBatchId>n&&r.set(y.getKey(),y)}return ee.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let a=new _t(((g,_)=>g-_));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>n){let _=a.get(g.largestBatchId);_===null&&(_=Qr(),a=a.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const h=Qr(),y=a.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((g,_)=>h.set(g,_))),!(h.size()>=r)););return ee.resolve(h)}St(e,t,n){const r=this.overlays.get(n.key);if(r!==null){const c=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(n.key,new h4(t,n));let a=this.qr.get(t);a===void 0&&(a=Ge(),this.qr.set(t,a)),this.qr.set(t,a.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(){this.sessionToken=rn.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(){this.Qr=new Ht(Zt.$r),this.Ur=new Ht(Zt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new Zt(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach((n=>this.addReference(n,t)))}removeReference(e,t){this.Gr(new Zt(e,t))}zr(e,t){e.forEach((n=>this.removeReference(n,t)))}jr(e){const t=new Te(new ft([])),n=new Zt(t,e),r=new Zt(t,e+1),a=[];return this.Ur.forEachInRange([n,r],(c=>{this.Gr(c),a.push(c.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Te(new ft([])),n=new Zt(t,e),r=new Zt(t,e+1);let a=Ge();return this.Ur.forEachInRange([n,r],(c=>{a=a.add(c.key)})),a}containsKey(e){const t=new Zt(e,0),n=this.Qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class Zt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Te.comparator(e.key,t.key)||ze(e.Yr,t.Yr)}static Kr(e,t){return ze(e.Yr,t.Yr)||Te.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Ht(Zt.$r)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,r){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new d4(a,t,n,r);this.mutationQueue.push(c);for(const h of r)this.Zr=this.Zr.add(new Zt(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ee.resolve(c)}lookupMutationBatch(e,t){return ee.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),a=r<0?0:r;return ee.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?sp:this.tr-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Zt(t,0),r=new Zt(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([n,r],(c=>{const h=this.Xr(c.Yr);a.push(h)})),ee.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ht(ze);return t.forEach((r=>{const a=new Zt(r,0),c=new Zt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,c],(h=>{n=n.add(h.Yr)}))})),ee.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let a=n;Te.isDocumentKey(a)||(a=a.child(""));const c=new Zt(new Te(a),0);let h=new Ht(ze);return this.Zr.forEachWhile((y=>{const g=y.key.path;return!!n.isPrefixOf(g)&&(g.length===r&&(h=h.add(y.Yr)),!0)}),c),ee.resolve(this.ti(h))}ti(e){const t=[];return e.forEach((n=>{const r=this.Xr(n);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){nt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return ee.forEach(t.mutations,(r=>{const a=new Zt(r.key,t.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=n}))}ir(e){}containsKey(e,t){const n=new Zt(t,0),r=this.Zr.firstAfterOrEqual(n);return ee.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e){this.ri=e,this.docs=(function(){return new _t(Te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),a=r?r.size:0,c=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return ee.resolve(n?n.document.mutableCopy():hn.newInvalidDocument(t))}getEntries(e,t){let n=os();return t.forEach((r=>{const a=this.docs.get(r);n=n.insert(r,a?a.document.mutableCopy():hn.newInvalidDocument(r))})),ee.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let a=os();const c=t.path,h=new Te(c.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(h);for(;y.hasNext();){const{key:g,value:{document:_}}=y.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||bV(RV(_),n)<=0||(r.has(_.key)||Df(t,_))&&(a=a.insert(_.key,_.mutableCopy()))}return ee.resolve(a)}getAllFromCollectionGroup(e,t,n,r){xe(9500)}ii(e,t){return ee.forEach(this.docs,(n=>t(n)))}newChangeBuffer(e){return new W4(this)}getSize(e){return ee.resolve(this.size)}}class W4 extends $4{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)})),ee.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(e){this.persistence=e,this.si=new no((t=>ap(t)),lp),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.oi=0,this._i=new mp,this.targetCount=0,this.ai=ga.ur()}forEachTarget(e,t){return this.si.forEach(((n,r)=>t(r))),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),ee.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new ga(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ee.resolve()}updateTargetData(e,t){return this.Pr(t),ee.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,t,n){let r=0;const a=[];return this.si.forEach(((c,h)=>{h.sequenceNumber<=t&&n.get(h.targetId)===null&&(this.si.delete(c),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),r++)})),ee.waitFor(a).next((()=>r))}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return ee.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),ee.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,a=[];return r&&t.forEach((c=>{a.push(r.markPotentiallyOrphaned(e,c))})),ee.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ee.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return ee.resolve(n)}containsKey(e,t){return ee.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e,t){this.ui={},this.overlays={},this.ci=new Rf(0),this.li=!1,this.li=!0,this.hi=new X4,this.referenceDelegate=e(this),this.Pi=new eP(this),this.indexManager=new O4,this.remoteDocumentCache=(function(r){return new j4(r)})((n=>this.referenceDelegate.Ti(n))),this.serializer=new L4(t),this.Ii=new Q4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Z4,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new J4(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){he("MemoryPersistence","Starting transaction:",e);const r=new tP(this.ci.next());return this.referenceDelegate.Ei(),n(r).next((a=>this.referenceDelegate.di(r).next((()=>a)))).toPromise().then((a=>(r.raiseOnCommittedEvent(),a)))}Ai(e,t){return ee.or(Object.values(this.ui).map((n=>()=>n.containsKey(e,t))))}}class tP extends NV{constructor(e){super(),this.currentSequenceNumber=e}}class pp{constructor(e){this.persistence=e,this.Ri=new mp,this.Vi=null}static mi(e){return new pp(e)}get fi(){if(this.Vi)return this.Vi;throw xe(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),ee.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),ee.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ee.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((r=>this.fi.add(r.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((a=>this.fi.add(a.toString())))})).next((()=>n.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.fi,(n=>{const r=Te.fromPath(n);return this.gi(e,r).next((a=>{a||t.removeEntry(r,Ne.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((n=>{n?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ee.or([()=>ee.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class _f{constructor(e,t){this.persistence=e,this.pi=new no((n=>VV(n.path)),((n,r)=>n.isEqual(r))),this.garbageCollector=H4(this,t)}static mi(e,t){return new _f(e,t)}Ei(){}di(e){return ee.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((n=>t.next((r=>n+r))))}wr(e){let t=0;return this.pr(e,(n=>{t++})).next((()=>t))}pr(e,t){return ee.forEach(this.pi,((n,r)=>this.br(e,n,r).next((a=>a?ee.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),a=r.newChangeBuffer();return r.ii(e,(c=>this.br(e,c,t).next((h=>{h||(n++,a.removeEntry(c,Ne.min()))})))).next((()=>a.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ee.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),ee.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ee.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Xc(e.data.value)),t}br(e,t,n){return ee.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.pi.get(t);return ee.resolve(r!==void 0&&r>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=Ge(),r=Ge();for(const a of t.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}return new gp(e,t.fromCache,n,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Z2()?8:MV(K2())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const a={result:null};return this.ys(e,t).next((c=>{a.result=c})).next((()=>{if(!a.result)return this.ws(e,t,r,n).next((c=>{a.result=c}))})).next((()=>{if(a.result)return;const c=new nP;return this.Ss(e,t,c).next((h=>{if(a.result=h,this.Vs)return this.bs(e,t,c,h.size)}))})).next((()=>a.result))}bs(e,t,n,r){return n.documentReadCount<this.fs?(Zo()<=Xe.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",Xo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ee.resolve()):(Zo()<=Xe.DEBUG&&he("QueryEngine","Query:",Xo(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(Zo()<=Xe.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",Xo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mi(t))):ee.resolve())}ys(e,t){if(l0(t))return ee.resolve(null);let n=Mi(t);return this.indexManager.getIndexType(e,n).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=Pm(t,null,"F"),n=Mi(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((a=>{const c=Ge(...a);return this.ps.getDocuments(e,c).next((h=>this.indexManager.getMinOffset(e,n).next((y=>{const g=this.Ds(t,h);return this.Cs(t,g,c,y.readTime)?this.ys(e,Pm(t,null,"F")):this.vs(e,g,t,y)}))))})))))}ws(e,t,n,r){return l0(t)||r.isEqual(Ne.min())?ee.resolve(null):this.ps.getDocuments(e,n).next((a=>{const c=this.Ds(t,a);return this.Cs(t,c,n,r)?ee.resolve(null):(Zo()<=Xe.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Xo(t)),this.vs(e,c,t,wV(r,nu)).next((h=>h)))}))}Ds(e,t){let n=new Ht(iC(e));return t.forEach(((r,a)=>{Df(e,a)&&(n=n.add(a))})),n}Cs(e,t,n,r){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}Ss(e,t,n){return Zo()<=Xe.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",Xo(t)),this.ps.getDocumentsMatchingQuery(e,t,Xs.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next((a=>(t.forEach((c=>{a=a.insert(c.key,c)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yp="LocalStore",sP=3e8;class rP{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new _t(ze),this.xs=new no((a=>ap(a)),lp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new K4(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function oP(i,e,t,n){return new rP(i,e,t,n)}async function bC(i,e){const t=Pe(i);return await t.persistence.runTransaction("Handle user change","readonly",(n=>{let r;return t.mutationQueue.getAllMutationBatches(n).next((a=>(r=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(n)))).next((a=>{const c=[],h=[];let y=Ge();for(const g of r){c.push(g.batchId);for(const _ of g.mutations)y=y.add(_.key)}for(const g of a){h.push(g.batchId);for(const _ of g.mutations)y=y.add(_.key)}return t.localDocuments.getDocuments(n,y).next((g=>({Ls:g,removedBatchIds:c,addedBatchIds:h})))}))}))}function aP(i,e){const t=Pe(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const r=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,y,g,_){const E=g.batch,S=E.keys();let I=ee.resolve();return S.forEach((U=>{I=I.next((()=>_.getEntry(y,U))).next((G=>{const B=g.docVersions.get(U);nt(B!==null,48541),G.version.compareTo(B)<0&&(E.applyToRemoteDocument(G,g),G.isValidDocument()&&(G.setReadTime(g.commitVersion),_.addEntry(G)))}))})),I.next((()=>h.mutationQueue.removeMutationBatch(y,E)))})(t,n,e,a).next((()=>a.apply(n))).next((()=>t.mutationQueue.performConsistencyCheck(n))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(n,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(h){let y=Ge();for(let g=0;g<h.mutationResults.length;++g)h.mutationResults[g].transformResults.length>0&&(y=y.add(h.batch.mutations[g].key));return y})(e)))).next((()=>t.localDocuments.getDocuments(n,r)))}))}function IC(i){const e=Pe(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function lP(i,e){const t=Pe(i),n=e.snapshotVersion;let r=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});r=t.Ms;const h=[];e.targetChanges.forEach(((_,E)=>{const S=r.get(E);if(!S)return;h.push(t.Pi.removeMatchingKeys(a,_.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(a,_.addedDocuments,E))));let I=S.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?I=I.withResumeToken(rn.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):_.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(_.resumeToken,n)),r=r.insert(E,I),(function(G,B,W){return G.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=sP?!0:W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0})(S,I,_)&&h.push(t.Pi.updateTargetData(a,I))}));let y=os(),g=Ge();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,_))})),h.push(uP(a,c,e.documentUpdates).next((_=>{y=_.ks,g=_.qs}))),!n.isEqual(Ne.min())){const _=t.Pi.getLastRemoteSnapshotVersion(a).next((E=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,n)));h.push(_)}return ee.waitFor(h).next((()=>c.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,y,g))).next((()=>y))})).then((a=>(t.Ms=r,a)))}function uP(i,e,t){let n=Ge(),r=Ge();return t.forEach((a=>n=n.add(a))),e.getEntries(i,n).next((a=>{let c=os();return t.forEach(((h,y)=>{const g=a.get(h);y.isFoundDocument()!==g.isFoundDocument()&&(r=r.add(h)),y.isNoDocument()&&y.version.isEqual(Ne.min())?(e.removeEntry(h,y.readTime),c=c.insert(h,y)):!g.isValidDocument()||y.version.compareTo(g.version)>0||y.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(y),c=c.insert(h,y)):he(yp,"Ignoring outdated watch update for ",h,". Current version:",g.version," Watch version:",y.version)})),{ks:c,qs:r}}))}function cP(i,e){const t=Pe(i);return t.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=sp),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function fP(i,e){const t=Pe(i);return t.persistence.runTransaction("Allocate target","readwrite",(n=>{let r;return t.Pi.getTargetData(n,e).next((a=>a?(r=a,ee.resolve(r)):t.Pi.allocateTargetId(n).next((c=>(r=new zs(e,c,"TargetPurposeListen",n.currentSequenceNumber),t.Pi.addTargetData(n,r).next((()=>r)))))))})).then((n=>{const r=t.Ms.get(n.targetId);return(r===null||n.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(n.targetId,n),t.xs.set(e,n.targetId)),n}))}async function Fm(i,e,t){const n=Pe(i),r=n.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",a,(c=>n.persistence.referenceDelegate.removeTarget(c,r)))}catch(c){if(!Aa(c))throw c;he(yp,`Failed to update sequence numbers for target ${e}: ${c}`)}n.Ms=n.Ms.remove(e),n.xs.delete(r.target)}function E0(i,e,t){const n=Pe(i);let r=Ne.min(),a=Ge();return n.persistence.runTransaction("Execute query","readwrite",(c=>(function(y,g,_){const E=Pe(y),S=E.xs.get(_);return S!==void 0?ee.resolve(E.Ms.get(S)):E.Pi.getTargetData(g,_)})(n,c,Mi(e)).next((h=>{if(h)return r=h.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(c,h.targetId).next((y=>{a=y}))})).next((()=>n.Fs.getDocumentsMatchingQuery(c,e,t?r:Ne.min(),t?a:Ge()))).next((h=>(dP(n,jV(e),h),{documents:h,Qs:a})))))}function dP(i,e,t){let n=i.Os.get(e)||Ne.min();t.forEach(((r,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)})),i.Os.set(e,n)}class C0{constructor(){this.activeTargetIds=s4()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class hP{constructor(){this.Mo=new C0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new C0,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0="ConnectivityMonitor";class S0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){he(A0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){he(A0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $c=null;function qm(){return $c===null?$c=(function(){return 268435456+Math.round(2147483648*Math.random())})():$c++,"0x"+$c.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tm="RestConnection",pP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class gP{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${r}`,this.Wo=this.databaseId.database===pf?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Go(e,t,n,r,a){const c=qm(),h=this.zo(e,t.toUriEncodedString());he(tm,`Sending RPC '${e}' ${c}:`,h,n);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,r,a);const{host:g}=new URL(h),_=ep(g);return this.Jo(e,h,y,n,_).then((E=>(he(tm,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw da(tm,`RPC '${e}' ${c} failed with error: `,E,"url: ",h,"request:",n),E}))}Ho(e,t,n,r,a,c){return this.Go(e,t,n,r,a)}jo(e,t,n){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ea})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,a)=>e[a]=r)),n&&n.headers.forEach(((r,a)=>e[a]=r))}zo(e,t){const n=pP[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fn="WebChannelConnection";class vP extends gP{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,a){const c=qm();return new Promise(((h,y)=>{const g=new NE;g.setWithCredentials(!0),g.listenOnce(ME.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Zc.NO_ERROR:const E=g.getResponseJson();he(fn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),h(E);break;case Zc.TIMEOUT:he(fn,`RPC '${e}' ${c} timed out`),y(new ce(X.DEADLINE_EXCEEDED,"Request time out"));break;case Zc.HTTP_ERROR:const S=g.getStatus();if(he(fn,`RPC '${e}' ${c} failed with status:`,S,"response text:",g.getResponseText()),S>0){let I=g.getResponseJson();Array.isArray(I)&&(I=I[0]);const U=I==null?void 0:I.error;if(U&&U.status&&U.message){const G=(function(W){const J=W.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(J)>=0?J:X.UNKNOWN})(U.status);y(new ce(G,U.message))}else y(new ce(X.UNKNOWN,"Server responded with status "+g.getStatus()))}else y(new ce(X.UNAVAILABLE,"Connection failed."));break;default:xe(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{he(fn,`RPC '${e}' ${c} completed.`)}}));const _=JSON.stringify(r);he(fn,`RPC '${e}' ${c} sending request:`,r),g.send(t,"POST",_,n,15)}))}T_(e,t,n){const r=qm(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=PE(),h=VE(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(y.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,t,n),y.encodeInitMessageHeaders=!0;const _=a.join("");he(fn,`Creating RPC '${e}' stream ${r}: ${_}`,y);const E=c.createWebChannel(_,y);this.I_(E);let S=!1,I=!1;const U=new yP({Yo:B=>{I?he(fn,`Not sending because RPC '${e}' stream ${r} is closed:`,B):(S||(he(fn,`Opening RPC '${e}' stream ${r} transport.`),E.open(),S=!0),he(fn,`RPC '${e}' stream ${r} sending:`,B),E.send(B))},Zo:()=>E.close()}),G=(B,W,J)=>{B.listen(W,(te=>{try{J(te)}catch(re){setTimeout((()=>{throw re}),0)}}))};return G(E,zl.EventType.OPEN,(()=>{I||(he(fn,`RPC '${e}' stream ${r} transport opened.`),U.o_())})),G(E,zl.EventType.CLOSE,(()=>{I||(I=!0,he(fn,`RPC '${e}' stream ${r} transport closed`),U.a_(),this.E_(E))})),G(E,zl.EventType.ERROR,(B=>{I||(I=!0,da(fn,`RPC '${e}' stream ${r} transport errored. Name:`,B.name,"Message:",B.message),U.a_(new ce(X.UNAVAILABLE,"The operation could not be completed")))})),G(E,zl.EventType.MESSAGE,(B=>{var W;if(!I){const J=B.data[0];nt(!!J,16349);const te=J,re=(te==null?void 0:te.error)||((W=te[0])==null?void 0:W.error);if(re){he(fn,`RPC '${e}' stream ${r} received error:`,re);const ie=re.status;let le=(function(x){const N=Pt[x];if(N!==void 0)return gC(N)})(ie),L=re.message;le===void 0&&(le=X.INTERNAL,L="Unknown error status: "+ie+" with message "+re.message),I=!0,U.a_(new ce(le,L)),E.close()}else he(fn,`RPC '${e}' stream ${r} received:`,J),U.u_(J)}})),G(h,DE.STAT_EVENT,(B=>{B.stat===Rm.PROXY?he(fn,`RPC '${e}' stream ${r} detected buffering proxy`):B.stat===Rm.NOPROXY&&he(fn,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{U.__()}),0),U}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function nm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lf(i){return new C4(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e,t,n=1e3,r=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&he("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0="PersistentStream";class MC{constructor(e,t,n,r,a,c,h,y){this.Mi=e,this.S_=n,this.b_=r,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new NC(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===X.RESOURCE_EXHAUSTED?(rs(t.toString()),rs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,r])=>{this.D_===t&&this.G_(n,r)}),(n=>{e((()=>{const r=new ce(X.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(r)}))}))}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{n((()=>this.listener.Xo()))})),this.stream.t_((()=>{n((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{n((()=>this.z_(r)))})),this.stream.onMessage((r=>{n((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return he(x0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(he(x0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class _P extends MC{constructor(e,t,n,r,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,c),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=x4(this.serializer,e),n=(function(a){if(!("targetChange"in a))return Ne.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?Ne.min():c.readTime?Di(c.readTime):Ne.min()})(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=Om(this.serializer),t.addTarget=(function(a,c){let h;const y=c.target;if(h=Dm(y)?{documents:b4(a,y)}:{query:I4(a,y).ft},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=_C(a,c.resumeToken);const g=km(a,c.expectedCount);g!==null&&(h.expectedCount=g)}else if(c.snapshotVersion.compareTo(Ne.min())>0){h.readTime=vf(a,c.snapshotVersion.toTimestamp());const g=km(a,c.expectedCount);g!==null&&(h.expectedCount=g)}return h})(this.serializer,e);const n=M4(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=Om(this.serializer),t.removeTarget=e,this.q_(t)}}class TP extends MC{constructor(e,t,n,r,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,c),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return nt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,nt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){nt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=R4(e.writeResults,e.commitTime),n=Di(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=Om(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((n=>w4(this.serializer,n)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{}class CP extends EP{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new ce(X.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,c])=>this.connection.Go(e,Lm(t,n),r,a,c))).catch((a=>{throw a.name==="FirebaseError"?(a.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ce(X.UNKNOWN,a.toString())}))}Ho(e,t,n,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.Ho(e,Lm(t,n),r,c,h,a))).catch((c=>{throw c.name==="FirebaseError"?(c.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ce(X.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class AP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(rs(t),this.aa=!1):he("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to="RemoteStore";class SP{constructor(e,t,n,r,a){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((c=>{n.enqueueAndForget((async()=>{io(this)&&(he(to,"Restarting streams for network reachability change."),await(async function(y){const g=Pe(y);g.Ea.add(4),await gu(g),g.Ra.set("Unknown"),g.Ea.delete(4),await Uf(g)})(this))}))})),this.Ra=new AP(n,r)}}async function Uf(i){if(io(i))for(const e of i.da)await e(!0)}async function gu(i){for(const e of i.da)await e(!1)}function DC(i,e){const t=Pe(i);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Ep(t)?Tp(t):xa(t).O_()&&_p(t,e))}function vp(i,e){const t=Pe(i),n=xa(t);t.Ia.delete(e),n.O_()&&VC(t,e),t.Ia.size===0&&(n.O_()?n.L_():io(t)&&t.Ra.set("Unknown"))}function _p(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ne.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}xa(i).Y_(e)}function VC(i,e){i.Va.Ue(e),xa(i).Z_(e)}function Tp(i){i.Va=new v4({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),xa(i).start(),i.Ra.ua()}function Ep(i){return io(i)&&!xa(i).x_()&&i.Ia.size>0}function io(i){return Pe(i).Ea.size===0}function PC(i){i.Va=void 0}async function xP(i){i.Ra.set("Online")}async function wP(i){i.Ia.forEach(((e,t)=>{_p(i,e)}))}async function RP(i,e){PC(i),Ep(i)?(i.Ra.ha(e),Tp(i)):i.Ra.set("Unknown")}async function bP(i,e,t){if(i.Ra.set("Online"),e instanceof vC&&e.state===2&&e.cause)try{await(async function(r,a){const c=a.cause;for(const h of a.targetIds)r.Ia.has(h)&&(await r.remoteSyncer.rejectListen(h,c),r.Ia.delete(h),r.Va.removeTarget(h))})(i,e)}catch(n){he(to,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Tf(i,n)}else if(e instanceof Wc?i.Va.Ze(e):e instanceof yC?i.Va.st(e):i.Va.tt(e),!t.isEqual(Ne.min()))try{const n=await IC(i.localStore);t.compareTo(n)>=0&&await(function(a,c){const h=a.Va.Tt(c);return h.targetChanges.forEach(((y,g)=>{if(y.resumeToken.approximateByteSize()>0){const _=a.Ia.get(g);_&&a.Ia.set(g,_.withResumeToken(y.resumeToken,c))}})),h.targetMismatches.forEach(((y,g)=>{const _=a.Ia.get(y);if(!_)return;a.Ia.set(y,_.withResumeToken(rn.EMPTY_BYTE_STRING,_.snapshotVersion)),VC(a,y);const E=new zs(_.target,y,g,_.sequenceNumber);_p(a,E)})),a.remoteSyncer.applyRemoteEvent(h)})(i,t)}catch(n){he(to,"Failed to raise snapshot:",n),await Tf(i,n)}}async function Tf(i,e,t){if(!Aa(e))throw e;i.Ea.add(1),await gu(i),i.Ra.set("Offline"),t||(t=()=>IC(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{he(to,"Retrying IndexedDB access"),await t(),i.Ea.delete(1),await Uf(i)}))}function kC(i,e){return e().catch((t=>Tf(i,t,e)))}async function Of(i){const e=Pe(i),t=er(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:sp;for(;IP(e);)try{const r=await cP(e.localStore,n);if(r===null){e.Ta.length===0&&t.L_();break}n=r.batchId,NP(e,r)}catch(r){await Tf(e,r)}LC(e)&&UC(e)}function IP(i){return io(i)&&i.Ta.length<10}function NP(i,e){i.Ta.push(e);const t=er(i);t.O_()&&t.X_&&t.ea(e.mutations)}function LC(i){return io(i)&&!er(i).x_()&&i.Ta.length>0}function UC(i){er(i).start()}async function MP(i){er(i).ra()}async function DP(i){const e=er(i);for(const t of i.Ta)e.ea(t.mutations)}async function VP(i,e,t){const n=i.Ta.shift(),r=fp.from(n,e,t);await kC(i,(()=>i.remoteSyncer.applySuccessfulWrite(r))),await Of(i)}async function PP(i,e){e&&er(i).X_&&await(async function(n,r){if((function(c){return p4(c)&&c!==X.ABORTED})(r.code)){const a=n.Ta.shift();er(n).B_(),await kC(n,(()=>n.remoteSyncer.rejectFailedWrite(a.batchId,r))),await Of(n)}})(i,e),LC(i)&&UC(i)}async function w0(i,e){const t=Pe(i);t.asyncQueue.verifyOperationInProgress(),he(to,"RemoteStore received new credentials");const n=io(t);t.Ea.add(3),await gu(t),n&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Uf(t)}async function kP(i,e){const t=Pe(i);e?(t.Ea.delete(2),await Uf(t)):e||(t.Ea.add(2),await gu(t),t.Ra.set("Unknown"))}function xa(i){return i.ma||(i.ma=(function(t,n,r){const a=Pe(t);return a.sa(),new _P(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(i.datastore,i.asyncQueue,{Xo:xP.bind(null,i),t_:wP.bind(null,i),r_:RP.bind(null,i),H_:bP.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),Ep(i)?Tp(i):i.Ra.set("Unknown")):(await i.ma.stop(),PC(i))}))),i.ma}function er(i){return i.fa||(i.fa=(function(t,n,r){const a=Pe(t);return a.sa(),new TP(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:MP.bind(null,i),r_:PP.bind(null,i),ta:DP.bind(null,i),na:VP.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await Of(i)):(await i.fa.stop(),i.Ta.length>0&&(he(to,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e,t,n,r,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=a,this.deferred=new Ks,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,a){const c=Date.now()+n,h=new Cp(e,t,c,r,a);return h.start(n),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ap(i,e){if(rs("AsyncQueue",`${e}: ${i}`),Aa(i))return new ce(X.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{static emptySet(e){return new sa(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Te.comparator(t.key,n.key):(t,n)=>Te.comparator(t.key,n.key),this.keyedMap=Gl(),this.sortedSet=new _t(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof sa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,a=n.getNext().key;if(!r.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new sa;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(){this.ga=new _t(Te.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):xe(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,n)=>{e.push(n)})),e}}class ya{constructor(e,t,n,r,a,c,h,y,g){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=y,this.hasCachedResults=g}static fromInitialDocuments(e,t,n,r,a){const c=[];return t.forEach((h=>{c.push({type:0,doc:h})})),new ya(e,t,sa.emptySet(t),c,n,r,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class UP{constructor(){this.queries=b0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,n){const r=Pe(t),a=r.queries;r.queries=b0(),a.forEach(((c,h)=>{for(const y of h.Sa)y.onError(n)}))})(this,new ce(X.ABORTED,"Firestore shutting down"))}}function b0(){return new no((i=>nC(i)),Mf)}async function OC(i,e){const t=Pe(i);let n=3;const r=e.query;let a=t.queries.get(r);a?!a.ba()&&e.Da()&&(n=2):(a=new LP,n=e.Da()?0:1);try{switch(n){case 0:a.wa=await t.onListen(r,!0);break;case 1:a.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(c){const h=Ap(c,`Initialization of query '${Xo(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&Sp(t)}async function FC(i,e){const t=Pe(i),n=e.query;let r=3;const a=t.queries.get(n);if(a){const c=a.Sa.indexOf(e);c>=0&&(a.Sa.splice(c,1),a.Sa.length===0?r=e.Da()?0:1:!a.ba()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function OP(i,e){const t=Pe(i);let n=!1;for(const r of e){const a=r.query,c=t.queries.get(a);if(c){for(const h of c.Sa)h.Fa(r)&&(n=!0);c.wa=r}}n&&Sp(t)}function FP(i,e,t){const n=Pe(i),r=n.queries.get(e);if(r)for(const a of r.Sa)a.onError(t);n.queries.delete(e)}function Sp(i){i.Ca.forEach((e=>{e.next()}))}var Bm,I0;(I0=Bm||(Bm={})).Ma="default",I0.Cache="cache";class qC{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const r of e.docChanges)r.type!==3&&n.push(r);e=new ya(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const n=t!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ya.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Bm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e){this.key=e}}class zC{constructor(e){this.key=e}}class qP{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ge(),this.mutatedKeys=Ge(),this.eu=iC(e),this.tu=new sa(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new R0,r=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,c=r,h=!1;const y=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,g=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((_,E)=>{const S=r.get(_),I=Df(this.query,E)?E:null,U=!!S&&this.mutatedKeys.has(S.key),G=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let B=!1;S&&I?S.data.isEqual(I.data)?U!==G&&(n.track({type:3,doc:I}),B=!0):this.su(S,I)||(n.track({type:2,doc:I}),B=!0,(y&&this.eu(I,y)>0||g&&this.eu(I,g)<0)&&(h=!0)):!S&&I?(n.track({type:0,doc:I}),B=!0):S&&!I&&(n.track({type:1,doc:S}),B=!0,(y||g)&&(h=!0)),B&&(I?(c=c.add(I),a=G?a.add(_):a.delete(_)):(c=c.delete(_),a=a.delete(_)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),a=a.delete(_.key),n.track({type:1,doc:_})}return{tu:c,iu:n,Cs:h,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((_,E)=>(function(I,U){const G=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe(20277,{Rt:B})}};return G(I)-G(U)})(_.type,E.type)||this.eu(_.doc,E.doc))),this.ou(n),r=r??!1;const h=t&&!r?this._u():[],y=this.Xa.size===0&&this.current&&!r?1:0,g=y!==this.Za;return this.Za=y,c.length!==0||g?{snapshot:new ya(this.query,e.tu,a,c,e.mutatedKeys,y===0,g,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new R0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ge(),this.tu.forEach((n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))}));const t=[];return e.forEach((n=>{this.Xa.has(n)||t.push(new zC(n))})),this.Xa.forEach((n=>{e.has(n)||t.push(new BC(n))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ge();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ya.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const xp="SyncEngine";class BP{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class zP{constructor(e){this.key=e,this.hu=!1}}class GP{constructor(e,t,n,r,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new no((h=>nC(h)),Mf),this.Iu=new Map,this.Eu=new Set,this.du=new _t(Te.comparator),this.Au=new Map,this.Ru=new mp,this.Vu={},this.mu=new Map,this.fu=ga.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function HP(i,e,t=!0){const n=QC(i);let r;const a=n.Tu.get(e);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),r=a.view.lu()):r=await GC(n,e,t,!0),r}async function $P(i,e){const t=QC(i);await GC(t,e,!0,!1)}async function GC(i,e,t,n){const r=await fP(i.localStore,Mi(e)),a=r.targetId,c=i.sharedClientState.addLocalQueryTarget(a,t);let h;return n&&(h=await YP(i,e,a,c==="current",r.resumeToken)),i.isPrimaryClient&&t&&DC(i.remoteStore,r),h}async function YP(i,e,t,n,r){i.pu=(E,S,I)=>(async function(G,B,W,J){let te=B.view.ru(W);te.Cs&&(te=await E0(G.localStore,B.query,!1).then((({documents:L})=>B.view.ru(L,te))));const re=J&&J.targetChanges.get(B.targetId),ie=J&&J.targetMismatches.get(B.targetId)!=null,le=B.view.applyChanges(te,G.isPrimaryClient,re,ie);return M0(G,B.targetId,le.au),le.snapshot})(i,E,S,I);const a=await E0(i.localStore,e,!0),c=new qP(e,a.Qs),h=c.ru(a.documents),y=pu.createSynthesizedTargetChangeForCurrentChange(t,n&&i.onlineState!=="Offline",r),g=c.applyChanges(h,i.isPrimaryClient,y);M0(i,t,g.au);const _=new BP(e,t,c);return i.Tu.set(e,_),i.Iu.has(t)?i.Iu.get(t).push(e):i.Iu.set(t,[e]),g.snapshot}async function KP(i,e,t){const n=Pe(i),r=n.Tu.get(e),a=n.Iu.get(r.targetId);if(a.length>1)return n.Iu.set(r.targetId,a.filter((c=>!Mf(c,e)))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Fm(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),t&&vp(n.remoteStore,r.targetId),zm(n,r.targetId)})).catch(Ca)):(zm(n,r.targetId),await Fm(n.localStore,r.targetId,!0))}async function QP(i,e){const t=Pe(i),n=t.Tu.get(e),r=t.Iu.get(n.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),vp(t.remoteStore,n.targetId))}async function ZP(i,e,t){const n=nk(i);try{const r=await(function(c,h){const y=Pe(c),g=pt.now(),_=h.reduce(((I,U)=>I.add(U.key)),Ge());let E,S;return y.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let U=os(),G=Ge();return y.Ns.getEntries(I,_).next((B=>{U=B,U.forEach(((W,J)=>{J.isValidDocument()||(G=G.add(W))}))})).next((()=>y.localDocuments.getOverlayedDocuments(I,U))).next((B=>{E=B;const W=[];for(const J of h){const te=c4(J,E.get(J.key).overlayedDocument);te!=null&&W.push(new or(J.key,te,QE(te.value.mapValue),jn.exists(!0)))}return y.mutationQueue.addMutationBatch(I,g,W,h)})).next((B=>{S=B;const W=B.applyToLocalDocumentSet(E,G);return y.documentOverlayCache.saveOverlays(I,B.batchId,W)}))})).then((()=>({batchId:S.batchId,changes:rC(E)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(r.batchId),(function(c,h,y){let g=c.Vu[c.currentUser.toKey()];g||(g=new _t(ze)),g=g.insert(h,y),c.Vu[c.currentUser.toKey()]=g})(n,r.batchId,t),await yu(n,r.changes),await Of(n.remoteStore)}catch(r){const a=Ap(r,"Failed to persist write");t.reject(a)}}async function HC(i,e){const t=Pe(i);try{const n=await lP(t.localStore,e);e.targetChanges.forEach(((r,a)=>{const c=t.Au.get(a);c&&(nt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?c.hu=!0:r.modifiedDocuments.size>0?nt(c.hu,14607):r.removedDocuments.size>0&&(nt(c.hu,42227),c.hu=!1))})),await yu(t,n,e)}catch(n){await Ca(n)}}function N0(i,e,t){const n=Pe(i);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const r=[];n.Tu.forEach(((a,c)=>{const h=c.view.va(e);h.snapshot&&r.push(h.snapshot)})),(function(c,h){const y=Pe(c);y.onlineState=h;let g=!1;y.queries.forEach(((_,E)=>{for(const S of E.Sa)S.va(h)&&(g=!0)})),g&&Sp(y)})(n.eventManager,e),r.length&&n.Pu.H_(r),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function XP(i,e,t){const n=Pe(i);n.sharedClientState.updateQueryState(e,"rejected",t);const r=n.Au.get(e),a=r&&r.key;if(a){let c=new _t(Te.comparator);c=c.insert(a,hn.newNoDocument(a,Ne.min()));const h=Ge().add(a),y=new kf(Ne.min(),new Map,new _t(ze),c,h);await HC(n,y),n.du=n.du.remove(a),n.Au.delete(e),wp(n)}else await Fm(n.localStore,e,!1).then((()=>zm(n,e,t))).catch(Ca)}async function JP(i,e){const t=Pe(i),n=e.batch.batchId;try{const r=await aP(t.localStore,e);YC(t,n,null),$C(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await yu(t,r)}catch(r){await Ca(r)}}async function jP(i,e,t){const n=Pe(i);try{const r=await(function(c,h){const y=Pe(c);return y.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let _;return y.mutationQueue.lookupMutationBatch(g,h).next((E=>(nt(E!==null,37113),_=E.keys(),y.mutationQueue.removeMutationBatch(g,E)))).next((()=>y.mutationQueue.performConsistencyCheck(g))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(g,_,h))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_))).next((()=>y.localDocuments.getDocuments(g,_)))}))})(n.localStore,e);YC(n,e,t),$C(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await yu(n,r)}catch(r){await Ca(r)}}function $C(i,e){(i.mu.get(e)||[]).forEach((t=>{t.resolve()})),i.mu.delete(e)}function YC(i,e,t){const n=Pe(i);let r=n.Vu[n.currentUser.toKey()];if(r){const a=r.get(e);a&&(t?a.reject(t):a.resolve(),r=r.remove(e)),n.Vu[n.currentUser.toKey()]=r}}function zm(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const n of i.Iu.get(e))i.Tu.delete(n),t&&i.Pu.yu(n,t);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((n=>{i.Ru.containsKey(n)||KC(i,n)}))}function KC(i,e){i.Eu.delete(e.path.canonicalString());const t=i.du.get(e);t!==null&&(vp(i.remoteStore,t),i.du=i.du.remove(e),i.Au.delete(t),wp(i))}function M0(i,e,t){for(const n of t)n instanceof BC?(i.Ru.addReference(n.key,e),WP(i,n)):n instanceof zC?(he(xp,"Document no longer in limbo: "+n.key),i.Ru.removeReference(n.key,e),i.Ru.containsKey(n.key)||KC(i,n.key)):xe(19791,{wu:n})}function WP(i,e){const t=e.key,n=t.path.canonicalString();i.du.get(t)||i.Eu.has(n)||(he(xp,"New document in limbo: "+t),i.Eu.add(n),wp(i))}function wp(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const t=new Te(ft.fromString(e)),n=i.fu.next();i.Au.set(n,new zP(t)),i.du=i.du.insert(t,n),DC(i.remoteStore,new zs(Mi(Nf(t.path)),n,"TargetPurposeLimboResolution",Rf.ce))}}async function yu(i,e,t){const n=Pe(i),r=[],a=[],c=[];n.Tu.isEmpty()||(n.Tu.forEach(((h,y)=>{c.push(n.pu(y,e,t).then((g=>{var _;if((g||t)&&n.isPrimaryClient){const E=g?!g.fromCache:(_=t==null?void 0:t.targetChanges.get(y.targetId))==null?void 0:_.current;n.sharedClientState.updateQueryState(y.targetId,E?"current":"not-current")}if(g){r.push(g);const E=gp.As(y.targetId,g);a.push(E)}})))})),await Promise.all(c),n.Pu.H_(r),await(async function(y,g){const _=Pe(y);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ee.forEach(g,(S=>ee.forEach(S.Es,(I=>_.persistence.referenceDelegate.addReference(E,S.targetId,I))).next((()=>ee.forEach(S.ds,(I=>_.persistence.referenceDelegate.removeReference(E,S.targetId,I)))))))))}catch(E){if(!Aa(E))throw E;he(yp,"Failed to update sequence numbers: "+E)}for(const E of g){const S=E.targetId;if(!E.fromCache){const I=_.Ms.get(S),U=I.snapshotVersion,G=I.withLastLimboFreeSnapshotVersion(U);_.Ms=_.Ms.insert(S,G)}}})(n.localStore,a))}async function ek(i,e){const t=Pe(i);if(!t.currentUser.isEqual(e)){he(xp,"User change. New user:",e.toKey());const n=await bC(t.localStore,e);t.currentUser=e,(function(a,c){a.mu.forEach((h=>{h.forEach((y=>{y.reject(new ce(X.CANCELLED,c))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await yu(t,n.Ls)}}function tk(i,e){const t=Pe(i),n=t.Au.get(e);if(n&&n.hu)return Ge().add(n.key);{let r=Ge();const a=t.Iu.get(e);if(!a)return r;for(const c of a){const h=t.Tu.get(c);r=r.unionWith(h.view.nu)}return r}}function QC(i){const e=Pe(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=HC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=XP.bind(null,e),e.Pu.H_=OP.bind(null,e.eventManager),e.Pu.yu=FP.bind(null,e.eventManager),e}function nk(i){const e=Pe(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=JP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jP.bind(null,e),e}class Ef{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Lf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return oP(this.persistence,new iP,e.initialUser,this.serializer)}Cu(e){return new RC(pp.mi,this.serializer)}Du(e){return new hP}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ef.provider={build:()=>new Ef};class ik extends Ef{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){nt(this.persistence.referenceDelegate instanceof _f,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new z4(n,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Sn.withCacheSize(this.cacheSizeBytes):Sn.DEFAULT;return new RC((n=>_f.mi(n,t)),this.serializer)}}class Gm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>N0(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=ek.bind(null,this.syncEngine),await kP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new UP})()}createDatastore(e){const t=Lf(e.databaseInfo.databaseId),n=(function(a){return new vP(a)})(e.databaseInfo);return(function(a,c,h,y){return new CP(a,c,h,y)})(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return(function(n,r,a,c,h){return new SP(n,r,a,c,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>N0(this.syncEngine,t,0)),(function(){return S0.v()?new S0:new mP})())}createSyncEngine(e,t){return(function(r,a,c,h,y,g,_){const E=new GP(r,a,c,h,y,g);return _&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(r){const a=Pe(r);he(to,"RemoteStore shutting down."),a.Ea.add(5),await gu(a),a.Aa.shutdown(),a.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Gm.provider={build:()=>new Gm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):rs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tr="FirestoreClient";class sk{constructor(e,t,n,r,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=dn.UNAUTHENTICATED,this.clientId=ip.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,(async c=>{he(tr,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(n,(c=>(he(tr,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ks;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Ap(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function im(i,e){i.asyncQueue.verifyOperationInProgress(),he(tr,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let n=t.initialUser;i.setCredentialChangeListener((async r=>{n.isEqual(r)||(await bC(e.localStore,r),n=r)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function D0(i,e){i.asyncQueue.verifyOperationInProgress();const t=await rk(i);he(tr,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener((n=>w0(e.remoteStore,n))),i.setAppCheckTokenChangeListener(((n,r)=>w0(e.remoteStore,r))),i._onlineComponents=e}async function rk(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){he(tr,"Using user provided OfflineComponentProvider");try{await im(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===X.FAILED_PRECONDITION||r.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;da("Error using user provided cache. Falling back to memory cache: "+t),await im(i,new Ef)}}else he(tr,"Using default OfflineComponentProvider"),await im(i,new ik(void 0));return i._offlineComponents}async function XC(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(he(tr,"Using user provided OnlineComponentProvider"),await D0(i,i._uninitializedComponentsProvider._online)):(he(tr,"Using default OnlineComponentProvider"),await D0(i,new Gm))),i._onlineComponents}function ok(i){return XC(i).then((e=>e.syncEngine))}async function Hm(i){const e=await XC(i),t=e.eventManager;return t.onListen=HP.bind(null,e.syncEngine),t.onUnlisten=KP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=$P.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=QP.bind(null,e.syncEngine),t}function ak(i,e,t={}){const n=new Ks;return i.asyncQueue.enqueueAndForget((async()=>(function(a,c,h,y,g){const _=new ZC({next:S=>{_.Nu(),c.enqueueAndForget((()=>FC(a,E)));const I=S.docs.has(h);!I&&S.fromCache?g.reject(new ce(X.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&S.fromCache&&y&&y.source==="server"?g.reject(new ce(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(S)},error:S=>g.reject(S)}),E=new qC(Nf(h.path),_,{includeMetadataChanges:!0,qa:!0});return OC(a,E)})(await Hm(i),i.asyncQueue,e,t,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JC(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC="firestore.googleapis.com",P0=!0;class k0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ce(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=jC,this.ssl=P0}else this.host=e.host,this.ssl=e.ssl??P0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=wC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<q4)throw new ce(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}xV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JC(e.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new ce(X.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new ce(X.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new ce(X.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,r){return n.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ff{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new k0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new k0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new pV;switch(n.type){case"firstParty":return new _V(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ce(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const n=V0.get(t);n&&(he("ComponentProvider","Removing Datastore"),V0.delete(t),n.terminate())})(this),Promise.resolve()}}function lk(i,e,t,n={}){var g;i=Jn(i,Ff);const r=ep(e),a=i._getSettings(),c={...a,emulatorOptions:i._getEmulatorOptions()},h=`${e}:${t}`;r&&(z2(`https://${h}`),Y2("Firestore",!0)),a.host!==jC&&a.host!==h&&da("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...a,host:h,ssl:r,emulatorOptions:n};if(!df(y,c)&&(i._setSettings(y),n.mockUserToken)){let _,E;if(typeof n.mockUserToken=="string")_=n.mockUserToken,E=dn.MOCK_USER;else{_=G2(n.mockUserToken,(g=i._app)==null?void 0:g.options.projectId);const S=n.mockUserToken.sub||n.mockUserToken.user_id;if(!S)throw new ce(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new dn(S)}i._authCredentials=new gV(new LE(_,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new so(this.firestore,e,this._query)}}class St{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new St(this.firestore,e,this._key)}toJSON(){return{type:St._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(hu(t,St._jsonSchema))return new St(e,n||null,new Te(ft.fromString(t.referencePath)))}}St._jsonSchemaVersion="firestore/documentReference/1.0",St._jsonSchema={type:Ut("string",St._jsonSchemaVersion),referencePath:Ut("string")};class Qs extends so{constructor(e,t,n){super(e,t,Nf(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new St(this.firestore,null,new Te(e))}withConverter(e){return new Qs(this.firestore,e,this._path)}}function qf(i,e,...t){if(i=Li(i),UE("collection","path",e),i instanceof Ff){const n=ft.fromString(e,...t);return QT(n),new Qs(i,null,n)}{if(!(i instanceof St||i instanceof Qs))throw new ce(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=i._path.child(ft.fromString(e,...t));return QT(n),new Qs(i.firestore,null,n)}}function wa(i,e,...t){if(i=Li(i),arguments.length===1&&(e=ip.newId()),UE("doc","path",e),i instanceof Ff){const n=ft.fromString(e,...t);return KT(n),new St(i,null,new Te(n))}{if(!(i instanceof St||i instanceof Qs))throw new ce(X.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=i._path.child(ft.fromString(e,...t));return KT(n),new St(i.firestore,i instanceof Qs?i.converter:null,new Te(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0="AsyncQueue";class U0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new NC(this,"async_queue_retry"),this._c=()=>{const n=nm();n&&he(L0,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const t=nm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=nm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ks;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Aa(e))throw e;he(L0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((n=>{throw this.nc=n,this.rc=!1,rs("INTERNAL UNHANDLED ERROR: ",O0(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=Cp.createAndSchedule(this,e,t,n,(a=>this.hc(a)));return this.tc.push(r),r}uc(){this.nc&&xe(47125,{Pc:O0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,n)=>t.targetTimeMs-n.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function O0(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F0(i){return(function(t,n){if(typeof t!="object"||t===null)return!1;const r=t;for(const a of n)if(a in r&&typeof r[a]=="function")return!0;return!1})(i,["next","error","complete"])}class nr extends Ff{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new U0,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new U0(e),this._firestoreClient=void 0,await e}}}function uk(i,e){const t=typeof i=="object"?i:wE(),n=typeof i=="string"?i:pf,r=JD(t,"firestore").getImmediate({identifier:n});if(!r._initialized){const a=q2("firestore");a&&lk(r,...a)}return r}function Rp(i){if(i._terminated)throw new ce(X.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||ck(i),i._firestoreClient}function ck(i){var n,r,a;const e=i._freezeSettings(),t=(function(h,y,g,_){return new LV(h,y,g,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,JC(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(i._databaseId,((n=i._app)==null?void 0:n.options.appId)||"",i._persistenceKey,e);i._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new sk(i._authCredentials,i._appCheckCredentials,i._queue,t,i._componentsProvider&&(function(h){const y=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(y),_online:y}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xn(rn.fromBase64String(e))}catch(t){throw new ce(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Xn(rn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Xn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(hu(e,Xn._jsonSchema))return Xn.fromBase64String(e.bytes)}}Xn._jsonSchemaVersion="firestore/bytes/1.0",Xn._jsonSchema={type:Ut("string",Xn._jsonSchemaVersion),bytes:Ut("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ce(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ce(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ce(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Vi._jsonSchemaVersion}}static fromJSON(e){if(hu(e,Vi._jsonSchema))return new Vi(e.latitude,e.longitude)}}Vi._jsonSchemaVersion="firestore/geoPoint/1.0",Vi._jsonSchema={type:Ut("string",Vi._jsonSchemaVersion),latitude:Ut("number"),longitude:Ut("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,r){if(n.length!==r.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==r[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Pi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(hu(e,Pi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Pi(e.vectorValues);throw new ce(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Pi._jsonSchemaVersion="firestore/vectorValue/1.0",Pi._jsonSchema={type:Ut("string",Pi._jsonSchemaVersion),vectorValues:Ut("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk=/^__.*__$/;class dk{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new or(e,this.data,this.fieldMask,t,this.fieldTransforms):new mu(e,this.data,t,this.fieldTransforms)}}class WC{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new or(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function eA(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xe(40011,{Ac:i})}}class bp{constructor(e,t,n,r,a,c){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new bp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Cf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(eA(this.Ac)&&fk.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class hk{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Lf(e)}Cc(e,t,n,r=!1){return new bp({Ac:e,methodName:t,Dc:n,path:sn.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zf(i){const e=i._freezeSettings(),t=Lf(i._databaseId);return new hk(i._databaseId,!!e.ignoreUndefinedProperties,t)}function tA(i,e,t,n,r,a={}){const c=i.Cc(a.merge||a.mergeFields?2:0,e,t,r);Mp("Data must be an object, but it was:",c,n);const h=nA(n,c);let y,g;if(a.merge)y=new Pn(c.fieldMask),g=c.fieldTransforms;else if(a.mergeFields){const _=[];for(const E of a.mergeFields){const S=$m(e,E,t);if(!c.contains(S))throw new ce(X.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);sA(_,S)||_.push(S)}y=new Pn(_),g=c.fieldTransforms.filter((E=>y.covers(E.field)))}else y=null,g=c.fieldTransforms;return new dk(new xn(h),y,g)}class Gf extends vu{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gf}}class Ip extends vu{_toFieldTransform(e){return new hC(e.path,new au)}isEqual(e){return e instanceof Ip}}class Np extends vu{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new cu(e.serializer,lC(e.serializer,this.Fc));return new hC(e.path,t)}isEqual(e){return e instanceof Np&&this.Fc===e.Fc}}function mk(i,e,t,n){const r=i.Cc(1,e,t);Mp("Data must be an object, but it was:",r,n);const a=[],c=xn.empty();rr(n,((y,g)=>{const _=Dp(e,y,t);g=Li(g);const E=r.yc(_);if(g instanceof Gf)a.push(_);else{const S=_u(g,E);S!=null&&(a.push(_),c.set(_,S))}}));const h=new Pn(a);return new WC(c,h,r.fieldTransforms)}function pk(i,e,t,n,r,a){const c=i.Cc(1,e,t),h=[$m(e,n,t)],y=[r];if(a.length%2!=0)throw new ce(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<a.length;S+=2)h.push($m(e,a[S])),y.push(a[S+1]);const g=[],_=xn.empty();for(let S=h.length-1;S>=0;--S)if(!sA(g,h[S])){const I=h[S];let U=y[S];U=Li(U);const G=c.yc(I);if(U instanceof Gf)g.push(I);else{const B=_u(U,G);B!=null&&(g.push(I),_.set(I,B))}}const E=new Pn(g);return new WC(_,E,c.fieldTransforms)}function gk(i,e,t,n=!1){return _u(t,i.Cc(n?4:3,e))}function _u(i,e){if(iA(i=Li(i)))return Mp("Unsupported field value:",e,i),nA(i,e);if(i instanceof vu)return(function(n,r){if(!eA(r.Ac))throw r.Sc(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${n._methodName}() is not currently supported inside arrays`);const a=n._toFieldTransform(r);a&&r.fieldTransforms.push(a)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(n,r){const a=[];let c=0;for(const h of n){let y=_u(h,r.wc(c));y==null&&(y={nullValue:"NULL_VALUE"}),a.push(y),c++}return{arrayValue:{values:a}}})(i,e)}return(function(n,r){if((n=Li(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return lC(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const a=pt.fromDate(n);return{timestampValue:vf(r.serializer,a)}}if(n instanceof pt){const a=new pt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:vf(r.serializer,a)}}if(n instanceof Vi)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Xn)return{bytesValue:_C(r.serializer,n._byteString)};if(n instanceof St){const a=r.databaseId,c=n.firestore._databaseId;if(!c.isEqual(a))throw r.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:hp(n.firestore._databaseId||r.databaseId,n._key.path)}}if(n instanceof Pi)return(function(c,h){return{mapValue:{fields:{[YE]:{stringValue:KE},[gf]:{arrayValue:{values:c.toArray().map((g=>{if(typeof g!="number")throw h.Sc("VectorValues must only contain numeric values.");return up(h.serializer,g)}))}}}}}})(n,r);throw r.Sc(`Unsupported field value: ${wf(n)}`)})(i,e)}function nA(i,e){const t={};return qE(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):rr(i,((n,r)=>{const a=_u(r,e.mc(n));a!=null&&(t[n]=a)})),{mapValue:{fields:t}}}function iA(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof pt||i instanceof Vi||i instanceof Xn||i instanceof St||i instanceof vu||i instanceof Pi)}function Mp(i,e,t){if(!iA(t)||!OE(t)){const n=wf(t);throw n==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+n)}}function $m(i,e,t){if((e=Li(e))instanceof Bf)return e._internalPath;if(typeof e=="string")return Dp(i,e);throw Cf("Field path arguments must be of type string or ",i,!1,void 0,t)}const yk=new RegExp("[~\\*/\\[\\]]");function Dp(i,e,t){if(e.search(yk)>=0)throw Cf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Bf(...e.split("."))._internalPath}catch{throw Cf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Cf(i,e,t,n,r){const a=n&&!n.isEmpty(),c=r!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let y="";return(a||c)&&(y+=" (found",a&&(y+=` in field ${n}`),c&&(y+=` in document ${r}`),y+=")"),new ce(X.INVALID_ARGUMENT,h+i+y)}function sA(i,e){return i.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e,t,n,r,a){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new St(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new vk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Vp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class vk extends rA{data(){return super.data()}}function Vp(i,e){return typeof e=="string"?Dp(i,e):e instanceof Bf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _k(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new ce(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Pp{}class oA extends Pp{}function kp(i,e,...t){let n=[];e instanceof Pp&&n.push(e),n=n.concat(t),(function(a){const c=a.filter((y=>y instanceof Up)).length,h=a.filter((y=>y instanceof Lp)).length;if(c>1||c>0&&h>0)throw new ce(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const r of n)i=r._apply(i);return i}class Lp extends oA{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Lp(e,t,n)}_apply(e){const t=this._parse(e);return aA(e._query,t),new so(e.firestore,e.converter,Vm(e._query,t))}_parse(e){const t=zf(e.firestore);return(function(a,c,h,y,g,_,E){let S;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ce(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){B0(E,_);const U=[];for(const G of E)U.push(q0(y,a,G));S={arrayValue:{values:U}}}else S=q0(y,a,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||B0(E,_),S=gk(h,c,E,_==="in"||_==="not-in");return Lt.create(g,_,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class Up extends Pp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Up(e,t)}_parse(e){const t=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return t.length===1?t[0]:di.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(r,a){let c=r;const h=a.getFlattenedFilters();for(const y of h)aA(c,y),c=Vm(c,y)})(e._query,t),new so(e.firestore,e.converter,Vm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Op extends oA{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Op(e,t)}_apply(e){const t=(function(r,a,c){if(r.startAt!==null)throw new ce(X.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new ce(X.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ou(a,c)})(e._query,this._field,this._direction);return new so(e.firestore,e.converter,(function(r,a){const c=r.explicitOrderBy.concat([a]);return new Sa(r.path,r.collectionGroup,c,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)})(e._query,t))}}function Fp(i,e="asc"){const t=e,n=Vp("orderBy",i);return Op._create(n,t)}function q0(i,e,t){if(typeof(t=Li(t))=="string"){if(t==="")throw new ce(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tC(e)&&t.indexOf("/")!==-1)throw new ce(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(ft.fromString(t));if(!Te.isDocumentKey(n))throw new ce(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return n0(i,new Te(n))}if(t instanceof St)return n0(i,t._key);throw new ce(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wf(t)}.`)}function B0(i,e){if(!Array.isArray(i)||i.length===0)throw new ce(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function aA(i,e){const t=(function(r,a){for(const c of r)for(const h of c.getFlattenedFilters())if(a.indexOf(h.op)>=0)return h.op;return null})(i.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ce(X.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(X.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Tk{convertValue(e,t="none"){switch(Ws(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(js(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw xe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return rr(e,((r,a)=>{n[r]=this.convertValue(a,t)})),n}convertVectorValue(e){var n,r,a;const t=(a=(r=(n=e.fields)==null?void 0:n[gf].arrayValue)==null?void 0:r.values)==null?void 0:a.map((c=>Rt(c.doubleValue)));return new Pi(t)}convertGeoPoint(e){return new Vi(Rt(e.latitude),Rt(e.longitude))}convertArray(e,t){return(e.values||[]).map((n=>this.convertValue(n,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=If(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(iu(e));default:return null}}convertTimestamp(e){const t=Js(e);return new pt(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ft.fromString(e);nt(xC(n),9688,{name:e});const r=new su(n.get(1),n.get(3)),a=new Te(n.popFirst(5));return r.isEqual(t)||rs(`Document ${a} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lA(i,e,t){let n;return n=i?i.toFirestore(e):e,n}class $l{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Xr extends rA{constructor(e,t,n,r,a,c){super(e,t,n,r,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ef(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Vp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Xr._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Xr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Xr._jsonSchema={type:Ut("string",Xr._jsonSchemaVersion),bundleSource:Ut("string","DocumentSnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class ef extends Xr{data(e={}){return super.data(e)}}class ra{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new $l(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new ef(this._firestore,this._userDataWriter,n.key,n,new $l(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ce(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,a){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map((h=>{const y=new ef(r._firestore,r._userDataWriter,h.doc.key,h.doc,new $l(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);return h.doc,{type:"added",doc:y,oldIndex:-1,newIndex:c++}}))}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((h=>a||h.type!==3)).map((h=>{const y=new ef(r._firestore,r._userDataWriter,h.doc.key,h.doc,new $l(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let g=-1,_=-1;return h.type!==0&&(g=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),_=c.indexOf(h.doc.key)),{type:Ek(h.type),doc:y,oldIndex:g,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ra._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ip.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),n.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),r.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Ek(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ck(i){i=Jn(i,St);const e=Jn(i.firestore,nr);return ak(Rp(e),i._key).then((t=>cA(e,i,t)))}ra._jsonSchemaVersion="firestore/querySnapshot/1.0",ra._jsonSchema={type:Ut("string",ra._jsonSchemaVersion),bundleSource:Ut("string","QuerySnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class uA extends Tk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new St(this.firestore,null,t)}}function Hf(i,e,t){i=Jn(i,St);const n=Jn(i.firestore,nr),r=lA(i.converter,e);return $f(n,[tA(zf(n),"setDoc",i._key,r,i.converter!==null,t).toMutation(i._key,jn.none())])}function Ak(i,e,t,...n){i=Jn(i,St);const r=Jn(i.firestore,nr),a=zf(r);let c;return c=typeof(e=Li(e))=="string"||e instanceof Bf?pk(a,"updateDoc",i._key,e,t,n):mk(a,"updateDoc",i._key,e),$f(r,[c.toMutation(i._key,jn.exists(!0))])}function Sk(i){return $f(Jn(i.firestore,nr),[new cp(i._key,jn.none())])}function xk(i,e){const t=Jn(i.firestore,nr),n=wa(i),r=lA(i.converter,e);return $f(t,[tA(zf(i.firestore),"addDoc",n._key,r,i.converter!==null,{}).toMutation(n._key,jn.exists(!1))]).then((()=>n))}function qp(i,...e){var y,g,_;i=Li(i);let t={includeMetadataChanges:!1,source:"default"},n=0;typeof e[n]!="object"||F0(e[n])||(t=e[n++]);const r={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(F0(e[n])){const E=e[n];e[n]=(y=E.next)==null?void 0:y.bind(E),e[n+1]=(g=E.error)==null?void 0:g.bind(E),e[n+2]=(_=E.complete)==null?void 0:_.bind(E)}let a,c,h;if(i instanceof St)c=Jn(i.firestore,nr),h=Nf(i._key.path),a={next:E=>{e[n]&&e[n](cA(c,i,E))},error:e[n+1],complete:e[n+2]};else{const E=Jn(i,so);c=Jn(E.firestore,nr),h=E._query;const S=new uA(c);a={next:I=>{e[n]&&e[n](new ra(c,S,E,I))},error:e[n+1],complete:e[n+2]},_k(i._query)}return(function(S,I,U,G){const B=new ZC(G),W=new qC(I,B,U);return S.asyncQueue.enqueueAndForget((async()=>OC(await Hm(S),W))),()=>{B.Nu(),S.asyncQueue.enqueueAndForget((async()=>FC(await Hm(S),W)))}})(Rp(c),h,r,a)}function $f(i,e){return(function(n,r){const a=new Ks;return n.asyncQueue.enqueueAndForget((async()=>ZP(await ok(n),r,a))),a.promise})(Rp(i),e)}function cA(i,e,t){const n=t.docs.get(e._key),r=new uA(i);return new Xr(i,r,e._key,n,new $l(t.hasPendingWrites,t.fromCache),e.converter)}function ea(){return new Ip("serverTimestamp")}function wk(i){return new Np("increment",i)}(function(e,t=!0){(function(r){Ea=r})(tV),hf(new Wl("firestore",((n,{instanceIdentifier:r,options:a})=>{const c=n.getProvider("app").getImmediate(),h=new nr(new yV(n.getProvider("auth-internal")),new TV(c,n.getProvider("app-check-internal")),(function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new ce(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new su(g.options.projectId,_)})(c,r),c);return a={useFetchStreams:t,...a},h._setSettings(a),h}),"PUBLIC").setMultipleInstances(!0)),ia(GT,HT,e),ia(GT,HT,"esm2020")})();const Rk={apiKey:"AIzaSyAHjF6dE0Gaa0x3rGlqYB9MFGdEvO9-dkI",authDomain:"matellicongelados.firebaseapp.com",projectId:"matellicongelados",storageBucket:"matellicongelados.firebasestorage.app",messagingSenderId:"699548334518",appId:"1:699548334518:web:3925e0b2b76221e459e917",measurementId:"G-KTXSLES7W6"},bk=nV().length===0?xE(Rk):wE(),ar=uk(bk),Bp="meals_data",Ik=i=>{try{console.log("[Firestore] Iniciando monitoramento do cardpio...");const e=kp(qf(ar,Bp),Fp("name","asc"));return qp(e,t=>{const n=t.docs.map(r=>({...r.data()}));console.log(`[Firestore] Sync: ${n.length} pratos sincronizados do banco.`),i(n)},t=>{console.error("[Firestore] Erro na escuta em tempo real:",t)})}catch(e){return console.error("[Firestore] Falha crtica ao conectar:",e),()=>{}}},Nk=async i=>{try{console.log(`[Firestore] Preparando gravao de: ${i.name}`);const e=JSON.parse(JSON.stringify(i)),t=new Promise((r,a)=>setTimeout(()=>a(new Error(`Timeout ao salvar ${i.name}. Verifique as regras de segurana do Firestore.`)),1e4)),n=Hf(wa(ar,Bp,i.id),e);await Promise.race([n,t]),console.log(`[Firestore] OK: ${i.name} gravado com sucesso.`)}catch(e){throw console.error(`[Firestore] Falha ao salvar prato ${i.name}:`,e),e}},Mk=async i=>{console.log(`[Firestore] Removendo prato do banco: ${i}`),await Sk(wa(ar,Bp,i))},zp="qrcodes",Dk=async(i,e)=>{try{const t=wa(ar,zp,i);return(await Ck(t)).exists()?await Ak(t,{totalAccesses:wk(1),lastVisit:ea()}):await Hf(t,{id:i,name:e||`QR ${i}`,totalAccesses:1,createdAt:ea(),lastVisit:ea()}),await xk(qf(t,"visits"),{timestamp:ea(),userAgent:navigator.userAgent,language:navigator.language}),!0}catch(t){return console.error("Erro ao registrar visita QR:",t),!1}},Vk=async(i,e)=>{const t=wa(ar,zp,i);await Hf(t,{id:i,name:e,totalAccesses:0,createdAt:ea()})},Pk=i=>{const e=kp(qf(ar,zp),Fp("createdAt","desc"));return qp(e,t=>{const n=t.docs.map(r=>({id:r.id,...r.data()}));i(n)})},kk={aprovado:"bg-emerald-100 text-emerald-700",compras:"bg-amber-100 text-amber-700",produzindo:"bg-blue-100 text-blue-700",entregues:"bg-slate-100 text-slate-700"},Lk=({meals:i,onLogout:e})=>{const[t,n]=$e.useState(null),[r,a]=$e.useState([]),[c,h]=$e.useState([]),[y,g]=$e.useState([]),[_,E]=$e.useState("meals"),[S,I]=$e.useState(!1),[U,G]=$e.useState(!1),[B,W]=$e.useState(!1),[J,te]=$e.useState(!1),[re,ie]=$e.useState({id:"",name:""});$e.useEffect(()=>{I(!0);const P=kp(qf(ar,"orders"),Fp("createdAt","desc")),M=qp(P,be=>{h(be.docs.map(ue=>{var Re;return{...ue.data(),firebaseId:ue.id,date:((Re=ue.data().createdAt)==null?void 0:Re.toDate())||new Date}}))}),ge=Pk(g);return I(!1),()=>{M(),ge()}},[]);const le=P=>{n({...P}),a(Object.entries(P.ingredients||{}).map(([M,ge])=>({name:M,measure:ge})))},L=()=>{n({id:"m"+Date.now(),name:"",description:"",category:Bs.LUNCH,image:"",tags:[],price:0,weight:""}),a([])},D=async P=>{if(P.preventDefault(),t){const M={};r.forEach(ge=>{ge.name.trim()&&(M[ge.name.trim()]=ge.measure)}),await Nk({...t,ingredients:M}),n(null)}},x=async P=>{P.preventDefault(),re.id&&re.name&&(await Vk(re.id,re.name),ie({id:"",name:""}),te(!1))},N=async P=>{window.confirm("Excluir prato?")&&await Mk(P)},k=$e.useMemo(()=>{const P=c.filter(ge=>ge.status==="aprovado"||ge.status==="compras"),M={};return P.forEach(ge=>{Object.entries(ge.shoppingList||{}).forEach(([be,ue])=>{M[be]||(M[be]={measures:[],orderIds:[]}),M[be].measures.push(...ue),M[be].orderIds.includes(ge.id)||M[be].orderIds.push(ge.id)})}),M},[c]);return w.jsxs("div",{className:"bg-white rounded-[2.5rem] p-8 sm:p-12 border border-slate-100 shadow-2xl",children:[w.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-12 gap-6",children:[w.jsxs("div",{children:[w.jsx("h2",{className:"text-4xl font-bold text-[#A61919]",children:"Painel Matelli"}),w.jsxs("div",{className:"flex flex-wrap gap-4 mt-4",children:[w.jsx("button",{onClick:()=>E("meals"),className:`text-[10px] font-black uppercase tracking-widest px-4 py-2 rounded-lg transition-all ${_==="meals"?"bg-[#A61919] text-white":"bg-slate-100 text-slate-400"}`,children:"Cardpio"}),w.jsx("button",{onClick:()=>E("orders"),className:`text-[10px] font-black uppercase tracking-widest px-4 py-2 rounded-lg transition-all ${_==="orders"?"bg-[#A61919] text-white":"bg-slate-100 text-slate-400"}`,children:"Pedidos"}),w.jsx("button",{onClick:()=>E("shopping"),className:`text-[10px] font-black uppercase tracking-widest px-4 py-2 rounded-lg transition-all ${_==="shopping"?"bg-emerald-600 text-white":"bg-slate-100 text-slate-400"}`,children:"Compras"}),w.jsx("button",{onClick:()=>E("qrcodes"),className:`text-[10px] font-black uppercase tracking-widest px-4 py-2 rounded-lg transition-all ${_==="qrcodes"?"bg-indigo-600 text-white shadow-lg shadow-indigo-200":"bg-slate-100 text-slate-400"}`,children:"QR Codes"})]})]}),w.jsxs("div",{className:"flex gap-4",children:[_==="meals"&&w.jsx("button",{onClick:L,className:"bg-[#009246] text-white px-8 py-3 rounded-2xl font-bold text-[10px] tracking-widest uppercase",children:"+ NOVO PRATO"}),_==="qrcodes"&&w.jsx("button",{onClick:()=>te(!0),className:"bg-indigo-600 text-white px-8 py-3 rounded-2xl font-bold text-[10px] tracking-widest uppercase",children:"+ NOVO RASTREADOR"}),w.jsx("button",{onClick:e,className:"text-slate-400 hover:text-[#A61919] font-black text-[10px] uppercase tracking-widest px-4",children:"SAIR"})]})]}),_==="qrcodes"&&w.jsxs("div",{className:"animate-fade-in",children:[J&&w.jsxs("div",{className:"mb-8 bg-indigo-50 p-6 rounded-3xl border border-indigo-100",children:[w.jsx("h3",{className:"text-lg font-bold text-indigo-900 mb-4",children:"Novo Rastreador de QR Code"}),w.jsxs("form",{onSubmit:x,className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[w.jsx("input",{placeholder:"ID (ex: mesa-01)",required:!0,value:re.id,onChange:P=>ie({...re,id:P.target.value.toLowerCase().replace(/\s+/g,"-")}),className:"bg-white px-6 py-3 rounded-xl border-none outline-indigo-600 font-bold"}),w.jsx("input",{placeholder:"Nome (ex: Mesa da Janela)",required:!0,value:re.name,onChange:P=>ie({...re,name:P.target.value}),className:"bg-white px-6 py-3 rounded-xl border-none outline-indigo-600 font-bold"}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx("button",{type:"submit",className:"bg-indigo-600 text-white px-6 py-3 rounded-xl font-bold flex-grow uppercase text-[10px] tracking-widest",children:"CRIAR"}),w.jsx("button",{type:"button",onClick:()=>te(!1),className:"bg-white text-slate-400 px-4 py-3 rounded-xl font-bold uppercase text-[10px] tracking-widest",children:"X"})]})]}),w.jsxs("p",{className:"mt-2 text-[10px] text-indigo-400 font-medium italic",children:["A rota ser: matelli.com/qrcodes/",re.id||"id"]})]}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[y.map(P=>{var M;return w.jsxs("div",{className:"bg-white border border-slate-100 p-6 rounded-3xl shadow-sm hover:shadow-xl transition-all group",children:[w.jsxs("div",{className:"flex justify-between items-start mb-4",children:[w.jsxs("div",{children:[w.jsx("span",{className:"text-[9px] font-black text-indigo-400 uppercase tracking-widest",children:"Rastreador ATIVO"}),w.jsx("h4",{className:"text-xl font-bold text-slate-800",children:P.name}),w.jsxs("p",{className:"text-[10px] font-mono text-slate-400",children:["/qrcodes/",P.id]})]}),w.jsx("div",{className:"bg-indigo-600 text-white p-3 rounded-2xl shadow-lg shadow-indigo-100",children:w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6",children:[w.jsx("path",{d:"M4.5 4.5a3 3 0 0 0-3 3v9a3 3 0 0 0 3 3h9a3 3 0 0 0 3-3v-9a3 3 0 0 0-3-3h-9ZM9 7.5a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm0 6.75a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM14.25 9a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Z"}),w.jsx("path",{d:"M18.75 6.75a.75.75 0 0 0-1.5 0V15a.75.75 0 0 0 1.5 0V6.75ZM18.75 17.25a.75.75 0 0 0-1.5 0v1.5a.75.75 0 0 0 1.5 0v-1.5ZM21 15a.75.75 0 0 1 .75-.75h1.5a.75.75 0 0 1 0 1.5h-1.5A.75.75 0 0 1 21 15ZM21 18.75a.75.75 0 0 1 .75-.75h1.5a.75.75 0 0 1 0 1.5h-1.5a.75.75 0 0 1-.75-.75ZM21 11.25a.75.75 0 0 1 .75-.75h1.5a.75.75 0 0 1 0 1.5h-1.5a.75.75 0 0 1-.75-.75Z"})]})})]}),w.jsxs("div",{className:"bg-slate-50 rounded-2xl p-4 mb-4 flex justify-between items-center border border-slate-100",children:[w.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Total de Acessos"}),w.jsx("span",{className:"text-3xl font-black text-indigo-600",children:P.totalAccesses})]}),w.jsxs("div",{className:"space-y-2",children:[w.jsx("p",{className:"text-[10px] font-black text-slate-300 uppercase tracking-widest border-b pb-1",children:"ltimos Acessos"}),(M=P.visits)==null?void 0:M.slice(-3).reverse().map((ge,be)=>w.jsxs("div",{className:"flex justify-between items-center text-[10px] text-slate-500 font-medium",children:[w.jsx("span",{children:new Date(ge.timestamp).toLocaleTimeString()}),w.jsx("span",{className:"truncate max-w-[120px] text-slate-300",children:ge.userAgent.split(") ")[1]||"Mobile Device"})]},be)),(!P.visits||P.visits.length===0)&&w.jsx("p",{className:"text-[10px] text-slate-300 italic",children:"Nenhum acesso ainda."})]}),w.jsx("button",{onClick:()=>{const ge=`${window.location.origin}/qrcodes/${P.id}`;navigator.clipboard.writeText(ge),alert("Link copiado: "+ge)},className:"mt-6 w-full py-2 bg-slate-800 text-white rounded-xl text-[9px] font-black uppercase tracking-widest hover:bg-slate-700 transition-colors",children:"Copiar Link do QR"})]},P.id)}),y.length===0&&w.jsx("div",{className:"col-span-full py-20 text-center bg-slate-50 rounded-[3rem] border-2 border-dashed border-slate-100",children:w.jsx("p",{className:"text-slate-400 font-bold uppercase text-xs tracking-widest",children:"Crie o seu primeiro rastreador de QR Code para monitorar acessos fsicos."})})]})]}),_==="meals"&&w.jsx("div",{className:"overflow-x-auto custom-scrollbar",children:w.jsxs("table",{className:"w-full text-left",children:[w.jsx("thead",{children:w.jsxs("tr",{className:"border-b-2 border-[#F9F4ED]",children:[w.jsx("th",{className:"pb-6 font-black text-slate-300 text-[10px] uppercase tracking-[0.2em]",children:"Item"}),w.jsx("th",{className:"pb-6 font-black text-slate-300 text-[10px] uppercase tracking-[0.2em]",children:"Categoria"}),w.jsx("th",{className:"pb-6 font-black text-slate-300 text-[10px] uppercase tracking-[0.2em]",children:"Preo / Peso"}),w.jsx("th",{className:"pb-6 font-black text-slate-300 text-[10px] uppercase tracking-[0.2em] text-right",children:"Aes"})]})}),w.jsx("tbody",{className:"divide-y divide-[#F9F4ED]",children:i.map(P=>w.jsxs("tr",{className:"group hover:bg-[#F9F4ED]/50 transition-colors",children:[w.jsx("td",{className:"py-6",children:w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsx("img",{src:P.image,className:"w-14 h-14 rounded-2xl object-cover border-2 border-white shadow-md"}),w.jsx("span",{className:"font-bold text-slate-800 text-lg",children:P.name})]})}),w.jsx("td",{className:"py-6 font-bold text-slate-500 text-sm uppercase",children:P.category}),w.jsxs("td",{className:"py-6 text-sm font-black text-[#A61919]",children:["R$ ",P.price.toFixed(2)," / ",P.weight]}),w.jsx("td",{className:"py-6 text-right",children:w.jsxs("div",{className:"flex justify-end gap-3 opacity-0 group-hover:opacity-100 transition-opacity",children:[w.jsx("button",{onClick:()=>le(P),className:"bg-white p-3 rounded-xl shadow-sm text-[#009246] hover:bg-[#009246] hover:text-white transition-all",children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5",children:w.jsx("path",{d:"m5.433 13.917 1.262-3.155A4 4 0 0 1 7.58 9.42l6.92-6.918a2.121 2.121 0 0 1 3 3l-6.92 6.918c-.383.383-.84.685-1.343.886l-3.154 1.262a.5.5 0 0 1-.65-.65Z"})})}),w.jsx("button",{onClick:()=>N(P.id),className:"bg-white p-3 rounded-xl shadow-sm text-[#A61919] hover:bg-[#A61919] hover:text-white transition-all",children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5",children:w.jsx("path",{fillRule:"evenodd",d:"M8.75 1A2.75 2.75 0 0 0 6 3.75V4H5a2 2 0 0 0-2 2v.041c0 .248.01.493.029.736L4.17 16.924a3 3 0 0 0 2.992 2.73h5.676a3 3 0 0 0 2.992-2.73l1.142-10.147c.018-.243.029-.488.029-.736V6a2 2 0 0 0-2-2h-1v-.25A2.75 2.75 0 0 0 11.25 1h-2.5ZM7.5 3.75a1.25 1.25 0 0 1 1.25-1.25h2.5a1.25 1.25 0 0 1 1.25 1.25V4h-5v-.25Z",clipRule:"evenodd"})})})]})})]},P.id))})]})}),_==="orders"&&w.jsx("div",{className:"space-y-6",children:c.map(P=>w.jsxs("div",{className:"bg-slate-50 rounded-3xl p-6 border border-slate-100 flex flex-col md:flex-row justify-between items-start md:items-center gap-4 group transition-all hover:bg-white hover:shadow-lg",children:[w.jsxs("div",{className:"flex-grow",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("span",{className:"bg-slate-800 text-white text-[10px] font-black px-3 py-1 rounded-full uppercase",children:P.id}),w.jsx("span",{className:`text-[10px] font-black px-3 py-1 rounded-full uppercase ${kk[P.status||"aprovado"]}`,children:P.status||"aprovado"}),w.jsx("span",{className:"text-[10px] font-bold text-slate-400",children:P.date.toLocaleString()})]}),w.jsxs("h4",{className:"text-xl font-bold text-slate-800 mt-2",children:["Pedido ",P.type==="kit"?"de Kit Semanal":"Avulso"]})]}),w.jsxs("span",{className:"text-2xl font-black text-[#A61919]",children:["R$ ",P.total.toFixed(2)]})]},P.firebaseId))}),_==="shopping"&&w.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 animate-fade-in",children:Object.entries(k).map(([P,M])=>w.jsxs("div",{className:"bg-white border border-slate-100 p-5 rounded-3xl shadow-sm",children:[w.jsx("h4",{className:"font-bold text-slate-800 text-lg mb-2",children:P}),w.jsx("div",{className:"space-y-1",children:M.measures.map((ge,be)=>w.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500 font-medium",children:[w.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-400"}),ge]},be))})]},P))}),t&&w.jsx("div",{className:"fixed inset-0 bg-slate-900/80 backdrop-blur-md z-[100] flex items-center justify-center p-4",children:w.jsxs("div",{className:"bg-white rounded-[2.5rem] p-8 max-w-4xl w-full shadow-2xl animate-fade-in max-h-[95vh] overflow-y-auto",children:[w.jsx("h3",{className:"text-3xl font-bold mb-8 text-[#A61919]",children:t.name?"Editar Prato":"Novo Prato"}),w.jsxs("form",{onSubmit:D,className:"space-y-8",children:[w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[w.jsxs("div",{className:"space-y-6",children:[w.jsx("input",{required:!0,placeholder:"Nome",value:t.name||"",onChange:P=>n({...t,name:P.target.value}),className:"w-full bg-[#F9F4ED] rounded-2xl px-6 py-4 outline-none font-bold"}),w.jsx("textarea",{required:!0,placeholder:"Descrio",value:t.description||"",onChange:P=>n({...t,description:P.target.value}),className:"w-full bg-[#F9F4ED] rounded-2xl px-6 py-4 outline-none h-32 font-medium"})]}),w.jsxs("div",{className:"space-y-6",children:[w.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[w.jsx("select",{value:t.category,onChange:P=>n({...t,category:P.target.value}),className:"bg-[#F9F4ED] rounded-2xl px-6 py-4 font-bold",children:Object.values(Bs).map(P=>w.jsx("option",{value:P,children:P},P))}),w.jsx("input",{type:"number",step:"0.01",value:t.price||0,onChange:P=>n({...t,price:parseFloat(P.target.value)}),className:"bg-[#F9F4ED] rounded-2xl px-6 py-4 font-bold"})]}),w.jsx("input",{placeholder:"Peso (ex: 400g)",value:t.weight||"",onChange:P=>n({...t,weight:P.target.value}),className:"w-full bg-[#F9F4ED] rounded-2xl px-6 py-4 font-bold"}),w.jsx("input",{placeholder:"Imagem URL",value:t.image||"",onChange:P=>n({...t,image:P.target.value}),className:"w-full bg-[#F9F4ED] rounded-2xl px-6 py-4 font-mono text-xs"})]})]}),w.jsxs("div",{className:"bg-slate-50 p-6 rounded-3xl border border-slate-100",children:[w.jsxs("div",{className:"flex justify-between items-center mb-6",children:[w.jsx("label",{className:"text-sm font-black text-slate-800 uppercase tracking-widest",children:"Ingredientes"}),w.jsx("button",{type:"button",onClick:()=>a([...r,{name:"",measure:""}]),className:"text-emerald-600 font-bold text-[10px] uppercase",children:"+ Adicionar"})]}),w.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:r.map((P,M)=>w.jsxs("div",{className:"flex gap-2 bg-white p-3 rounded-2xl border border-slate-100",children:[w.jsx("input",{placeholder:"Nome",value:P.name,onChange:ge=>{const be=[...r];be[M].name=ge.target.value,a(be)},className:"flex-[2] bg-transparent outline-none text-xs font-bold"}),w.jsx("input",{placeholder:"Qtd",value:P.measure,onChange:ge=>{const be=[...r];be[M].measure=ge.target.value,a(be)},className:"flex-1 bg-transparent outline-none text-xs text-slate-500"}),w.jsx("button",{type:"button",onClick:()=>a(r.filter((ge,be)=>be!==M)),className:"text-red-300 hover:text-red-500",children:"X"})]},M))})]}),w.jsxs("div",{className:"flex gap-4 pt-6",children:[w.jsx("button",{type:"submit",className:"flex-grow bg-[#A61919] text-white py-5 rounded-2xl font-bold",children:"SALVAR NO BANCO"}),w.jsx("button",{type:"button",onClick:()=>n(null),className:"px-10 py-5 bg-slate-100 text-slate-500 rounded-2xl font-bold",children:"CANCELAR"})]})]})]})})]})},Uk=({onLogin:i})=>{const[e,t]=$e.useState(""),[n,r]=$e.useState(!1),a=c=>{c.preventDefault(),e==="admin123"?i():(r(!0),setTimeout(()=>r(!1),2e3))};return w.jsxs("div",{className:"bg-white rounded-[2.5rem] p-12 border border-slate-100 shadow-2xl max-w-md mx-auto text-center",children:[w.jsx("div",{className:"w-20 h-20 bg-[#F9F4ED] rounded-3xl flex items-center justify-center mx-auto mb-8 text-[#A61919]",children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-10 h-10",children:w.jsx("path",{fillRule:"evenodd",d:"M12 1.5a5.25 5.25 0 0 0-5.25 5.25v3a3 3 0 0 0-3 3v6.75a3 3 0 0 0 3 3h10.5a3 3 0 0 0 3-3v-6.75a3 3 0 0 0-3-3v-3c0-2.9-2.35-5.25-5.25-5.25Zm3.75 8.25v-3a3.75 3.75 0 1 0-7.5 0v3h7.5Z",clipRule:"evenodd"})})}),w.jsx("h2",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Acesso Restrito"}),w.jsx("p",{className:"text-slate-400 text-sm font-medium mb-10",children:"Identificao administrativa Matelli"}),w.jsxs("form",{onSubmit:a,className:"space-y-6",children:[w.jsx("input",{type:"password",placeholder:"SENHA",value:e,onChange:c=>t(c.target.value),className:`w-full bg-[#F9F4ED] border-2 rounded-2xl px-6 py-5 outline-none transition-all text-center font-black tracking-[0.5em] ${n?"border-red-500 animate-shake":"border-transparent focus:border-[#A61919]"}`}),w.jsx("button",{type:"submit",className:"w-full bg-[#A61919] text-white py-5 rounded-2xl font-bold text-lg shadow-xl shadow-[#A61919]/20 hover:scale-105 transition-all",children:"ENTRAR NO PAINEL"})]})]})},Ok="https://api.aistudio.google.com/v1/files/file-01jkr0a3qf693jsc759n7708pt",Fk=({isOpen:i,onClose:e,selection:t,cart:n,type:r})=>{const[a,c]=$e.useState(null),[h,y]=$e.useState(!1),[g,_]=$e.useState(!1);if(!i)return null;const E="5511958877900",S=()=>r==="kit"&&t?Object.values(t).reduce((B,W)=>B+Object.values(W).reduce((J,te)=>J+((te==null?void 0:te.price)||0),0),0):r==="menu"&&n?Object.values(n).reduce((B,W)=>B+W.meal.price*W.quantity,0):0,I=()=>`MAT-${Math.floor(1e3+Math.random()*9e3)}`,U=()=>{const B={},W=(J,te=1)=>{Object.entries(J.ingredients||{}).forEach(([re,ie])=>{B[re]||(B[re]=[]);for(let le=0;le<te;le++)B[re].push(ie)})};return r==="kit"&&t?Object.values(t).forEach(J=>{Object.values(J).forEach(te=>{te&&W(te)})}):r==="menu"&&n&&Object.values(n).forEach(J=>{W(J.meal,J.quantity)}),B},G=async()=>{_(!0);const B=I(),W=S(),J=U();try{const te={id:B,createdAt:ea(),type:r,total:W,status:"aprovado",items:JSON.parse(JSON.stringify(r==="kit"?t:n)),shoppingList:J};await Hf(wa(ar,"orders",B),te);let re=`*PEDIDO #${B} - MATELLI CONGELADOS*

`;r==="kit"&&t?(re+=`* KIT SEMANAL PARCIAL*
`,Zr.forEach(ie=>{const le=t[ie];le&&Object.keys(le).length>0&&(re+=`
*${ie.toUpperCase()}:*
`,Object.values(le).forEach(L=>{L&&(re+=`- ${L.name}
`)}))})):(re+=`* PEDIDO AVULSO*
`,Object.values(n).forEach(ie=>{re+=`- ${ie.meal.name} x${ie.quantity}
`})),re+=`
*Valor Estimado: R$ ${W.toFixed(2)}*`,window.open(`https://wa.me/${E}?text=${encodeURIComponent(re)}`,"_blank"),c(B),y(!0)}catch(te){console.error("Erro ao salvar pedido:",te),alert("Houve um erro ao processar seu pedido. Por favor, tente novamente.")}finally{_(!1)}};return w.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[w.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md",onClick:e}),w.jsxs("div",{className:"bg-white rounded-[2.5rem] w-full max-w-2xl shadow-2xl relative animate-fade-in flex flex-col h-[85vh]",children:[w.jsxs("div",{className:"p-6 border-b border-slate-100 flex items-center justify-between",children:[w.jsxs("div",{children:[w.jsx("h2",{className:"text-2xl font-bold text-[#A61919]",children:h?"Pedido Processado":"Reviso do Pedido"}),w.jsx("p",{className:"text-slate-500 text-xs font-medium",children:h?`Identificador nico: ${a}`:"Revise seus itens antes do envio"})]}),w.jsx("img",{src:Ok,alt:"Matelli",className:"h-12 w-auto hidden sm:block"})]}),w.jsx("div",{className:"flex-grow overflow-y-auto p-6 custom-scrollbar bg-slate-50/30",children:h?w.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center space-y-6 animate-fade-in",children:[w.jsx("div",{className:"w-24 h-24 bg-[#009246]/10 rounded-full flex items-center justify-center text-[#009246]",children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-12 h-12",children:w.jsx("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"})})}),w.jsxs("div",{children:[w.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest block mb-2",children:"Comprovante Digital"}),w.jsx("h3",{className:"text-4xl font-black text-[#A61919] tracking-tighter",children:a}),w.jsx("p",{className:"text-slate-500 font-medium mt-4 max-w-sm mx-auto leading-tight",children:"Seu pedido foi registrado e o WhatsApp de atendimento foi aberto para concluso."})]}),w.jsx("button",{onClick:e,className:"bg-slate-800 text-white px-10 py-4 rounded-2xl font-bold uppercase tracking-widest text-[10px] shadow-xl hover:scale-105 transition-transform",children:"Concluir e Voltar"})]}):w.jsx("div",{className:"space-y-6",children:r==="kit"&&t?Zr.map(B=>{const W=t[B];return!W||Object.keys(W).length===0?null:w.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-slate-100",children:[w.jsx("h3",{className:"text-xs font-black text-slate-300 uppercase tracking-widest mb-3 border-b border-slate-50 pb-1",children:B}),w.jsx("ul",{className:"space-y-2",children:Object.values(W).map((J,te)=>w.jsx("li",{className:"text-sm font-bold text-slate-700 flex justify-between items-center",children:w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-[#009246]"}),J==null?void 0:J.name]})},te))})]},B)}):w.jsx("ul",{className:"space-y-3",children:Object.values(n||{}).map((B,W)=>w.jsxs("li",{className:"flex justify-between items-center bg-white p-4 rounded-2xl shadow-sm border border-slate-100",children:[w.jsxs("div",{children:[w.jsx("p",{className:"font-bold text-slate-700",children:B.meal.name}),w.jsxs("p",{className:"text-[10px] text-slate-400 font-medium",children:["Quantidade: ",B.quantity]})]}),w.jsxs("p",{className:"font-black text-[#A61919]",children:["R$ ",(B.meal.price*B.quantity).toFixed(2)]})]},W))})})}),!h&&w.jsxs("div",{className:"p-6 bg-white border-t border-slate-100 rounded-b-[2.5rem]",children:[w.jsxs("div",{className:"flex justify-between items-end mb-4",children:[w.jsxs("div",{children:[w.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Resumo Financeiro"}),w.jsxs("span",{className:"text-3xl font-black text-[#A61919]",children:["R$ ",S().toFixed(2)]})]}),w.jsx("p",{className:"text-[9px] text-[#A61919] font-bold italic leading-tight max-w-[140px] text-right",children:"Confirmao gera um ID de pedido."})]}),w.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[w.jsx("button",{onClick:e,disabled:g,className:"py-4 text-slate-400 bg-slate-50 border border-slate-100 rounded-2xl font-bold uppercase text-[10px] tracking-widest hover:bg-slate-100 transition-all",children:"Cancelar"}),w.jsx("button",{onClick:G,disabled:g,className:"bg-[#009246] text-white py-4 rounded-2xl font-bold text-xs shadow-xl shadow-[#009246]/20 text-center flex items-center justify-center gap-2 hover:scale-[1.02] transition-transform uppercase tracking-widest",children:g?w.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):w.jsx(w.Fragment,{children:" Confirmar Pedido"})})]})]})]})]})},qk="https://api.aistudio.google.com/v1/files/file-01jkr0a3qf693jsc759n7708pt",sm=({className:i})=>w.jsxs("div",{className:`relative flex items-center justify-center ${i}`,children:[w.jsx("img",{src:qk,alt:"Matelli Congelados",className:"h-full w-auto object-contain z-10",onError:e=>{var t;e.currentTarget.style.display="none",(t=e.currentTarget.parentElement)==null||t.classList.add("matelli-logo-fallback")}}),w.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none opacity-0 matelli-logo-fallback-content",children:w.jsx("div",{className:"bg-[#A61919] px-4 py-2 rounded-full border-2 border-white shadow-lg",children:w.jsx("span",{className:"font-matelli text-white text-lg font-bold",children:"MATELLI"})})})]}),Bk=()=>{const[i,e]=$e.useState("kit"),[t,n]=$e.useState(Zr[0]),[r,a]=$e.useState(!1),[c,h]=$e.useState(!1),[y,g]=$e.useState(!1),[_,E]=$e.useState(!0),[S,I]=$e.useState([]),[U,G]=$e.useState(Zr.reduce((x,N)=>({...x,[N]:{}}),{})),[B,W]=$e.useState({});$e.useEffect(()=>{const x=window.location.pathname,N="/matelli-congelados-weekly-kit-menu-next-2026",k=x.startsWith(N)?x.replace(N,""):x;if(k.startsWith("/qrcodes/")){const P=k.replace("/qrcodes/","").trim();P&&Dk(P).then(()=>{console.log(` Visita registrada para QR: ${P}`)}).catch(M=>{console.error(" Erro ao registrar visita:",M)}).finally(()=>{window.history.replaceState({},"",N+"/")})}},[]),$e.useEffect(()=>{const x=Ik(N=>{I(N),E(!1)});return()=>x()},[]);const J=(x,N,k)=>{G(P=>({...P,[x]:{...P[x],[N]:k}}))},te=x=>{W(N=>{var k;return{...N,[x.id]:{meal:x,quantity:(((k=N[x.id])==null?void 0:k.quantity)||0)+1}}})},re=x=>{W(N=>{if(!N[x.id])return N;const k=N[x.id].quantity-1;if(k<=0){const{[x.id]:P,...M}=N;return M}return{...N,[x.id]:{...N[x.id],quantity:k}}})},ie=$e.useMemo(()=>Object.values(U).reduce((x,N)=>x+Object.keys(N).length,0),[U]),le=$e.useMemo(()=>Object.values(B).reduce((x,N)=>x+N.quantity,0),[B]),L=$e.useMemo(()=>Object.values(B).reduce((x,N)=>x+N.meal.price*N.quantity,0),[B]),D=[{name:"Caf da Manh",categories:[Bs.BREAKFAST]},{name:"Vitamina de Frutas",categories:[Bs.SMOOTHIE]},{name:"Refeies",categories:[Bs.LUNCH,Bs.DINNER]},{name:"Sobremesas",categories:[Bs.DESSERT]}];return _&&S.length===0?w.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-[#F9F4ED]",children:[w.jsx(sm,{className:"h-24 mb-8 animate-pulse"}),w.jsx("div",{className:"w-12 h-12 border-4 border-[#A61919] border-t-transparent rounded-full animate-spin"}),w.jsx("p",{className:"mt-4 text-[#A61919] font-bold uppercase text-[10px] tracking-widest",children:"Carregando Cardpio Gourmet..."})]}):w.jsxs("div",{className:"min-h-screen flex flex-col bg-[#F9F4ED]",children:[w.jsx("header",{className:"bg-white border-b border-[#A61919]/10 sticky top-0 z-50 shadow-sm",children:w.jsxs("div",{className:"max-w-7xl mx-auto px-4 h-20 flex items-center justify-between",children:[w.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>{e("kit"),window.scrollTo(0,0)},children:[w.jsx(sm,{className:"h-14 sm:h-16"}),w.jsxs("div",{className:"hidden lg:block",children:[w.jsx("h1",{className:"text-lg font-bold text-[#A61919] leading-tight",children:"Congelados"}),w.jsx("p",{className:"text-[8px] text-slate-400 font-bold uppercase tracking-widest",children:"Tradio & Sade"})]})]}),w.jsxs("div",{className:"flex bg-[#F9F4ED] p-1 rounded-2xl border border-[#A61919]/5",children:[w.jsx("button",{onClick:()=>e("kit"),className:`px-4 py-1.5 rounded-xl font-bold text-xs transition-all ${i==="kit"?"bg-[#A61919] text-white shadow-md":"text-slate-500 hover:text-[#A61919]"}`,children:" KIT"}),w.jsx("button",{onClick:()=>e("menu"),className:`px-4 py-1.5 rounded-xl font-bold text-xs transition-all ${i==="menu"?"bg-[#A61919] text-white shadow-md":"text-slate-500 hover:text-[#A61919]"}`,children:" MENU"})]}),w.jsxs("button",{onClick:()=>h(!c),className:`relative p-3 rounded-xl transition-all ${c?"bg-[#A61919] text-white shadow-lg":"bg-slate-100 text-slate-500 hover:text-[#A61919]"}`,children:[w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:[w.jsx("path",{d:"M2.25 2.25a.75.75 0 0 0 0 1.5h1.386l2.308 10.774a2.25 2.25 0 0 0 2.247 1.769h10.883a2.25 2.25 0 0 0 2.247-1.769l1.623-7.57a.75.75 0 0 0-.696-.897H5.34l-.441-2.057a.75.75 0 0 0-.736-.594H2.25Zm4.983 14.25a.75.75 0 0 0 0 1.5h.5a.75.75 0 0 0 0-1.5h-.5Zm7 0a.75.75 0 0 0 0 1.5h.5a.75.75 0 0 0 0-1.5h-.5Z"}),w.jsx("path",{d:"M10 18a2 2 0 1 1-4 0 2 2 0 0 1 4 0ZM18 18a2 2 0 1 1-4 0 2 2 0 0 1 4 0Z"})]}),(le>0||ie>0)&&w.jsx("span",{className:"absolute -top-1 -right-1 bg-[#009246] text-white text-[10px] font-black w-5 h-5 rounded-full flex items-center justify-center border-2 border-white",children:i==="kit"?ie:le})]})]})}),w.jsxs("div",{className:`fixed inset-0 z-[60] transition-opacity duration-300 ${c?"opacity-100":"opacity-0 pointer-events-none"}`,children:[w.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm",onClick:()=>h(!1)}),w.jsxs("div",{className:`absolute right-0 top-0 bottom-0 w-full max-sm:w-full max-w-sm bg-white shadow-2xl transition-transform duration-500 ease-out p-6 overflow-y-auto no-scrollbar ${c?"translate-x-0":"translate-x-full"}`,children:[w.jsxs("div",{className:"flex justify-between items-center mb-8",children:[w.jsx("h2",{className:"text-2xl font-bold text-[#A61919]",children:"Resumo do Pedido"}),w.jsx("button",{onClick:()=>h(!1),className:"p-2 hover:bg-slate-100 rounded-full text-slate-400",children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-6 h-6",children:w.jsx("path",{d:"M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"})})})]}),i==="kit"?w.jsx(NT,{selection:U,onFinish:()=>g(!0)}):w.jsxs("div",{className:"space-y-6",children:[w.jsx("h3",{className:"text-lg font-bold text-slate-800 border-b pb-2",children:"Carrinho Avulso"}),le===0?w.jsx("p",{className:"text-slate-400 text-center py-10",children:"Carrinho vazio."}):w.jsxs("div",{className:"space-y-3",children:[Object.values(B).map(x=>w.jsxs("div",{className:"flex items-center justify-between bg-[#F9F4ED] p-3 rounded-2xl",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("img",{src:x.meal.image,className:"w-10 h-10 object-cover rounded-lg"}),w.jsxs("div",{children:[w.jsx("p",{className:"text-sm font-bold text-slate-700",children:x.meal.name}),w.jsxs("p",{className:"text-[10px] font-black text-[#A61919]",children:["x",x.quantity," - R$ ",(x.meal.price*x.quantity).toFixed(2)]})]})]}),w.jsx("button",{onClick:()=>re(x.meal),className:"text-red-400 p-2",children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4",children:w.jsx("path",{fillRule:"evenodd",d:"M8.75 1A2.75 2.75 0 0 0 6 3.75V4H5a2 2 0 0 0-2 2v.041c0 .248.01.493.029.736L4.17 16.924a3 3 0 0 0 2.992 2.73h5.676a3 3 0 0 0 2.992-2.73l1.142-10.147c.018-.243.029-.488.029-.736V6a2 2 0 0 0-2-2h-1v-.25A2.75 2.75 0 0 0 11.25 1h-2.5ZM7.5 3.75a1.25 1.25 0 0 1 1.25-1.25h2.5a1.25 1.25 0 0 1 1.25 1.25V4h-5v-.25Z",clipRule:"evenodd"})})})]},x.meal.id)),w.jsxs("div",{className:"pt-4 border-t flex justify-between items-center",children:[w.jsxs("div",{children:[w.jsx("p",{className:"text-sm font-bold text-slate-500 uppercase",children:"Total do Pedido"}),w.jsx("p",{className:"text-[8px] text-slate-400 font-bold uppercase",children:"(Sujeito a confirmao)"})]}),w.jsxs("span",{className:"text-2xl font-black text-[#A61919]",children:["R$ ",L.toFixed(2)]})]}),w.jsx("button",{onClick:()=>{g(!0),h(!1)},className:"w-full bg-[#A61919] text-white py-4 rounded-2xl font-bold shadow-xl",children:"FINALIZAR PEDIDO"})]})]})]})]}),w.jsx(Fk,{isOpen:y,onClose:()=>g(!1),selection:U,cart:B,type:i}),w.jsxs("main",{className:"max-w-7xl mx-auto px-4 mt-6 flex-grow w-full",children:[i==="kit"&&w.jsxs("div",{className:"animate-fade-in",children:[w.jsxs("div",{className:"mb-6 text-center md:text-left",children:[w.jsx("h2",{className:"text-4xl font-bold text-[#A61919] mb-1",children:"Monte Seu Kit"}),w.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Qualidade Matelli em 35 pratos gourmet."})]}),w.jsx("div",{className:"flex space-x-2 overflow-x-auto pb-4 no-scrollbar sticky top-20 z-40 py-4 bg-[#F9F4ED]/95 backdrop-blur-md border-b border-[#A61919]/5",children:Zr.map(x=>{const N=t===x,k=Object.keys(U[x]||{}).length;return w.jsxs("button",{onClick:()=>n(x),className:`flex flex-col items-center px-6 py-3 rounded-2xl transition-all duration-300 whitespace-nowrap border-2 min-w-[120px] ${N?"bg-[#A61919] border-[#A61919] text-white shadow-lg scale-105":"bg-white border-slate-100 text-slate-500 hover:border-[#A61919]/30"}`,children:[w.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest mb-0.5",children:x}),w.jsxs("span",{className:`text-base font-black ${N?"text-white/80":"text-[#A61919]"}`,children:[k,"/5"]})]},x)})}),w.jsxs("div",{className:"flex flex-col lg:flex-row gap-8 items-start mt-6 mb-12",children:[w.jsx("div",{className:"flex-grow w-full space-y-6",children:w.jsxs("div",{className:"bg-white rounded-[2rem] p-6 sm:p-10 shadow-sm border border-slate-100",children:[w.jsxs("h2",{className:"text-2xl font-bold text-slate-800 mb-8 flex items-center gap-3",children:[w.jsx("span",{className:"w-1.5 h-8 bg-[#009246] rounded-full"}),"Refeies de ",t]}),H0.map(x=>{var N;return w.jsx(b2,{category:x,selectedMeal:(N=U[t])==null?void 0:N[x],onSelect:k=>J(t,x,k),customCatalog:S},`${t}-${x}`)})]})}),w.jsx("div",{className:"hidden lg:block w-full lg:w-80 lg:sticky lg:top-48",children:w.jsx(NT,{selection:U,onFinish:()=>g(!0)})})]})]}),i==="menu"&&w.jsxs("div",{className:"animate-fade-in mb-12",children:[w.jsxs("div",{className:"mb-10 text-center md:text-left",children:[w.jsx("h2",{className:"text-4xl font-bold text-[#A61919] mb-2",children:"Cardpio Avulso"}),w.jsx("p",{className:"text-slate-500 font-medium",children:"Sabor italiano pronto para voc."})]}),w.jsx("div",{className:"flex flex-col lg:flex-row gap-8 items-start",children:w.jsxs("div",{className:"flex-grow w-full space-y-16",children:[D.map(x=>{const N=S.filter(k=>x.categories.includes(k.category));return N.length===0?null:w.jsxs("section",{children:[w.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[w.jsx("div",{className:"h-8 w-1.5 bg-[#009246] rounded-full"}),w.jsx("h3",{className:"text-3xl font-bold text-slate-800",children:x.name})]}),w.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:N.map(k=>{var P;return w.jsx(I2,{meal:k,count:((P=B[k.id])==null?void 0:P.quantity)||0,onAdd:te,onRemove:re,isMaxed:!1},k.id)})})]},x.name)}),S.length===0&&!_&&w.jsx("div",{className:"text-center py-20 bg-white rounded-[3rem] border-2 border-dashed border-slate-100",children:w.jsx("p",{className:"text-slate-400 font-bold uppercase tracking-widest text-xs",children:"O Cardpio est vazio. Acesse o Admin para cadastrar pratos."})})]})})]}),i==="admin"&&w.jsx("div",{className:"animate-fade-in max-w-5xl mx-auto py-10",children:r?w.jsx(Lk,{meals:S,onLogout:()=>{a(!1),e("kit")}}):w.jsx(Uk,{onLogin:()=>a(!0)})})]}),w.jsx("footer",{className:"mt-auto py-10 border-t border-[#A61919]/5 bg-white",children:w.jsxs("div",{className:"max-w-7xl mx-auto px-4 flex flex-col items-center gap-4",children:[w.jsxs("div",{className:"flex items-center gap-3 grayscale opacity-30 hover:opacity-100 transition-opacity",children:[w.jsx(sm,{className:"h-10"}),w.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-[0.2em]",children:" 2024 Matelli Congelados"})]}),w.jsx("button",{onClick:()=>{e("admin"),window.scrollTo(0,0)},className:`p-3 rounded-full transition-all border border-slate-100 ${i==="admin"?"bg-slate-800 text-white shadow-lg":"bg-white text-slate-300 hover:text-slate-600"}`,title:"Administrao",children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-4 h-4",children:w.jsx("path",{fillRule:"evenodd",d:"M12 1.5a5.25 5.25 0 0 0-5.25 5.25v3a3 3 0 0 0-3 3v6.75a3 3 0 0 0 3 3h10.5a3 3 0 0 0 3-3v-6.75a3 3 0 0 0-3-3v-3c0-2.9-2.35-5.25-5.25-5.25Zm3.75 8.25v-3a3.75 3.75 0 1 0-7.5 0v3h7.5Z",clipRule:"evenodd"})})})]})})]})},fA=document.getElementById("root");if(!fA)throw new Error("Could not find root element to mount to");const zk=ZS.createRoot(fA);zk.render(w.jsx(G0.StrictMode,{children:w.jsx(Bk,{})}));
